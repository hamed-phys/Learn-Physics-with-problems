<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fourier Series of a 2π-Periodic Triangle Wave</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root {
  --bg: #0f172a;
  --bg-alt: #020617;
  --fg: #e5e7eb;
  --fg-soft: #9ca3af;
  --accent: #38bdf8;
  --accent-soft: rgba(56,189,248,0.15);
  --border: #1f2937;
  --card-bg: #020617;
  --code-bg: #020617;
  --danger: #f97373;
  --success: #4ade80;
  --shadow-soft: 0 18px 45px rgba(15,23,42,0.85);
  --radius-lg: 14px;
  --radius-md: 10px;
  --radius-sm: 6px;
  --transition-fast: 0.18s ease-out;
  --transition-med: 0.25s ease-out;
  --font-main: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

html, body {
  margin: 0;
  padding: 0;
  background: radial-gradient(circle at top, #020617 0, #020617 40%, #020617 100%);
  color: var(--fg);
  font-family: var(--font-main);
  -webkit-font-smoothing: antialiased;
}

body {
  min-height: 100vh;
}

/* Layout */

.page-shell {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: 1.5rem;
  max-width: 1200px;
  margin: 0 auto;
  padding: 1.5rem 1.25rem 3rem;
}

@media (min-width: 960px) {
  .page-shell {
    grid-template-columns: minmax(0, 3.2fr) minmax(220px, 1.1fr);
    align-items: flex-start;
  }
}

/* Header */

header.site-header {
  grid-column: 1 / -1;
  padding: 1.25rem 1.5rem 1.5rem;
  border-radius: 18px;
  background: radial-gradient(circle at top left, #0b1120 0, #020617 55%, #020617 100%);
  border: 1px solid rgba(148,163,184,0.18);
  box-shadow: var(--shadow-soft);
  position: relative;
  overflow: hidden;
}

header.site-header::before {
  content: "";
  position: absolute;
  inset: -40%;
  background:
    radial-gradient(circle at 0 0, rgba(56,189,248,0.18) 0, transparent 55%),
    radial-gradient(circle at 100% 0, rgba(129,140,248,0.18) 0, transparent 55%);
  opacity: 0.7;
  mix-blend-mode: screen;
  pointer-events: none;
}

.header-inner {
  position: relative;
  z-index: 1;
}

.kicker {
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.16em;
  color: var(--accent);
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
}

.kicker-dot {
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: var(--accent);
  box-shadow: 0 0 12px rgba(56,189,248,0.9);
}

header h1 {
  margin: 0.4rem 0 0.4rem;
  font-size: clamp(1.8rem, 2.4vw + 1rem, 2.4rem);
  letter-spacing: -0.03em;
}

.header-subtitle {
  margin: 0;
  max-width: 40rem;
  color: var(--fg-soft);
  font-size: 0.98rem;
}

.header-meta {
  margin-top: 0.9rem;
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem 1.5rem;
  font-size: 0.8rem;
  color: var(--fg-soft);
}

.header-pill {
  padding: 0.2rem 0.7rem;
  border-radius: 999px;
  border: 1px solid rgba(148,163,184,0.35);
  background: rgba(15,23,42,0.7);
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
}

.header-pill strong {
  font-weight: 600;
  color: var(--fg);
}

/* Sticky TOC */

aside.toc {
  position: sticky;
  top: 1rem;
  align-self: flex-start;
  background: rgba(15,23,42,0.96);
  border-radius: 16px;
  border: 1px solid rgba(148,163,184,0.25);
  padding: 0.9rem 0.9rem 1rem;
  box-shadow: 0 18px 40px rgba(15,23,42,0.9);
  backdrop-filter: blur(16px);
}

.toc-title {
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.16em;
  color: var(--fg-soft);
  margin-bottom: 0.4rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.toc-title span {
  font-size: 0.7rem;
  color: var(--accent);
}

.toc-list {
  list-style: none;
  margin: 0.2rem 0 0;
  padding: 0;
  font-size: 0.86rem;
}

.toc-list li {
  margin: 0.1rem 0;
}

.toc-list a {
  display: block;
  padding: 0.25rem 0.4rem;
  border-radius: 999px;
  color: var(--fg-soft);
  text-decoration: none;
  border: 1px solid transparent;
  transition: background-color var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast), transform 0.12s ease-out;
}

.toc-list a:hover {
  background: rgba(15,23,42,0.9);
  border-color: rgba(148,163,184,0.4);
  color: var(--fg);
  transform: translateX(1px);
}

.toc-list a.active {
  background: var(--accent-soft);
  border-color: rgba(56,189,248,0.7);
  color: var(--accent);
}

/* Main content */

main {
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
}

article {
  background: rgba(15,23,42,0.96);
  border-radius: 18px;
  border: 1px solid rgba(148,163,184,0.25);
  padding: 1.4rem 1.4rem 1.6rem;
  box-shadow: 0 18px 40px rgba(15,23,42,0.9);
}

article section + section {
  margin-top: 1.4rem;
}

section h2 {
  margin: 0 0 0.6rem;
  font-size: 1.25rem;
  letter-spacing: -0.02em;
}

section h3 {
  margin: 0.8rem 0 0.4rem;
  font-size: 1.02rem;
}

p {
  margin: 0.25rem 0 0.4rem;
  line-height: 1.6;
  font-size: 0.96rem;
}

ul, ol {
  margin: 0.2rem 0 0.4rem 1.2rem;
  padding: 0;
  font-size: 0.95rem;
}

li {
  margin: 0.15rem 0;
}

/* Quick summary */

.quick-summary {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: 0.6rem;
  margin-top: 0.4rem;
}

@media (min-width: 640px) {
  .quick-summary {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.summary-card {
  background: radial-gradient(circle at top left, rgba(56,189,248,0.12) 0, rgba(15,23,42,0.95) 55%);
  border-radius: var(--radius-md);
  border: 1px solid rgba(148,163,184,0.35);
  padding: 0.6rem 0.7rem;
  font-size: 0.9rem;
}

/* Callouts */

.callout {
  border-radius: var(--radius-md);
  padding: 0.7rem 0.8rem;
  border: 1px solid rgba(148,163,184,0.35);
  background: radial-gradient(circle at top left, rgba(56,189,248,0.12) 0, rgba(15,23,42,0.98) 55%);
  font-size: 0.9rem;
  margin-top: 0.4rem;
}

.callout-title {
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.16em;
  color: var(--accent);
  margin-bottom: 0.2rem;
}

/* Code and copy buttons */

.equation-block {
  position: relative;
  margin: 0.5rem 0;
  padding: 0.55rem 0.7rem;
  border-radius: var(--radius-md);
  background: var(--code-bg);
  border: 1px solid rgba(148,163,184,0.4);
  font-family: var(--font-mono);
  font-size: 0.9rem;
  overflow-x: auto;
}

.equation-block code {
  white-space: pre-wrap;
  word-break: break-word;
}

.copy-btn {
  position: absolute;
  top: 0.35rem;
  right: 0.35rem;
  border-radius: 999px;
  border: 1px solid rgba(148,163,184,0.5);
  background: rgba(15,23,42,0.95);
  color: var(--fg-soft);
  font-size: 0.7rem;
  padding: 0.15rem 0.55rem;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  transition: background-color var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast), transform 0.08s ease-out;
}

.copy-btn:hover {
  background: rgba(15,23,42,1);
  color: var(--accent);
  border-color: rgba(56,189,248,0.8);
  transform: translateY(-0.5px);
}

.copy-btn.copied {
  color: var(--success);
  border-color: rgba(74,222,128,0.9);
}

/* Canvas layout */

.visual-grid {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: 1rem;
  margin-top: 0.6rem;
}

@media (min-width: 880px) {
  .visual-grid {
    grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.4fr);
  }
}

.visual-grid-wide {
  grid-column: 1 / -1;
}

.canvas-card {
  background: radial-gradient(circle at top left, rgba(56,189,248,0.12) 0, rgba(15,23,42,0.98) 55%);
  border-radius: var(--radius-lg);
  border: 1px solid rgba(148,163,184,0.35);
  padding: 0.7rem 0.8rem 0.9rem;
}

.canvas-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 0.4rem;
  margin-bottom: 0.4rem;
}

.canvas-title {
  font-size: 0.9rem;
  font-weight: 600;
}

.canvas-subtitle {
  font-size: 0.78rem;
  color: var(--fg-soft);
}

.canvas-wrapper {
  width: 100%;
  height: 220px;
  border-radius: var(--radius-md);
  overflow: hidden;
  background: radial-gradient(circle at top, #020617 0, #020617 40%, #020617 100%);
  border: 1px solid rgba(30,64,175,0.7);
}

@media (min-width: 640px) {
  .canvas-wrapper {
    height: 260px;
  }
}

canvas {
  width: 100%;
  height: 100%;
  display: block;
}

/* Controls */

.controls-row {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.6rem 1.2rem;
  margin-top: 0.4rem;
  font-size: 0.9rem;
}

.control-group {
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

.control-group label {
  font-size: 0.85rem;
  color: var(--fg-soft);
}

input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  width: 160px;
  height: 4px;
  border-radius: 999px;
  background: rgba(30,64,175,0.7);
  outline: none;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: var(--accent);
  border: 2px solid #0b1120;
  box-shadow: 0 0 0 4px rgba(56,189,248,0.25);
  cursor: pointer;
}

input[type="range"]::-moz-range-thumb {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: var(--accent);
  border: 2px solid #0b1120;
  box-shadow: 0 0 0 4px rgba(56,189,248,0.25);
  cursor: pointer;
}

.badge {
  padding: 0.1rem 0.45rem;
  border-radius: 999px;
  border: 1px solid rgba(148,163,184,0.5);
  font-size: 0.75rem;
  color: var(--fg-soft);
}

/* Footer */

footer {
  grid-column: 1 / -1;
  margin-top: 0.5rem;
  padding: 0.8rem 0.4rem 0;
  font-size: 0.8rem;
  color: var(--fg-soft);
  text-align: center;
}

/* Links */

a {
  color: var(--accent);
}

/* Print */

@media print {
  body {
    background: #ffffff;
    color: #000000;
  }
  header.site-header,
  article,
  aside.toc {
    box-shadow: none;
    background: #ffffff;
    border-color: #cccccc;
  }
  .canvas-wrapper {
    border-color: #cccccc;
  }
  .copy-btn,
  .controls-row {
    display: none !important;
  }
  a {
    color: #000000;
    text-decoration: underline;
  }
}
</style>
</head>
<body>
<div class="page-shell">
  <header class="site-header">
    <div class="header-inner">
      <div class="kicker"><span class="kicker-dot"></span><span>Fourier series • Triangle wave</span></div>
      <h1>Fourier Series of a 2π-Periodic Triangle Wave</h1>
      <p class="header-subtitle">
        We derive the full Fourier series of a 2π-periodic triangle wave, understand why only odd cosine terms appear,
        and visualize how partial sums approximate the original waveform.
      </p>
      <div class="header-meta">
        <div class="header-pill"><strong>Level:</strong><span>Intro–Intermediate</span></div>
        <div class="header-pill"><strong>Focus:</strong><span>Series coefficients, symmetry, convergence</span></div>
        <div class="header-pill"><strong>Interactive:</strong><span>Adjust number of Fourier terms live</span></div>
      </div>
    </div>
  </header>

  <main>
    <article>
      <section id="quick-summary">
        <h2>Quick summary</h2>
        <div class="quick-summary">
          <div class="summary-card">
            • We study a triangle wave of period 2π defined by f(t) = |t| on the interval −π ≤ t ≤ π, extended periodically.
          </div>
          <div class="summary-card">
            • The function is even, so its Fourier series contains only cosine terms (no sine terms).
          </div>
          <div class="summary-card">
            • Only odd cosine harmonics appear; all even cosine coefficients vanish due to symmetry.
          </div>
          <div class="summary-card">
            • The final Fourier series is:
            f(t) = π/2 − (4/π) Σ (cos((2k+1)t) / (2k+1)²), summed over k = 0, 1, 2, …
          </div>
          <div class="summary-card">
            • Interactive plots below show the original triangle wave, its Fourier partial sums, and the pointwise error as you vary the number of terms.
          </div>
        </div>
      </section>

      <section id="visualization">
        <h2>Interactive visualizations</h2>
        <p>
          We use example values with amplitude π and period 2π, matching the symbolic derivation. Use the slider to change
          the number of odd cosine terms in the Fourier partial sum; all plots update together.
        </p>

        <div class="controls-row">
          <div class="control-group">
            <label for="termsSlider">Number of odd cosine terms N:</label>
            <input id="termsSlider" type="range" min="1" max="40" value="8">
            <span id="termsLabel" class="badge">N = 8</span>
          </div>
          <div class="control-group">
            <span class="badge">Example parameters: amplitude = π, period = 2π</span>
          </div>
        </div>

        <div class="visual-grid">
          <div class="canvas-card">
            <div class="canvas-header">
              <div class="canvas-title">Geometry of the 2π-periodic triangle wave</div>
              <div class="canvas-subtitle">Setup diagram: one period and periodic extension</div>
            </div>
            <div class="canvas-wrapper">
              <canvas id="setupCanvas"></canvas>
            </div>
          </div>

          <div class="canvas-card">
            <div class="canvas-header">
              <div class="canvas-title">Triangle wave vs Fourier partial sum</div>
              <div class="canvas-subtitle">Main quantitative plot: f(t) and S<sub>N</sub>(t)</div>
            </div>
            <div class="canvas-wrapper">
              <canvas id="mainCanvas"></canvas>
            </div>
          </div>

          <div class="canvas-card visual-grid-wide">
            <div class="canvas-header">
              <div class="canvas-title">Pointwise approximation error |f(t) − S<sub>N</sub>(t)|</div>
              <div class="canvas-subtitle">Secondary plot: error over one period</div>
            </div>
            <div class="canvas-wrapper">
              <canvas id="errorCanvas"></canvas>
            </div>
          </div>
        </div>
      </section>

      <section id="part1">
        <h2>Part 1 — Problem analysis</h2>

        <h3>Restating the problem in plain language</h3>
        <p>
          We are given a triangle-shaped periodic function with period 2π. Over one fundamental period from t = −π to t = π,
          the function increases linearly from 0 at t = 0 to π at t = π and symmetrically from 0 at t = 0 to π at t = −π.
          A simple way to describe this is:
        </p>
        <p>
          f(t) = |t| for −π ≤ t ≤ π, and this pattern repeats every 2π.
        </p>
        <p>
          Our goal is to compute the Fourier series of this function, i.e., to express f(t) as an infinite sum of sines and cosines.
        </p>

        <h3>Given quantities</h3>
        <ul>
          <li>Period: T = 2π.</li>
          <li>Fundamental angular frequency: ω₀ = 2π / T = 1 rad/s.</li>
          <li>Definition over one period: f(t) = |t| for −π ≤ t ≤ π.</li>
          <li>Amplitude (maximum value in one period): f(±π) = π.</li>
        </ul>

        <h3>Unknowns and what must be found</h3>
        <ul>
          <li>The Fourier series representation:
            f(t) = a₀/2 + Σ (aₙ cos(n t) + bₙ sin(n t)), summed over n = 1, 2, 3, …</li>
          <li>The explicit formulas for the Fourier coefficients aₙ and bₙ.</li>
          <li>The simplified final series, ideally in a compact form involving only the nonzero coefficients.</li>
        </ul>

        <h3>Relevant physical and mathematical principles</h3>
        <ul>
          <li>
            <strong>Fourier series for periodic functions:</strong>
            Any reasonable periodic function with period 2π can be written as a sum of sines and cosines with integer multiples of the fundamental frequency.
          </li>
          <li>
            <strong>Orthogonality of sine and cosine functions:</strong>
            The coefficients aₙ and bₙ are obtained by integrating f(t) times cos(n t) or sin(n t) over one period.
          </li>
          <li>
            <strong>Symmetry (even/odd):</strong>
            The function f(t) = |t| is even (f(−t) = f(t)), so all sine coefficients bₙ must be zero, and only cosine terms remain.
          </li>
          <li>
            <strong>Integration by parts:</strong>
            Needed to compute integrals of the form ∫ t cos(n t) dt when finding aₙ.
          </li>
        </ul>

        <h3>Possible solution approaches</h3>
        <ol>
          <li>
            <strong>Direct Fourier series with symmetry:</strong>
            Use the standard formulas for aₙ and bₙ over [−π, π], exploit even symmetry to reduce integrals to [0, π], and compute aₙ by integration by parts.
          </li>
          <li>
            <strong>Piecewise linear representation:</strong>
            Write f(t) explicitly as f(t) = t for 0 ≤ t ≤ π and f(t) = −t for −π ≤ t ≤ 0, then compute integrals separately on each subinterval.
          </li>
          <li>
            <strong>Derivative method (optional idea):</strong>
            Note that the derivative of the triangle wave is a square wave, whose Fourier series is well known; integrate that series to recover the triangle wave series.
          </li>
        </ol>

        <h3>Choosing the best approach</h3>
        <p>
          For a first-principles, beginner-friendly derivation, the <strong>direct Fourier series with symmetry</strong> is the best approach.
          It uses only the standard Fourier formulas, leverages the even symmetry to simplify the integrals, and requires only one integration by parts.
          The derivative method is elegant but assumes prior knowledge of the square wave series, which the problem does not require.
        </p>
      </section>

      <section id="part2">
        <h2>Part 2 — Strategy &amp; tips (roadmap only)</h2>

        <h3>Step-by-step plan</h3>
        <ol>
          <li>
            <strong>Define the function precisely.</strong><br>
            Goal: Fix a clear formula for f(t) over one period.<br>
            Tool: Use f(t) = |t| on −π ≤ t ≤ π, with period 2π.
          </li>
          <li>
            <strong>Write the general Fourier series form.</strong><br>
            Goal: Set up the expression with unknown coefficients a₀, aₙ, bₙ.<br>
            Tool: Standard 2π-periodic Fourier series:
            f(t) = a₀/2 + Σ (aₙ cos(n t) + bₙ sin(n t)).
          </li>
          <li>
            <strong>Use symmetry to simplify.</strong><br>
            Goal: Show that all bₙ = 0 and reduce integrals for aₙ.<br>
            Tool: Even function property f(−t) = f(t) implies bₙ = 0 and
            aₙ = (2/π) ∫₀^π f(t) cos(n t) dt.
          </li>
          <li>
            <strong>Compute the constant term a₀.</strong><br>
            Goal: Find the average value of f(t) over one period.<br>
            Tool: a₀ = (1/π) ∫_{−π}^{π} f(t) dt = (2/π) ∫₀^π t dt.
          </li>
          <li>
            <strong>Compute a general cosine coefficient aₙ.</strong><br>
            Goal: Derive a formula for aₙ in terms of n.<br>
            Tool: aₙ = (2/π) ∫₀^π t cos(n t) dt, evaluated using integration by parts.
          </li>
          <li>
            <strong>Identify which coefficients vanish.</strong><br>
            Goal: Show that aₙ = 0 for even n and nonzero for odd n.<br>
            Tool: Use cos(nπ) = (−1)ⁿ and sin(nπ) = 0 in the integrated expression.
          </li>
          <li>
            <strong>Rewrite the series using only odd indices.</strong><br>
            Goal: Express the series as a sum over k = 0, 1, 2, … with n = 2k + 1.<br>
            Tool: Substitute n = 2k + 1 into the formula for aₙ.
          </li>
          <li>
            <strong>Perform sanity checks.</strong><br>
            Goal: Confirm units, limiting behavior, and physical interpretation.<br>
            Tool: Check values at t = 0 and t = ±π, and consider convergence of the series.
          </li>
        </ol>

        <h3>Common mistakes and quick tips</h3>
        <div class="callout">
          <div class="callout-title">Watch out for these pitfalls</div>
          <ul>
            <li><strong>Forgetting symmetry:</strong> If you do not use that f(t) is even, you will do twice as much integration work.</li>
            <li><strong>Wrong limits:</strong> For a 2π-periodic function, the standard formulas integrate over [−π, π], not [0, 2π].</li>
            <li><strong>Sign errors in integration by parts:</strong> Carefully track the minus signs when integrating ∫ t cos(n t) dt.</li>
            <li><strong>Misusing cos(nπ):</strong> Remember cos(nπ) = (−1)ⁿ and sin(nπ) = 0 for integer n.</li>
            <li><strong>Mixing up n and k:</strong> When switching to odd indices n = 2k + 1, keep the substitution consistent everywhere.</li>
          </ul>
        </div>
      </section>

      <section id="part3">
        <h2>Part 3 — Full solution</h2>

        <h3>Physical and geometric intuition</h3>
        <p>
          A triangle wave can be thought of as a signal that ramps up linearly and then ramps down linearly, repeating forever.
          Because it is made of straight-line segments, it is continuous but has sharp corners (points where the slope changes abruptly).
          Fourier series approximate such a function by adding up smooth sine and cosine waves.
        </p>
        <p>
          The sharper the corners, the more high-frequency components are needed to approximate the function accurately.
          For a triangle wave, the Fourier coefficients decay like 1 / n², which is faster than for a square wave (which decays like 1 / n).
          This means the triangle wave’s Fourier series converges relatively quickly.
        </p>

        <h3>Step 1 — Define the function and its period</h3>
        <p>
          We define the triangle wave over one period as
        </p>
        <div class="equation-block" id="eq-def">
          <button class="copy-btn" data-copy-target="eq-def-text">Copy</button>
          <code id="eq-def-text">
f(t) = |t|   for −π ≤ t ≤ π,
and f(t + 2π) = f(t) for all t (periodic extension).
          </code>
        </div>
        <p>
          The period is T = 2π, so the fundamental angular frequency is
          ω₀ = 2π / T = 1 rad/s. Therefore, the Fourier series will involve cos(n t) and sin(n t) with integer n.
        </p>

        <h3>Step 2 — General Fourier series form</h3>
        <p>
          For a 2π-periodic function f(t), the Fourier series is
        </p>
        <div class="equation-block">
          <button class="copy-btn" data-copy-target="eq-general-text">Copy</button>
          <code id="eq-general-text">
f(t) = a₀/2 + Σ (aₙ cos(n t) + bₙ sin(n t)),   summed over n = 1, 2, 3, …

where
a₀ = (1/π) ∫_{−π}^{π} f(t) dt,
aₙ = (1/π) ∫_{−π}^{π} f(t) cos(n t) dt,
bₙ = (1/π) ∫_{−π}^{π} f(t) sin(n t) dt.
          </code>
        </div>

        <h3>Step 3 — Use symmetry to simplify</h3>
        <p>
          Our function f(t) = |t| is even, because f(−t) = |−t| = |t| = f(t).
        </p>
        <ul>
          <li>
            For an even function, all sine coefficients vanish:
            bₙ = 0 for all n, because sin(n t) is odd and the integral of an odd function over [−π, π] is zero.
          </li>
          <li>
            The cosine coefficients can be computed using only the interval [0, π]:
            aₙ = (2/π) ∫₀^π f(t) cos(n t) dt.
          </li>
        </ul>
        <p>
          On [0, π], we have f(t) = t (since |t| = t for t ≥ 0). Therefore,
        </p>
        <div class="equation-block">
          <button class="copy-btn" data-copy-target="eq-an-sym-text">Copy</button>
          <code id="eq-an-sym-text">
aₙ = (2/π) ∫₀^π t cos(n t) dt,   for n ≥ 1,
bₙ = 0,   for all n.
          </code>
        </div>

        <h3>Step 4 — Compute the constant term a₀</h3>
        <p>
          First, we find the average value a₀:
        </p>
        <p>
          a₀ = (1/π) ∫_{−π}^{π} f(t) dt.
        </p>
        <p>
          Using even symmetry, this becomes
        </p>
        <p>
          a₀ = (2/π) ∫₀^π f(t) dt = (2/π) ∫₀^π t dt.
        </p>
        <p>
          Now compute the integral:
        </p>
        <p>
          ∫₀^π t dt = [t² / 2] from 0 to π = π² / 2.
        </p>
        <p>
          Therefore,
        </p>
        <p>
          a₀ = (2/π) · (π² / 2) = π.
        </p>
        <p>
          So the constant term in the Fourier series is a₀ / 2 = π / 2.
        </p>

        <h3>Step 5 — Compute the cosine coefficients aₙ</h3>
        <p>
          We now compute
        </p>
        <p>
          aₙ = (2/π) ∫₀^π t cos(n t) dt.
        </p>
        <p>
          This integral requires integration by parts. Let
        </p>
        <ul>
          <li>u = t  ⇒  du = dt,</li>
          <li>dv = cos(n t) dt  ⇒  v = (1/n) sin(n t).</li>
        </ul>
        <p>
          Then
        </p>
        <p>
          ∫ t cos(n t) dt = u v − ∫ v du = t · (1/n) sin(n t) − ∫ (1/n) sin(n t) dt.
        </p>
        <p>
          The remaining integral is
        </p>
        <p>
          ∫ sin(n t) dt = −(1/n) cos(n t),
        </p>
        <p>
          so
        </p>
        <p>
          ∫ t cos(n t) dt = (t sin(n t))/n + (cos(n t))/n² + C.
        </p>
        <p>
          Now evaluate from t = 0 to t = π:
        </p>
        <p>
          ∫₀^π t cos(n t) dt = [(t sin(n t))/n + (cos(n t))/n²] from 0 to π.
        </p>
        <p>
          At t = π:
        </p>
        <ul>
          <li>sin(nπ) = 0,</li>
          <li>cos(nπ) = (−1)ⁿ.</li>
        </ul>
        <p>
          So the expression at t = π is
        </p>
        <p>
          (π sin(nπ))/n + (cos(nπ))/n² = 0 + (−1)ⁿ / n².
        </p>
        <p>
          At t = 0:
        </p>
        <ul>
          <li>sin(0) = 0,</li>
          <li>cos(0) = 1.</li>
        </ul>
        <p>
          So the expression at t = 0 is
        </p>
        <p>
          (0 · sin(0))/n + (cos(0))/n² = 0 + 1 / n² = 1 / n².
        </p>
        <p>
          Therefore,
        </p>
        <p>
          ∫₀^π t cos(n t) dt = (−1)ⁿ / n² − 1 / n² = ((−1)ⁿ − 1) / n².
        </p>
        <p>
          Plug this into the formula for aₙ:
        </p>
        <p>
          aₙ = (2/π) · ((−1)ⁿ − 1) / n².
        </p>

        <h3>Step 6 — Identify which coefficients vanish</h3>
        <p>
          Consider the factor ((−1)ⁿ − 1):
        </p>
        <ul>
          <li>If n is even, then (−1)ⁿ = 1, so (−1)ⁿ − 1 = 0, and hence aₙ = 0.</li>
          <li>If n is odd, then (−1)ⁿ = −1, so (−1)ⁿ − 1 = −2, and hence
            aₙ = (2/π) · (−2 / n²) = −4 / (π n²).</li>
        </ul>
        <p>
          Summarizing:
        </p>
        <div class="equation-block">
          <button class="copy-btn" data-copy-target="eq-an-final-text">Copy</button>
          <code id="eq-an-final-text">
For n even:  aₙ = 0.
For n odd:   aₙ = −4 / (π n²).
bₙ = 0 for all n.
          </code>
        </div>

        <h3>Step 7 — Rewrite the series using only odd indices</h3>
        <p>
          Since only odd n contribute, we can write n = 2k + 1, where k = 0, 1, 2, ….
          Then for n = 2k + 1,
        </p>
        <p>
          a_{2k+1} = −4 / (π (2k + 1)²).
        </p>
        <p>
          The Fourier series becomes
        </p>
        <p>
          f(t) = a₀/2 + Σ aₙ cos(n t) = π/2 + Σ_{k=0}^{∞} a_{2k+1} cos((2k + 1) t).
        </p>
        <p>
          Substituting a_{2k+1}:
        </p>
        <p>
          f(t) = π/2 + Σ_{k=0}^{∞} [−4 / (π (2k + 1)²)] cos((2k + 1) t).
        </p>
        <p>
          This can be written more compactly as
        </p>
        <div class="equation-block" id="eq-final">
          <button class="copy-btn" data-copy-target="eq-final-text">Copy final series</button>
          <code id="eq-final-text">
Final Fourier series for the 2π-periodic triangle wave f(t) = |t|:

f(t) = π/2 − (4/π) Σ_{k=0}^{∞} [ cos((2k + 1) t) / (2k + 1)² ].
          </code>
        </div>

        <h3>Step 8 — Sanity checks</h3>

        <h4>Units and dimensions</h4>
        <p>
          The function f(t) has the same units as t (since f(t) = |t| on [−π, π]). The Fourier series is a sum of terms of the form
          (constant) × cos((2k + 1) t), where the constants have units of t. The cosines are dimensionless, so each term has the same units as f(t),
          and the series is dimensionally consistent.
        </p>

        <h4>Check at t = 0</h4>
        <p>
          At t = 0, the original function is f(0) = |0| = 0.
        </p>
        <p>
          The series gives
        </p>
        <p>
          f(0) = π/2 − (4/π) Σ_{k=0}^{∞} [ cos(0) / (2k + 1)² ]
               = π/2 − (4/π) Σ_{k=0}^{∞} [ 1 / (2k + 1)² ].
        </p>
        <p>
          It is known that Σ_{k=0}^{∞} 1 / (2k + 1)² = π² / 8. Plugging this in:
        </p>
        <p>
          f(0) = π/2 − (4/π) · (π² / 8) = π/2 − (π/2) = 0,
        </p>
        <p>
          which matches the original function.
        </p>

        <h4>Check at t = π</h4>
        <p>
          At t = π, the original function is f(π) = |π| = π.
        </p>
        <p>
          The Fourier series converges to the midpoint of the left and right limits at a point of discontinuity.
          However, our triangle wave is continuous at t = π when viewed as a 2π-periodic function: the value just to the left of π is π,
          and just to the right (at −π) is also π. So the series should converge to π at t = π.
        </p>
        <p>
          Evaluating the series at t = π:
        </p>
        <p>
          cos((2k + 1) π) = −1 for all k, so
        </p>
        <p>
          f(π) = π/2 − (4/π) Σ_{k=0}^{∞} [ (−1) / (2k + 1)² ]
               = π/2 + (4/π) Σ_{k=0}^{∞} [ 1 / (2k + 1)² ].
        </p>
        <p>
          Using Σ_{k=0}^{∞} 1 / (2k + 1)² = π² / 8 again:
        </p>
        <p>
          f(π) = π/2 + (4/π) · (π² / 8) = π/2 + (π/2) = π,
        </p>
        <p>
          which matches the original function.
        </p>

        <h4>Physical interpretation</h4>
        <p>
          The series contains only odd cosine harmonics (cos t, cos 3t, cos 5t, …) with amplitudes that decay as 1 / (2k + 1)².
          This rapid decay reflects the fact that the triangle wave is continuous and only has “kinks” (discontinuous derivatives),
          not jumps in the function itself. The interactive plots above show how adding more terms makes the approximation smoother
          and closer to the exact triangle shape, while the error plot shows the pointwise difference shrinking as N increases.
        </p>
      </section>
    </article>
  </main>

  <aside class="toc">
    <div class="toc-title">
      <span>Contents</span>
      <span>Scroll</span>
    </div>
    <ul class="toc-list">
      <li><a href="#quick-summary">Quick summary</a></li>
      <li><a href="#visualization">Interactive visualizations</a></li>
      <li><a href="#part1">Part 1 — Problem analysis</a></li>
      <li><a href="#part2">Part 2 — Strategy &amp; tips</a></li>
      <li><a href="#part3">Part 3 — Full solution</a></li>
    </ul>
  </aside>

  <footer>
    Fourier series triangle wave tutorial — ready to embed as a standalone article.
  </footer>
</div>

<script>
(function() {
  // Smooth scrolling for TOC links
  const tocLinks = document.querySelectorAll('.toc-list a');
  tocLinks.forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      const targetId = link.getAttribute('href').slice(1);
      const target = document.getElementById(targetId);
      if (target) {
        const rect = target.getBoundingClientRect();
        const offset = window.scrollY + rect.top - 16;
        window.scrollTo({ top: offset, behavior: 'smooth' });
      }
    });
  });

  // Active TOC highlighting
  const sections = ['quick-summary', 'visualization', 'part1', 'part2', 'part3']
    .map(id => document.getElementById(id))
    .filter(Boolean);

  function updateActiveToc() {
    let bestId = null;
    let bestOffset = Infinity;
    sections.forEach(sec => {
      const rect = sec.getBoundingClientRect();
      const offset = Math.abs(rect.top - 80);
      if (offset < bestOffset) {
        bestOffset = offset;
        bestId = sec.id;
      }
    });
    tocLinks.forEach(link => {
      const id = link.getAttribute('href').slice(1);
      if (id === bestId) {
        link.classList.add('active');
      } else {
        link.classList.remove('active');
      }
    });
  }

  window.addEventListener('scroll', updateActiveToc);
  window.addEventListener('resize', updateActiveToc);
  updateActiveToc();

  // Copy buttons
  const copyButtons = document.querySelectorAll('.copy-btn');
  copyButtons.forEach(btn => {
    btn.addEventListener('click', async () => {
      const targetId = btn.getAttribute('data-copy-target');
      const target = document.getElementById(targetId);
      if (!target) return;
      const text = target.textContent.trim();
      try {
        await navigator.clipboard.writeText(text);
        btn.classList.add('copied');
        const original = btn.textContent;
        btn.textContent = 'Copied';
        setTimeout(() => {
          btn.classList.remove('copied');
          btn.textContent = original;
        }, 1200);
      } catch (err) {
        console.error('Copy failed', err);
      }
    });
  });

  // Canvas utilities
  function setupHiDPICanvas(canvas) {
    const ctx = canvas.getContext('2d');
    function resize() {
      const dpr = window.devicePixelRatio || 1;
      const rect = canvas.getBoundingClientRect();
      canvas.width = rect.width * dpr;
      canvas.height = rect.height * dpr;
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    resize();
    return { ctx, resize };
  }

  // Triangle wave function f(t) = |t| on [-π, π], periodic with 2π
  const PI = Math.PI;
  function triangleWave(t) {
    // Map t to principal interval [-π, π]
    let x = ((t + PI) % (2 * PI) + 2 * PI) % (2 * PI) - PI;
    return Math.abs(x);
  }

  // Fourier partial sum S_N(t) with N odd cosine terms
  function fourierTriangle(t, N) {
    let sum = PI / 2;
    for (let k = 0; k < N; k++) {
      const n = 2 * k + 1;
      sum -= (4 / PI) * Math.cos(n * t) / (n * n);
    }
    return sum;
  }

  // Setup canvases
  const setupCanvas = document.getElementById('setupCanvas');
  const mainCanvas = document.getElementById('mainCanvas');
  const errorCanvas = document.getElementById('errorCanvas');

  const setupCtxObj = setupHiDPICanvas(setupCanvas);
  const mainCtxObj = setupHiDPICanvas(mainCanvas);
  const errorCtxObj = setupHiDPICanvas(errorCanvas);

  window.addEventListener('resize', () => {
    setupCtxObj.resize();
    mainCtxObj.resize();
    errorCtxObj.resize();
    drawAll();
  });

  const termsSlider = document.getElementById('termsSlider');
  const termsLabel = document.getElementById('termsLabel');

  function drawAxes(ctx, width, height, xMin, xMax, yMin, yMax, options) {
    const paddingLeft = options.paddingLeft || 40;
    const paddingRight = options.paddingRight || 10;
    const paddingTop = options.paddingTop || 10;
    const paddingBottom = options.paddingBottom || 30;

    const plotWidth = width - paddingLeft - paddingRight;
    const plotHeight = height - paddingTop - paddingBottom;

    function xToPx(x) {
      return paddingLeft + (x - xMin) * plotWidth / (xMax - xMin);
    }
    function yToPx(y) {
      return paddingTop + (yMax - y) * plotHeight / (yMax - yMin);
    }

    ctx.clearRect(0, 0, width, height);

    // Background
    ctx.fillStyle = '#020617';
    ctx.fillRect(0, 0, width, height);

    // Grid
    ctx.strokeStyle = 'rgba(148,163,184,0.25)';
    ctx.lineWidth = 1;
    ctx.setLineDash([2, 4]);
    ctx.beginPath();
    const xTicks = options.xTicks || 8;
    const yTicks = options.yTicks || 6;
    for (let i = 0; i <= xTicks; i++) {
      const x = xMin + (xMax - xMin) * i / xTicks;
      const px = xToPx(x);
      ctx.moveTo(px, paddingTop);
      ctx.lineTo(px, paddingTop + plotHeight);
    }
    for (let j = 0; j <= yTicks; j++) {
      const y = yMin + (yMax - yMin) * j / yTicks;
      const py = yToPx(y);
      ctx.moveTo(paddingLeft, py);
      ctx.lineTo(paddingLeft + plotWidth, py);
    }
    ctx.stroke();
    ctx.setLineDash([]);

    // Axes
    ctx.strokeStyle = 'rgba(148,163,184,0.8)';
    ctx.lineWidth = 1.2;
    ctx.beginPath();
    // x-axis
    const y0 = yToPx(0);
    ctx.moveTo(paddingLeft, y0);
    ctx.lineTo(paddingLeft + plotWidth, y0);
    // y-axis
    const x0 = xToPx(0);
    ctx.moveTo(x0, paddingTop);
    ctx.lineTo(x0, paddingTop + plotHeight);
    ctx.stroke();

    // Tick labels
    ctx.fillStyle = 'rgba(148,163,184,0.9)';
    ctx.font = '10px ' + getComputedStyle(document.body).fontFamily;
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    for (let i = 0; i <= xTicks; i++) {
      const x = xMin + (xMax - xMin) * i / xTicks;
      const px = xToPx(x);
      const label = options.xLabelFormatter ? options.xLabelFormatter(x) : x.toFixed(1);
      ctx.fillText(label, px, paddingTop + plotHeight + 4);
    }
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    for (let j = 0; j <= yTicks; j++) {
      const y = yMin + (yMax - yMin) * j / yTicks;
      const py = yToPx(y);
      const label = options.yLabelFormatter ? options.yLabelFormatter(y) : y.toFixed(1);
      ctx.fillText(label, paddingLeft - 4, py);
    }

    // Axis labels
    if (options.xAxisLabel) {
      ctx.textAlign = 'center';
      ctx.textBaseline = 'bottom';
      ctx.fillText(options.xAxisLabel, paddingLeft + plotWidth / 2, height - 4);
    }
    if (options.yAxisLabel) {
      ctx.save();
      ctx.translate(10, paddingTop + plotHeight / 2);
      ctx.rotate(-Math.PI / 2);
      ctx.textAlign = 'center';
      ctx.textBaseline = 'top';
      ctx.fillText(options.yAxisLabel, 0, 0);
      ctx.restore();
    }

    return { xToPx, yToPx, plotWidth, plotHeight, paddingLeft, paddingTop };
  }

  function drawSetupDiagram() {
    const ctx = setupCtxObj.ctx;
    const rect = setupCanvas.getBoundingClientRect();
    const width = rect.width;
    const height = rect.height;

    const xMin = -2 * PI;
    const xMax = 2 * PI;
    const yMin = -0.2 * PI;
    const yMax = 1.2 * PI;

    const axes = drawAxes(ctx, width, height, xMin, xMax, yMin, yMax, {
      xTicks: 8,
      yTicks: 5,
      xAxisLabel: 't (radians)',
      yAxisLabel: 'f(t)',
      xLabelFormatter: x => {
        const k = Math.round(x / PI);
        if (Math.abs(x) < 1e-6) return '0';
        if (Math.abs(x - k * PI) < 1e-6) {
          if (k === 1) return 'π';
          if (k === -1) return '−π';
          return k + 'π';
        }
        return '';
      },
      yLabelFormatter: y => {
        const k = Math.round(y / PI);
        if (Math.abs(y) < 1e-6) return '0';
        if (Math.abs(y - k * PI) < 1e-6) {
          if (k === 1) return 'π';
          if (k === -1) return '−π';
          return k + 'π';
        }
        return '';
      }
    });

    const { xToPx, yToPx } = axes;

    // Draw triangle wave over several periods
    ctx.lineWidth = 2;
    ctx.strokeStyle = '#38bdf8';
    ctx.beginPath();
    const steps = 600;
    for (let i = 0; i <= steps; i++) {
      const t = xMin + (xMax - xMin) * i / steps;
      const y = triangleWave(t);
      const px = xToPx(t);
      const py = yToPx(y);
      if (i === 0) ctx.moveTo(px, py);
      else ctx.lineTo(px, py);
    }
    ctx.stroke();

    // Highlight one fundamental period [-π, π]
    ctx.strokeStyle = 'rgba(248,250,252,0.8)';
    ctx.setLineDash([6, 4]);
    ctx.lineWidth = 1.4;
    ctx.beginPath();
    ctx.moveTo(xToPx(-PI), yToPx(0));
    ctx.lineTo(xToPx(-PI), yToPx(PI));
    ctx.moveTo(xToPx(PI), yToPx(0));
    ctx.lineTo(xToPx(PI), yToPx(PI));
    ctx.stroke();
    ctx.setLineDash([]);

    // Label the highlighted period
    ctx.fillStyle = 'rgba(248,250,252,0.9)';
    ctx.font = '10px ' + getComputedStyle(document.body).fontFamily;
    ctx.textAlign = 'center';
    ctx.textBaseline = 'bottom';
    ctx.fillText('One period: −π to π', xToPx(0), yToPx(PI) - 4);
  }

  function drawMainPlot(N) {
    const ctx = mainCtxObj.ctx;
    const rect = mainCanvas.getBoundingClientRect();
    const width = rect.width;
    const height = rect.height;

    const xMin = -PI;
    const xMax = PI;
    const yMin = -0.2 * PI;
    const yMax = 1.2 * PI;

    const axes = drawAxes(ctx, width, height, xMin, xMax, yMin, yMax, {
      xTicks: 6,
      yTicks: 5,
      xAxisLabel: 't (radians)',
      yAxisLabel: 'Amplitude',
      xLabelFormatter: x => {
        const k = Math.round(x / PI);
        if (Math.abs(x) < 1e-6) return '0';
        if (Math.abs(x - k * PI) < 1e-6) {
          if (k === 1) return 'π';
          if (k === -1) return '−π';
          return k + 'π';
        }
        return '';
      },
      yLabelFormatter: y => {
        const k = Math.round(y / PI);
        if (Math.abs(y) < 1e-6) return '0';
        if (Math.abs(y - k * PI) < 1e-6) {
          if (k === 1) return 'π';
          if (k === -1) return '−π';
          return k + 'π';
        }
        return '';
      }
    });

    const { xToPx, yToPx } = axes;

    // Plot original triangle wave
    ctx.lineWidth = 2;
    ctx.strokeStyle = '#38bdf8';
    ctx.beginPath();
    const steps = 600;
    for (let i = 0; i <= steps; i++) {
      const t = xMin + (xMax - xMin) * i / steps;
      const y = triangleWave(t);
      const px = xToPx(t);
      const py = yToPx(y);
      if (i === 0) ctx.moveTo(px, py);
      else ctx.lineTo(px, py);
    }
    ctx.stroke();

    // Plot Fourier partial sum
    ctx.lineWidth = 2;
    ctx.strokeStyle = '#f97373';
    ctx.beginPath();
    for (let i = 0; i <= steps; i++) {
      const t = xMin + (xMax - xMin) * i / steps;
      const y = fourierTriangle(t, N);
      const px = xToPx(t);
      const py = yToPx(y);
      if (i === 0) ctx.moveTo(px, py);
      else ctx.lineTo(px, py);
    }
    ctx.stroke();

    // Legend
    ctx.font = '10px ' + getComputedStyle(document.body).fontFamily;
    ctx.textAlign = 'left';
    ctx.textBaseline = 'top';
    const legendX = 50;
    const legendY = 18;
    const boxSize = 10;

    ctx.fillStyle = '#38bdf8';
    ctx.fillRect(legendX, legendY, boxSize, boxSize);
    ctx.fillStyle = 'rgba(248,250,252,0.9)';
    ctx.fillText('Exact triangle wave f(t)', legendX + boxSize + 6, legendY - 1 + boxSize / 2);

    ctx.fillStyle = '#f97373';
    ctx.fillRect(legendX, legendY + 16, boxSize, boxSize);
    ctx.fillStyle = 'rgba(248,250,252,0.9)';
    ctx.fillText('Fourier partial sum S_N(t)', legendX + boxSize + 6, legendY + 15 + boxSize / 2);
  }

  function drawErrorPlot(N) {
    const ctx = errorCtxObj.ctx;
    const rect = errorCanvas.getBoundingClientRect();
    const width = rect.width;
    const height = rect.height;

    const xMin = -PI;
    const xMax = PI;
    const yMin = 0;
    const yMax = PI * 0.6; // error is relatively small

    const axes = drawAxes(ctx, width, height, xMin, xMax, yMin, yMax, {
      xTicks: 6,
      yTicks: 5,
      xAxisLabel: 't (radians)',
      yAxisLabel: '|f(t) − S_N(t)|',
      xLabelFormatter: x => {
        const k = Math.round(x / PI);
        if (Math.abs(x) < 1e-6) return '0';
        if (Math.abs(x - k * PI) < 1e-6) {
          if (k === 1) return 'π';
          if (k === -1) return '−π';
          return k + 'π';
        }
        return '';
      },
      yLabelFormatter: y => y.toFixed(2)
    });

    const { xToPx, yToPx } = axes;

    ctx.lineWidth = 2;
    ctx.strokeStyle = '#4ade80';
    ctx.beginPath();
    const steps = 600;
    for (let i = 0; i <= steps; i++) {
      const t = xMin + (xMax - xMin) * i / steps;
      const err = Math.abs(triangleWave(t) - fourierTriangle(t, N));
      const px = xToPx(t);
      const py = yToPx(err);
      if (i === 0) ctx.moveTo(px, py);
      else ctx.lineTo(px, py);
    }
    ctx.stroke();

    // Legend
    ctx.font = '10px ' + getComputedStyle(document.body).fontFamily;
    ctx.textAlign = 'left';
    ctx.textBaseline = 'top';
    const legendX = 50;
    const legendY = 18;
    const boxSize = 10;

    ctx.fillStyle = '#4ade80';
    ctx.fillRect(legendX, legendY, boxSize, boxSize);
    ctx.fillStyle = 'rgba(248,250,252,0.9)';
    ctx.fillText('Pointwise error |f(t) − S_N(t)|', legendX + boxSize + 6, legendY - 1 + boxSize / 2);
  }

  function drawAll() {
    const N = parseInt(termsSlider.value, 10);
    termsLabel.textContent = 'N = ' + N;
    drawSetupDiagram();
    drawMainPlot(N);
    drawErrorPlot(N);
  }

  termsSlider.addEventListener('input', drawAll);

  // Initial draw
  drawAll();
})();
</script>
</body>
</html>