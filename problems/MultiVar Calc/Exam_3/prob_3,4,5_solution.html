<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <meta name="description" content="Complete structured solution (Problems 3–5): Tangent plane, constrained optimization, Hessian test, and Lagrange multipliers." />
  <title>Multivariable Calculus — Problems 3–5 (Full Structured Solution)</title>

  <!-- MathJax (LaTeX rendering) -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]'], ['$$', '$$']]
      },
      options: { renderActions: { addMenu: [] } }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

  <style>
    :root{
      --bg0:#070A12;
      --bg1:rgba(255,255,255,.06);
      --bg2:rgba(255,255,255,.09);
      --txt:#EAF0FF;
      --muted:rgba(234,240,255,.72);
      --muted2:rgba(234,240,255,.58);
      --line:rgba(255,255,255,.12);
      --glow:rgba(138,180,255,.25);
      --a:#9DE7FF;
      --b:#C9A6FF;
      --c:#7CFFCF;
      --warn:#FFD58A;
      --good:#7CFFCF;
      --bad:#FF7CA8;
      --shadow: 0 24px 70px rgba(0,0,0,.50);
      --radius: 18px;
      --radius2: 26px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
    }

    @media (prefers-color-scheme: light){
      :root{
        --bg0:#F7F9FF;
        --bg1:rgba(0,0,0,.04);
        --bg2:rgba(0,0,0,.06);
        --txt:#0A1020;
        --muted:rgba(10,16,32,.72);
        --muted2:rgba(10,16,32,.58);
        --line:rgba(0,0,0,.10);
        --glow:rgba(38,120,255,.16);
        --shadow: 0 24px 70px rgba(10,16,32,.12);
      }
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--txt);
      background:
        radial-gradient(1000px 700px at 15% 10%, rgba(157,231,255,.20), transparent 55%),
        radial-gradient(900px 700px at 85% 20%, rgba(201,166,255,.18), transparent 60%),
        radial-gradient(900px 700px at 45% 90%, rgba(124,255,207,.12), transparent 62%),
        linear-gradient(180deg, var(--bg0), #050711 55%, var(--bg0));
      overflow-x:hidden;
    }

    /* subtle animated grid */
    .gridfx{
      position:fixed; inset:-30%;
      background:
        linear-gradient(var(--line) 1px, transparent 1px) 0 0 / 50px 50px,
        linear-gradient(90deg, var(--line) 1px, transparent 1px) 0 0 / 50px 50px;
      mask-image: radial-gradient(closest-side, rgba(0,0,0,.55), transparent 70%);
      opacity:.18;
      transform: rotate(-8deg);
      pointer-events:none;
      animation: drift 20s ease-in-out infinite alternate;
      z-index:-2;
    }
    @keyframes drift{
      from{transform:translate3d(-1%, -1%, 0) rotate(-8deg)}
      to{transform:translate3d(2%, 1%, 0) rotate(-8deg)}
    }

    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding: clamp(18px, 3vw, 34px);
    }

    header.hero{
      position:relative;
      border:1px solid var(--line);
      background: linear-gradient(180deg, var(--bg2), var(--bg1));
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      overflow:hidden;
      padding: clamp(18px, 3vw, 30px);
    }
    header.hero::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(700px 250px at 35% 0%, rgba(157,231,255,.25), transparent 55%),
                  radial-gradient(700px 250px at 80% 15%, rgba(201,166,255,.22), transparent 55%),
                  radial-gradient(700px 250px at 55% 100%, rgba(124,255,207,.18), transparent 60%);
      filter: blur(2px);
      opacity:.9;
      pointer-events:none;
    }
    header.hero > *{position:relative}

    .kicker{
      display:inline-flex;
      gap:.6rem;
      align-items:center;
      font-family:var(--mono);
      font-size:.86rem;
      color:var(--muted);
      letter-spacing:.06em;
      text-transform:uppercase;
      padding:.45rem .75rem;
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      border-radius: 999px;
      backdrop-filter: blur(8px);
    }
    .dot{
      width:.55rem; height:.55rem;
      border-radius:50%;
      background: conic-gradient(from 90deg, var(--a), var(--b), var(--c), var(--a));
      box-shadow: 0 0 0 6px rgba(255,255,255,.03), 0 0 24px var(--glow);
    }

    h1{
      margin:.8rem 0 .5rem;
      font-size: clamp(1.45rem, 3.2vw, 2.3rem);
      line-height:1.15;
      letter-spacing:-.02em;
    }
    .sub{
      margin:0;
      color:var(--muted);
      font-size: clamp(.98rem, 1.6vw, 1.08rem);
      max-width: 72ch;
    }

    .meta{
      display:flex; flex-wrap:wrap;
      gap:.7rem;
      margin-top: 1.15rem;
      color:var(--muted2);
      font-size:.95rem;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:.55rem;
      padding:.5rem .75rem;
      border-radius: 999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      backdrop-filter: blur(6px);
    }
    .chip svg{opacity:.85}

    nav.toc{
      margin-top: 18px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      border-radius: var(--radius);
      padding: 14px 16px;
    }
    nav.toc strong{
      display:block;
      color:var(--txt);
      margin-bottom: 8px;
      letter-spacing:.02em;
    }
    nav.toc a{
      color: var(--a);
      text-decoration:none;
      border-bottom:1px dashed rgba(157,231,255,.35);
    }
    nav.toc a:hover{border-bottom-style:solid}
    nav.toc ul{
      margin:0;
      padding-left: 18px;
      display:grid;
      gap:6px;
    }

    main{
      margin-top: 22px;
      display:grid;
      gap: 18px;
    }

    section.card{
      border:1px solid var(--line);
      background: linear-gradient(180deg, var(--bg2), var(--bg1));
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .cardhead{
      padding: 18px 20px;
      border-bottom: 1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
    }

    .cardhead h2{
      margin:0;
      font-size: clamp(1.08rem, 2vw, 1.35rem);
      letter-spacing:-.01em;
    }
    .cardhead p{
      margin:.35rem 0 0;
      color:var(--muted);
      max-width: 80ch;
      font-size: .98rem;
    }

    .badge{
      flex:0 0 auto;
      font-family:var(--mono);
      font-size:.82rem;
      color:var(--muted);
      border:1px solid var(--line);
      background: rgba(0,0,0,.10);
      padding:.45rem .7rem;
      border-radius: 999px;
      white-space:nowrap;
    }

    .cardbody{
      padding: 18px 20px 20px;
    }

    .twocol{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 16px;
    }
    @media (max-width: 900px){
      .twocol{grid-template-columns: 1fr}
    }

    .panel{
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      border-radius: var(--radius);
      padding: 14px 14px 12px;
    }

    .panel h3{
      margin:0 0 8px;
      font-size: 1.02rem;
      letter-spacing:.01em;
    }
    .panel ul{
      margin:0;
      padding-left: 18px;
      color:var(--muted);
      display:grid;
      gap: 6px;
    }
    .panel li strong{color:var(--txt)}

    .step{
      border-left: 3px solid rgba(157,231,255,.55);
      padding: 10px 12px;
      margin: 12px 0;
      border-radius: 10px;
      background: rgba(157,231,255,.05);
    }
    .step h4{
      margin:0 0 6px;
      display:flex;
      align-items:center;
      gap:.55rem;
      font-size: 1rem;
    }
    .step h4 .num{
      font-family:var(--mono);
      font-size:.85rem;
      color:var(--muted);
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      padding:.18rem .5rem;
      border-radius: 999px;
    }
    .step p{margin:.35rem 0 0; color:var(--muted); line-height:1.55}

    .mathblock{
      margin: 12px 0;
      border:1px solid var(--line);
      background: rgba(0,0,0,.12);
      border-radius: var(--radius);
      padding: 14px 14px 10px;
      overflow:auto;
    }
    @media (prefers-color-scheme: light){
      .mathblock{background: rgba(0,0,0,.04);}
    }

    .result{
      margin: 14px 0 10px;
      border: 1px solid rgba(124,255,207,.35);
      background: linear-gradient(180deg, rgba(124,255,207,.14), rgba(124,255,207,.06));
      border-radius: var(--radius);
      padding: 14px 14px 12px;
      box-shadow: 0 0 0 8px rgba(124,255,207,.03);
    }
    .result strong{
      display:inline-flex;
      align-items:center;
      gap:.55rem;
      font-size: 1.02rem;
    }
    .pill{
      font-family:var(--mono);
      font-size:.82rem;
      color:var(--muted);
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      padding:.22rem .55rem;
      border-radius: 999px;
    }

    details{
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      border-radius: var(--radius);
      padding: 10px 12px;
      margin-top: 10px;
    }
    summary{
      cursor:pointer;
      list-style:none;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      user-select:none;
      font-weight:600;
    }
    summary::-webkit-details-marker{display:none}
    summary .hint{color:var(--muted); font-weight:500}
    details .content{
      margin-top: 10px;
      color:var(--muted);
      line-height: 1.6;
    }

    .hr{
      height:1px;
      background: var(--line);
      margin: 14px 0;
    }

    footer{
      margin: 26px 0 10px;
      color:var(--muted2);
      text-align:center;
      font-size:.95rem;
    }

    .btnbar{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      margin-top: 12px;
    }

    button.copy{
      appearance:none;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      color: var(--txt);
      padding: .55rem .8rem;
      border-radius: 12px;
      font-family: var(--mono);
      cursor:pointer;
      transition: transform .12s ease, background .12s ease;
    }
    button.copy:hover{transform: translateY(-1px); background: rgba(255,255,255,.06);}
    button.copy:active{transform: translateY(0px);}

    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(0,0,0,.55);
      border: 1px solid var(--line);
      color: var(--txt);
      padding: .6rem .85rem;
      border-radius: 999px;
      box-shadow: var(--shadow);
      opacity: 0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      z-index: 50;
      font-family: var(--mono);
      font-size: .85rem;
      backdrop-filter: blur(10px);
    }
    .toast.show{
      opacity: 1;
      transform: translateX(-50%) translateY(-4px);
    }

    /* accessibility */
    a:focus, button:focus, summary:focus{
      outline: 2px solid rgba(157,231,255,.6);
      outline-offset: 2px;
      border-radius: 10px;
    }

    /* print friendly */
    @media print{
      .gridfx, .btnbar, .toast {display:none !important}
      body{background:#fff; color:#000}
      section.card, header.hero{box-shadow:none}
      .mathblock{background:#fff}
      a{color:#000; text-decoration:none}
    }
  </style>
</head>

<body>
  <div class="gridfx" aria-hidden="true"></div>

  <div class="wrap">
    <header class="hero" id="top">
      <div class="kicker"><span class="dot" aria-hidden="true"></span> Multivariable Calculus • Full Structured Solution</div>
      <h1>Problems 3–5: Tangent Plane + Max Volume (Substitution & Lagrange Multipliers)</h1>
      <p class="sub">
        This article provides a complete, rigorous, beginner-friendly solution in three required parts:
        <strong>Problem Analysis → Strategy & Tips → Full Solution</strong>, including Hessian classification and sanity checks.
      </p>

      <div class="meta" role="list" aria-label="Article metadata">
        <span class="chip" role="listitem" title="Topics">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 7h10M7 12h10M7 17h7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Gradient • Tangent Plane • Optimization • Hessian • Lagrange Multipliers
        </span>
        <span class="chip" role="listitem" title="Feasible region">
          <svg width="18" height="18" viewBoxbox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 3v18M3 12h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          First Octant: \(x,y,z\ge 0\) with \(x^2+y^2+z=1\)
        </span>
        <span class="chip" role="listitem" title="Result preview">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Maximum at \(\left(\tfrac12,\tfrac12,\tfrac12\right)\), \(V_{\max}=\tfrac18\)
        </span>
      </div>

      <nav class="toc" aria-label="Table of contents">
        <strong>Contents</strong>
        <ul>
          <li><a href="#part1">PART 1 — Problem Analysis</a></li>
          <li><a href="#part2">PART 2 — Strategy & Tips</a></li>
          <li><a href="#part3">PART 3 — Full Solution</a></li>
          <li><a href="#p3">Problem 3 — Tangent Plane</a></li>
          <li><a href="#p4">Problem 4 — Maximum Volume (Substitution + Hessian)</a></li>
          <li><a href="#p5">Problem 5 — Maximum Volume (Lagrange Multipliers)</a></li>
        </ul>
      </nav>

      <div class="btnbar" aria-label="Quick actions">
        <button class="copy" type="button" data-copy="#final-answers">Copy final answers</button>
        <button class="copy" type="button" data-copy="#p3-plane">Copy tangent plane</button>
        <button class="copy" type="button" data-copy="#p4-max">Copy max point & volume</button>
      </div>
    </header>

    <main>
      <!-- PART 1 -->
      <section class="card" id="part1">
        <div class="cardhead">
          <div>
            <h2>PART 1 — Problem Analysis (no solving yet)</h2>
            <p>Clarify what is asked, list givens/unknowns, choose the best methods and why they apply.</p>
          </div>
          <div class="badge">Required format</div>
        </div>

        <div class="cardbody twocol">
          <div class="panel">
            <h3>1) Restate the problems (clearly)</h3>
            <ul>
              <li><strong>Problem 3:</strong> For the surface \(x^3y+z^2=3\), find the equation of the tangent plane at \((-1,1,2)\).</li>
              <li><strong>Problem 4:</strong> A box with corner at the origin has opposite corner \(P=(x,y,z)\) in the first octant on \(x^2+y^2+z=1\). Find the \(P\) that maximizes \(V=xyz\). Show reduction to \(f(x,y)\), find and classify the critical point, and justify the maximum.</li>
              <li><strong>Problem 5:</strong> Solve the same maximum-volume problem using Lagrange multipliers for \(V=xyz\) subject to \(x^2+y^2+z=1\) (with \(x>0,y>0\)).</li>
            </ul>
          </div>

          <div class="panel">
            <h3>2) Given / Unknown / Find</h3>
            <ul>
              <li><strong>Given:</strong> \(x^3y+z^2=3\), point \((-1,1,2)\); constraint \(x^2+y^2+z=1\); first octant \(x,y,z\ge 0\).</li>
              <li><strong>Unknowns:</strong> tangent plane equation; maximizing point \(P\); maximum volume \(V_{\max}\).</li>
              <li><strong>Find:</strong> tangent plane; critical point(s) in first quadrant; classify by Hessian; prove global max; Lagrange system and solution.</li>
            </ul>
          </div>

          <div class="panel">
            <h3>3) Principles / tools (and why)</h3>
            <ul>
              <li><strong>Level surfaces:</strong> for \(F(x,y,z)=0\), \(\nabla F\) is normal → tangent plane is easy.</li>
              <li><strong>Constrained optimization:</strong> maximize \(xyz\) with a constraint. Use substitution or Lagrange multipliers.</li>
              <li><strong>Second derivative test:</strong> Hessian determines local max/min/saddle in 2D.</li>
              <li><strong>Boundary check:</strong> ensures a local max is also the max over the whole feasible region.</li>
            </ul>
          </div>

          <div class="panel">
            <h3>4) Approaches & best choice</h3>
            <ul>
              <li><strong>Problem 3:</strong> gradient method is fastest and standard.</li>
              <li><strong>Problem 4:</strong> substitute \(z=1-x^2-y^2\) → reduce to 2D optimization (matches the prompt).</li>
              <li><strong>Problem 5:</strong> Lagrange multipliers are requested and symmetry helps solve quickly.</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- PART 2 -->
      <section class="card" id="part2">
        <div class="cardhead">
          <div>
            <h2>PART 2 — Strategy & Tips (roadmap only)</h2>
            <p>A minimal plan with goals and tools; common mistakes to avoid. No algebra shown here.</p>
          </div>
          <div class="badge">Roadmap</div>
        </div>

        <div class="cardbody">
          <div class="step">
            <h4><span class="num">Step 1</span> Tangent plane setup</h4>
            <p><strong>Goal:</strong> Convert surface to \(F(x,y,z)=0\). <strong>Tool:</strong> define \(F=x^3y+z^2-3\).</p>
          </div>
          <div class="step">
            <h4><span class="num">Step 2</span> Compute the normal vector</h4>
            <p><strong>Goal:</strong> Find \(\nabla F\) and evaluate at the point. <strong>Tool:</strong> partial derivatives.</p>
          </div>
          <div class="step">
            <h4><span class="num">Step 3</span> Write the plane equation</h4>
            <p><strong>Goal:</strong> Use \(\mathbf{n}\cdot(\mathbf{r}-\mathbf{r}_0)=0\). <strong>Tool:</strong> point-normal form.</p>
          </div>

          <div class="hr"></div>

          <div class="step">
            <h4><span class="num">Step 4</span> Reduce the volume problem to 2 variables</h4>
            <p><strong>Goal:</strong> Express \(z\) from \(x^2+y^2+z=1\), substitute into \(V=xyz\). <strong>Tool:</strong> substitution.</p>
          </div>
          <div class="step">
            <h4><span class="num">Step 5</span> Solve for critical points in the interior</h4>
            <p><strong>Goal:</strong> Set \(f_x=0\) and \(f_y=0\) with \(x>0,y>0\). <strong>Tool:</strong> partial derivatives + symmetry.</p>
          </div>
          <div class="step">
            <h4><span class="num">Step 6</span> Classify the critical point</h4>
            <p><strong>Goal:</strong> Use Hessian determinant \(D\) and sign of \(f_{xx}\). <strong>Tool:</strong> second derivative test.</p>
          </div>
          <div class="step">
            <h4><span class="num">Step 7</span> Prove it’s the maximum on the region</h4>
            <p><strong>Goal:</strong> Check boundary (\(x=0\), \(y=0\), or \(z=0\)) gives \(V=0\). <strong>Tool:</strong> boundary analysis.</p>
          </div>

          <div class="hr"></div>

          <div class="step">
            <h4><span class="num">Step 8</span> Lagrange multiplier method</h4>
            <p><strong>Goal:</strong> Solve \(\nabla V=\lambda\nabla g\) plus the constraint. <strong>Tool:</strong> Lagrange multipliers.</p>
          </div>

          <details>
            <summary>
              Common mistakes <span class="hint">tap to expand</span>
              <span class="pill">tips</span>
            </summary>
            <div class="content">
              <ul>
                <li>Forgetting feasibility: \(z\ge 0\Rightarrow x^2+y^2\le 1\) (first octant matters).</li>
                <li>Missing that boundary points force volume \(V=xyz=0\).</li>
                <li>Using Hessian test incorrectly: compute \(D=f_{xx}f_{yy}-(f_{xy})^2\), then check \(f_{xx}\).</li>
                <li>Dropping the condition \(x>0,y>0\) when dividing by \(x\) or \(y\).</li>
              </ul>
            </div>
          </details>
        </div>
      </section>

      <!-- PART 3 -->
      <section class="card" id="part3">
        <div class="cardhead">
          <div>
            <h2>PART 3 — Full Solution</h2>
            <p>Physical intuition first, then complete derivations with boxed results and sanity checks.</p>
          </div>
          <div class="badge">Complete work</div>
        </div>

        <div class="cardbody">
          <div class="panel">
            <h3>Physical / geometric intuition</h3>
            <ul>
              <li><strong>Tangent plane (Problem 3):</strong> A level surface \(F=0\) has normal vector \(\nabla F\). Locally the surface looks planar, and the tangent plane is the plane perpendicular to \(\nabla F\) through the point.</li>
              <li><strong>Max volume (Problems 4–5):</strong> Increasing \(x\) or \(y\) consumes the constraint “budget” quadratically (via \(x^2+y^2\)), reducing \(z\). The optimum balances dimensions rather than over-investing in one direction.</li>
            </ul>
          </div>

          <!-- Problem 3 -->
          <section class="panel" id="p3" style="margin-top:14px;">
            <h3>Problem 3 — Tangent plane to \(x^3y+z^2=3\) at \((-1,1,2)\)</h3>

            <div class="step">
              <h4><span class="num">1</span> Convert to a level surface</h4>
              <p>Define \(F(x,y,z)=x^3y+z^2-3\). The surface is \(F=0\).</p>
              <div class="mathblock">
                \[
                F(x,y,z)=x^3y+z^2-3=0.
                \]
              </div>
            </div>

            <div class="step">
              <h4><span class="num">2</span> Compute the gradient (normal vector)</h4>
              <p>Compute partial derivatives: \(F_x=3x^2y\), \(F_y=x^3\), \(F_z=2z\).</p>
              <div class="mathblock">
                \[
                \nabla F=(3x^2y,\;x^3,\;2z).
                \]
              </div>
              <p>Evaluate at \((-1,1,2)\):</p>
              <div class="mathblock">
                \[
                \nabla F(-1,1,2)=(3\cdot 1\cdot 1,\;(-1)^3,\;2\cdot 2)=(3,-1,4).
                \]
              </div>
            </div>

            <div class="step">
              <h4><span class="num">3</span> Point-normal form of the tangent plane</h4>
              <p>With normal \(\mathbf{n}=(3,-1,4)\) and point \(\mathbf{r}_0=(-1,1,2)\):</p>
              <div class="mathblock">
                \[
                (3,-1,4)\cdot(x+1,\;y-1,\;z-2)=0.
                \]
                \[
                3(x+1)-(y-1)+4(z-2)=0
                \;\Rightarrow\;
                3x-y+4z-4=0.
                \]
              </div>

              <div class="result" id="p3-plane">
                <strong>
                  <span class="pill">Final (Problem 3)</span>
                  \(\boxed{\,3x-y+4z=4\,}\)
                </strong>
                <div class="content" style="margin-top:8px;">
                  <ul>
                    <li><strong>Sanity check:</strong> plug \((-1,1,2)\): \(3(-1)-1+4(2)=4\) ✔</li>
                    <li><strong>Units:</strong> none specified; algebra is consistent.</li>
                    <li><strong>Interpretation:</strong> \(\nabla F\) is perpendicular to the surface → correct plane orientation.</li>
                  </ul>
                </div>
              </div>
            </div>
          </section>

          <!-- Problem 4 -->
          <section class="panel" id="p4" style="margin-top:14px;">
            <h3>Problem 4 — Box of greatest volume in the first octant</h3>

            <div class="step">
              <h4><span class="num">A</span> Reduce to a 2-variable function (as requested)</h4>
              <p>The volume of the box is \(V=xyz\). The constraint \(x^2+y^2+z=1\) gives \(z=1-x^2-y^2\). Substitute into \(V\):</p>
              <div class="mathblock">
                \[
                V(x,y)=xy(1-x^2-y^2)=xy-x^3y-xy^3.
                \]
              </div>
              <p>So maximizing volume is equivalent to maximizing</p>
              <div class="mathblock">
                \[
                f(x,y)=xy-x^3y-xy^3.
                \]
              </div>
              <p>The feasible region in the first quadrant is \(x\ge0\), \(y\ge0\), and \(z\ge0\Rightarrow x^2+y^2\le 1\).</p>
            </div>

            <div class="step">
              <h4><span class="num">B</span> Critical point equations</h4>
              <p>Compute first partial derivatives:</p>
              <div class="mathblock">
                \[
                f_x=\frac{\partial}{\partial x}(xy-x^3y-xy^3)=y-3x^2y-y^3
                =y(1-3x^2-y^2),
                \]
                \[
                f_y=\frac{\partial}{\partial y}(xy-x^3y-xy^3)=x-x^3-3xy^2
                =x(1-x^2-3y^2).
                \]
              </div>
              <p>Thus critical points satisfy</p>
              <div class="mathblock">
                \[
                y(1-3x^2-y^2)=0,\qquad x(1-x^2-3y^2)=0.
                \]
              </div>
              <p>In the first quadrant interior (\(x>0,y>0\)), divide by \(x\) and \(y\):</p>
              <div class="mathblock">
                \[
                3x^2+y^2=1,\qquad x^2+3y^2=1.
                \]
              </div>
              <p>Subtract the equations: \(2x^2-2y^2=0\Rightarrow x^2=y^2\Rightarrow x=y\) (since \(x,y>0\)). Plugging into \(3x^2+y^2=1\) gives \(4x^2=1\Rightarrow x=\tfrac12\). Hence \(y=\tfrac12\).</p>
              <p>Then</p>
              <div class="mathblock">
                \[
                z=1-x^2-y^2=1-\frac14-\frac14=\frac12.
                \]
              </div>
              <div class="result">
                <strong>
                  <span class="pill">Interior critical point</span>
                  \(\boxed{(x,y,z)=\left(\tfrac12,\tfrac12,\tfrac12\right)}\)
                </strong>
              </div>
            </div>

            <div class="step">
              <h4><span class="num">C</span> Second derivative test (Hessian classification)</h4>
              <p>Compute second derivatives:</p>
              <div class="mathblock">
                \[
                f_{xx}=\frac{\partial}{\partial x}(y-3x^2y-y^3)=-6xy,\qquad
                f_{yy}=\frac{\partial}{\partial y}(x-x^3-3xy^2)=-6xy,
                \]
                \[
                f_{xy}=\frac{\partial}{\partial y}(y-3x^2y-y^3)=1-3x^2-3y^2.
                \]
              </div>
              <p>Evaluate at \(x=y=\tfrac12\):</p>
              <div class="mathblock">
                \[
                f_{xx}=f_{yy}=-6\cdot\frac12\cdot\frac12=-\frac32,\qquad
                f_{xy}=1-\frac34-\frac34=-\frac12.
                \]
              </div>
              <p>Hessian determinant:</p>
              <div class="mathblock">
                \[
                D=f_{xx}f_{yy}-(f_{xy})^2
                =\left(-\frac32\right)\left(-\frac32\right)-\left(-\frac12\right)^2
                =\frac94-\frac14=2>0.
                \]
              </div>
              <p>Since \(D>0\) and \(f_{xx}<0\), the point is a <strong>local maximum</strong>.</p>
              <div class="result">
                <strong>
                  <span class="pill">Classification</span>
                  \(\boxed{\text{Local maximum at }(x,y)=\left(\tfrac12,\tfrac12\right)}\)
                </strong>
              </div>
            </div>

            <div class="step">
              <h4><span class="num">D</span> Global maximum in the first quadrant (boundary justification)</h4>
              <p>Compute the value at the critical point:</p>
              <div class="mathblock">
                \[
                f\left(\frac12,\frac12\right)=xy(1-x^2-y^2)
                =\left(\frac14\right)\left(\frac12\right)=\frac18.
                \]
              </div>
              <p>Now check the boundary of the feasible region \(x\ge0,y\ge0,x^2+y^2\le 1\):</p>
              <ul style="color:var(--muted); line-height:1.6;">
                <li>If \(x=0\) or \(y=0\), then \(f=xy(1-x^2-y^2)=0\).</li>
                <li>If \(z=0\), then \(1-x^2-y^2=0\Rightarrow x^2+y^2=1\), so again \(f=xy(0)=0\).</li>
              </ul>
              <p>So the boundary yields \(f=0\), while the interior point yields \(f=\tfrac18>0\). Therefore the interior local maximum is the <strong>global maximum</strong> in the first quadrant.</p>

              <div class="result" id="p4-max">
                <strong>
                  <span class="pill">Final (Problem 4)</span>
                  \(\boxed{P_{\max}=\left(\tfrac12,\tfrac12,\tfrac12\right),\quad V_{\max}=\tfrac18}\)
                </strong>
                <div class="content" style="margin-top:8px;">
                  <ul>
                    <li><strong>Sanity check:</strong> symmetry suggests \(x=y\) at optimum ✔</li>
                    <li><strong>Boundary:</strong> any zero edge ⇒ \(V=0\) ✔</li>
                    <li><strong>Interpretation:</strong> constraint “budget” is optimally split among \(x,y,z\).</li>
                  </ul>
                </div>
              </div>
            </div>
          </section>

          <!-- Problem 5 -->
          <section class="panel" id="p5" style="margin-top:14px;">
            <h3>Problem 5 — Lagrange multipliers solution</h3>

            <div class="step">
              <h4><span class="num">a</span> Lagrange multiplier equations</h4>
              <p>Maximize \(V=xyz\) subject to \(g(x,y,z)=x^2+y^2+z-1=0\). Use \(\nabla V=\lambda \nabla g\).</p>
              <div class="mathblock">
                \[
                \nabla V=(yz,\;xz,\;xy),\qquad
                \nabla g=(2x,\;2y,\;1).
                \]
              </div>
              <div class="mathblock">
                \[
                yz=2\lambda x,\qquad
                xz=2\lambda y,\qquad
                xy=\lambda,\qquad
                x^2+y^2+z=1.
                \]
              </div>
            </div>

            <div class="step">
              <h4><span class="num">b</span> Solve the system (assume \(x>0,y>0\))</h4>
              <p>From \(xy=\lambda\), substitute into the first two equations:</p>
              <div class="mathblock">
                \[
                yz=2(xy)x=2x^2y\Rightarrow z=2x^2,
                \]
                \[
                xz=2(xy)y=2xy^2\Rightarrow z=2y^2.
                \]
              </div>
              <p>Hence \(2x^2=2y^2\Rightarrow x=y\) (since \(x,y>0\)). Put \(y=x\) and \(z=2x^2\) into the constraint:</p>
              <div class="mathblock">
                \[
                x^2+x^2+2x^2=1\Rightarrow 4x^2=1\Rightarrow x=\frac12.
                \]
              </div>
              <p>So \(y=\tfrac12\) and \(z=2x^2=\tfrac12\). Then</p>
              <div class="mathblock">
                \[
                V_{\max}=xyz=\frac12\cdot\frac12\cdot\frac12=\frac18.
                \]
              </div>

              <div class="result">
                <strong>
                  <span class="pill">Final (Problem 5)</span>
                  \(\boxed{(x,y,z)=\left(\tfrac12,\tfrac12,\tfrac12\right),\ \ V_{\max}=\tfrac18}\)
                </strong>
                <div class="content" style="margin-top:8px;">
                  <ul>
                    <li><strong>Consistency check:</strong> matches Problem 4 ✔</li>
                    <li><strong>Interpretation:</strong> Lagrange method enforces balance between “gain in volume” and “cost in constraint.”</li>
                  </ul>
                </div>
              </div>
            </div>
          </section>

          <!-- Final answers block for copying -->
          <section class="panel" id="final-answers" style="margin-top:14px;">
            <h3>Final Answers (quick reference)</h3>
            <div class="mathblock">
              \[
              \textbf{Problem 3:}\quad \boxed{\,3x-y+4z=4\,}
              \]
              \[
              \textbf{Problem 4:}\quad \boxed{\,P_{\max}=\left(\frac12,\frac12,\frac12\right),\quad V_{\max}=\frac18\,}
              \]
              \[
              \textbf{Problem 5:}\quad \boxed{\,P_{\max}=\left(\frac12,\frac12,\frac12\right),\quad V_{\max}=\frac18\,}
              \]
            </div>
          </section>

        </div>
      </section>
    </main>

    <footer>
      <p>
        Built for clean embedding as an article: responsive layout, MathJax rendering, print styling, and copy buttons.
        <br />
        <a href="#top" style="color:var(--a); text-decoration:none; border-bottom:1px dashed rgba(157,231,255,.35);">Back to top ↑</a>
      </p>
    </footer>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite">Copied!</div>

  <script>
    (function(){
      const toast = document.getElementById('toast');

      function showToast(msg){
        toast.textContent = msg || 'Copied!';
        toast.classList.add('show');
        window.clearTimeout(showToast._t);
        showToast._t = window.setTimeout(()=>toast.classList.remove('show'), 1100);
      }

      async function copyText(text){
        try{
          await navigator.clipboard.writeText(text);
          showToast('Copied to clipboard');
        }catch(e){
          // fallback
          const ta = document.createElement('textarea');
          ta.value = text;
          ta.style.position='fixed';
          ta.style.left='-9999px';
          document.body.appendChild(ta);
          ta.select();
          document.execCommand('copy');
          document.body.removeChild(ta);
          showToast('Copied (fallback)');
        }
      }

      document.querySelectorAll('button.copy').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const sel = btn.getAttribute('data-copy');
          const node = document.querySelector(sel);
          if(!node){ showToast('Nothing to copy'); return; }
          // copy plain text (MathJax-friendly)
          const text = node.innerText
            .replace(/\n{3,}/g, '\n\n')
            .trim();
          copyText(text);
        });
      });
    })();
  </script>
</body>
</html>
