<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Problem 3 — Partial Fractions & Antiderivative</title>
  <meta name="description" content="Partial fraction decomposition and antiderivative of (x+3)/(x^2-2x+1), with rigorous beginner-friendly steps and sanity checks." />
  <meta name="theme-color" content="#0b1220" />

  <!-- Open Graph -->
  <meta property="og:title" content="Problem 3 — Partial Fractions & Antiderivative" />
  <meta property="og:description" content="Decomposition + integral of (x+3)/(x^2-2x+1) with structured analysis, roadmap, and checks." />
  <meta property="og:type" content="article" />

  <!-- MathJax (LaTeX rendering) -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['\\[', '\\]'], ['$$', '$$']] },
      options: { skipHtmlTags: ['script','noscript','style','textarea','pre','code'] }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    :root{
      --bg0:#070b14;
      --bg1:#0b1220;
      --card:rgba(255,255,255,.06);
      --card2:rgba(255,255,255,.08);
      --stroke:rgba(255,255,255,.12);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.70);
      --muted2:rgba(255,255,255,.58);
      --accent:#7c5cff;
      --accent2:#00d4ff;
      --good:#35d07f;
      --warn:#ffcc66;
      --bad:#ff5c7a;
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --radius: 22px;
      --radius2: 14px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--sans);
      color:var(--text);
      background:
        radial-gradient(1000px 700px at 20% -10%, rgba(124,92,255,.35), transparent 60%),
        radial-gradient(900px 650px at 90% 10%, rgba(0,212,255,.22), transparent 55%),
        radial-gradient(700px 600px at 50% 120%, rgba(53,208,127,.10), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
      line-height:1.55;
    }

    /* Subtle animated grid */
    .grid{
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:.22;
      background-image:
        linear-gradient(to right, rgba(255,255,255,.06) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.06) 1px, transparent 1px);
      background-size: 52px 52px;
      mask-image: radial-gradient(circle at 50% 15%, rgba(0,0,0,1) 10%, rgba(0,0,0,.6) 50%, rgba(0,0,0,0) 78%);
      animation: drift 18s linear infinite;
    }
    @keyframes drift{
      from{transform:translate3d(0,0,0)}
      to{transform:translate3d(52px,52px,0)}
    }

    .wrap{
      width:min(1040px, calc(100% - 40px));
      margin: 34px auto 72px;
      position:relative;
    }

    header.hero{
      position:relative;
      border:1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .hero .inner{
      padding: 28px 26px 22px;
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap: 18px;
      align-items:start;
    }

    @media (max-width: 880px){
      .hero .inner{grid-template-columns:1fr}
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 8px 12px;
      border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.16);
      color: var(--muted);
      font-size: 13px;
      letter-spacing:.2px;
      backdrop-filter: blur(10px);
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: conic-gradient(from 0deg, var(--accent), var(--accent2), var(--good), var(--accent));
      box-shadow: 0 0 18px rgba(124,92,255,.55);
    }

    h1{
      margin:14px 0 10px;
      font-size: clamp(26px, 3.3vw, 42px);
      line-height:1.15;
      letter-spacing:-.4px;
    }
    .subtitle{
      color:var(--muted);
      font-size: 15px;
      max-width: 62ch;
      margin:0 0 10px;
    }

    .hero-card{
      border:1px solid var(--stroke);
      border-radius: var(--radius2);
      background: rgba(0,0,0,.16);
      padding: 16px 16px 14px;
      backdrop-filter: blur(12px);
    }
    .hero-card .label{
      color: var(--muted2);
      font-size: 12px;
      letter-spacing:.18em;
      text-transform: uppercase;
      margin-bottom: 10px;
    }
    .eq{
      font-size: 16px;
      color: var(--text);
    }

    /* Navigation / TOC */
    nav.toc{
      margin-top: 16px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .chip{
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.05);
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 13px;
      color: var(--muted);
      text-decoration:none;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      user-select:none;
    }
    .chip:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.08);
      border-color: rgba(255,255,255,.22);
      color: var(--text);
    }

    /* Main sections */
    main{
      margin-top: 22px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 18px;
    }

    section.card{
      border:1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      border-radius: var(--radius);
      box-shadow: 0 14px 40px rgba(0,0,0,.30);
      overflow:hidden;
      position:relative;
    }
    .card .hd{
      padding: 18px 22px 14px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:14px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.12);
    }
    .card h2{
      margin:0;
      font-size: 18px;
      letter-spacing:.2px;
    }
    .card .meta{
      color: var(--muted2);
      font-size: 12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .pill{
      padding: 6px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
    }
    .card .bd{
      padding: 18px 22px 22px;
    }

    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    @media (max-width: 860px){
      .grid2{grid-template-columns:1fr}
    }

    .box{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.12);
      border-radius: var(--radius2);
      padding: 14px 14px 12px;
    }
    .box h3{
      margin:0 0 10px;
      font-size: 14px;
      color: var(--text);
      letter-spacing:.2px;
    }
    .muted{color:var(--muted)}
    ul{margin:10px 0 0 20px; padding:0}
    li{margin:6px 0}

    .approaches{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 12px;
      margin-top: 10px;
    }
    @media (max-width: 980px){
      .approaches{grid-template-columns:1fr}
    }

    .approach{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.14);
      border-radius: var(--radius2);
      padding: 12px 12px 10px;
      position:relative;
      overflow:hidden;
    }
    .approach::before{
      content:"";
      position:absolute;
      inset:-2px -2px auto -2px;
      height:3px;
      background: linear-gradient(90deg, var(--accent), var(--accent2), var(--good));
      opacity:.85;
    }
    .approach .t{
      font-weight: 650;
      font-size: 13px;
      margin: 2px 0 8px;
    }
    .approach .p{
      color: var(--muted);
      font-size: 13px;
      margin:0;
    }

    /* Roadmap stepper */
    .stepper{
      display:grid;
      gap:10px;
      margin-top: 10px;
    }
    details.step{
      border:1px solid rgba(255,255,255,.12);
      border-radius: var(--radius2);
      background: rgba(0,0,0,.12);
      overflow:hidden;
    }
    details.step summary{
      cursor:pointer;
      list-style:none;
      padding: 12px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      user-select:none;
    }
    details.step summary::-webkit-details-marker{display:none}
    .sleft{
      display:flex; align-items:center; gap:10px;
      min-width:0;
    }
    .num{
      width:26px;height:26px;border-radius:10px;
      display:grid; place-items:center;
      font-family: var(--mono);
      font-size: 12px;
      color: rgba(255,255,255,.9);
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      flex:0 0 auto;
    }
    .stitle{font-weight:650; font-size: 13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
    .chev{
      opacity:.7; font-size: 14px;
      transition: transform .18s ease;
    }
    details[open] .chev{transform: rotate(180deg)}
    .sbody{
      padding: 0 12px 12px;
      color: var(--muted);
      font-size: 13px;
    }
    .k{
      display:inline-block;
      font-family: var(--mono);
      font-size: 12px;
      padding: 2px 6px;
      border-radius: 8px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      margin: 0 2px;
      color: rgba(255,255,255,.85);
    }

    /* Solution formatting */
    .math-block{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.14);
      border-radius: var(--radius2);
      padding: 12px 14px;
      margin: 12px 0;
      overflow:auto;
    }
    .callout{
      border:1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(124,92,255,.18), rgba(0,0,0,.10));
      border-radius: var(--radius2);
      padding: 12px 14px;
      margin: 12px 0;
    }
    .callout strong{color: rgba(255,255,255,.95)}
    .two{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 860px){
      .two{grid-template-columns:1fr}
    }

    .final{
      border:1px solid rgba(53,208,127,.35);
      background: linear-gradient(180deg, rgba(53,208,127,.16), rgba(0,0,0,.10));
      border-radius: var(--radius);
      padding: 16px 16px 14px;
      margin-top: 14px;
      position:relative;
      overflow:hidden;
    }
    .final::before{
      content:"";
      position:absolute;
      inset:-2px -2px auto -2px;
      height:3px;
      background: linear-gradient(90deg, var(--good), var(--accent2), var(--accent));
      opacity:.9;
    }
    .final .ft{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .final h3{margin:0; font-size: 15px; letter-spacing:.2px}
    .btns{display:flex; gap:10px; flex-wrap:wrap}
    button.btn{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 8px 10px;
      border-radius: 12px;
      cursor:pointer;
      font-size: 13px;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    button.btn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.10);
      border-color: rgba(255,255,255,.22);
    }

    /* Footer */
    footer{
      margin-top: 18px;
      color: var(--muted2);
      font-size: 12px;
      text-align:center;
    }
    .sr-only{
      position:absolute; width:1px;height:1px;
      padding:0;margin:-1px; overflow:hidden; clip:rect(0,0,0,0);
      border:0;
    }
  </style>
</head>

<body>
  <div class="grid" aria-hidden="true"></div>

  <div class="wrap">
    <header class="hero" id="top">
      <div class="inner">
        <div>
          <div class="badge"><span class="dot"></span> Exam-Style Calculus • Problem 3</div>
          <h1>Partial Fractions & Antiderivative</h1>
          <p class="subtitle">
            Decompose a rational function with a <em>repeated linear factor</em>, then integrate it cleanly.
            The structure \((x-1)^2\) signals a second-order pole, yielding both a log term and an inverse term.
          </p>

          <nav class="toc" aria-label="Table of contents">
            <a class="chip" href="#analysis">Part 1 — Analysis</a>
            <a class="chip" href="#strategy">Part 2 — Strategy</a>
            <a class="chip" href="#solution">Part 3 — Full Solution</a>
            <a class="chip" href="#checks">Sanity Checks</a>
          </nav>
        </div>

        <aside class="hero-card">
          <div class="label">Given</div>
          <div class="eq">
            \[
              \frac{x+3}{x^2-2x+1}
            \]
          </div>
          <div class="label" style="margin-top:14px;">Tasks</div>
          <div class="muted" style="font-size:13px">
            (a) Find its partial fraction decomposition.<br />
            (b) Use it to compute \(\displaystyle \int \frac{x+3}{x^2-2x+1}\,dx\).
          </div>
        </aside>
      </div>
    </header>

    <main>
      <!-- PART 1 -->
      <section class="card" id="analysis">
        <div class="hd">
          <h2>PART 1 — Problem Analysis (no solving yet)</h2>
          <div class="meta">
            <span class="pill">Structure first</span>
            <span class="pill">Choose method</span>
            <span class="pill">No algebra yet</span>
          </div>
        </div>
        <div class="bd">
          <div class="grid2">
            <div class="box">
              <h3>1) Restate the problem</h3>
              <p class="muted">
                You are given the rational function \(\frac{x+3}{x^2-2x+1}\).
                First rewrite it as a sum of simpler terms (partial fractions). Then integrate the function
                using that decomposition.
              </p>
            </div>

            <div class="box">
              <h3>2) Given / Unknowns / Find</h3>
              <ul class="muted">
                <li><strong>Given:</strong> \(\displaystyle \frac{x+3}{x^2-2x+1}\)</li>
                <li><strong>Unknowns:</strong> coefficients in the decomposition</li>
                <li><strong>Find:</strong> (a) decomposition, (b) antiderivative</li>
              </ul>
            </div>
          </div>

          <div class="box" style="margin-top:14px">
            <h3>3) Relevant principles (and why they apply)</h3>
            <ul class="muted">
              <li>
                <strong>Factoring polynomials:</strong> determines whether the denominator has distinct or repeated factors, which controls the correct partial-fraction template.
              </li>
              <li>
                <strong>Partial fraction decomposition:</strong> converts a rational function into standard integrable pieces.
              </li>
              <li>
                <strong>Standard integrals:</strong> \(\int \frac{1}{x-a}dx = \ln|x-a|+C\) and \(\int (x-a)^{-2}dx = -(x-a)^{-1}+C\).
              </li>
            </ul>
            <p class="muted" style="margin-top:10px">
              <em>Physics lens:</em> repeated poles are common in response functions and Green’s functions; splitting terms isolates “log-type” and “power-law” contributions.
            </p>
          </div>

          <div class="box" style="margin-top:14px">
            <h3>4) Candidate approaches (compare)</h3>
            <div class="approaches">
              <div class="approach">
                <div class="t">Approach A — Partial Fractions</div>
                <p class="p">Best when denominator factors nicely. Here it becomes a repeated linear factor, making the decomposition direct and the integral standard.</p>
              </div>
              <div class="approach">
                <div class="t">Approach B — Substitution \(u=x^2-2x+1\)</div>
                <p class="p">Works cleanly if numerator matches \(u'\). But \(u'=2x-2\) does not align with \(x+3\) without additional splitting.</p>
              </div>
              <div class="approach">
                <div class="t">Approach C — Rewrite using derivative of denominator</div>
                <p class="p">Express \(x+3\) as a multiple of \((2x-2)\) plus a constant. It’s valid, but partial fractions is simpler given \((x-1)^2\).</p>
              </div>
            </div>
          </div>

          <div class="callout" style="margin-top:14px">
            <strong>Chosen method:</strong> <span class="muted">Partial fractions, because the denominator is a repeated factor \((x-1)^2\), producing a minimal two-term template and immediate standard integrals.</span>
          </div>
        </div>
      </section>

      <!-- PART 2 -->
      <section class="card" id="strategy">
        <div class="hd">
          <h2>PART 2 — Strategy & Tips (roadmap only)</h2>
          <div class="meta">
            <span class="pill">5–10 steps</span>
            <span class="pill">Common mistakes</span>
          </div>
        </div>
        <div class="bd">
          <div class="box">
            <h3>Roadmap</h3>
            <div class="stepper" role="list">
              <details class="step" open>
                <summary role="listitem">
                  <div class="sleft">
                    <div class="num">1</div>
                    <div class="stitle">Factor the denominator</div>
                  </div>
                  <div class="chev">▾</div>
                </summary>
                <div class="sbody">
                  Goal: reveal repeated vs distinct factors.<br />
                  Tool: factoring / completing the square → <span class="k">(x-1)^2</span>.
                </div>
              </details>

              <details class="step">
                <summary role="listitem">
                  <div class="sleft">
                    <div class="num">2</div>
                    <div class="stitle">Write the correct partial fraction template</div>
                  </div>
                  <div class="chev">▾</div>
                </summary>
                <div class="sbody">
                  Goal: set up the simplest sum that matches a repeated linear factor.<br />
                  Tool: rule for \(\frac{P(x)}{(x-a)^2}\): <span class="k">A/(x-a) + B/(x-a)^2</span>.
                </div>
              </details>

              <details class="step">
                <summary role="listitem">
                  <div class="sleft">
                    <div class="num">3</div>
                    <div class="stitle">Solve for constants \(A,B\)</div>
                  </div>
                  <div class="chev">▾</div>
                </summary>
                <div class="sbody">
                  Goal: match numerators after combining.<br />
                  Tool: coefficient matching (or plug convenient \(x\)).
                </div>
              </details>

              <details class="step">
                <summary role="listitem">
                  <div class="sleft">
                    <div class="num">4</div>
                    <div class="stitle">Integrate term-by-term</div>
                  </div>
                  <div class="chev">▾</div>
                </summary>
                <div class="sbody">
                  Goal: use standard primitives.<br />
                  Tool: \(\int\frac{1}{x-1}dx=\ln|x-1|\), \(\int (x-1)^{-2}dx=-(x-1)^{-1}\).
                </div>
              </details>

              <details class="step">
                <summary role="listitem">
                  <div class="sleft">
                    <div class="num">5</div>
                    <div class="stitle">Differentiate to verify</div>
                  </div>
                  <div class="chev">▾</div>
                </summary>
                <div class="sbody">
                  Goal: confirm the derivative matches the original integrand.<br />
                  Tool: quick derivative check and simplification.
                </div>
              </details>
            </div>
          </div>

          <div class="two" style="margin-top:14px">
            <div class="box">
              <h3>Common mistakes</h3>
              <ul class="muted">
                <li>Using only \(\frac{A}{x-1}\) and forgetting \(\frac{B}{(x-1)^2}\) for a repeated factor.</li>
                <li>Sign error: \(\int (x-1)^{-2}dx = -(x-1)^{-1}+C\).</li>
                <li>Missing absolute value: \(\ln|x-1|\), not \(\ln(x-1)\) (in real calculus).</li>
              </ul>
            </div>

            <div class="box">
              <h3>Quick tips</h3>
              <ul class="muted">
                <li>Whenever you see \(x^2-2x+1\), immediately think \((x-1)^2\).</li>
                <li>A repeated pole means you’ll typically get a log term <em>and</em> a rational term in the antiderivative.</li>
                <li>After you finish, a derivative check is faster than redoing the integral.</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- PART 3 -->
      <section class="card" id="solution">
        <div class="hd">
          <h2>PART 3 — Full Solution</h2>
          <div class="meta">
            <span class="pill">Intuition → Steps</span>
            <span class="pill">Final boxed</span>
            <span class="pill">Checks</span>
          </div>
        </div>
        <div class="bd">
          <div class="callout">
            <strong>Physical / conceptual intuition:</strong>
            <span class="muted">
              The denominator \((x-1)^2\) indicates a <em>second-order pole</em> at \(x=1\).
              Decomposing into \(\frac{1}{x-1}\) and \(\frac{1}{(x-1)^2}\) isolates the two basic singular behaviors:
              a log-producing term and a stronger inverse-power term. This is exactly why partial fractions makes integration immediate.
            </span>
          </div>

          <div class="box">
            <h3>(a) Partial fraction decomposition</h3>

            <div class="math-block">
              <p class="muted" style="margin:0 0 8px">
                First factor the denominator:
              </p>
              \[
                x^2 - 2x + 1 = (x-1)^2.
              \]
            </div>

            <div class="math-block">
              <p class="muted" style="margin:0 0 8px">
                For a repeated linear factor \((x-1)^2\), use the template:
              </p>
              \[
                \frac{x+3}{(x-1)^2}=\frac{A}{x-1}+\frac{B}{(x-1)^2}.
              \]
            </div>

            <div class="math-block">
              <p class="muted" style="margin:0 0 8px">
                Combine the right-hand side over \((x-1)^2\):
              </p>
              \[
                \frac{A}{x-1}+\frac{B}{(x-1)^2}
                =\frac{A(x-1)+B}{(x-1)^2}.
              \]
              So numerator matching gives
              \[
                x+3=A(x-1)+B.
              \]
            </div>

            <div class="math-block">
              <p class="muted" style="margin:0 0 8px">
                Expand and match coefficients:
              </p>
              \[
                A(x-1)+B = Ax - A + B.
              \]
              Compare with \(x+3\):
              \[
                A=1,\qquad -A+B=3 \Rightarrow -1+B=3 \Rightarrow B=4.
              \]
            </div>

            <div class="final" id="final-a">
              <div class="ft">
                <h3>Final result (a)</h3>
                <div class="btns">
                  <button class="btn" data-copy="#copy-a">Copy LaTeX</button>
                  <button class="btn" data-jump="#final-b">Jump to (b)</button>
                </div>
              </div>

              <div class="math-block" style="margin-bottom:0">
                \[
                  \boxed{
                  \frac{x+3}{x^2-2x+1}
                  =\frac{1}{x-1}+\frac{4}{(x-1)^2}
                  }
                \]
              </div>

              <textarea class="sr-only" id="copy-a">
\boxed{\frac{x+3}{x^2-2x+1}=\frac{1}{x-1}+\frac{4}{(x-1)^2}}
              </textarea>
            </div>
          </div>

          <div class="box" style="margin-top:14px">
            <h3>(b) Antiderivative using the decomposition</h3>

            <div class="math-block">
              <p class="muted" style="margin:0 0 8px">
                Substitute the decomposition from (a):
              </p>
              \[
                \int \frac{x+3}{x^2-2x+1}\,dx
                =\int\left(\frac{1}{x-1}+\frac{4}{(x-1)^2}\right)\,dx.
              \]
            </div>

            <div class="math-block">
              <p class="muted" style="margin:0 0 8px">
                Integrate term-by-term:
              </p>
              \[
                \int\frac{1}{x-1}\,dx = \ln|x-1|+C_1,
              \]
              and
              \[
                \int \frac{4}{(x-1)^2}\,dx
                =4\int (x-1)^{-2}\,dx
                =4\left(\frac{(x-1)^{-1}}{-1}\right)
                =-\frac{4}{x-1}.
              \]
            </div>

            <div class="final" id="final-b">
              <div class="ft">
                <h3>Final result (b)</h3>
                <div class="btns">
                  <button class="btn" data-copy="#copy-b">Copy LaTeX</button>
                  <button class="btn" data-jump="#checks">Sanity checks</button>
                </div>
              </div>

              <div class="math-block" style="margin-bottom:0">
                \[
                  \boxed{
                  \int \frac{x+3}{x^2-2x+1}\,dx
                  = \ln|x-1|-\frac{4}{x-1}+C
                  }
                \]
              </div>

              <textarea class="sr-only" id="copy-b">
\boxed{\int \frac{x+3}{x^2-2x+1}\,dx = \ln|x-1|-\frac{4}{x-1}+C}
              </textarea>
            </div>
          </div>
        </div>
      </section>

      <!-- CHECKS -->
      <section class="card" id="checks">
        <div class="hd">
          <h2>Sanity Checks (rigorous + beginner-friendly)</h2>
          <div class="meta">
            <span class="pill">Derivative check</span>
            <span class="pill">Units</span>
            <span class="pill">Limits</span>
          </div>
        </div>
        <div class="bd">
          <div class="two">
            <div class="box">
              <h3>1) Differentiate to verify</h3>
              <p class="muted">
                Let \(F(x)=\ln|x-1|-\frac{4}{x-1}\). Then
              </p>
              <div class="math-block">
                \[
                  F'(x)=\frac{1}{x-1}-4\frac{d}{dx}(x-1)^{-1}
                  =\frac{1}{x-1}-4\left(- (x-1)^{-2}\right)
                  =\frac{1}{x-1}+\frac{4}{(x-1)^2}.
                \]
                Combine:
                \[
                  \frac{1}{x-1}+\frac{4}{(x-1)^2}
                  =\frac{(x-1)+4}{(x-1)^2}
                  =\frac{x+3}{(x-1)^2}
                  =\frac{x+3}{x^2-2x+1}.
                \]
              </div>
              <p class="muted">So the derivative matches the integrand exactly.</p>
            </div>

            <div class="box">
              <h3>2) Units + physical interpretation</h3>
              <ul class="muted">
                <li><strong>Units:</strong> In pure math, \(x\) is dimensionless; logs require dimensionless arguments. In physics, you’d write \(\ln| (x-1)/x_0 |\) if \(x\) carried units.</li>
                <li><strong>Interpretation:</strong> The repeated factor \((x-1)^2\) signals a second-order singularity. The antiderivative naturally splits into a slow-growing log term and a dominant \(\sim 1/(x-1)\) blow-up near the pole.</li>
              </ul>
            </div>
          </div>

          <div class="two" style="margin-top:14px">
            <div class="box">
              <h3>3) Limiting cases</h3>
              <ul class="muted">
                <li>
                  As \(x\to\infty\):
                  \(\frac{x+3}{(x-1)^2}\sim \frac{1}{x}\Rightarrow\) integral should behave like \(\ln x\).
                  Our \( \ln|x-1|-\frac{4}{x-1}\) does exactly that.
                </li>
                <li>
                  As \(x\to 1\):
                  integrand \(\sim \frac{4}{(x-1)^2}\Rightarrow\) antiderivative \(\sim -\frac{4}{x-1}\).
                  That dominant blow-up appears explicitly.
                </li>
              </ul>
            </div>

            <div class="box">
              <h3>4) Quick “template recognition”</h3>
              <p class="muted">
                If you see \(\displaystyle \frac{\text{linear}}{(x-a)^2}\), almost always try:
              </p>
              <div class="math-block">
                \[
                  \frac{mx+b}{(x-a)^2}=\frac{A}{x-a}+\frac{B}{(x-a)^2}.
                \]
              </div>
              <p class="muted">
                This instantly converts the integral into a log plus a power term.
              </p>
            </div>
          </div>

          <footer>
            <p>
              Built for embedding as an article. Uses MathJax for LaTeX, semantic sections, and copy buttons for the final answers.
            </p>
          </footer>
        </div>
      </section>
    </main>
  </div>

  <script>
    // Smooth jump buttons
    document.addEventListener("click", (e) => {
      const btn = e.target.closest("[data-jump]");
      if (!btn) return;
      const sel = btn.getAttribute("data-jump");
      const el = document.querySelector(sel);
      if (!el) return;
      el.scrollIntoView({ behavior: "smooth", block: "start" });
    });

    // Copy LaTeX buttons
    async function copyText(text) {
      try {
        await navigator.clipboard.writeText(text);
        return true;
      } catch {
        // Fallback
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        const ok = document.execCommand("copy");
        document.body.removeChild(ta);
        return ok;
      }
    }

    document.addEventListener("click", async (e) => {
      const btn = e.target.closest("[data-copy]");
      if (!btn) return;
      const sel = btn.getAttribute("data-copy");
      const ta = document.querySelector(sel);
      if (!ta) return;

      const ok = await copyText(ta.value.trim());
      const original = btn.textContent;
      btn.textContent = ok ? "Copied ✓" : "Copy failed";
      btn.style.borderColor = ok ? "rgba(53,208,127,.55)" : "rgba(255,92,122,.55)";
      btn.style.background = ok ? "rgba(53,208,127,.12)" : "rgba(255,92,122,.12)";

      setTimeout(() => {
        btn.textContent = original;
        btn.style.borderColor = "";
        btn.style.background = "";
      }, 1200);
    });

    // Optional: reveal deep link hash smoothly on load
    window.addEventListener("load", () => {
      if (location.hash) {
        const el = document.querySelector(location.hash);
        if (el) el.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    });
  </script>
</body>
</html>
