<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Partial Fractions — f(z)=1/(z²−1)²</title>

  <!-- Typography -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- MathJax (LaTeX rendering) -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)'], ['$', '$']], displayMath: [['\\[','\\]']] },
      options: { skipHtmlTags: ['script','noscript','style','textarea','pre','code'] }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    :root{
      --bg0:#06070b;
      --bg1:#0b0e16;
      --card:#0f1424cc;
      --card2:#0b1020cc;
      --text:#eaf0ff;
      --muted:#b8c2dd;
      --muted2:#8c97b3;

      --a:#7c5cff;
      --b:#24d6a3;
      --c:#31a7ff;
      --warn:#ffd166;
      --danger:#ff5c7a;

      --ring: rgba(124,92,255,.35);
      --shadow: 0 18px 55px rgba(0,0,0,.55);
      --shadow2: 0 10px 25px rgba(0,0,0,.35);

      --radius: 22px;
      --radius2: 14px;

      --mono: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 12% 18%, rgba(124,92,255,.23), transparent 60%),
        radial-gradient(1000px 700px at 88% 26%, rgba(36,214,163,.18), transparent 62%),
        radial-gradient(900px 650px at 58% 92%, rgba(49,167,255,.16), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    .wrap{
      width:min(1100px, 92vw);
      margin: clamp(22px, 4.6vw, 52px) auto;
      position:relative;
    }

    /* Ambient grid */
    .grid{
      position:absolute; inset:-140px -60px auto -60px;
      height:420px;
      background:
        linear-gradient(to right, rgba(255,255,255,.06) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.06) 1px, transparent 1px);
      background-size: 42px 42px;
      mask-image: radial-gradient(closest-side, rgba(0,0,0,.55), transparent);
      opacity:.45;
      pointer-events:none;
      filter: blur(.1px);
    }

    header.hero{
      border-radius: calc(var(--radius) + 10px);
      background: linear-gradient(135deg, rgba(124,92,255,.18), rgba(36,214,163,.12) 40%, rgba(49,167,255,.10));
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.10);
      overflow:hidden;
      position:relative;
    }

    .hero-inner{
      padding: clamp(18px, 3.6vw, 36px);
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 18px;
      align-items:center;
    }

    .badge-row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-bottom: 14px;
    }

    .badge{
      font-size: 12px;
      letter-spacing:.09em;
      text-transform:uppercase;
      padding:8px 10px;
      border-radius: 999px;
      background: rgba(15,20,36,.55);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow2);
      color: var(--muted);
      display:inline-flex;
      gap:8px;
      align-items:center;
    }
    .dot{
      width:8px; height:8px; border-radius:999px;
      background: linear-gradient(135deg, var(--a), var(--b));
      box-shadow: 0 0 0 5px rgba(124,92,255,.15);
    }

    h1{
      margin:0;
      font-size: clamp(22px, 3.2vw, 34px);
      line-height:1.12;
      letter-spacing:-.02em;
    }
    .subtitle{
      color: var(--muted);
      margin: 10px 0 0;
      line-height:1.6;
      max-width: 68ch;
      font-size: 15.5px;
    }

    .hero-panel{
      background: rgba(6,7,11,.35);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      padding: 16px;
      backdrop-filter: blur(10px);
    }

    .mini{
      display:grid;
      gap: 10px;
    }
    .mini .kpi{
      border-radius: 16px;
      padding: 12px 12px;
      background: rgba(15,20,36,.55);
      border: 1px solid rgba(255,255,255,.10);
    }
    .kpi .k{
      font-size: 12px;
      color: var(--muted2);
      letter-spacing:.08em;
      text-transform:uppercase;
      margin-bottom:6px;
      display:flex; justify-content:space-between; align-items:center;
      gap:10px;
    }
    .pill{
      font-family: var(--mono);
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(124,92,255,.18);
      border: 1px solid rgba(124,92,255,.30);
      color: #dcd6ff;
    }
    .kpi .v{
      font-family: var(--mono);
      font-size: 14px;
      color: #eaf0ff;
      line-height:1.45;
      overflow:auto;
      white-space:nowrap;
    }

    /* Layout grid */
    .content{
      margin-top: 18px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }

    .card{
      background: rgba(15,20,36,.62);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }

    .card-head{
      padding: 18px 20px 12px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 14px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      background: linear-gradient(180deg, rgba(255,255,255,.04), transparent);
    }

    .card-title{
      display:flex;
      flex-direction:column;
      gap: 6px;
      min-width: 0;
    }
    .card-title h2{
      margin:0;
      font-size: 16px;
      letter-spacing: -.01em;
      display:flex;
      align-items:center;
      gap: 10px;
    }
    .chip{
      font-family: var(--mono);
      font-size: 12px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(6,7,11,.35);
      color: var(--muted);
    }
    .card-title p{
      margin:0;
      color: var(--muted);
      line-height:1.6;
      font-size: 14px;
    }

    .card-body{
      padding: 14px 20px 18px;
    }

    .cols{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: 14px;
    }

    @media (max-width: 900px){
      .hero-inner{ grid-template-columns:1fr; }
      .cols{ grid-template-columns:1fr; }
    }

    /* Lists & blocks */
    ul.clean{
      margin: 10px 0 0;
      padding: 0 0 0 18px;
      color: var(--text);
      line-height:1.65;
    }
    ul.clean li{ margin: 6px 0; color: var(--muted); }
    ul.clean b{ color: var(--text); }

    .callout{
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,.12);
      padding: 14px 14px;
      background: linear-gradient(135deg, rgba(124,92,255,.12), rgba(36,214,163,.08));
      box-shadow: 0 12px 28px rgba(0,0,0,.28);
      margin-top: 10px;
    }
    .callout h3{
      margin:0 0 8px;
      font-size: 14px;
      letter-spacing:-.01em;
      display:flex; align-items:center; gap:10px;
    }
    .callout p{ margin:0; color: var(--muted); line-height:1.65; font-size: 14px; }

    .stepper{
      display:grid;
      gap: 10px;
      margin-top: 10px;
    }
    .step{
      display:grid;
      grid-template-columns: 42px 1fr;
      gap: 12px;
      padding: 12px 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(6,7,11,.25);
    }
    .step .n{
      width: 42px; height:42px;
      border-radius: 14px;
      display:grid; place-items:center;
      font-family: var(--mono);
      font-weight: 700;
      color:#0b0e16;
      background: linear-gradient(135deg, var(--a), var(--c));
      box-shadow: 0 10px 22px rgba(124,92,255,.22);
    }
    .step .t{
      display:flex;
      flex-direction:column;
      gap: 4px;
      min-width: 0;
    }
    .step .t b{ color: var(--text); }
    .step .t span{ color: var(--muted); line-height:1.55; font-size: 14px; }

    .mathblock{
      margin: 10px 0;
      padding: 12px 12px;
      border-radius: 18px;
      background: rgba(6,7,11,.35);
      border: 1px solid rgba(255,255,255,.10);
      overflow:auto;
    }
    .mathblock code{
      font-family: var(--mono);
      font-size: 13px;
      color: #dbe6ff;
      white-space: nowrap;
    }

    .danger{
      border-left: 4px solid rgba(255,92,122,.85);
      background: rgba(255,92,122,.08);
    }
    .warn{
      border-left: 4px solid rgba(255,209,102,.85);
      background: rgba(255,209,102,.09);
    }
    .ok{
      border-left: 4px solid rgba(36,214,163,.85);
      background: rgba(36,214,163,.08);
    }

    .hr{
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.10), transparent);
      margin: 14px 0;
    }

    .final{
      border-radius: calc(var(--radius) + 6px);
      background:
        radial-gradient(900px 300px at 20% 20%, rgba(124,92,255,.18), transparent 60%),
        radial-gradient(900px 300px at 90% 80%, rgba(36,214,163,.16), transparent 60%),
        rgba(6,7,11,.35);
      border: 1px solid rgba(255,255,255,.12);
      padding: 16px 16px;
      box-shadow: var(--shadow2);
    }

    .final .label{
      display:flex; gap:10px; align-items:center;
      margin-bottom: 10px;
    }
    .spark{
      width: 26px; height:26px; border-radius: 10px;
      background: linear-gradient(135deg, var(--b), var(--c));
      box-shadow: 0 12px 24px rgba(36,214,163,.18);
    }
    .final h3{
      margin:0;
      font-size: 14px;
      letter-spacing:-.01em;
    }
    .final .box{
      border-radius: 18px;
      padding: 12px 12px;
      background: rgba(15,20,36,.62);
      border: 1px solid rgba(255,255,255,.10);
      overflow:auto;
    }

    details{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(6,7,11,.25);
      padding: 10px 12px;
      margin-top: 10px;
    }
    summary{
      cursor:pointer;
      color: var(--text);
      font-weight: 650;
      letter-spacing:-.01em;
      display:flex;
      align-items:center;
      gap:10px;
      user-select:none;
    }
    summary::-webkit-details-marker{ display:none; }
    summary:before{
      content:"▸";
      font-family: var(--mono);
      color: var(--muted2);
      transform: translateY(-1px);
    }
    details[open] summary:before{ content:"▾"; }
    details .inside{
      margin-top: 10px;
      color: var(--muted);
      line-height:1.7;
      font-size: 14px;
    }

    .footer-note{
      margin-top: 14px;
      color: var(--muted2);
      font-size: 12.5px;
      line-height:1.6;
      text-align:center;
      opacity:.9;
    }

    /* Accessibility focus ring */
    a, button, summary{
      outline: none;
    }
    a:focus-visible, button:focus-visible, summary:focus-visible{
      box-shadow: 0 0 0 4px var(--ring);
      border-radius: 12px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="grid" aria-hidden="true"></div>

    <!-- HERO -->
    <header class="hero" role="banner">
      <div class="hero-inner">
        <div>
          <div class="badge-row">
            <span class="badge"><span class="dot"></span> Complex Variables / Partial Fractions</span>
            <span class="badge">Double poles at \(z=\pm 1\)</span>
            <span class="badge">Symmetry (even function)</span>
          </div>

          <h1>Partial Fraction Decomposition of \(\;f(z)=\dfrac{1}{(z^2-1)^2}\;\)</h1>
          <p class="subtitle">
            We decompose a rational function with repeated linear factors into a sum of simple terms.
            This is the same “pole-by-pole” separation used in physics for residues, Green’s functions,
            and inverse transforms.
          </p>
        </div>

        <aside class="hero-panel" aria-label="Quick facts">
          <div class="mini">
            <div class="kpi">
              <div class="k">Goal <span class="pill">Find A,B,C,D</span></div>
              <div class="v">\(\frac{1}{(z^2-1)^2}=\frac{A}{z-1}+\frac{B}{(z-1)^2}+\frac{C}{z+1}+\frac{D}{(z+1)^2}\)</div>
            </div>
            <div class="kpi">
              <div class="k">Key Symmetry <span class="pill">even</span></div>
              <div class="v">\(\;f(-z)=f(z)\Rightarrow C=-A,\;D=B\)</div>
            </div>
            <div class="kpi">
              <div class="k">Final Form <span class="pill">boxed</span></div>
              <div class="v">\(\;\boxed{\frac{1}{(z^2-1)^2}=-\frac{1}{4}\frac{1}{z-1}+\frac{1}{4}\frac{1}{(z-1)^2}+\frac{1}{4}\frac{1}{z+1}+\frac{1}{4}\frac{1}{(z+1)^2}}\)</div>
            </div>
          </div>
        </aside>
      </div>
    </header>

    <main class="content" role="main">

      <!-- PART 1 -->
      <section class="card" id="part1">
        <div class="card-head">
          <div class="card-title">
            <h2>PART 1 — Problem Analysis <span class="chip">no solving yet</span></h2>
            <p>Clarify what’s given, what’s unknown, and why the method works (physics intuition included).</p>
          </div>
          <span class="chip">Structure → Poles → Symmetry</span>
        </div>

        <div class="card-body">
          <div class="cols">
            <div>
              <div class="callout ok">
                <h3><span class="spark" aria-hidden="true"></span> Restate the task</h3>
                <p>
                  Compute the partial fraction decomposition of
                  \(\;f(z)=\dfrac{1}{(z^2-1)^2}\;\) by expressing it as a sum of terms involving
                  \((z-1)\) and \((z+1)\) (with the correct repeated-factor structure).
                </p>
              </div>

              <div class="hr"></div>

              <h3 style="margin:0 0 6px; font-size:14px;">Given / Unknown / Must Find</h3>
              <ul class="clean">
                <li><b>Given:</b> \(f(z)=\dfrac{1}{(z^2-1)^2}\) and \(z^2-1=(z-1)(z+1)\).</li>
                <li><b>Unknowns:</b> coefficients \(A,B,C,D\) in the decomposition template.</li>
                <li><b>Must find:</b> values of \(A,B,C,D\) such that the identity holds for all \(z\neq\pm 1\).</li>
              </ul>

              <div class="callout">
                <h3>Why this “physics-style” decomposition matters</h3>
                <p>
                  In complex analysis and many physics applications (residue calculus, Green’s functions,
                  inverse Laplace/Z transforms), poles control system behavior. Partial fractions isolate each pole’s
                  contribution—exactly like separating a response into “modes.”
                </p>
              </div>
            </div>

            <div>
              <div class="callout warn">
                <h3>Relevant ideas & why they apply</h3>
                <ul class="clean" style="margin-top:6px;">
                  <li><b>Pole structure:</b> \((z-1)^2(z+1)^2\) means <b>double poles</b> at \(z=\pm 1\).</li>
                  <li><b>Linearity:</b> rational identities can be decomposed into a linear combination of basis terms.</li>
                  <li><b>Parity (symmetry):</b> \(f(-z)=f(z)\) (even function) forces relations among coefficients.</li>
                </ul>
              </div>

              <details>
                <summary>Candidate approaches (and quick comparison)</summary>
                <div class="inside">
                  <ul class="clean">
                    <li><b>Heaviside + repeated-pole derivative trick:</b> fast, systematic, minimal algebra.</li>
                    <li><b>Clear denominators + equate coefficients:</b> always works, can be algebra-heavy.</li>
                    <li><b>Residue/pole method:</b> elegant in complex analysis; equivalent to derivative trick here.</li>
                  </ul>
                  <p style="margin:10px 0 0;">
                    <b>Best choice here:</b> symmetry + repeated-pole method (most efficient and robust).
                  </p>
                </div>
              </details>
            </div>
          </div>
        </div>
      </section>

      <!-- PART 2 -->
      <section class="card" id="part2">
        <div class="card-head">
          <div class="card-title">
            <h2>PART 2 — Strategy & Tips <span class="chip">roadmap only</span></h2>
            <p>A minimal plan you can reuse for any partial fractions problem with repeated factors.</p>
          </div>
          <span class="chip">5–10 steps</span>
        </div>

        <div class="card-body">
          <div class="cols">
            <div>
              <h3 style="margin:0 0 8px; font-size:14px;">Roadmap</h3>
              <div class="stepper">
                <div class="step">
                  <div class="n">1</div>
                  <div class="t">
                    <b>Factor the denominator</b>
                    <span>Use \(z^2-1=(z-1)(z+1)\) to expose poles & multiplicities.</span>
                  </div>
                </div>
                <div class="step">
                  <div class="n">2</div>
                  <div class="t">
                    <b>Write the correct repeated-factor template</b>
                    <span>Include both \(\frac{A}{z-1}\) and \(\frac{B}{(z-1)^2}\) (same for \(z+1\)).</span>
                  </div>
                </div>
                <div class="step">
                  <div class="n">3</div>
                  <div class="t">
                    <b>Use symmetry to reduce unknowns</b>
                    <span>Check even/odd: compare \(f(-z)\) to \(f(z)\) to relate coefficients.</span>
                  </div>
                </div>
                <div class="step">
                  <div class="n">4</div>
                  <div class="t">
                    <b>Get \(B\) and \(D\) via limits</b>
                    <span>Compute \(\lim_{z\to 1}(z-1)^2f(z)\) and \(\lim_{z\to -1}(z+1)^2f(z)\).</span>
                  </div>
                </div>
                <div class="step">
                  <div class="n">5</div>
                  <div class="t">
                    <b>Get \(A\) (and \(C\)) via derivative trick</b>
                    <span>Let \(g(z)=(z-1)^2f(z)\). Then \(A=g'(1)\). Use symmetry for \(C\).</span>
                  </div>
                </div>
                <div class="step">
                  <div class="n">6</div>
                  <div class="t">
                    <b>Assemble and sanity-check</b>
                    <span>Check large-\(|z|\) scaling and verify parity \(f(-z)=f(z)\).</span>
                  </div>
                </div>
              </div>
            </div>

            <div>
              <div class="callout danger">
                <h3>Common mistakes</h3>
                <ul class="clean" style="margin-top:6px;">
                  <li><b>Missing repeated terms:</b> forgetting \(\frac{B}{(z-1)^2}\) or \(\frac{D}{(z+1)^2}\).</li>
                  <li><b>Wrong symmetry sign:</b> evenness implies \(C=-A\), not \(C=A\).</li>
                  <li><b>Applying cover-up to \(A\) incorrectly:</b> for double poles, \(A\) needs a derivative method.</li>
                </ul>
              </div>

              <div class="callout ok">
                <h3>Quick tips</h3>
                <ul class="clean" style="margin-top:6px;">
                  <li>For double pole at \(z=a\): compute \(B=\lim_{z\to a}(z-a)^2 f(z)\).</li>
                  <li>Then compute \(A=\left.\frac{d}{dz}\big[(z-a)^2f(z)\big]\right|_{z=a}\).</li>
                  <li>Use parity to halve the workload whenever possible.</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- PART 3 -->
      <section class="card" id="part3">
        <div class="card-head">
          <div class="card-title">
            <h2>PART 3 — Full Solution <span class="chip">step-by-step</span></h2>
            <p>We start with intuition, then derive every coefficient carefully, and finish with robust checks.</p>
          </div>
          <span class="chip">Beginner-friendly + rigorous</span>
        </div>

        <div class="card-body">

          <div class="callout">
            <h3>Physical intuition (why partial fractions is “natural”)</h3>
            <p>
              The denominator \((z^2-1)^2\) creates strong singular behavior near \(z=\pm 1\).
              Partial fractions isolate each pole’s contribution—like extracting resonant modes in a linear system.
              Symmetry \(f(-z)=f(z)\) further constrains the form so the \(\pm 1\) contributions must mirror each other.
            </p>
          </div>

          <div class="hr"></div>

          <h3 style="margin:0 0 6px; font-size:14px;">1) Factor and write the template</h3>
          <div class="mathblock">
            <div>\[
              (z^2-1)^2=\bigl((z-1)(z+1)\bigr)^2=(z-1)^2(z+1)^2.
            \]</div>
            <div>\[
              \frac{1}{(z-1)^2(z+1)^2}
              =\frac{A}{z-1}+\frac{B}{(z-1)^2}+\frac{C}{z+1}+\frac{D}{(z+1)^2}.
            \]</div>
          </div>

          <h3 style="margin:0 0 6px; font-size:14px;">2) Use even symmetry to relate coefficients</h3>
          <p style="margin:0; color:var(--muted); line-height:1.7;">
            First, note the function is even:
            \[
              f(-z)=\frac{1}{(((-z)^2)-1)^2}=\frac{1}{(z^2-1)^2}=f(z).
            \]
            Apply \(z\mapsto -z\) to the template and simplify each term:
          </p>

          <div class="mathblock">
            <div>\[
              f(z)=\frac{A}{z-1}+\frac{B}{(z-1)^2}+\frac{C}{z+1}+\frac{D}{(z+1)^2}
            \]</div>
            <div>\[
              f(-z)= -\frac{C}{z-1}+\frac{D}{(z-1)^2}-\frac{A}{z+1}+\frac{B}{(z+1)^2}.
            \]</div>
          </div>

          <p style="margin:0; color:var(--muted); line-height:1.7;">
            Since \(f(-z)=f(z)\) for all \(z\), match coefficients of like terms:
          </p>

          <div class="mathblock">
            <div>\[
              A=-C,\qquad B=D.
            \]</div>
          </div>

          <h3 style="margin:0 0 6px; font-size:14px;">3) Compute \(B\) by a repeated-factor limit</h3>
          <p style="margin:0; color:var(--muted); line-height:1.7;">
            Multiply \(f(z)\) by \((z-1)^2\). On the original function:
          </p>
          <div class="mathblock">
            <div>\[
              (z-1)^2 f(z)=(z-1)^2\cdot\frac{1}{(z-1)^2(z+1)^2}=\frac{1}{(z+1)^2}.
            \]</div>
          </div>
          <p style="margin:0; color:var(--muted); line-height:1.7;">
            On the partial fractions side, \((z-1)^2 f(z)\) has a term \(B\) that remains finite at \(z=1\),
            while the rest either vanishes or stays finite in a way that does not affect the limit for \(B\).
            Therefore:
          </p>
          <div class="mathblock">
            <div>\[
              B=\lim_{z\to 1}(z-1)^2 f(z)=\left.\frac{1}{(z+1)^2}\right|_{z=1}=\frac{1}{2^2}=\frac{1}{4}.
            \]</div>
          </div>
          <p style="margin:0; color:var(--muted); line-height:1.7;">
            Using symmetry \(D=B\), we get:
          </p>
          <div class="mathblock">
            <div>\[
              B=\frac14,\qquad D=\frac14.
            \]</div>
          </div>

          <h3 style="margin:0 0 6px; font-size:14px;">4) Compute \(A\) using the derivative trick (double pole)</h3>
          <p style="margin:0; color:var(--muted); line-height:1.7;">
            Define
            \[
              g(z)=(z-1)^2 f(z).
            \]
            From above, we already have the clean expression:
            \[
              g(z)=\frac{1}{(z+1)^2}.
            \]
            Now, from the partial fraction form, multiplying by \((z-1)^2\) gives:
          </p>
          <div class="mathblock">
            <div>\[
              g(z)=A(z-1)+B + (z-1)^2\left(\frac{C}{z+1}+\frac{D}{(z+1)^2}\right).
            \]</div>
          </div>

          <p style="margin:0; color:var(--muted); line-height:1.7;">
            Differentiate both sides:
          </p>
          <div class="mathblock">
            <div>\[
              g'(z)=A + \frac{d}{dz}\Bigg[(z-1)^2\left(\frac{C}{z+1}+\frac{D}{(z+1)^2}\right)\Bigg].
            \]</div>
          </div>

          <p style="margin:0; color:var(--muted); line-height:1.7;">
            The derivative of the last bracketed term contains an overall factor of \((z-1)\) (or \((z-1)^2\)),
            so it vanishes when evaluated at \(z=1\). Hence:
          </p>
          <div class="mathblock">
            <div>\[
              A=g'(1).
            \]</div>
          </div>

          <p style="margin:0; color:var(--muted); line-height:1.7;">
            Compute \(g'(z)\) directly from \(g(z)=(z+1)^{-2}\):
          </p>
          <div class="mathblock">
            <div>\[
              g'(z)=-2(z+1)^{-3}.
            \]</div>
            <div>\[
              A=g'(1)=-2(2)^{-3}=-2\cdot\frac18=-\frac14.
            \]</div>
          </div>

          <p style="margin:0; color:var(--muted); line-height:1.7;">
            Using symmetry \(C=-A\), we get:
          </p>
          <div class="mathblock">
            <div>\[
              C=\frac14.
            \]</div>
          </div>

          <!-- FINAL BOX -->
          <div class="final" aria-label="Final boxed answer">
            <div class="label">
              <div class="spark" aria-hidden="true"></div>
              <h3>Final Result (boxed)</h3>
            </div>
            <div class="box">
              <div style="min-width: 820px;">
                \[
                \boxed{
                \frac{1}{(z^2-1)^2}
                =
                -\frac{1}{4}\frac{1}{z-1}
                +\frac{1}{4}\frac{1}{(z-1)^2}
                +\frac{1}{4}\frac{1}{z+1}
                +\frac{1}{4}\frac{1}{(z+1)^2}}
                \]
                \[
                \text{Equivalently: }\;
                \boxed{
                \frac{1}{(z^2-1)^2}
                =\frac14\left(\frac{1}{(z-1)^2}+\frac{1}{(z+1)^2}+\frac{1}{z+1}-\frac{1}{z-1}\right)}
                \]
              </div>
            </div>
          </div>

          <div class="hr"></div>

          <h3 style="margin:0 0 6px; font-size:14px;">Sanity checks</h3>

          <details>
            <summary>Check 1 — Symmetry (evenness)</summary>
            <div class="inside">
              <p>
                The original function satisfies \(f(-z)=f(z)\). In the decomposition, we found
                \(C=-A\) and \(D=B\), which guarantees the same symmetry. This is a strong consistency check.
              </p>
            </div>
          </details>

          <details>
            <summary>Check 2 — Large-\(|z|\) (limiting behavior)</summary>
            <div class="inside">
              <p>
                For large \(|z|\),
                \[
                  \frac{1}{(z^2-1)^2}\sim \frac{1}{z^4}.
                \]
                In the decomposition, the \(\frac{1}{z-1}\) and \(\frac{1}{z+1}\) terms appear with opposite signs,
                so their leading \(1/z\) behavior cancels. The remaining contributions combine to match the correct
                \(1/z^4\) decay.
              </p>
            </div>
          </details>

          <details>
            <summary>Check 3 — “Physics interpretation”</summary>
            <div class="inside">
              <p>
                Poles at \(z=\pm 1\) (each of order 2) are like repeated resonances. Partial fractions isolate each pole’s
                contribution, which is exactly what you exploit when evaluating contour integrals (residues) or computing
                inverse transforms in linear systems.
              </p>
              <p>
                Here, the coefficients quantify how strongly each pole contributes to the local behavior near \(z=\pm 1\).
              </p>
            </div>
          </details>

          <p class="footer-note">
            Tip: This exact workflow generalizes to any function with repeated linear factors:
            compute the \((z-a)^{-2}\) coefficient by a limit, then the \((z-a)^{-1}\) coefficient by a derivative.
          </p>
        </div>
      </section>

    </main>
  </div>
</body>
</html>
