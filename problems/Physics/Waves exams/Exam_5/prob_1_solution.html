<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <meta name="description" content="A rigorous, beginner-friendly, structured solution for a TE mode in a perfectly conducting rectangular waveguide: boundary conditions, dispersion, cutoff, and magnetic field." />
  <title>TE Mode in a Rectangular Waveguide — Full Structured Solution</title>

  <!-- KaTeX for beautiful math rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js"></script>

  <style>
    /* =========================
       DESIGN SYSTEM
    ========================= */
    :root{
      --bg0:#070a14;
      --bg1:#0b1020;
      --bg2:#0f1730;
      --card: rgba(15,23,48,.78);
      --card2: rgba(255,255,255,.05);
      --text:#eaf0ff;
      --muted: rgba(234,240,255,.72);
      --line: rgba(140,160,255,.18);
      --accent:#7c5cff;
      --accent2:#00e0ff;
      --good:#38f0a8;
      --warn:#ffcc66;
      --bad:#ff6b8a;
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius: 18px;
      --radius2: 26px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --max: 1120px;
    }

    @media (prefers-color-scheme: light){
      :root{
        --bg0:#f3f5ff;
        --bg1:#f7f8ff;
        --bg2:#ffffff;
        --card: rgba(255,255,255,.78);
        --card2: rgba(0,0,0,.04);
        --text:#111428;
        --muted: rgba(17,20,40,.68);
        --line: rgba(70,85,180,.18);
        --shadow: 0 18px 60px rgba(10,14,30,.12);
        --accent:#4a35ff;
        --accent2:#0084ff;
      }
    }

    *{ box-sizing: border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 15% 10%, rgba(124,92,255,.35), transparent 60%),
        radial-gradient(900px 550px at 85% 15%, rgba(0,224,255,.22), transparent 60%),
        radial-gradient(1000px 700px at 55% 90%, rgba(56,240,168,.18), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1) 30%, var(--bg2));
      line-height:1.62;
      overflow-x:hidden;
    }
    a{ color: inherit; }
    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 42px 18px 92px;
    }

    /* =========================
       HERO
    ========================= */
    .hero{
      border:1px solid var(--line);
      background: linear-gradient(135deg, rgba(124,92,255,.14), rgba(0,224,255,.08));
      border-radius: var(--radius2);
      padding: 26px 24px;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }
    .hero::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(520px 260px at 16% 0%, rgba(124,92,255,.38), transparent 60%),
        radial-gradient(480px 260px at 86% 12%, rgba(0,224,255,.25), transparent 60%);
      filter: blur(18px);
      opacity:.85;
      pointer-events:none;
    }
    .hero > *{ position:relative; z-index:1; }
    .kicker{
      display:flex; flex-wrap:wrap; gap:10px; align-items:center;
      font-size: 12px;
      color: var(--muted);
      letter-spacing:.10em;
      text-transform: uppercase;
    }
    .tag{
      border:1px solid var(--line);
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.06);
      backdrop-filter: blur(10px);
    }
    h1{
      margin: 10px 0 10px;
      font-size: clamp(28px, 3.2vw, 42px);
      line-height: 1.12;
      letter-spacing: -0.02em;
    }
    .lead{
      margin:0;
      max-width: 80ch;
      color: var(--muted);
      font-size: 15.5px;
    }

    /* =========================
       TOOLBAR
    ========================= */
    .toolbar{
      margin-top: 16px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
    }
    .btn{
      appearance:none;
      border:1px solid var(--line);
      border-radius: 14px;
      padding: 10px 12px;
      background: rgba(0,0,0,.06);
      color: var(--text);
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:10px;
      transition: transform .08s ease, background .2s ease;
      user-select:none;
    }
    .btn:hover{ background: rgba(124,92,255,.09); }
    .btn:active{ transform: translateY(1px); }
    .btn kbd{
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
      border:1px solid var(--line);
      border-bottom-width:2px;
      padding: 2px 6px;
      border-radius: 9px;
      background: rgba(0,0,0,.06);
    }

    /* =========================
       LAYOUT
    ========================= */
    .grid{
      display:grid;
      grid-template-columns: 340px 1fr;
      gap: 18px;
      margin-top: 18px;
      align-items:start;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
      .toolbar{ justify-content:flex-start; }
    }

    .card{
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: var(--card);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      overflow: hidden;
    }
    .card header{
      padding: 16px 18px;
      border-bottom:1px solid var(--line);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 12px;
    }
    .card header h2{
      margin:0;
      font-size: 13px;
      letter-spacing:.10em;
      text-transform: uppercase;
      color: var(--muted);
    }
    .card .content{
      padding: 18px;
    }

    /* =========================
       TOC / NAV
    ========================= */
    .toc a{
      text-decoration:none;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      border:1px solid transparent;
      background: transparent;
      color: var(--text);
    }
    .toc a:hover{
      background: rgba(124,92,255,.08);
      border-color: var(--line);
    }
    .toc small{
      color: var(--muted);
      font-family: var(--mono);
      font-size: 12px;
    }

    /* =========================
       TYPOGRAPHY / SECTIONS
    ========================= */
    section{ scroll-margin-top: 16px; }
    h3{
      margin: 0 0 10px;
      font-size: 20px;
      letter-spacing:-.01em;
    }
    p{ margin: 10px 0; }
    ul{ margin: 10px 0 0 18px; }
    li{ margin: 7px 0; }
    .muted{ color: var(--muted); }

    .pill{
      display:inline-flex;
      gap:10px;
      align-items:center;
      padding: 8px 12px;
      border:1px solid var(--line);
      border-radius: 999px;
      background: rgba(0,0,0,.05);
      color: var(--muted);
      font-size: 12px;
      letter-spacing:.08em;
      text-transform: uppercase;
      margin-bottom: 10px;
    }
    .pill .dot{
      width:10px; height:10px; border-radius:50%;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 0 0 4px rgba(124,92,255,.12);
    }

    /* =========================
       MATH / BLOCKS
    ========================= */
    .math{ }
    .eq{
      border:1px solid var(--line);
      background: rgba(0,0,0,.06);
      border-radius: 14px;
      padding: 14px 14px;
      margin: 12px 0;
      overflow-x:auto;
    }
    .eq .label{
      font-size: 12px;
      color: var(--muted);
      letter-spacing:.10em;
      text-transform: uppercase;
      margin-bottom: 8px;
    }

    .callout{
      border:1px solid var(--line);
      border-left: 4px solid var(--accent2);
      background: linear-gradient(135deg, rgba(0,224,255,.08), rgba(124,92,255,.06));
      border-radius: 14px;
      padding: 14px 14px;
      margin: 14px 0;
    }

    .finalbox{
      border:1px solid rgba(56,240,168,.30);
      background: rgba(56,240,168,.06);
      border-radius: 16px;
      padding: 16px 14px;
      margin: 14px 0;
      position: relative;
    }
    .finalbox::before{
      content:"FINAL";
      position:absolute;
      top: 12px;
      right: 12px;
      font-family: var(--mono);
      font-size: 11px;
      letter-spacing:.14em;
      color: rgba(56,240,168,.95);
      border:1px solid rgba(56,240,168,.35);
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(56,240,168,.08);
    }

    /* =========================
       STEPS GRID
    ========================= */
    .steps{
      display:grid;
      gap: 10px;
      margin-top: 12px;
    }
    .step{
      border:1px solid var(--line);
      border-radius: 14px;
      padding: 12px 12px;
      background: rgba(0,0,0,.05);
    }
    .step .row{
      display:flex;
      justify-content:space-between;
      align-items:baseline;
      gap: 12px;
    }
    .step .num{
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing:.12em;
      color: var(--muted);
    }
    .step .goal{
      font-weight: 700;
    }
    .step .tool{
      margin-top: 6px;
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
    }

    /* =========================
       MINI DIAGRAM (SVG)
    ========================= */
    .diagram{
      border:1px solid var(--line);
      background: rgba(0,0,0,.05);
      border-radius: 14px;
      padding: 12px;
      margin-top: 12px;
      overflow:hidden;
    }
    .diagram svg{ width:100%; height:auto; display:block; }
    .legend{
      margin-top: 10px;
      color: var(--muted);
      font-size: 13px;
    }
    .legend code{
      font-family: var(--mono);
      font-size: 12px;
      padding: 2px 6px;
      border-radius: 8px;
      border: 1px solid var(--line);
      background: rgba(0,0,0,.06);
    }

    /* =========================
       FOOTER
    ========================= */
    footer{
      margin-top: 18px;
      padding: 18px;
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: rgba(0,0,0,.05);
      color: var(--muted);
      font-size: 13px;
    }

    /* =========================
       PRINT
    ========================= */
    @media print{
      body{ background:white; }
      .hero,.card{ box-shadow:none; background:white; }
      .toolbar{ display:none; }
      .grid{ grid-template-columns: 1fr; }
      .pill{ border-color:#ddd; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <!-- HERO -->
    <header class="hero">
      <div class="kicker">
        <span class="tag">Perfect Conductor</span>
        <span class="tag">Rectangular Waveguide</span>
        <span class="tag">TE Mode</span>
        <span class="tag">BC → Dispersion → Cutoff → B-field</span>
      </div>
      <h1>TE Mode in a Perfectly Conducting Rectangular Waveguide</h1>
      <p class="lead">
        Given
        <span class="math">\( \vec{E}(x,y,z,t)=E_0\cos(k_y y+\phi_y)\cos(k_x x-\omega t)\,\hat{\mathbf z} \)</span>,
        find <span class="math">\(k_y\)</span>, <span class="math">\(\phi_y\)</span>, the dispersion relation, the cutoff frequency,
        and the associated magnetic field <span class="math">\(\vec B\)</span>. The guide is infinite in <span class="math">\(x\)</span>
        with cross-section <span class="math">\(0\le y\le a\)</span>, <span class="math">\(0\le z\le b\)</span> (and <span class="math">\(a&lt;b\)</span>).
      </p>

      <div class="toolbar">
        <button class="btn" id="btnMath" type="button" title="Toggle display of math blocks">
          Toggle Math <kbd>M</kbd>
        </button>
        <button class="btn" id="btnPrint" type="button" title="Print / Save as PDF">
          Print <kbd>P</kbd>
        </button>
      </div>
    </header>

    <!-- TWO-COLUMN -->
    <div class="grid">
      <!-- SIDEBAR -->
      <aside class="card">
        <header>
          <h2>Navigation</h2>
          <span class="muted" style="font-family:var(--mono);font-size:12px">Click to jump</span>
        </header>
        <div class="content toc">
          <a href="#part1"><span>PART 1 — Problem Analysis</span><small>§1</small></a>
          <a href="#part2"><span>PART 2 — Strategy & Tips</span><small>§2</small></a>
          <a href="#part3"><span>PART 3 — Full Solution</span><small>§3</small></a>
          <a href="#final"><span>Final Boxed Results</span><small>§4</small></a>
          <a href="#sanity"><span>Sanity Checks</span><small>§5</small></a>

          <div class="diagram" aria-label="Waveguide diagram (schematic)">
            <!-- Simple 3D-ish schematic drawn as SVG (no external images) -->
            <svg viewBox="0 0 620 360" role="img">
              <defs>
                <linearGradient id="g1" x1="0" x2="1">
                  <stop offset="0" stop-color="rgba(124,92,255,.55)"/>
                  <stop offset="1" stop-color="rgba(0,224,255,.35)"/>
                </linearGradient>
              </defs>

              <!-- box -->
              <path d="M110 85 L410 85 L520 150 L220 150 Z" fill="url(#g1)" opacity="0.35" stroke="rgba(200,210,255,.35)" stroke-width="2"/>
              <path d="M110 85 L220 150 L220 280 L110 215 Z" fill="rgba(255,255,255,.06)" stroke="rgba(200,210,255,.35)" stroke-width="2"/>
              <path d="M220 150 L520 150 L520 280 L220 280 Z" fill="rgba(255,255,255,.05)" stroke="rgba(200,210,255,.35)" stroke-width="2"/>

              <!-- axes -->
              <line x1="110" y1="85" x2="40" y2="30" stroke="rgba(234,240,255,.85)" stroke-width="3"/>
              <polygon points="40,30 52,32 45,42" fill="rgba(234,240,255,.85)"/>
              <text x="26" y="24" fill="rgba(234,240,255,.85)" font-size="18" font-family="ui-monospace">y</text>

              <line x1="110" y1="85" x2="580" y2="85" stroke="rgba(234,240,255,.85)" stroke-width="3"/>
              <polygon points="580,85 568,80 568,90" fill="rgba(234,240,255,.85)"/>
              <text x="592" y="92" fill="rgba(234,240,255,.85)" font-size="18" font-family="ui-monospace">x</text>

              <line x1="110" y1="85" x2="70" y2="170" stroke="rgba(234,240,255,.85)" stroke-width="3"/>
              <polygon points="70,170 72,156 83,162" fill="rgba(234,240,255,.85)"/>
              <text x="54" y="190" fill="rgba(234,240,255,.85)" font-size="18" font-family="ui-monospace">z</text>

              <!-- dimensions -->
              <line x1="110" y1="85" x2="110" y2="215" stroke="rgba(56,240,168,.7)" stroke-width="3"/>
              <text x="92" y="160" fill="rgba(56,240,168,.9)" font-size="18" font-family="ui-monospace">a</text>

              <line x1="110" y1="215" x2="220" y2="280" stroke="rgba(56,240,168,.7)" stroke-width="3"/>
              <text x="150" y="280" fill="rgba(56,240,168,.9)" font-size="18" font-family="ui-monospace">b</text>

              <text x="250" y="320" fill="rgba(234,240,255,.7)" font-size="14" font-family="ui-sans-serif">
                Perfectly conducting rectangular waveguide (schematic)
              </text>
            </svg>

            <div class="legend">
              Cross-section spans <code>0 ≤ y ≤ a</code> and <code>0 ≤ z ≤ b</code>; propagation along <code>x</code>.
            </div>
          </div>
        </div>
      </aside>

      <!-- MAIN ARTICLE -->
      <main class="card">
        <header>
          <h2>Full Structured Answer</h2>
          <span class="muted" style="font-family:var(--mono);font-size:12px">Beginner-friendly + rigorous</span>
        </header>

        <div class="content">
          <!-- PART 1 -->
          <section id="part1">
            <div class="pill"><span class="dot"></span><span>PART 1 — Problem Analysis (no solving yet)</span></div>

            <h3>Restatement</h3>
            <p>
              A TE mode in a perfectly conducting rectangular waveguide is specified by
              <span class="math">\(E_z(x,y,t)=E_0\cos(k_y y+\phi_y)\cos(k_x x-\omega t)\)</span>.
              We must enforce conductor boundary conditions to determine allowed
              <span class="math">\(k_y\)</span> and <span class="math">\(\phi_y\)</span>, then obtain the waveguide dispersion,
              cutoff frequency, and the associated magnetic field <span class="math">\(\vec B\)</span>.
            </p>

            <h3>Given / unknowns / required results</h3>
            <ul>
              <li><strong>Given:</strong> perfect conductor walls; infinite in <span class="math">\(x\)</span>; cross-section
                <span class="math">\(0\le y\le a\)</span>, <span class="math">\(0\le z\le b\)</span> with <span class="math">\(a&lt;b\)</span>;
                field form above.</li>
              <li><strong>Unknowns:</strong> <span class="math">\(k_y\)</span>, <span class="math">\(\phi_y\)</span>, dispersion relation,
                cutoff frequency, <span class="math">\(\vec B\)</span>.</li>
              <li><strong>Must find:</strong> (a) allowed <span class="math">\(k_y,\phi_y\)</span>; (b) <span class="math">\(\omega(k_x)\)</span>;
                (c) smallest propagating frequency; (d) explicit <span class="math">\(\vec B(x,y,t)\)</span>.</li>
            </ul>

            <h3>Principles & why they apply</h3>
            <div class="callout">
              <p>
                <strong>Perfect conductor boundary condition:</strong>
                The tangential electric field must vanish on the metal:
                <span class="math">\( \vec E_{\parallel}=0 \)</span>.
                Since <span class="math">\(E_z\)</span> lies along the surface of the <span class="math">\(y=\text{const}\)</span> walls,
                it must be zero at <span class="math">\(y=0\)</span> and <span class="math">\(y=a\)</span>.
              </p>
              <p>
                <strong>Helmholtz relation (waveguide dispersion):</strong>
                Source-free propagation in a uniform medium implies
                <span class="math">\(k_x^2+k_y^2+k_z^2=(\omega/c)^2\)</span>.
              </p>
              <p>
                <strong>Faraday’s law:</strong>
                <span class="math">\(\nabla\times\vec E=-\partial\vec B/\partial t\)</span>
                gives <span class="math">\(\vec B\)</span> directly from the known <span class="math">\(\vec E\)</span>.
              </p>
            </div>

            <h3>Approaches</h3>
            <ul>
              <li><strong>BC → dispersion → curl</strong> (fast, direct, minimal algebra).</li>
              <li><strong>General TE formalism</strong> (more general but heavier).</li>
              <li><strong>Phasor method</strong> (clean derivatives; same physics).</li>
            </ul>
            <p class="muted"><strong>Best choice:</strong> BC → dispersion → curl, because the field is already separated and only needs quantization + Maxwell relations.</p>
          </section>

          <!-- PART 2 -->
          <section id="part2" style="margin-top:22px">
            <div class="pill"><span class="dot"></span><span>PART 2 — Strategy & Tips (roadmap only)</span></div>

            <h3>Minimal roadmap</h3>
            <div class="steps">
              <div class="step">
                <div class="row"><span class="num">1</span><span class="goal">Decide which boundaries enforce \(E_z=0\)</span></div>
                <div class="tool">Use: tangential \(E\) vanishes on perfect conductor</div>
              </div>
              <div class="step">
                <div class="row"><span class="num">2</span><span class="goal">Apply \(E_z(y=0)=0\) to fix \(\phi_y\)</span></div>
                <div class="tool">Use: \(E_z \propto \cos(\phi_y)\)</div>
              </div>
              <div class="step">
                <div class="row"><span class="num">3</span><span class="goal">Apply \(E_z(y=a)=0\) to quantize \(k_y\)</span></div>
                <div class="tool">Use: \(\cos(k_ya+\phi_y)=0\)</div>
              </div>
              <div class="step">
                <div class="row"><span class="num">4</span><span class="goal">Write dispersion relation</span></div>
                <div class="tool">Use: \(k_x^2+k_y^2+k_z^2=(\omega/c)^2\), here \(k_z=0\)</div>
              </div>
              <div class="step">
                <div class="row"><span class="num">5</span><span class="goal">Get cutoff by setting \(k_x\to 0\)</span></div>
                <div class="tool">Use: propagation requires real \(k_x\)</div>
              </div>
              <div class="step">
                <div class="row"><span class="num">6</span><span class="goal">Compute \(\nabla\times\vec E\)</span></div>
                <div class="tool">Use: curl in Cartesian; only \(E_z\neq 0\)</div>
              </div>
              <div class="step">
                <div class="row"><span class="num">7</span><span class="goal">Integrate \(-\partial_t\vec B=\nabla\times\vec E\)</span></div>
                <div class="tool">Use: \(\partial_t\sin(k_xx-\omega t)=-\omega\cos(...)\), \(\partial_t\cos(...)=\omega\sin(...)\)</div>
              </div>
              <div class="step">
                <div class="row"><span class="num">8</span><span class="goal">Sanity checks</span></div>
                <div class="tool">Use: units + cutoff/high-frequency limits</div>
              </div>
            </div>

            <h3>Common mistakes</h3>
            <ul>
              <li>Mixing up which walls matter: here the field depends on <span class="math">\(y\)</span>, so enforce BC at <span class="math">\(y=0\)</span> and <span class="math">\(y=a\)</span>.</li>
              <li>Cutoff is not when \(k_y=0\); cutoff is when longitudinal propagation \(k_x\) becomes imaginary.</li>
              <li>Sign mistakes in curl/Faraday: keep <span class="math">\(\theta=k_x x-\omega t\)</span> consistent.</li>
            </ul>
          </section>

          <!-- PART 3 -->
          <section id="part3" style="margin-top:22px">
            <div class="pill"><span class="dot"></span><span>PART 3 — Full Solution</span></div>

            <h3>Physical intuition</h3>
            <p>
              The metal walls forbid tangential electric field, forcing the transverse profile to be a standing wave that
              “fits” in the guide cross-section. That quantizes <span class="math">\(k_y\)</span>. Only above a minimum frequency can the wave
              both satisfy the transverse standing pattern and still have a real forward propagation constant <span class="math">\(k_x\)</span>.
            </p>

            <h3>(1.a) Find \(k_y\) and \(\phi_y\)</h3>
            <p>
              Since the walls at <span class="math">\(y=0\)</span> and <span class="math">\(y=a\)</span> are perfect conductors and <span class="math">\(E_z\)</span>
              is tangential to those surfaces, impose:
              <span class="math">\(E_z(y=0)=0\)</span> and <span class="math">\(E_z(y=a)=0\)</span> for all <span class="math">\(x,t\)</span>.
            </p>

            <div class="eq">
              <div class="label">At \(y=0\)</div>
              <div class="math">\[
                E_z(y=0)=E_0\cos(\phi_y)\cos(k_x x-\omega t)=0\;\forall x,t
                \;\Rightarrow\;\cos(\phi_y)=0
                \;\Rightarrow\;\phi_y=\frac{\pi}{2}+n\pi.
              \]</div>
            </div>

            <div class="eq">
              <div class="label">At \(y=a\)</div>
              <div class="math">\[
                E_z(y=a)=E_0\cos(k_y a+\phi_y)\cos(k_x x-\omega t)=0\;\forall x,t
                \;\Rightarrow\;\cos(k_y a+\phi_y)=0
                \;\Rightarrow\;k_y a+\phi_y=\frac{\pi}{2}+m\pi.
              \]</div>
            </div>

            <p>
              Subtract the two “odd multiple of <span class="math">\(\pi/2\)</span>” conditions:
              <span class="math">\[
                (k_y a+\phi_y)-\phi_y = (m-n)\pi \;\Rightarrow\; k_y a = p\pi,\quad p\in\mathbb Z.
              \]</span>
              For a nontrivial mode choose <span class="math">\(p=1,2,3,\dots\)</span>. Therefore:
            </p>

            <div class="eq">
              <div class="label">Allowed values</div>
              <div class="math">\[
                k_y=\frac{p\pi}{a},\qquad \phi_y=\frac{\pi}{2}\;(\text{mod }\pi).
              \]</div>
            </div>

            <h3>(1.b) Dispersion relation</h3>
            <p>
              In vacuum/air, waveguide fields satisfy:
              <span class="math">\(k_x^2+k_y^2+k_z^2=(\omega/c)^2\)</span>.
              The given field has no <span class="math">\(z\)</span>-dependence, so <span class="math">\(k_z=0\)</span>.
            </p>

            <div class="eq">
              <div class="label">Dispersion</div>
              <div class="math">\[
                k_x^2+k_y^2=\left(\frac{\omega}{c}\right)^2
                \;\Rightarrow\;
                k_x^2+\left(\frac{p\pi}{a}\right)^2=\left(\frac{\omega}{c}\right)^2.
              \]</div>
            </div>

            <h3>(1.c) Lowest frequency that propagates (cutoff)</h3>
            <p>
              Propagation requires real <span class="math">\(k_x\)</span>:
              <span class="math">\[
                k_x^2=\left(\frac{\omega}{c}\right)^2-\left(\frac{p\pi}{a}\right)^2\ge 0
                \;\Rightarrow\;
                \omega \ge \omega_{c,p}=c\frac{p\pi}{a}.
              \]</span>
              The smallest nonzero index is <span class="math">\(p=1\)</span>, giving the lowest cutoff.
            </p>

            <div class="eq">
              <div class="label">Cutoff (lowest mode)</div>
              <div class="math">\[
                \omega_c=\frac{\pi c}{a},\qquad
                f_c=\frac{\omega_c}{2\pi}=\frac{c}{2a}.
              \]</div>
            </div>

            <h3>(1.d) Find the magnetic field \(\vec B\)</h3>
            <p>
              Use Faraday’s law:
              <span class="math">\(\nabla\times\vec E=-\frac{\partial\vec B}{\partial t}\)</span>.
              With \(E_x=E_y=0\) and \(E_z\neq 0\), the curl simplifies to:
            </p>

            <div class="eq">
              <div class="label">Curl simplification</div>
              <div class="math">\[
                \nabla\times\vec E=
                \left(\frac{\partial E_z}{\partial y}\right)\hat{\mathbf x}
                -
                \left(\frac{\partial E_z}{\partial x}\right)\hat{\mathbf y}.
              \]</div>
            </div>

            <p>Let <span class="math">\(\theta=k_x x-\omega t\)</span> and \(E_z=E_0\cos(k_y y+\phi_y)\cos\theta\).</p>

            <div class="eq">
              <div class="label">Compute derivatives</div>
              <div class="math">\[
                \frac{\partial E_z}{\partial y}=-E_0k_y\sin(k_y y+\phi_y)\cos\theta,
                \qquad
                \frac{\partial E_z}{\partial x}=-E_0k_x\cos(k_y y+\phi_y)\sin\theta.
              \]</div>
            </div>

            <div class="eq">
              <div class="label">Curl result</div>
              <div class="math">\[
                \nabla\times\vec E=
                \left[-E_0k_y\sin(k_y y+\phi_y)\cos\theta\right]\hat{\mathbf x}
                +
                \left[E_0k_x\cos(k_y y+\phi_y)\sin\theta\right]\hat{\mathbf y}.
              \]</div>
            </div>

            <p>
              Now solve \(-\partial_t\vec B=\nabla\times\vec E\) component-wise. Using
              <span class="math">\(\partial_t\sin\theta=-\omega\cos\theta\)</span> and
              <span class="math">\(\partial_t\cos\theta=\omega\sin\theta\)</span>, we integrate to get:
            </p>

            <div class="eq">
              <div class="label">Magnetic field</div>
              <div class="math">\[
                B_x=
                -\frac{E_0k_y}{\omega}\sin(k_y y+\phi_y)\sin(k_x x-\omega t),
                \qquad
                B_y=
                -\frac{E_0k_x}{\omega}\cos(k_y y+\phi_y)\cos(k_x x-\omega t),
                \qquad
                B_z=0.
              \]</div>
            </div>
          </section>

          <!-- FINAL -->
          <section id="final" style="margin-top:22px">
            <div class="pill"><span class="dot"></span><span>Final Boxed Results</span></div>

            <div class="finalbox">
              <p><strong>(1.a)</strong></p>
              <div class="math">\[
                \phi_y=\frac{\pi}{2}\;(\text{mod }\pi),
                \qquad
                k_y=\frac{m\pi}{a},\;\; m=1,2,3,\dots
              \]</div>

              <p><strong>(1.b)</strong></p>
              <div class="math">\[
                k_x^2+\left(\frac{m\pi}{a}\right)^2=\left(\frac{\omega}{c}\right)^2
                \quad\Longleftrightarrow\quad
                \omega=c\sqrt{k_x^2+\left(\frac{m\pi}{a}\right)^2}.
              \]</div>

              <p><strong>(1.c)</strong></p>
              <div class="math">\[
                \omega_c=\frac{\pi c}{a},
                \qquad
                f_c=\frac{c}{2a}
                \quad (\text{lowest, }m=1).
              \]</div>

              <p><strong>(1.d)</strong></p>
              <div class="math">\[
                \vec B(x,y,t)=
                -\frac{E_0 k_y}{\omega}\sin(k_y y+\phi_y)\sin(k_x x-\omega t)\,\hat{\mathbf x}
                -\frac{E_0 k_x}{\omega}\cos(k_y y+\phi_y)\cos(k_x x-\omega t)\,\hat{\mathbf y},
                \qquad B_z=0.
              \]</div>
            </div>
          </section>

          <!-- SANITY CHECKS -->
          <section id="sanity" style="margin-top:22px">
            <div class="pill"><span class="dot"></span><span>Sanity Checks</span></div>

            <h3>Units</h3>
            <p>
              <span class="math">\(E_0\)</span> has units V/m and <span class="math">\(k/\omega\)</span> has units (1/m)/(1/s)=s/m,
              so <span class="math">\(E_0(k/\omega)\)</span> has units V·s/m² = Tesla. ✅
            </p>

            <h3>Limiting cases</h3>
            <ul>
              <li><strong>Cutoff:</strong> as <span class="math">\(k_x\to 0\)</span>, the term <span class="math">\(B_y\propto k_x\)</span> vanishes, consistent with the propagation-to-evanescence transition. ✅</li>
              <li><strong>High frequency:</strong> for <span class="math">\(\omega\gg \omega_c\)</span>, <span class="math">\(k_x\approx \omega/c\)</span> and the mode propagates efficiently along <span class="math">\(x\)</span>. ✅</li>
            </ul>

            <h3>Physical interpretation</h3>
            <p>
              The conductor enforces a transverse standing wave with <span class="math">\(m\)</span> half-wavelengths across
              the <span class="math">\(y\)</span>-dimension, hence <span class="math">\(k_y=m\pi/a\)</span>.
              Cutoff is set by the lowest nontrivial transverse pattern.
            </p>
          </section>

          <footer>
            <strong>Filling medium note:</strong>
            This solution assumes vacuum/air so <span class="math">\(c=1/\sqrt{\mu_0\varepsilon_0}\)</span>.
            In a dielectric-filled guide, replace <span class="math">\(c\)</span> by
            <span class="math">\(v=1/\sqrt{\mu\varepsilon}\)</span>.
          </footer>
        </div>
      </main>
    </div>
  </div>

  <script>
    // KaTeX auto-render
    function renderMath(){
      if (!window.renderMathInElement) return;
      renderMathInElement(document.body, {
        delimiters: [
          {left: "$$", right: "$$", display: true},
          {left: "\\[", right: "\\]", display: true},
          {left: "\\(", right: "\\)", display: false}
        ],
        throwOnError: false
      });
    }

    // Toggle visibility of math blocks (in case user wants plain text view)
    let mathVisible = true;
    function toggleMathVisibility(){
      mathVisible = !mathVisible;
      document.querySelectorAll(".math").forEach(el => {
        el.style.display = mathVisible ? "" : "none";
      });
    }

    // Buttons + keyboard shortcuts
    document.getElementById("btnMath").addEventListener("click", toggleMathVisibility);
    document.getElementById("btnPrint").addEventListener("click", () => window.print());

    window.addEventListener("keydown", (e) => {
      const k = e.key.toLowerCase();
      if (k === "m") toggleMathVisibility();
      if (k === "p") window.print();
    });

    window.addEventListener("load", () => {
      renderMath();
    });
  </script>
</body>
</html>
