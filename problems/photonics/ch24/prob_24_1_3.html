<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interconnection Hologram for a Conformal Map (Log-Polar Transform): Phase Function φ(x,y)</title>
  <style>
    :root{
      --bg:#0b0f17;
      --card:#111a2a;
      --card2:#0f1624;
      --ink:#eaf0ff;
      --muted:#b8c3e6;
      --faint:#7f8bb0;
      --accent:#7cf6c7;
      --accent2:#7cb7ff;
      --warn:#ffd166;
      --danger:#ff6b6b;
      --line:rgba(255,255,255,0.10);
      --shadow: 0 18px 60px rgba(0,0,0,0.45);
      --radius: 18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--ink);
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(124,183,255,0.22), transparent 60%),
        radial-gradient(900px 600px at 80% 30%, rgba(124,246,199,0.16), transparent 55%),
        radial-gradient(800px 520px at 50% 95%, rgba(255,209,102,0.10), transparent 55%),
        var(--bg);
      line-height:1.55;
    }

    a{color:var(--accent2); text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{
      max-width:1180px;
      margin:0 auto;
      padding:22px 18px 52px;
    }

    header{
      padding:22px 20px;
      background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      position:relative;
      overflow:hidden;
    }
    header:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(600px 220px at 12% 20%, rgba(124,246,199,0.22), transparent 60%),
        radial-gradient(520px 240px at 86% 30%, rgba(124,183,255,0.20), transparent 60%);
      filter:blur(8px);
      opacity:0.7;
      pointer-events:none;
    }
    header > *{position:relative}
    h1{
      margin:0 0 8px;
      font-size:clamp(1.25rem, 2.2vw, 2.05rem);
      letter-spacing:0.2px;
    }
    .sub{
      margin:0;
      color:var(--muted);
      max-width:72ch;
    }

    .grid{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:18px;
      margin-top:18px;
      align-items:start;
    }

    nav.toc{
      position:sticky;
      top:14px;
      background:linear-gradient(180deg, rgba(17,26,42,0.92), rgba(15,22,36,0.86));
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:14px 14px 12px;
      backdrop-filter: blur(8px);
    }
    .toc h2{
      font-size:0.95rem;
      margin:0 0 10px;
      color:var(--ink);
      display:flex;
      align-items:center;
      gap:10px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,0.04);
      color:var(--muted);
      font-size:0.78rem;
      white-space:nowrap;
    }
    .toc ol{
      margin:0;
      padding-left:18px;
      color:var(--muted);
    }
    .toc li{margin:6px 0}
    .toc a{color:var(--muted)}
    .toc a:hover{color:var(--ink)}
    .toc .toplink{
      display:block;
      margin-top:10px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(255,255,255,0.03);
      text-align:center;
    }

    main{
      background:linear-gradient(180deg, rgba(17,26,42,0.84), rgba(15,22,36,0.80));
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:18px;
      backdrop-filter: blur(6px);
    }

    section{
      padding:14px 2px;
      border-top:1px dashed rgba(255,255,255,0.12);
    }
    section:first-of-type{border-top:none}
    h2{
      margin:0 0 10px;
      font-size:1.15rem;
      letter-spacing:0.2px;
    }
    h3{
      margin:16px 0 10px;
      font-size:1.02rem;
      color:var(--ink);
    }
    p{margin:10px 0; color:var(--muted)}
    ul,ol{color:var(--muted)}
    li{margin:6px 0}
    .kicker{
      display:inline-block;
      color:var(--accent);
      font-weight:650;
      letter-spacing:0.12em;
      text-transform:uppercase;
      font-size:0.72rem;
      margin-bottom:8px;
      opacity:0.95;
    }

    .cards{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap:12px;
      margin:12px 0 8px;
    }
    .card{
      grid-column: span 12;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px 12px;
    }
    @media (min-width: 900px){
      .card.half{grid-column: span 6;}
      .card.third{grid-column: span 4;}
    }
    .card strong{color:var(--ink)}
    .callout{
      border-left:4px solid var(--accent2);
      padding:12px 12px 12px 12px;
      background:linear-gradient(180deg, rgba(124,183,255,0.10), rgba(255,255,255,0.02));
    }
    .callout.warn{border-left-color:var(--warn); background:linear-gradient(180deg, rgba(255,209,102,0.11), rgba(255,255,255,0.02));}
    .callout.danger{border-left-color:var(--danger); background:linear-gradient(180deg, rgba(255,107,107,0.10), rgba(255,255,255,0.02));}

    .eq{
      margin:10px 0;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,0.18);
      font-family:var(--mono);
      color:#e9f2ff;
      overflow:auto;
      position:relative;
    }
    .eq .lbl{
      position:absolute;
      top:10px;
      right:10px;
      color:var(--faint);
      font-size:0.72rem;
      font-family:var(--sans);
    }
    .btnrow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin:8px 0 2px;
    }
    button.copy{
      border:1px solid var(--line);
      background:rgba(255,255,255,0.04);
      color:var(--ink);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      transition: transform 120ms ease, background 120ms ease, border-color 120ms ease;
      font-weight:600;
      letter-spacing:0.15px;
    }
    button.copy:hover{background:rgba(255,255,255,0.07); transform:translateY(-1px)}
    button.copy:active{transform:translateY(0px)}
    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%);
      background:rgba(12,18,30,0.92);
      border:1px solid var(--line);
      padding:10px 12px;
      border-radius:12px;
      box-shadow:var(--shadow);
      color:var(--muted);
      opacity:0;
      pointer-events:none;
      transition: opacity 180ms ease, transform 180ms ease;
    }
    .toast.show{opacity:1; transform:translateX(-50%) translateY(-4px)}
    details{
      margin:10px 0;
      border:1px solid var(--line);
      border-radius:14px;
      background:rgba(255,255,255,0.03);
      overflow:hidden;
    }
    summary{
      cursor:pointer;
      padding:12px 12px;
      color:var(--ink);
      font-weight:700;
      list-style:none;
      user-select:none;
    }
    summary::-webkit-details-marker{display:none}
    details[open] summary{
      border-bottom:1px dashed rgba(255,255,255,0.12);
      background:rgba(255,255,255,0.02);
    }
    .detailsBody{padding:10px 12px 12px}
    .muted{color:var(--faint)}
    .hr{height:1px;background:rgba(255,255,255,0.10);margin:14px 0}
    .final{
      border:1px solid rgba(124,246,199,0.40);
      background:linear-gradient(180deg, rgba(124,246,199,0.10), rgba(255,255,255,0.02));
    }
    .backtop{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      margin-top:14px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(255,255,255,0.03);
    }

    footer{
      margin-top:16px;
      color:var(--faint);
      font-size:0.92rem;
      padding:14px 4px 0;
    }

    /* Responsive layout */
    @media (max-width: 980px){
      .grid{grid-template-columns: 1fr}
      nav.toc{position:relative; top:auto}
    }

    /* Subtle micro-animation for section headings */
    @keyframes fadeUp {
      from {opacity:0; transform:translateY(6px)}
      to   {opacity:1; transform:translateY(0)}
    }
    section{animation:fadeUp 260ms ease both}
    section:nth-child(1){animation-delay:0ms}
    section:nth-child(2){animation-delay:20ms}
    section:nth-child(3){animation-delay:40ms}
    section:nth-child(4){animation-delay:60ms}
    section:nth-child(5){animation-delay:80ms}
    section:nth-child(6){animation-delay:100ms}

    /* Print-friendly */
    @media print{
      body{background:white; color:black}
      header, main, nav.toc{
        box-shadow:none !important;
        background:white !important;
        border:1px solid #ddd !important;
      }
      .eq{background:#f6f6f6; color:black; border-color:#ddd}
      .toc, .toast, button.copy{display:none !important}
      a{color:black; text-decoration:underline}
      section{break-inside:avoid-page}
      h1,h2,h3{color:black}
      p,li{color:#111}
    }
  </style>
</head>

<body>
  <a id="top"></a>
  <div class="wrap">
    <header>
      <div class="kicker">Photonics • Holographic Interconnects • Conformal Mapping</div>
      <h1>Interconnection Hologram for a Conformal Map (Log-Polar Transform)</h1>
      <p class="sub">
        We design a <strong>thin phase hologram</strong> that implements the mapping
        <span class="muted">Cartesian (x,y)</span> → <span class="muted">(x′,y′) = (ln r, atan(y/x))</span>,
        i.e., a <strong>log-polar coordinate transform</strong>. The goal is to derive the required phase function
        <strong>φ(x,y)</strong>.
      </p>
    </header>

    <div class="grid">
      <nav class="toc" aria-label="Table of contents">
        <h2>
          Table of Contents
          <span class="pill">Sticky</span>
        </h2>
        <ol>
          <li><a href="#qs">Quick Summary</a></li>
          <li><a href="#p0">PART 0 — Concept Primer</a></li>
          <li><a href="#p0b">PART 0B — Industry & Applied Physics</a></li>
          <li><a href="#p1">PART 1 — Problem Analysis</a></li>
          <li><a href="#p2">PART 2 — Strategy & Tips</a></li>
          <li><a href="#p3">PART 3 — Full Solution</a></li>
          <li><a href="#p4">PART 4 — Deeper Understanding</a></li>
          <li><a href="#p5">PART 5 — Optional Plot Guide</a></li>
        </ol>
        <a class="toplink" href="#top">Back to top ↑</a>
      </nav>

      <main>
        <article>
          <!-- Quick Summary -->
          <section id="qs">
            <h2>Quick Summary</h2>
            <ul>
              <li><strong>What this is:</strong> Design a <em>phase-only interconnection hologram</em> that maps each input point (x,y) to an output coordinate (x′,y′) given by a conformal (analytic) transform.</li>
              <li><strong>Given map:</strong> <span class="muted">x′ = ln(√(x²+y²))</span>, <span class="muted">y′ = tan⁻¹(y/x)</span> (log-polar: u = ln r, v = θ).</li>
              <li><strong>Key physics idea:</strong> A thin phase element creates a <em>local grating</em>; its phase gradient steers light to a desired position in a Fourier (focal) plane.</li>
              <li><strong>Governing relation (design rule):</strong> In a lens Fourier plane mapping, the phase encodes a position-dependent “carrier” so that the diffraction angle corresponds to the target (x′,y′).</li>
              <li><strong>Result type:</strong> <strong>Symbolic</strong> phase function φ(x,y) (up to an additive constant and modulo 2π).</li>
              <li><strong>Physical meaning:</strong> φ(x,y) is the optical path delay (phase) pattern that “warps” spatial information into log-polar coordinates—useful for scale/rotation invariant optical processing.</li>
              <li><strong>Final boxed expression:</strong> A compact closed-form φ(x,y) in terms of r = √(x²+y²) and θ = atan(y/x), scaled by (2π/λf) for a focal-length-f Fourier geometry.</li>
            </ul>
          </section>

          <!-- PART 0 -->
          <section id="p0">
            <h2>PART 0 — Concept Primer (Theory Before Solving)</h2>

            <div class="cards">
              <div class="card half callout">
                <strong>Core idea:</strong>
                <p>
                  A <strong>thin phase hologram</strong> (also called a diffractive optical element, DOE) can redirect light by behaving locally like a
                  <strong>grating</strong>. The local <em>spatial frequency</em> (phase slope) controls the diffraction angle, and with a lens this becomes a
                  <strong>position</strong> in the focal plane.
                </p>
              </div>
              <div class="card half callout warn">
                <strong>Important nuance:</strong>
                <p>
                  A continuous coordinate transform is not just “one grating”: it is a <em>field of gratings</em>, meaning φ(x,y) varies across the aperture.
                  For the design to be physically realizable as a single-valued phase function, the encoded steering field must be consistent (no contradictions).
                </p>
              </div>
            </div>

            <h3>0.1 Definitions, symbols, and units</h3>
            <ul>
              <li><strong>(x,y)</strong> [m]: transverse coordinates on the hologram plane (input plane).</li>
              <li><strong>(x′,y′)</strong> [m] or [dimensionless] depending on system scaling: target transverse coordinates in the output plane (often a focal plane or an image plane).</li>
              <li><strong>r = √(x²+y²)</strong> [m]: radial coordinate in the hologram plane.</li>
              <li><strong>θ = atan(y/x)</strong> [rad]: polar angle (principal value; practical systems use <span class="muted">atan2(y,x)</span>).</li>
              <li><strong>λ</strong> [m]: wavelength in the medium (≈ free-space wavelength for air).</li>
              <li><strong>k = 2π/λ</strong> [rad/m]: optical wavenumber.</li>
              <li><strong>f</strong> [m]: focal length of the Fourier lens (typical in interconnection hologram layouts).</li>
              <li><strong>φ(x,y)</strong> [rad]: phase delay imparted by the hologram (phase-only DOE).</li>
            </ul>

            <h3>0.2 Physical meaning (intuition)</h3>
            <p>
              If a wavefront has a transverse phase gradient, it carries transverse momentum. In paraxial optics:
              a phase slope behaves like a small tilt, steering energy to an angle. A lens converts angle to a spot position in its focal plane.
              Therefore, by tailoring <strong>φ(x,y)</strong>, we can “send” light originating (or passing) at <strong>(x,y)</strong> toward a prescribed output coordinate.
            </p>

            <div class="card callout">
              <strong>Thin-element (eikonal) picture:</strong>
              <p class="muted">
                Phase is proportional to optical path difference (OPD). A DOE is a manufactured surface relief or index pattern that creates spatially varying OPD,
                hence a designed φ(x,y).
              </p>
            </div>

            <h3>0.3 Key principle used in hologram-based interconnects</h3>
            <p>
              In a common “Fourier mapping” geometry (DOE in the front focal plane of a lens, output in the back focal plane),
              a linear phase ramp <span class="muted">exp(i(2π/λf)(Xx + Yy))</span> sends light toward the focal-plane coordinate <span class="muted">(X,Y)</span>.
              This is the basic steering rule behind holographic interconnects.
            </p>

            <div class="eq" id="eq-steer" data-copy="Steering rule (paraxial, Fourier lens):   ∂φ/∂x = (2π/λf)·X   and   ∂φ/∂y = (2π/λf)·Y">
              <div class="lbl">Key equation</div>
              Steering rule (paraxial, Fourier lens):
              ∂φ/∂x = (2π/λf)·X   and   ∂φ/∂y = (2π/λf)·Y
            </div>
            <div class="btnrow">
              <button class="copy" data-target="eq-steer">Copy key equation</button>
            </div>

            <h3>0.4 Conformal maps (why they appear here)</h3>
            <p>
              A <strong>conformal map</strong> is a transformation that preserves local angles. In complex form, if
              <span class="muted">z = x + i y</span> and <span class="muted">w = u + i v</span>, then a conformal map is often an <strong>analytic function</strong> <span class="muted">w = f(z)</span>.
              Here, <span class="muted">w = ln z</span>, so:
            </p>

            <div class="eq" id="eq-map" data-copy="Given conformal map (log-polar):   u(x,y)=x′=ln(r)=ln(√(x²+y²))   and   v(x,y)=y′=θ=atan(y/x)">
              <div class="lbl">Given map</div>
              u(x,y)=x′=ln(r)=ln(√(x²+y²))   and   v(x,y)=y′=θ=atan(y/x)
            </div>
            <div class="btnrow">
              <button class="copy" data-target="eq-map">Copy mapping</button>
            </div>

            <details>
              <summary>Deeper note: Cauchy–Riemann structure (why “conformal” matters)</summary>
              <div class="detailsBody">
                <p>
                  For analytic <span class="muted">w=u+iv=f(z)</span>, the components satisfy the Cauchy–Riemann relations:
                </p>
                <div class="eq" data-copy="Cauchy–Riemann (for analytic f):   ∂u/∂x = ∂v/∂y   and   ∂u/∂y = -∂v/∂x">
                  Cauchy–Riemann (for analytic f):   ∂u/∂x = ∂v/∂y   and   ∂u/∂y = -∂v/∂x
                </div>
                <p class="muted">
                  This structure is what makes conformal maps especially “optics-friendly” for certain hologram synthesis methods:
                  it guarantees angle preservation and helps keep local distortions well-behaved (though branch cuts and singularities still matter).
                </p>
              </div>
            </details>

            <h3>0.5 Mini intuition examples (quick)</h3>
            <ul>
              <li><strong>Pure steering:</strong> If φ(x,y)= (2π/λf) X₀ x, then every point is tilted the same → energy focuses at X=X₀.</li>
              <li><strong>Varying steering:</strong> If the phase slope changes with x, different parts of the aperture go to different X, creating a redistribution (a “warp”).</li>
              <li><strong>Log-polar meaning:</strong> Taking <span class="muted">u=ln r</span> turns multiplicative scale changes in r into additive shifts in u; <span class="muted">v=θ</span> turns rotation into translation in angle.</li>
            </ul>

            <div class="card callout danger">
              <strong>What to watch for (pitfalls)</strong>
              <ul>
                <li><strong>Angle definition:</strong> use <span class="muted">atan2(y,x)</span> to avoid quadrant ambiguity.</li>
                <li><strong>Singularity:</strong> the map has a singular point at <span class="muted">r=0</span> (ln r → −∞). A real DOE must exclude or regularize the center.</li>
                <li><strong>Branch cut:</strong> θ wraps by 2π; practical designs decide where the discontinuity lies.</li>
                <li><strong>Phase modulo 2π:</strong> manufacturing implements φ mod 2π (or multilevel approximations).</li>
                <li><strong>Paraxial regime:</strong> the steering rule assumes small angles and a Fourier-lens geometry.</li>
              </ul>
            </div>
          </section>

          <!-- PART 0B -->
          <section id="p0b">
            <h2>PART 0B — Industry &amp; Applied Physics Perspective</h2>

            <p>
              The log-polar transform implemented optically is a classic example of “physics doing computation.”
              It matters because industry often wants <strong>fast, low-latency feature extraction</strong> and <strong>compact optical preprocessing</strong>
              before electronics take over.
            </p>

            <h3>Where this appears in industry (concrete application areas)</h3>
            <ul>
              <li><strong>Machine vision & inspection:</strong> rotation/scale-invariant matching (e.g., parts orientation in pick-and-place, wafer/PCB inspection).</li>
              <li><strong>Optical correlators & pattern recognition:</strong> log-polar preprocessing enables correlation methods robust to scale and rotation.</li>
              <li><strong>Beam shaping in laser processing:</strong> mapping Cartesian beam profiles into annular or angular distributions for cutting/welding uniformity.</li>
              <li><strong>Imaging sensors and computational imaging:</strong> optical front-ends that remap fields to match sensor sampling constraints (dynamic range, foveated imaging).</li>
            </ul>

            <h3>Why engineers care</h3>
            <div class="cards">
              <div class="card third callout">
                <strong>Performance</strong>
                <p class="muted">Optical preprocessing can be effectively instantaneous (propagation time), reducing compute load and latency.</p>
              </div>
              <div class="card third callout">
                <strong>Reliability</strong>
                <p class="muted">A passive DOE has no moving parts and can be rugged if designed with tolerances in mind.</p>
              </div>
              <div class="card third callout">
                <strong>Cost & scale</strong>
                <p class="muted">Once designed, DOEs can be replicated (e.g., lithography, embossing) at low per-unit cost.</p>
              </div>
            </div>

            <h3>Typical measurement / validation methods</h3>
            <ul>
              <li><strong>Focal-plane mapping test:</strong> scan a point/spot across (x,y) and measure where it lands in (x′,y′) using a camera.</li>
              <li><strong>Wavefront/phase metrology:</strong> interferometry or phase retrieval to verify φ(x,y) and fabrication fidelity.</li>
              <li><strong>MTF / distortion characterization:</strong> quantify how well the transform preserves desired features under bandwidth limits.</li>
            </ul>

            <h3>Design trade-offs and constraints (real-world)</h3>
            <ul>
              <li><strong>Manufacturability:</strong> finite pixelation (CGH), finite etch depth levels → phase quantization errors.</li>
              <li><strong>Efficiency:</strong> blaze design, polarization sensitivity, wavelength dependence (chromatic dispersion of DOEs).</li>
              <li><strong>Alignment tolerances:</strong> the mapping assumes a specific lens distance/focal length and centering; misalignment warps the transform.</li>
              <li><strong>Dynamic range near r=0:</strong> singularity forces apodization, a central stop, or a regularized log function.</li>
            </ul>

            <details>
              <summary>From lab to product: adapting the idealized model</summary>
              <div class="detailsBody">
                <p>
                  In products, you rarely implement the mathematical transform “exactly” everywhere. Instead, you:
                  (i) restrict the usable aperture to <span class="muted">r ≥ r_min</span>,
                  (ii) choose a branch cut location and unwrap strategy for θ,
                  (iii) calibrate scaling so (x′,y′) match sensor pixel coordinates,
                  and (iv) include fabrication constraints (minimum feature size, phase levels) in the synthesis.
                </p>
              </div>
            </details>
          </section>

          <!-- PART 1 -->
          <section id="p1">
            <h2>PART 1 — Problem Analysis (No Solving Yet)</h2>

            <h3>1.1 Restate the problem (in plain words)</h3>
            <p>
              We want a phase-only hologram that takes an input field described in Cartesian coordinates (x,y) and
              produces an output where the geometry is remapped to coordinates:
              <span class="muted">x′ = ln(√(x²+y²))</span> and <span class="muted">y′ = tan⁻¹(y/x)</span>.
              This is: (x,y) → (r,θ) → (ln r, θ). We must find the hologram phase function <strong>φ(x,y)</strong>.
            </p>

            <h3>1.2 Given quantities</h3>
            <ul>
              <li>The transformation:
                <span class="muted">x′ = ψx(x,y) = ln(√(x²+y²))</span>,
                <span class="muted">y′ = ψy(x,y) = tan⁻¹(y/x)</span>.
              </li>
              <li>Implicit optical context: an <strong>interconnection hologram</strong> (thin DOE) implementing a coordinate mapping.</li>
            </ul>

            <h3>1.3 Unknowns</h3>
            <ul>
              <li>The required phase function <strong>φ(x,y)</strong> of the hologram (defined up to an additive constant and modulo 2π).</li>
            </ul>

            <h3>1.4 Relevant principles and why they apply</h3>
            <ul>
              <li><strong>Paraxial diffraction + Fourier lens mapping:</strong> used in holographic interconnects to map phase gradients to focal-plane positions.</li>
              <li><strong>Thin-element approximation:</strong> hologram acts as multiplicative phase: <span class="muted">U_out = U_in · exp(iφ)</span>.</li>
              <li><strong>Geometric (stationary-phase) interpretation:</strong> local phase slope determines where energy flows in the output plane.</li>
            </ul>
            <p class="muted">
              We do not need full vector electromagnetics here: the problem is scalar, paraxial, and asks for the design phase function rather than polarization effects.
            </p>

            <div class="card callout warn">
              <strong>Assumptions (explicit)</strong>
              <ul>
                <li>Scalar, monochromatic field at wavelength λ.</li>
                <li>Paraxial regime (small deflection angles).</li>
                <li>Thin phase-only hologram (no significant absorption).</li>
                <li>Hologram used in a standard interconnect/Fourier-lens geometry so “phase slope ↔ output position”.</li>
                <li>Ignore finite aperture and fabrication quantization during symbolic derivation.</li>
              </ul>
            </div>

            <h3>1.5 Possible approaches (compare)</h3>
            <ol>
              <li><strong>Local grating / phase-gradient method:</strong> relate desired output coordinate to phase derivatives; integrate to get φ.
                <span class="muted">Pros: direct, physical, standard for interconnect holograms. Cons: integration must be consistent; singularities require care.</span>
              </li>
              <li><strong>Stationary-phase derivation from Fresnel/Fraunhofer integral:</strong> enforce that each (x,y) contributes constructively at its mapped (x′,y′).
                <span class="muted">Pros: more rigorous, clarifies geometry/scaling. Cons: heavier algebra.</span>
              </li>
              <li><strong>Complex-analytic (conformal) synthesis:</strong> exploit w=f(z) structure to build a generating phase function.
                <span class="muted">Pros: elegant, reveals why conformal maps are special. Cons: still must connect to optical scaling.</span>
              </li>
            </ol>

            <h3>1.6 Chosen approach</h3>
            <p>
              We choose the <strong>local grating / phase-gradient method</strong>, supported by a short stationary-phase justification,
              because it produces a clear, teachable design rule and yields a closed-form φ(x,y) for the given log-polar map.
            </p>
          </section>

          <!-- PART 2 -->
          <section id="p2">
            <h2>PART 2 — Strategy &amp; Tips (Roadmap Only)</h2>

            <ol>
              <li><strong>Define the map:</strong> express it in compact variables <span class="muted">r</span> and <span class="muted">θ</span>. (Tool: coordinate definitions)</li>
              <li><strong>Choose optical scaling:</strong> interpret (x′,y′) as focal-plane coordinates (or scaled coordinates) in a Fourier-lens interconnect. (Tool: paraxial mapping)</li>
              <li><strong>Use steering rule:</strong> connect desired output coordinate to the local phase slope. (Tool: ∂φ/∂x, ∂φ/∂y relations)</li>
              <li><strong>Build an integrable phase:</strong> construct φ(x,y) consistent with the mapping for a conformal transform. (Tool: generating-function style construction)</li>
              <li><strong>Insert the specific ψx, ψy:</strong> substitute ln r and θ into the general φ expression. (Tool: substitution)</li>
              <li><strong>Sanity checks:</strong> dimensions, singularities (r→0), angle wrapping, and physical interpretation. (Tool: limiting cases)</li>
            </ol>

            <div class="card callout danger">
              <strong>Common mistakes</strong>
              <ul>
                <li>Using <span class="muted">atan(y/x)</span> without acknowledging quadrant ambiguity (use <span class="muted">atan2</span> in implementations).</li>
                <li>Forgetting the geometric scaling factor <span class="muted">(2π/λf)</span> when converting between phase slope and focal-plane position.</li>
                <li>Ignoring the singularity at <span class="muted">r=0</span>; real designs require a central exclusion or regularization.</li>
                <li>Assuming φ must be unique: it is defined modulo <span class="muted">2π</span> and up to an additive constant.</li>
              </ul>
            </div>
          </section>

          <!-- PART 3 -->
          <section id="p3">
            <h2>PART 3 — Full Solution (Detailed + Teaching)</h2>

            <h3>3.1 Qualitative expectation (before equations)</h3>
            <p>
              The mapping sends circles (<span class="muted">r = const</span>) to vertical lines (<span class="muted">x′ = ln r = const</span>) and rays (<span class="muted">θ = const</span>) to horizontal lines (<span class="muted">y′ = θ = const</span>).
              So we expect the hologram to <strong>unwrap angular information</strong> and <strong>compress/expand radial distances logarithmically</strong>.
              Near the origin, ln r changes rapidly, so the phase pattern must vary strongly (hence the physical need to avoid r≈0).
            </p>

            <div class="hr"></div>

            <h3>3.2 Optical steering rule in an interconnection geometry</h3>
            <p>
              Consider a thin phase element placed in the front focal plane of a lens (focal length f), and observe the field in the back focal plane.
              A plane wave leaving the DOE at small angles <span class="muted">(θx, θy)</span> reaches the focal plane at
              <span class="muted">X = f θx</span>, <span class="muted">Y = f θy</span>.
            </p>
            <p>
              A transverse phase gradient corresponds to transverse wavevector components:
              <span class="muted">kx = ∂φ/∂x</span>, <span class="muted">ky = ∂φ/∂y</span>,
              and in paraxial optics <span class="muted">θx ≈ kx/k</span>, <span class="muted">θy ≈ ky/k</span>.
              Combining these gives:
            </p>

            <div class="eq" id="eq-grad" data-copy="Paraxial mapping to focal plane:   X = (f/k)·(∂φ/∂x) = (λf/2π)·(∂φ/∂x)   and   Y = (λf/2π)·(∂φ/∂y)">
              <div class="lbl">Design relation</div>
              X = (f/k)·(∂φ/∂x) = (λf/2π)·(∂φ/∂x)   and   Y = (λf/2π)·(∂φ/∂y)
            </div>
            <div class="btnrow">
              <button class="copy" data-target="eq-grad">Copy design relation</button>
            </div>

            <p class="muted">
              In an interconnect, we want the output coordinate to be a function of the input coordinate. So we set
              <span class="muted">(X,Y) = (x′(x,y), y′(x,y))</span> up to any scaling used by the system.
              This makes the phase slopes encode the desired mapping.
            </p>

            <div class="card callout warn">
              <strong>But is any map possible with a single phase?</strong>
              <p class="muted">
                Not every vector field (x′(x,y),y′(x,y)) can be written as the gradient of a scalar phase.
                Practical hologram synthesis often uses additional optics, or constructs φ through a generating function
                consistent with the intended mapping. For conformal maps like ln z, a standard interconnection-hologram construction yields a closed-form phase.
              </p>
            </div>

            <h3>3.3 A standard interconnection-hologram phase construction</h3>
            <p>
              In holographic interconnection design, a widely used continuous-map phase function is built by embedding the desired mapping inside the
              Fourier kernel as a position-dependent “carrier.” One convenient (and commonly used) choice is:
            </p>

            <div class="eq" id="eq-general" data-copy="Interconnection hologram phase (Fourier-lens scaling):   φ(x,y) = (2π/λf) · [ x·ψx(x,y) + y·ψy(x,y) ]  +  φ0    (mod 2π)">
              <div class="lbl">General form</div>
              φ(x,y) = (2π/λf) · [ x·ψx(x,y) + y·ψy(x,y) ]  +  φ0    (mod 2π)
            </div>
            <div class="btnrow">
              <button class="copy" data-target="eq-general">Copy key equation</button>
            </div>

            <p>
              Here, <span class="muted">ψx(x,y)</span> and <span class="muted">ψy(x,y)</span> are the desired output coordinates (possibly in scaled units),
              and <span class="muted">φ0</span> is an arbitrary constant (does not affect steering).
              This construction can be motivated by viewing the DOE as imprinting, at each (x,y), a local plane-wave factor whose
              effective spatial frequency points toward the desired destination.
            </p>

            <details>
              <summary>Why this form is physically reasonable (short stationary-phase intuition)</summary>
              <div class="detailsBody">
                <p>
                  In a Fourier-lens system, the focal-plane field resembles an integral of the form
                  <span class="muted">∬ U(x,y) exp(iφ(x,y)) exp(-i(2π/λf)(Xx+Yy)) dx dy</span>.
                  If the DOE phase contains the term <span class="muted">(2π/λf)(xψx+yψy)</span>, then constructive contribution to a particular (X,Y)
                  is promoted when <span class="muted">(X,Y)</span> matches the embedded local “target” (ψx,ψy).
                  This is the core idea behind mapping/interconnect holograms.
                </p>
                <p class="muted">
                  A fully rigorous treatment includes amplitude normalization (Jacobian) and aperture limits; the problem here asks specifically for the phase expression.
                </p>
              </div>
            </details>

            <h3>3.4 Apply to the given conformal map</h3>
            <p>
              The problem specifies:
            </p>
            <div class="eq" id="eq-psi" data-copy="ψx(x,y)=ln(√(x²+y²)) = ln r ,   ψy(x,y)=tan⁻¹(y/x) = θ    with r=√(x²+y²)">
              <div class="lbl">Substitution</div>
              ψx(x,y)=ln(√(x²+y²)) = ln r ,   ψy(x,y)=tan⁻¹(y/x) = θ    with r=√(x²+y²)
            </div>
            <div class="btnrow">
              <button class="copy" data-target="eq-psi">Copy substitution</button>
            </div>

            <p>
              Insert these into the general phase construction:
            </p>

            <div class="eq final" id="eq-final" data-copy="FINAL (phase-only interconnection hologram for log-polar map):   φ(x,y) = (2π/λf)·[ x·ln(√(x²+y²)) + y·tan⁻¹(y/x) ] + φ0   (mod 2π).   (Use atan2(y,x) in practice.)">
              <div class="lbl">Final answer</div>
              <strong>φ(x,y) = (2π/λf)·[ x·ln(√(x²+y²)) + y·tan⁻¹(y/x) ] + φ0   (mod 2π)</strong><br/>
              (Use atan2(y,x) in practice.)
            </div>
            <div class="btnrow">
              <button class="copy" data-target="eq-final">Copy final answer</button>
            </div>

            <h3>3.5 Sanity checks</h3>
            <ul>
              <li><strong>Units:</strong> The bracket term has units of <span class="muted">m·(dimensionless)</span> if ln r is treated as ln(r/r₀). In strict dimensional analysis, logs require a reference length <span class="muted">r₀</span> so that ln(r/r₀) is dimensionless. Practically, this is absorbed into scaling/calibration.</li>
              <li><strong>Scaling factor:</strong> <span class="muted">(2π/λf)</span> has units <span class="muted">1/m²</span>, multiplying a term with units <span class="muted">m²</span> (after proper normalization) to yield radians.</li>
              <li><strong>Singularity:</strong> At <span class="muted">r→0</span>, ln r → −∞ so φ becomes unbounded. Real systems impose <span class="muted">r ≥ r_min</span> or use ln(r+r0) style regularization.</li>
              <li><strong>Angle wrap:</strong> θ jumps by 2π across a branch cut; φ inherits a discontinuity unless you choose a cut location and/or unwrap in design software.</li>
              <li><strong>Physical interpretation:</strong> The x·ln r term encodes radial (scale) information; the y·θ term encodes angular (rotation) information, consistent with log-polar remapping.</li>
            </ul>

            <a class="backtop" href="#top" aria-label="Back to top">Back to top ↑</a>
          </section>

          <!-- PART 4 -->
          <section id="p4">
            <h2>PART 4 — Deeper Understanding (Theory Around the Result)</h2>

            <h3>4.1 Re-interpreting the formula: what each term “controls”</h3>
            <p>
              The phase is:
              <span class="muted">φ ∝ x·ln r + y·θ</span>.
              Think of it as a weighted blend of “radial” and “angular” encoders:
            </p>
            <ul>
              <li><strong>x·ln r:</strong> couples the horizontal coordinate to the logarithm of radius. This is what turns scaling (multiplying r) into translation in x′.</li>
              <li><strong>y·θ:</strong> couples the vertical coordinate to angle. This is what turns rotation (adding to θ) into translation in y′.</li>
              <li><strong>2π/(λf):</strong> converts a desired spatial mapping into a physically meaningful phase slope (transverse momentum) for wavelength λ and lens f.</li>
              <li><strong>φ0:</strong> irrelevant constant offset (useful for fabrication convenience, e.g., centering phase levels).</li>
            </ul>

            <h3>4.2 Parameter dependence (qualitative)</h3>
            <ul>
              <li><strong>Shorter λ:</strong> increases required phase gradients for the same mapping → finer DOE features (harder fabrication, more sensitivity).</li>
              <li><strong>Larger f:</strong> reduces phase gradients for the same output scale → easier fabrication but larger physical system.</li>
              <li><strong>Changing coordinate scaling:</strong> in practice, engineers often scale x′ and y′ to match sensor pixel pitch; that simply multiplies the bracketed terms accordingly.</li>
            </ul>

            <details>
              <summary>Practical note: making ln(r) dimensionless</summary>
              <div class="detailsBody">
                <p>
                  Strictly, <span class="muted">ln(r)</span> is only meaningful as <span class="muted">ln(r/r₀)</span> with a reference length <span class="muted">r₀</span>.
                  In optical implementations, <span class="muted">r₀</span> is set by design calibration (e.g., the radius that maps to x′=0).
                  This changes the phase by adding a term proportional to x·ln(r₀), which is effectively a linear phase ramp (a harmless global steering offset).
                </p>
              </div>
            </details>

            <h3>4.3 Alternative derivation idea (brief)</h3>
            <p>
              Another route is to start from the Fourier-lens diffraction integral and enforce (via stationary phase)
              that each input point contributes maximally to its mapped output coordinate. This yields a phase that embeds the desired mapping into the Fourier kernel,
              and leads to the same functional form (up to constants and scaling factors).
            </p>

            <h3>4.4 Concept checks (self-test with answers)</h3>
            <ul>
              <li><strong>Q:</strong> Why is the origin problematic for the log-polar map? <strong>A:</strong> Because ln r diverges at r=0, requiring a central stop or regularization.</li>
              <li><strong>Q:</strong> What does θ represent physically in the mapping? <strong>A:</strong> The polar angle; rotation becomes translation in the y′ coordinate.</li>
              <li><strong>Q:</strong> If λ decreases, what happens to DOE feature size needs? <strong>A:</strong> Phase gradients scale with 1/λ, so features generally get finer and more demanding.</li>
              <li><strong>Q:</strong> Why is atan2 preferable to atan(y/x)? <strong>A:</strong> atan2 returns the correct quadrant and handles x=0 robustly.</li>
              <li><strong>Q:</strong> Why can we add an arbitrary constant φ0? <strong>A:</strong> It does not change phase gradients, so it does not change steering/mapping.</li>
            </ul>

            <a class="backtop" href="#top">Back to top ↑</a>
          </section>

          <!-- PART 5 -->
          <section id="p5">
            <h2>PART 5 — Optional Plot Guide</h2>
            <p>
              A plot isn’t necessary here because the problem is <strong>purely symbolic</strong>: the main deliverable is an analytic phase function φ(x,y).
              Any plot would require choosing arbitrary numeric scales (λ, f, aperture limits, and mapping scaling), which would be <em>illustrative</em> rather than essential.
            </p>
            <a class="backtop" href="#top">Back to top ↑</a>
          </section>

          <footer>
            <p>
              <strong>Implementation tip (engineering):</strong> When you fabricate this as a phase-only DOE, use
              <span class="muted">φ_mod(x,y) = φ(x,y) mod 2π</span>, and exclude a small central disk <span class="muted">r&lt;r_min</span> to avoid the ln singularity.
              Calibrate scaling so the output (x′,y′) matches your sensor or downstream optics.
            </p>
          </footer>
        </article>
      </main>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite">Copied.</div>

  <script>
    (function(){
      const toast = document.getElementById('toast');
      let tHandle = null;

      function showToast(msg){
        toast.textContent = msg;
        toast.classList.add('show');
        if(tHandle) clearTimeout(tHandle);
        tHandle = setTimeout(()=>toast.classList.remove('show'), 1200);
      }

      function getCopyTextFromEq(eqEl){
        const explicit = eqEl.getAttribute('data-copy');
        if(explicit) return explicit;
        return eqEl.innerText.replace(/\s+\n/g, "\n").trim();
      }

      async function copyText(text){
        try{
          await navigator.clipboard.writeText(text);
          showToast("Copied to clipboard.");
        }catch(e){
          // Fallback
          const ta = document.createElement('textarea');
          ta.value = text;
          ta.setAttribute('readonly','');
          ta.style.position = 'fixed';
          ta.style.left = '-9999px';
          document.body.appendChild(ta);
          ta.select();
          try{
            document.execCommand('copy');
            showToast("Copied (fallback).");
          }catch(err){
            showToast("Copy failed. Select text manually.");
          }
          document.body.removeChild(ta);
        }
      }

      document.querySelectorAll('button.copy').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const id = btn.getAttribute('data-target');
          const el = document.getElementById(id);
          if(!el){ showToast("Nothing to copy."); return; }
          const txt = getCopyTextFromEq(el);
          copyText(txt);
        });
      });
    })();
  </script>
</body>
</html>
