<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Power Exchange in Frequency Up-Conversion (Three-Wave Mixing) — Worked Solution</title>
  <style>
    :root{
      --bg:#0b0f17;
      --panel:#0f1626;
      --panel2:#0d1321;
      --text:#e8eefc;
      --muted:#b7c3e6;
      --faint:#7f8bb2;
      --accent:#7aa7ff;
      --accent2:#8dffca;
      --warn:#ffd37a;
      --danger:#ff7aa6;
      --ok:#86ff8d;
      --line:rgba(255,255,255,.10);
      --shadow: 0 18px 50px rgba(0,0,0,.40);
      --radius:18px;
      --radius2:24px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 10% 10%, rgba(122,167,255,.20), transparent 55%),
        radial-gradient(900px 600px at 80% 20%, rgba(141,255,202,.12), transparent 55%),
        radial-gradient(900px 600px at 40% 85%, rgba(255,122,166,.08), transparent 60%),
        linear-gradient(180deg, #060913, #070b14 35%, #050812);
      line-height:1.55;
    }

    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}

    header{
      padding:28px 18px 14px;
      max-width:1160px;
      margin:0 auto;
    }
    .hero{
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border-radius:var(--radius2);
      padding:22px 18px;
      box-shadow:var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .hero::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(600px 220px at 15% 0%, rgba(122,167,255,.22), transparent 60%),
                  radial-gradient(520px 200px at 80% 10%, rgba(141,255,202,.16), transparent 62%);
      filter: blur(10px);
      opacity:.9;
      pointer-events:none;
    }
    .hero > *{position:relative}
    h1{
      margin:0 0 6px;
      font-size:clamp(1.25rem, 1.2rem + 1.3vw, 2.1rem);
      letter-spacing:.2px;
    }
    .subtitle{
      margin:0;
      color:var(--muted);
      font-size:clamp(.95rem, .9rem + .2vw, 1.05rem);
    }
    .meta{
      margin-top:10px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      color:var(--faint);
      font-size:.92rem;
    }
    .chip{
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      padding:6px 10px;
      border-radius:999px;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .dot{
      width:8px; height:8px;
      border-radius:999px;
      background:var(--accent2);
      box-shadow:0 0 0 3px rgba(141,255,202,.12);
    }

    main{
      max-width:1160px;
      margin:0 auto;
      padding:12px 18px 42px;
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:16px;
      align-items:start;
    }
    @media (max-width: 980px){
      main{grid-template-columns:1fr}
    }

    nav{
      position:sticky;
      top:14px;
      border:1px solid var(--line);
      border-radius:var(--radius);
      background:rgba(15,22,38,.70);
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 40px rgba(0,0,0,.35);
      padding:14px 12px;
    }
    nav h2{
      font-size:1rem;
      margin:0 0 10px;
      color:var(--muted);
      letter-spacing:.25px;
    }
    .toc{
      margin:0;
      padding:0 0 0 14px;
      color:var(--muted);
    }
    .toc li{margin:8px 0}
    .toc a{color:var(--text)}
    .toc a small{color:var(--faint)}
    .toc a:hover{color:var(--accent)}
    .toplink{
      margin-top:12px;
      display:inline-flex;
      gap:8px;
      align-items:center;
      color:var(--muted);
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      padding:8px 10px;
      border-radius:12px;
      width:100%;
      justify-content:center;
      transition: transform .15s ease, background .15s ease;
    }
    .toplink:hover{
      text-decoration:none;
      transform: translateY(-1px);
      background:rgba(255,255,255,.06);
    }

    article{
      border:1px solid var(--line);
      border-radius:var(--radius2);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    section{
      padding:18px 18px;
      border-top:1px solid var(--line);
    }
    section:first-child{border-top:none}
    h2{
      margin:0 0 10px;
      font-size:1.25rem;
      letter-spacing:.2px;
    }
    h3{
      margin:14px 0 8px;
      font-size:1.05rem;
      color:var(--muted);
    }
    p{margin:10px 0; color:rgba(232,238,252,.92)}
    ul,ol{margin:10px 0 10px 18px; color:rgba(232,238,252,.92)}
    li{margin:6px 0}
    .grid2{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }
    @media (max-width: 720px){ .grid2{grid-template-columns:1fr} }

    .callouts{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
      margin-top:12px;
    }
    @media (max-width: 840px){ .callouts{grid-template-columns:1fr} }

    .card{
      border:1px solid var(--line);
      background:rgba(13,19,33,.55);
      border-radius:var(--radius);
      padding:12px 12px;
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
    }
    .card::after{
      content:"";
      position:absolute;
      inset:0;
      background: radial-gradient(500px 180px at 20% 0%, rgba(122,167,255,.10), transparent 55%);
      opacity:.9;
      pointer-events:none;
    }
    .card > *{position:relative}
    .label{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight:650;
      letter-spacing:.2px;
      color:var(--text);
      margin-bottom:6px;
    }
    .pill{
      font-size:.78rem;
      color:var(--muted);
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      padding:3px 8px;
      border-radius:999px;
    }
    .assump{border-left:4px solid var(--warn)}
    .eqns{border-left:4px solid var(--accent)}
    .mist{border-left:4px solid var(--danger)}
    .final{border-left:4px solid var(--ok)}

    .eqblock{
      margin-top:10px;
      border:1px dashed rgba(255,255,255,.18);
      border-radius:16px;
      background:rgba(0,0,0,.22);
      padding:12px 12px;
    }
    .eqrow{
      display:flex;
      gap:10px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    pre{
      margin:0;
      white-space:pre-wrap;
      word-break:break-word;
      font-family:var(--mono);
      font-size:.95rem;
      color:rgba(232,238,252,.95);
      line-height:1.45;
    }
    .copybtn{
      appearance:none;
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      color:var(--text);
      padding:8px 10px;
      border-radius:12px;
      cursor:pointer;
      font-weight:600;
      font-size:.88rem;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      user-select:none;
    }
    .copybtn:hover{
      transform: translateY(-1px);
      background:rgba(255,255,255,.07);
      border-color:rgba(255,255,255,.18);
    }
    .copybtn:active{transform: translateY(0px) scale(.99)}
    .copyhint{
      color:var(--faint);
      font-size:.85rem;
      margin-top:8px;
    }

    details{
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      border-radius:16px;
      padding:10px 12px;
      margin-top:12px;
    }
    summary{
      cursor:pointer;
      font-weight:700;
      color:var(--muted);
      list-style:none;
    }
    summary::-webkit-details-marker{display:none}
    summary::before{
      content:"▸";
      display:inline-block;
      margin-right:8px;
      color:var(--accent2);
      transform: translateY(-1px);
      transition: transform .15s ease;
    }
    details[open] summary::before{transform: rotate(90deg) translateX(1px)}
    .hr{
      height:1px;
      background:var(--line);
      margin:12px 0;
    }

    .kpi{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin-top:10px;
    }
    @media (max-width: 860px){ .kpi{grid-template-columns:1fr} }
    .kpi .box{
      border:1px solid var(--line);
      border-radius:16px;
      background:rgba(0,0,0,.18);
      padding:10px 10px;
    }
    .kpi .box .t{color:var(--faint); font-size:.84rem}
    .kpi .box .v{font-weight:800; font-size:1.1rem; margin-top:3px}
    .kpi .box .s{color:var(--muted); font-size:.9rem; margin-top:4px}

    footer{
      max-width:1160px;
      margin:0 auto 26px;
      padding:0 18px;
      color:var(--faint);
      font-size:.92rem;
    }

    @media (prefers-reduced-motion: no-preference){
      section{
        animation: fadeUp .35s ease both;
      }
      @keyframes fadeUp{
        from{opacity:0; transform: translateY(6px)}
        to{opacity:1; transform: translateY(0)}
      }
    }

    @media print{
      :root{ --bg:#fff; --text:#000; --muted:#111; --faint:#333; --panel:#fff; --panel2:#fff; --line:#bbb;}
      body{background:#fff; color:#000}
      nav{display:none}
      main{grid-template-columns:1fr; padding:0}
      header{padding:0}
      .hero, article{box-shadow:none}
      section{page-break-inside:avoid}
      a{color:#000; text-decoration:underline}
      .copybtn{display:none}
      details{border:1px solid #bbb}
      summary{color:#000}
    }
  </style>
</head>

<body>
  <a id="top"></a>
  <header>
    <div class="hero">
      <h1>Power Exchange in Frequency Up-Conversion (Three-Wave Mixing)</h1>
      <p class="subtitle">Using energy conservation and the Manley–Rowe relations to find the pump wavelength and power flow among the three waves.</p>
      <div class="meta">
        <span class="chip"><span class="dot"></span> Topic: nonlinear optics (χ(2), three-wave mixing)</span>
        <span class="chip">Given: LiNbO<sub>3</sub>, n = 2.2 (collinear plane waves)</span>
        <span class="chip">Goal: pump λ + power exchange for Δz</span>
      </div>
    </div>
  </header>

  <main>
    <nav aria-label="Table of contents">
      <h2>Table of Contents</h2>
      <ol class="toc">
        <li><a href="#quick">Quick Summary <small>— key results</small></a></li>
        <li><a href="#primer">PART 0 — Concept Primer <small>— theory first</small></a></li>
        <li><a href="#analysis">PART 1 — Problem Analysis <small>— what’s given/asked</small></a></li>
        <li><a href="#strategy">PART 2 — Strategy &amp; Tips <small>— roadmap</small></a></li>
        <li><a href="#solution">PART 3 — Full Solution <small>— step-by-step</small></a></li>
        <li><a href="#deeper">PART 4 — Deeper Understanding <small>— interpret &amp; extend</small></a></li>
        <li><a href="#plot">PART 5 — Optional Plot Guide <small>— why no plot</small></a></li>
      </ol>
      <a class="toplink" href="#top" title="Back to top">↑ Back to top</a>
    </nav>

    <article>
      <section id="quick">
        <h2>Quick Summary</h2>
        <ul>
          <li><strong>What this is about:</strong> frequency up-conversion in a χ(2) crystal where two lower-frequency waves combine to produce a higher-frequency wave.</li>
          <li><strong>Key physics idea:</strong> <em>photon energy conservation</em> sets the frequency (hence wavelength) relation: ω<sub>u</sub> = ω<sub>s</sub> + ω<sub>p</sub>.</li>
          <li><strong>Governing equations:</strong> (i) ω = 2πc/λ<sub>0</sub> (free-space wavelength), (ii) Manley–Rowe photon-flux relations: dN<sub>u</sub>/dz = −dN<sub>s</sub>/dz = −dN<sub>p</sub>/dz.</li>
          <li><strong>Result type:</strong> numeric (pump wavelength) + proportional power changes (using frequency ratios).</li>
          <li><strong>Pump wavelength:</strong> λ<sub>p0</sub> = 0.8125 μm (free-space). Inside crystal: λ<sub>p</sub> = λ<sub>p0</sub>/n.</li>
          <li><strong>Power exchange meaning:</strong> losing 1 mW at 1.3 μm corresponds to <em>more</em> than 1 mW gained at 0.5 μm because each up-converted photon carries more energy.</li>
          <li><strong>If the 1.3 μm wave drops by 1 mW over Δz:</strong> the 0.5 μm wave gains 2.6 mW; the pump loses 1.6 mW over the same Δz.</li>
          <li><strong>Sanity check:</strong> energy balances: (+2.6) + (−1.0) + (−1.6) = 0 mW.</li>
        </ul>

        <div class="kpi" role="group" aria-label="Key numeric outcomes">
          <div class="box">
            <div class="t">Pump free-space wavelength</div>
            <div class="v">0.8125 μm</div>
            <div class="s">from ω<sub>u</sub> = ω<sub>s</sub> + ω<sub>p</sub></div>
          </div>
          <div class="box">
            <div class="t">Up-converted power gain (given ΔP<sub>s</sub> = −1 mW)</div>
            <div class="v">+2.6 mW</div>
            <div class="s">scales with ω<sub>u</sub>/ω<sub>s</sub> = λ<sub>s</sub>/λ<sub>u</sub></div>
          </div>
          <div class="box">
            <div class="t">Pump power change (same Δz)</div>
            <div class="v">−1.6 mW</div>
            <div class="s">follows from Manley–Rowe + energy conservation</div>
          </div>
        </div>
      </section>

      <section id="primer">
        <h2>PART 0 — Concept Primer (Theory Before Solving)</h2>

        <h3>0.1 Core definitions (symbols + SI units)</h3>
        <div class="callouts">
          <div class="card eqns">
            <div class="label">Key quantities <span class="pill">definitions</span></div>
            <ul>
              <li><strong>c</strong> — speed of light in vacuum (m·s<sup>−1</sup>).</li>
              <li><strong>λ<sub>0</sub></strong> — <em>free-space</em> wavelength (m). (The problem explicitly uses free-space wavelengths.)</li>
              <li><strong>n</strong> — refractive index (dimensionless). In a medium: λ = λ<sub>0</sub>/n.</li>
              <li><strong>ω</strong> — angular frequency (rad·s<sup>−1</sup>), with ω = 2πf.</li>
              <li><strong>P</strong> — optical power (W).</li>
              <li><strong>N</strong> — photon flux (photons·s<sup>−1</sup>). Over an area, this is proportional to intensity; for plane waves we can treat power directly.</li>
              <li><strong>ħ</strong> — reduced Planck constant (J·s). Photon energy: ħω.</li>
            </ul>
          </div>

          <div class="card eqns">
            <div class="label">Frequency–wavelength link <span class="pill">vacuum</span></div>
            <div class="eqblock">
              <div class="eqrow">
                <pre>ω = 2πc / λ0   (equivalently, f = c / λ0)</pre>
                <button class="copybtn" data-copy="ω = 2πc / λ0   (equivalently, f = c / λ0)">Copy</button>
              </div>
              <div class="copyhint">These relations use the free-space wavelength λ<sub>0</sub>. In a medium, frequency stays the same, while wavelength shortens: λ = λ<sub>0</sub>/n.</div>
            </div>
          </div>
        </div>

        <h3>0.2 Physical meaning (intuition)</h3>
        <p>
          In <strong>three-wave mixing</strong> (a second-order nonlinear process, χ(2)), three monochromatic waves interact:
          a <em>signal</em>, a <em>pump</em>, and a generated <em>up-converted</em> wave. In <strong>sum-frequency generation (SFG)</strong>,
          <em>one</em> signal photon and <em>one</em> pump photon combine to create <em>one</em> photon at a higher frequency:
          the output photon carries the <strong>sum</strong> of their energies.
        </p>

        <h3>0.3 Key laws/principles + validity conditions</h3>
        <div class="callouts">
          <div class="card assump">
            <div class="label">Energy conservation (photon picture) <span class="pill">always</span></div>
            <p style="margin:8px 0 0;">
              For SFG: <strong>ħω<sub>u</sub> = ħω<sub>s</sub> + ħω<sub>p</sub></strong> ⇒ <strong>ω<sub>u</sub> = ω<sub>s</sub> + ω<sub>p</sub></strong>.
              This is independent of refractive index (frequency is set by time-translation symmetry).
            </p>
          </div>
          <div class="card assump">
            <div class="label">Lossless exchange &amp; Manley–Rowe <span class="pill">χ(2), no absorption</span></div>
            <p style="margin:8px 0 0;">
              When the nonlinear medium is treated as lossless (no linear absorption, no scattering) and the interaction is coherent,
              the photon fluxes obey strict proportionality rules (Manley–Rowe). These track <em>photon number flow</em>, not just energy flow.
            </p>
          </div>
        </div>

        <h3>0.4 Common models/approximations (and why)</h3>
        <ul>
          <li><strong>Plane-wave, collinear propagation:</strong> avoids beam overlap integrals; power exchange can be discussed per unit length along z.</li>
          <li><strong>Steady-state / monochromatic fields:</strong> enables fixed ω’s and simple conservation relations.</li>
          <li><strong>Neglect depletion details:</strong> the problem gives a small incremental power change over Δz; we use differential (incremental) relations.</li>
          <li><strong>Phase matching not required here:</strong> Although essential for high efficiency, the question focuses on <em>wavelength relations</em> and <em>power bookkeeping</em>. (n is relevant for momentum/phase matching, but not needed to compute the pump wavelength from energy conservation.)</li>
        </ul>

        <h3>0.5 Mini intuition examples (minimal algebra)</h3>
        <ol>
          <li><strong>Why up-converted power gain can exceed signal loss:</strong> If each created photon is higher energy (larger ω), then creating the same number of photons per second yields more watts.</li>
          <li><strong>Why the pump must lose power during up-conversion:</strong> the output photon energy exceeds the signal photon energy, so the “extra” energy must come from somewhere—namely the pump field.</li>
        </ol>

        <h3>0.6 What to watch for (pitfalls)</h3>
        <ul>
          <li><strong>Mixing up wavelength and frequency:</strong> energy conservation is in ω (or f), not λ directly. Convert carefully.</li>
          <li><strong>Forgetting “free-space wavelength”:</strong> λ<sub>0</sub> is used for ω = 2πc/λ<sub>0</sub>. In-crystal wavelengths are shorter by n.</li>
          <li><strong>Power vs photon flux:</strong> Manley–Rowe relates photon fluxes; power ratios include frequency factors.</li>
          <li><strong>Sign conventions:</strong> a “decrease by 1 mW” means ΔP is negative for that wave.</li>
        </ul>

        <details>
          <summary>Deeper note: where Manley–Rowe comes from (briefly)</summary>
          <p>
            In a lossless χ(2) interaction, the coupled-wave equations conserve certain invariants (derived from Maxwell’s equations
            with a nonlinear polarization). When written in terms of photon fluxes N = P/(ħω), these invariants become simple statements:
            photons are converted in integer “reaction” ratios—e.g., for SFG one signal photon + one pump photon ↔ one up-converted photon.
          </p>
        </details>
      </section>

      <section id="analysis">
        <h2>PART 1 — Problem Analysis (No Solving Yet)</h2>

        <h3>1.1 Restate the problem (in clear words)</h3>
        <p>
          A LiNbO<sub>3</sub> crystal (refractive index n = 2.2) is used for frequency up-conversion via three-wave mixing.
          Light at free-space wavelength 1.3 μm is converted into light at free-space wavelength 0.5 μm.
          The three waves are collinear plane waves traveling along +z.
        </p>
        <p>
          (i) Find the free-space wavelength of the third wave (the pump).
          (ii) If the 1.3 μm wave power decreases by 1 mW over a small distance Δz, find the corresponding power gain of the 0.5 μm wave
          and the pump power change over the same Δz.
        </p>

        <div class="grid2">
          <div>
            <h3>1.2 Given quantities</h3>
            <ul>
              <li>Signal (to be converted): λ<sub>s0</sub> = 1.3 μm (free-space)</li>
              <li>Up-converted output: λ<sub>u0</sub> = 0.5 μm (free-space)</li>
              <li>Refractive index: n = 2.2</li>
              <li>Incremental change: ΔP<sub>s</sub> = −1 mW over distance Δz</li>
              <li>Geometry: collinear plane waves along z</li>
            </ul>
          </div>
          <div>
            <h3>1.3 Unknowns</h3>
            <ul>
              <li>Pump free-space wavelength: λ<sub>p0</sub> = ?</li>
              <li>Incremental output power gain: ΔP<sub>u</sub> = ?</li>
              <li>Incremental pump power change: ΔP<sub>p</sub> = ? (loss or gain)</li>
            </ul>
          </div>
        </div>

        <h3>1.4 Relevant principles (and why they apply)</h3>
        <ul>
          <li><strong>Energy (frequency) conservation for SFG:</strong> determines λ<sub>p0</sub> uniquely from the two given wavelengths.</li>
          <li><strong>Manley–Rowe relations:</strong> relate incremental power changes via photon flux conservation.</li>
          <li><strong>Why n is not central here:</strong> n matters for phase matching (momentum conservation) and in-crystal wavelengths, but the pump <em>free-space</em> wavelength follows from frequency conservation alone.</li>
        </ul>

        <div class="card assump" style="margin-top:12px;">
          <div class="label">Assumptions used <span class="pill">explicit</span></div>
          <ul>
            <li>Three-wave mixing is <strong>sum-frequency generation</strong>: ω<sub>u</sub> = ω<sub>s</sub> + ω<sub>p</sub>.</li>
            <li>Interaction is effectively <strong>lossless</strong> over Δz (so Manley–Rowe applies cleanly).</li>
            <li>Δz is small enough that we can treat changes as <strong>incremental</strong> (linearized bookkeeping of power flow).</li>
            <li>No need to compute coupling coefficients or phase-matching efficiency; only conservation relations are requested.</li>
          </ul>
        </div>

        <h3>1.5 Possible approaches (compare 2–3)</h3>
        <ol>
          <li><strong>Photon-energy + photon-flux method (best here):</strong>
            Use ω relations for wavelengths, then Manley–Rowe for power ratios. <em>Pros:</em> minimal math, very robust. <em>Cons:</em> doesn’t give absolute efficiency vs z (not asked).</li>
          <li><strong>Coupled-wave differential equations:</strong>
            Solve amplitude equations and derive power flow. <em>Pros:</em> full z-dependence. <em>Cons:</em> needs nonlinear coefficient, phase mismatch, field amplitudes—data not provided.</li>
          <li><strong>Energy-only bookkeeping:</strong>
            Use ΔP conservation alone. <em>Pros:</em> simple. <em>Cons:</em> insufficient—needs photon-number constraint to split power change between pump and output.</li>
        </ol>
        <p><strong>Chosen approach:</strong> photon-energy + Manley–Rowe. It uses only given information and directly answers the incremental power questions.</p>
      </section>

      <section id="strategy">
        <h2>PART 2 — Strategy &amp; Tips (Roadmap Only)</h2>

        <ol>
          <li><strong>Identify the process:</strong> confirm it is sum-frequency generation (up-conversion). <em>Tool:</em> physical interpretation of “up-conversion.” <em>Meaning:</em> output frequency is the sum.</li>
          <li><strong>Write frequency conservation:</strong> ω<sub>u</sub> = ω<sub>s</sub> + ω<sub>p</sub>. <em>Tool:</em> energy conservation. <em>Meaning:</em> sets pump frequency.</li>
          <li><strong>Convert ω to free-space wavelengths:</strong> use ω ∝ 1/λ<sub>0</sub>. <em>Tool:</em> ω = 2πc/λ<sub>0</sub>. <em>Meaning:</em> compute λ<sub>p0</sub>.</li>
          <li><strong>Use Manley–Rowe for photon flux:</strong> dN<sub>u</sub> = −dN<sub>s</sub> = −dN<sub>p</sub>. <em>Tool:</em> photon accounting. <em>Meaning:</em> one output photon consumes one of each input.</li>
          <li><strong>Translate photon-flux changes into power changes:</strong> P = ħωN. <em>Tool:</em> multiply by ħω. <em>Meaning:</em> power changes scale with frequency ratios.</li>
          <li><strong>Apply the given incremental signal change:</strong> ΔP<sub>s</sub> = −1 mW over Δz. <em>Meaning:</em> fixes ΔN per second.</li>
          <li><strong>Compute ΔP<sub>u</sub> and ΔP<sub>p</sub>:</strong> using ω ratios. <em>Meaning:</em> how power is redistributed among the three waves.</li>
          <li><strong>Sanity-check energy balance:</strong> ΔP<sub>s</sub> + ΔP<sub>p</sub> + ΔP<sub>u</sub> = 0. <em>Meaning:</em> no net loss/gain in idealized mixing.</li>
        </ol>

        <div class="card mist">
          <div class="label">Common mistakes (quick tips) <span class="pill">avoid</span></div>
          <ul>
            <li>Using λ ratios backward: ω ratios are inverse wavelength ratios (ω ∝ 1/λ).</li>
            <li>Forgetting that “decreases by 1 mW” means ΔP<sub>s</sub> is negative.</li>
            <li>Trying to use n to modify ω: refractive index does <strong>not</strong> change frequency; it changes wavelength inside the crystal.</li>
            <li>Using only energy conservation to find pump power change: you also need the Manley–Rowe photon relation.</li>
          </ul>
        </div>
      </section>

      <section id="solution">
        <h2>PART 3 — Full Solution (Detailed + Teaching)</h2>

        <h3>3.1 Qualitative expectation (before calculating)</h3>
        <p>
          Up-conversion creates shorter-wavelength (higher-frequency) photons. Each 0.5 μm photon carries more energy than a 1.3 μm photon.
          So if the 1.3 μm wave loses some power, the 0.5 μm wave can gain <em>more</em> power than that loss—because the pump supplies the missing energy.
          Therefore we expect: output power increases, pump power decreases.
        </p>

        <div class="card eqns">
          <div class="label">Key equations used <span class="pill">copy</span></div>

          <div class="eqblock" style="margin-top:10px;">
            <div class="eqrow">
              <pre>Sum-frequency generation (SFG):  ωu = ωs + ωp</pre>
              <button class="copybtn" data-copy="Sum-frequency generation (SFG):  ωu = ωs + ωp">Copy</button>
            </div>
          </div>

          <div class="eqblock" style="margin-top:10px;">
            <div class="eqrow">
              <pre>ω = 2πc / λ0  ⇒  ω ∝ 1/λ0</pre>
              <button class="copybtn" data-copy="ω = 2πc / λ0  ⇒  ω ∝ 1/λ0">Copy</button>
            </div>
          </div>

          <div class="eqblock" style="margin-top:10px;">
            <div class="eqrow">
              <pre>Manley–Rowe (SFG photon flux):  dNu/dz = −dNs/dz = −dNp/dz</pre>
              <button class="copybtn" data-copy="Manley–Rowe (SFG photon flux):  dNu/dz = −dNs/dz = −dNp/dz">Copy</button>
            </div>
          </div>

          <div class="eqblock" style="margin-top:10px;">
            <div class="eqrow">
              <pre>Power–photon flux:  P = ħ ω N   ⇒   dP = ħ ω dN</pre>
              <button class="copybtn" data-copy="Power–photon flux:  P = ħ ω N   ⇒   dP = ħ ω dN">Copy</button>
            </div>
          </div>
        </div>

        <h3>3.2 Step 1: Determine the pump wavelength</h3>
        <p>
          The problem states conversion from free-space wavelength λ<sub>s0</sub> = 1.3 μm (signal) to free-space wavelength
          λ<sub>u0</sub> = 0.5 μm (up-converted). For sum-frequency generation:
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>ωu = ωs + ωp</pre>
            <button class="copybtn" data-copy="ωu = ωs + ωp">Copy</button>
          </div>
        </div>

        <p>
          Convert ω to free-space wavelength using ω = 2πc/λ<sub>0</sub>. Because c and 2π cancel in ratios, we can work directly with inverse wavelengths:
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>2πc/λu0 = 2πc/λs0 + 2πc/λp0
⇒  1/λu0 = 1/λs0 + 1/λp0</pre>
            <button class="copybtn" data-copy="2πc/λu0 = 2πc/λs0 + 2πc/λp0\n⇒  1/λu0 = 1/λs0 + 1/λp0">Copy</button>
          </div>
        </div>

        <p>
          Solve for the pump free-space wavelength λ<sub>p0</sub>:
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>1/λp0 = 1/λu0 − 1/λs0</pre>
            <button class="copybtn" data-copy="1/λp0 = 1/λu0 − 1/λs0">Copy</button>
          </div>
        </div>

        <p>Now plug in numbers (μm units are consistent because we use ratios):</p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>1/λp0 = 1/0.5 − 1/1.3  (μm⁻¹)
      = 2.0 − 0.7692308
      = 1.2307692  (μm⁻¹)

λp0 = 1 / 1.2307692 = 0.8125 μm</pre>
            <button class="copybtn" data-copy="1/λp0 = 1/0.5 − 1/1.3  (μm⁻¹)\n      = 2.0 − 0.7692308\n      = 1.2307692  (μm⁻¹)\n\nλp0 = 1 / 1.2307692 = 0.8125 μm">Copy</button>
          </div>
        </div>

        <details>
          <summary>Where does n = 2.2 enter, if we wanted in-crystal wavelengths?</summary>
          <p>
            Frequency ω is the same in vacuum and in the crystal. The wavelength inside the crystal is shorter:
            λ = λ<sub>0</sub>/n. For example, the pump wavelength in LiNbO<sub>3</sub> would be
            λ<sub>p</sub> = 0.8125 μm / 2.2 ≈ 0.369 μm. This is useful for momentum/phase-matching discussions, but not required to answer the pump <em>free-space</em> wavelength.
          </p>
        </details>

        <h3>3.3 Step 2: Use Manley–Rowe to relate incremental power changes</h3>
        <p>
          For sum-frequency generation, the “reaction” is:
          one signal photon + one pump photon → one up-converted photon.
          Therefore, the photon fluxes satisfy:
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>dNu/dz = −dNs/dz = −dNp/dz</pre>
            <button class="copybtn" data-copy="dNu/dz = −dNs/dz = −dNp/dz">Copy</button>
          </div>
        </div>

        <p>
          Convert photon-flux changes into power changes using P = ħωN (for each wave at fixed ω):
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>dPs/dz = ħ ωs dNs/dz
dPp/dz = ħ ωp dNp/dz
dPu/dz = ħ ωu dNu/dz</pre>
            <button class="copybtn" data-copy="dPs/dz = ħ ωs dNs/dz\ndPp/dz = ħ ωp dNp/dz\ndPu/dz = ħ ωu dNu/dz">Copy</button>
          </div>
        </div>

        <p>
          Since dN<sub>s</sub>/dz = −dN<sub>u</sub>/dz, we get a direct relation between output and signal power changes:
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>dPu/dz = ħ ωu dNu/dz
      = ħ ωu ( − dNs/dz )
      = − (ωu/ωs) ( ħ ωs dNs/dz )
      = − (ωu/ωs) dPs/dz</pre>
            <button class="copybtn" data-copy="dPu/dz = ħ ωu dNu/dz\n      = ħ ωu ( − dNs/dz )\n      = − (ωu/ωs) ( ħ ωs dNs/dz )\n      = − (ωu/ωs) dPs/dz">Copy</button>
          </div>
        </div>

        <p>
          Over a small distance Δz, treat the changes as increments:
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>ΔPu = − (ωu/ωs) ΔPs</pre>
            <button class="copybtn" data-copy="ΔPu = − (ωu/ωs) ΔPs">Copy</button>
          </div>
        </div>

        <p>
          Similarly for the pump, because dN<sub>p</sub>/dz = −dN<sub>u</sub>/dz (pump photons are consumed):
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>dPp/dz = ħ ωp dNp/dz
      = ħ ωp ( − dNu/dz )</pre>
            <button class="copybtn" data-copy="dPp/dz = ħ ωp dNp/dz\n      = ħ ωp ( − dNu/dz )">Copy</button>
          </div>
        </div>

        <p>
          But from dN<sub>u</sub>/dz = −(1/ħω<sub>s</sub>) dP<sub>s</sub>/dz (rearranging dP<sub>s</sub>/dz = ħω<sub>s</sub>dN<sub>s</sub>/dz and dN<sub>s</sub>/dz = −dN<sub>u</sub>/dz),
          we obtain:
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>dPp/dz = ħ ωp ( − dNu/dz )
      = ħ ωp ( + (1/ħ ωs) dPs/dz )
      = (ωp/ωs) dPs/dz</pre>
            <button class="copybtn" data-copy="dPp/dz = ħ ωp ( − dNu/dz )\n      = ħ ωp ( + (1/ħ ωs) dPs/dz )\n      = (ωp/ωs) dPs/dz">Copy</button>
          </div>
        </div>

        <p>
          Over Δz:
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>ΔPp = (ωp/ωs) ΔPs</pre>
            <button class="copybtn" data-copy="ΔPp = (ωp/ωs) ΔPs">Copy</button>
          </div>
        </div>

        <h3>3.4 Step 3: Plug in the given power decrease and compute gains/losses</h3>
        <p>
          The problem states: the 1.3 μm wave decreases by 1 mW over Δz, i.e.
          <strong>ΔP<sub>s</sub> = −1 mW</strong>.
        </p>

        <p>
          Compute the needed frequency ratios using ω ∝ 1/λ<sub>0</sub>:
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>ωu/ωs = (1/λu0) / (1/λs0) = λs0/λu0
      = 1.3 / 0.5 = 2.6</pre>
            <button class="copybtn" data-copy="ωu/ωs = (1/λu0) / (1/λs0) = λs0/λu0\n      = 1.3 / 0.5 = 2.6">Copy</button>
          </div>
        </div>

        <div class="eqblock">
          <div class="eqrow">
            <pre>ωp/ωs = (1/λp0) / (1/λs0) = λs0/λp0
      = 1.3 / 0.8125 = 1.6</pre>
            <button class="copybtn" data-copy="ωp/ωs = (1/λp0) / (1/λs0) = λs0/λp0\n      = 1.3 / 0.8125 = 1.6">Copy</button>
          </div>
        </div>

        <p>
          Now compute the incremental power changes:
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>ΔPu = −(ωu/ωs) ΔPs
     = −(2.6)(−1 mW)
     = +2.6 mW</pre>
            <button class="copybtn" data-copy="ΔPu = −(ωu/ωs) ΔPs\n     = −(2.6)(−1 mW)\n     = +2.6 mW">Copy</button>
          </div>
        </div>

        <div class="eqblock">
          <div class="eqrow">
            <pre>ΔPp = (ωp/ωs) ΔPs
     = (1.6)(−1 mW)
     = −1.6 mW</pre>
            <button class="copybtn" data-copy="ΔPp = (ωp/ωs) ΔPs\n     = (1.6)(−1 mW)\n     = −1.6 mW">Copy</button>
          </div>
        </div>

        <div class="card final" style="margin-top:14px;">
          <div class="label">Final Answer (copy-ready) <span class="pill">results</span></div>

          <div class="eqblock" style="margin-top:10px;">
            <div class="eqrow">
              <pre>Pump free-space wavelength:
λp0 = 0.8125 μm

Given ΔPs = −1 mW over Δz:
Up-converted wave power gain:
ΔPu = +2.6 mW

Pump power change:
ΔPp = −1.6 mW  (pump loses power)</pre>
              <button class="copybtn" data-copy="Pump free-space wavelength:\nλp0 = 0.8125 μm\n\nGiven ΔPs = −1 mW over Δz:\nUp-converted wave power gain:\nΔPu = +2.6 mW\n\nPump power change:\nΔPp = −1.6 mW  (pump loses power)">Copy</button>
            </div>
          </div>

          <div class="hr"></div>
          <p style="margin:0; color:rgba(232,238,252,.95);">
            <strong>Energy sanity check:</strong> ΔP<sub>s</sub> + ΔP<sub>p</sub> + ΔP<sub>u</sub> = (−1.0) + (−1.6) + (+2.6) = 0 mW ✔
          </p>
        </div>

        <h3>3.5 Sanity checks</h3>
        <ul>
          <li><strong>Units:</strong> wavelength in μm; power changes in mW. Frequency ratios are dimensionless.</li>
          <li><strong>Limiting behavior:</strong> if λ<sub>u0</sub> were only slightly shorter than λ<sub>s0</sub>, ω<sub>u</sub>/ω<sub>s</sub> ≈ 1 and output gain would roughly match signal loss (pump would change little). Here λ<sub>u0</sub> is much shorter, so gain exceeds loss.</li>
          <li><strong>Sign reasoning:</strong> output gains power (positive), both inputs lose power (negative), consistent with SFG.</li>
        </ul>
      </section>

      <section id="deeper">
        <h2>PART 4 — Deeper Understanding (Theory Around the Result)</h2>

        <h3>4.1 Re-interpret the formulas: what controls what?</h3>
        <p>
          The incremental relations can be summarized compactly:
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>ΔPu = −(ωu/ωs) ΔPs
ΔPp =  (ωp/ωs) ΔPs</pre>
            <button class="copybtn" data-copy="ΔPu = −(ωu/ωs) ΔPs\nΔPp =  (ωp/ωs) ΔPs">Copy</button>
          </div>
        </div>

        <ul>
          <li><strong>ω<sub>u</sub>/ω<sub>s</sub> sets the “power leverage”</strong> from signal depletion to output growth. Higher up-converted frequency means larger watt gain for the same photon conversion rate.</li>
          <li><strong>ω<sub>p</sub>/ω<sub>s</sub> sets how much the pump must supply</strong> relative to the signal depletion.</li>
          <li><strong>Energy conservation is automatic:</strong> because ω<sub>u</sub> = ω<sub>s</sub> + ω<sub>p</sub>, the three ΔP’s add to zero whenever the photon-flux “reaction stoichiometry” holds.</li>
        </ul>

        <h3>4.2 Parameter dependence (qualitative)</h3>
        <ul>
          <li>If you hold λ<sub>s0</sub> fixed and make λ<sub>u0</sub> smaller (more aggressive up-conversion), then ω<sub>u</sub>/ω<sub>s</sub> increases and the output power gain per mW of signal depletion increases.</li>
          <li>The pump wavelength is determined by inverse-wavelength addition: 1/λ<sub>p0</sub> = 1/λ<sub>u0</sub> − 1/λ<sub>s0</sub>. If λ<sub>u0</sub> approaches λ<sub>s0</sub>, the required pump becomes very long (small frequency difference).</li>
          <li>Refractive index n affects phase matching and thus how quickly these power exchanges happen with z, but not the <em>ratios</em> demanded by conservation once conversion occurs.</li>
        </ul>

        <h3>4.3 Alternative derivation idea (brief but meaningful)</h3>
        <p>
          Instead of starting with photon flux, you can derive the same power ratios from the standard Manley–Rowe invariants written in power form:
        </p>

        <div class="eqblock">
          <div class="eqrow">
            <pre>(1/ωs) dPs/dz = (1/ωp) dPp/dz = −(1/ωu) dPu/dz</pre>
            <button class="copybtn" data-copy="(1/ωs) dPs/dz = (1/ωp) dPp/dz = −(1/ωu) dPu/dz">Copy</button>
          </div>
        </div>

        <p>
          This expresses that the <em>rate of change of photon flux</em> (power divided by ħω) is the same magnitude for all three waves,
          with signs indicating which waves are being depleted versus generated.
        </p>

        <h3>4.4 Concept check (self-test, with answers)</h3>
        <ul>
          <li><strong>Q:</strong> Why can the 0.5 μm power increase by more than the 1.3 μm power decreases?<br><strong>A:</strong> Because each 0.5 μm photon has higher energy (ħω), and the pump supplies the extra energy.</li>
          <li><strong>Q:</strong> Does refractive index change the frequencies involved?<br><strong>A:</strong> No. Frequency is fixed; the medium changes wavelength and phase velocity.</li>
          <li><strong>Q:</strong> In SFG, how many pump photons are consumed per up-converted photon created?<br><strong>A:</strong> One pump photon per one up-converted photon (and one signal photon as well).</li>
          <li><strong>Q:</strong> If the signal power decreases, must the pump power always decrease too?<br><strong>A:</strong> For SFG up-conversion as posed here, yes—both inputs are consumed to create higher-frequency output.</li>
        </ul>

        <details>
          <summary>Optional deeper note: phase matching vs conservation</summary>
          <p>
            Conservation laws (ω relations and Manley–Rowe) tell you what <em>must</em> be true if conversion happens.
            Phase matching (momentum conservation via k-vectors) tells you whether the nonlinear polarization adds coherently along z so that conversion builds up efficiently.
            The problem provides n but does not ask for k-matching, so we focus on the universal bookkeeping that does not require dispersion data.
          </p>
        </details>

        <a class="toplink" href="#top" style="margin-top:14px;">↑ Back to top</a>
      </section>

      <section id="plot">
        <h2>PART 5 — Optional Plot Guide</h2>
        <p>
          A plot is not necessary here because the problem is <strong>conservation-based</strong>: the pump wavelength and the incremental power exchanges
          follow directly from algebraic relations (ω sums and Manley–Rowe ratios) without any continuous parameter dependence that would add insight through a curve.
        </p>
      </section>
    </article>
  </main>

  <footer>
    <p>
      Built as a self-contained learning article (vanilla HTML/CSS/JS). Copy buttons provide plain-text equations/results suitable for notes.
    </p>
  </footer>

  <script>
    (function(){
      function copyText(txt){
        if(!txt) return;
        if(navigator.clipboard && navigator.clipboard.writeText){
          return navigator.clipboard.writeText(txt);
        }
        const ta = document.createElement('textarea');
        ta.value = txt;
        ta.setAttribute('readonly','');
        ta.style.position = 'fixed';
        ta.style.left = '-9999px';
        document.body.appendChild(ta);
        ta.select();
        try{ document.execCommand('copy'); }catch(e){}
        document.body.removeChild(ta);
        return Promise.resolve();
      }

      const buttons = document.querySelectorAll('.copybtn[data-copy]');
      buttons.forEach(btn=>{
        btn.addEventListener('click', async ()=>{
          const txt = btn.getAttribute('data-copy') || '';
          const old = btn.textContent;
          btn.textContent = 'Copied ✓';
          btn.style.borderColor = 'rgba(141,255,202,.35)';
          btn.style.background = 'rgba(141,255,202,.10)';
          try{ await copyText(txt); } finally{
            setTimeout(()=>{
              btn.textContent = old;
              btn.style.borderColor = '';
              btn.style.background = '';
            }, 900);
          }
        });
      });
    })();
  </script>
</body>
</html>
