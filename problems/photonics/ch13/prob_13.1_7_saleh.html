<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Photon Momentum: Comparing a Laser Pulse to Massive Particles</title>
  <style>
    :root{
      --bg:#0b1020;
      --panel:#0f1730;
      --card:#121c3a;
      --ink:#e9eeff;
      --muted:#b9c3ffcc;
      --faint:#b9c3ff66;
      --accent:#7cf0c8;
      --accent2:#8db6ff;
      --warn:#ffd37a;
      --danger:#ff8fb3;
      --line:#2a3768;
      --shadow: 0 18px 55px rgba(0,0,0,.45);
      --radius:18px;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 20% 10%, rgba(124,240,200,.12), transparent 60%),
                  radial-gradient(900px 500px at 80% 0%, rgba(141,182,255,.16), transparent 55%),
                  radial-gradient(900px 700px at 60% 90%, rgba(255,143,179,.08), transparent 60%),
                  var(--bg);
      color:var(--ink);
      line-height:1.55;
    }
    a{color:var(--accent2); text-decoration:none}
    a:hover{text-decoration:underline}
    header{
      padding: 34px 18px 10px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .title{
      display:grid;
      grid-template-columns: 1.3fr .7fr;
      gap:16px;
      align-items:end;
    }
    .title h1{
      margin:0;
      font-size: clamp(26px, 2.6vw, 40px);
      letter-spacing:.2px;
    }
    .subtitle{
      margin:8px 0 0;
      color:var(--muted);
      max-width: 70ch;
      font-size: 1.02rem;
    }
    .meta{
      text-align:right;
      color:var(--faint);
      font-size:.95rem;
    }

    main{
      max-width: 1200px;
      margin: 0 auto;
      padding: 10px 18px 56px;
      display:grid;
      grid-template-columns: 320px 1fr;
      gap: 18px;
      align-items:start;
    }

    nav.toc{
      position: sticky;
      top: 12px;
      align-self:start;
      background: linear-gradient(180deg, rgba(18,28,58,.94), rgba(15,23,48,.88));
      border:1px solid rgba(185,195,255,.14);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding: 14px 14px 10px;
      backdrop-filter: blur(10px);
    }
    nav.toc h2{
      margin: 0 0 8px;
      font-size: 1rem;
      color: var(--ink);
      letter-spacing:.2px;
    }
    .toc a{
      display:block;
      padding: 8px 10px;
      border-radius: 12px;
      color: var(--muted);
      border: 1px solid transparent;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      font-size: .96rem;
    }
    .toc a:hover{
      background: rgba(124,240,200,.08);
      border-color: rgba(124,240,200,.22);
      transform: translateY(-1px);
      text-decoration:none;
      color: var(--ink);
    }
    .toc .small{
      margin-top:10px;
      padding-top:10px;
      border-top:1px solid rgba(185,195,255,.14);
      color: var(--faint);
      font-size:.9rem;
    }

    article{
      min-width: 0;
    }

    section{
      background: linear-gradient(180deg, rgba(18,28,58,.92), rgba(15,23,48,.86));
      border:1px solid rgba(185,195,255,.14);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: var(--shadow);
      margin-bottom: 14px;
      overflow:hidden;
    }
    section h2{
      margin:0 0 10px;
      font-size: clamp(18px, 1.6vw, 24px);
      letter-spacing:.15px;
    }
    section h3{
      margin: 16px 0 8px;
      font-size: 1.08rem;
      color: var(--ink);
    }
    p{margin: 8px 0}
    ul{margin: 8px 0 8px 20px}
    li{margin: 6px 0}
    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 980px){
      main{grid-template-columns: 1fr}
      nav.toc{position: relative; top:auto}
      .title{grid-template-columns:1fr}
      .meta{text-align:left}
    }
    @media (max-width: 720px){
      .grid2{grid-template-columns:1fr}
    }

    .callouts{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin: 12px 0 0;
    }
    .callout{
      border-radius: 16px;
      padding: 12px 12px 10px;
      border: 1px solid rgba(185,195,255,.14);
      background: rgba(255,255,255,.03);
    }
    .callout strong{
      display:block;
      margin-bottom:6px;
      letter-spacing:.15px;
    }
    .callout.assume strong{color: var(--accent)}
    .callout.key strong{color: var(--accent2)}
    .callout.warn strong{color: var(--warn)}
    .callout.final strong{color: var(--danger)}
    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: .96rem;
      color: var(--ink);
      background: rgba(0,0,0,.20);
      padding: 2px 6px;
      border-radius: 10px;
      border: 1px solid rgba(185,195,255,.14);
      white-space: nowrap;
    }
    .eqbox{
      display:flex;
      gap:10px;
      align-items:flex-start;
      justify-content:space-between;
      border-radius: 16px;
      padding: 12px;
      border: 1px solid rgba(124,240,200,.22);
      background: rgba(124,240,200,.06);
      margin: 10px 0;
    }
    .eqbox .eq{
      flex:1;
      min-width:0;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: .98rem;
      overflow:auto;
      padding-right:10px;
    }
    .btn{
      appearance:none;
      border:1px solid rgba(185,195,255,.22);
      background: rgba(255,255,255,.05);
      color: var(--ink);
      padding: 8px 10px;
      border-radius: 14px;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      font-weight:600;
      letter-spacing:.1px;
      user-select:none;
      white-space: nowrap;
    }
    .btn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.08);
      border-color: rgba(124,240,200,.35);
    }
    .btn:active{transform: translateY(0px) scale(.99)}
    .btn.small{padding:6px 10px; font-size:.92rem}
    .row{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }

    figure{
      margin: 10px 0 0;
      border-radius: 18px;
      border: 1px solid rgba(185,195,255,.14);
      background: rgba(0,0,0,.18);
      overflow:hidden;
    }
    figure figcaption{
      padding: 10px 12px;
      color: var(--muted);
      border-top:1px solid rgba(185,195,255,.14);
      font-size:.95rem;
    }
    canvas{display:block; width:100%; height: 320px;}
    .canvasTall{height: 360px;}
    .controls{
      margin-top: 10px;
      padding: 12px;
      border-radius: 16px;
      border:1px solid rgba(185,195,255,.14);
      background: rgba(255,255,255,.03);
    }
    .controls label{
      display:block;
      font-weight:700;
      margin-bottom:6px;
    }
    .controls .hint{color:var(--muted); font-size:.93rem}
    input[type="range"]{
      width:100%;
      accent-color: var(--accent);
    }
    .statgrid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    .stat{
      border-radius: 16px;
      padding: 10px 10px 8px;
      border:1px solid rgba(185,195,255,.14);
      background: rgba(0,0,0,.14);
    }
    .stat .k{color: var(--muted); font-size:.9rem}
    .stat .v{font-size:1.05rem; font-weight:800; margin-top:2px}
    .stat .u{color: var(--faint); font-size:.88rem; margin-top:2px}
    @media (max-width: 720px){
      .statgrid{grid-template-columns:1fr}
      canvas{height: 300px;}
      .canvasTall{height: 340px;}
      .callouts{grid-template-columns:1fr}
    }

    .step{
      border-left: 3px solid rgba(141,182,255,.55);
      padding-left: 12px;
      margin: 10px 0;
    }
    .box{
      border-radius: 16px;
      border:1px solid rgba(185,195,255,.14);
      background: rgba(255,255,255,.03);
      padding: 12px;
      margin: 10px 0;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:.92rem;
      padding: 2px 6px;
      border-radius: 10px;
      border:1px solid rgba(185,195,255,.18);
      background: rgba(0,0,0,.22);
      color: var(--ink);
    }

    footer{
      max-width:1200px;
      margin: 0 auto;
      padding: 0 18px 30px;
      color: var(--faint);
      font-size:.95rem;
    }

    /* print-friendly */
    @media print{
      body{background:#fff; color:#111}
      nav.toc{display:none}
      main{grid-template-columns:1fr}
      section{box-shadow:none; background:#fff; border:1px solid #ddd}
      .btn{display:none}
      figure{border:1px solid #ddd; background:#fff}
      .mono, .eqbox, .box, .callout, .controls, .stat{background:#fff; border:1px solid #ddd; color:#111}
      a{color:#111; text-decoration:underline}
    }

    /* subtle entrance */
    .fadeIn{
      animation: pop .55s ease both;
    }
    @keyframes pop{
      from{opacity:0; transform: translateY(8px)}
      to{opacity:1; transform: translateY(0)}
    }
  </style>
</head>

<body>
<header class="fadeIn">
  <div class="title">
    <div>
      <h1>Photon Momentum: How Much “Push” Is in a 10-J Laser Pulse?</h1>
      <p class="subtitle">
        We compare the total momentum carried by all photons in a laser pulse of energy 10 J with the momentum of
        (a) a 1-g mass moving at 1 cm/s and (b) an electron moving at <span class="mono">c₀/10</span>.
      </p>
    </div>
    <div class="meta">
      <div><span class="mono">Topic</span> Radiation momentum &amp; relativistic momentum</div>
      <div><span class="mono">Key result</span> <span class="mono">p = E / c₀</span> (vacuum)</div>
    </div>
  </div>
</header>

<main>
  <nav class="toc fadeIn" aria-label="Table of Contents">
    <h2>Table of Contents</h2>
    <a href="#quick">Quick Summary</a>
    <a href="#part0">PART 0 — Concept Primer</a>
    <a href="#part1">PART 1 — Problem Analysis</a>
    <a href="#part2">PART 2 — Strategy &amp; Tips</a>
    <a href="#part3">PART 3 — Full Solution</a>
    <a href="#part4">PART 4 — Deeper Understanding</a>
    <a href="#part5">PART 5 — Visualization Guide</a>

    <div class="small">
      Interactive slider below updates the diagram and both plots live.
    </div>
  </nav>

  <article class="fadeIn">
    <!-- Quick Summary -->
    <section id="quick">
      <h2>Quick Summary</h2>
      <ul>
        <li><strong>What this is about:</strong> momentum carried by light vs. momentum of moving matter.</li>
        <li><strong>Key physics idea:</strong> photons carry momentum even though they have no rest mass.</li>
        <li><strong>Governing equations:</strong> in vacuum <span class="mono">p<sub>light</sub> = E/c₀</span>; for matter <span class="mono">p = mv</span> (nonrelativistic), and <span class="mono">p = γmv</span> (relativistic).</li>
        <li><strong>Given:</strong> laser pulse energy <span class="mono">E = 10 J</span>.</li>
        <li><strong>Targets:</strong> (a) <span class="mono">m = 1 g</span>, <span class="mono">v = 1 cm/s</span>; (b) electron at <span class="mono">v = c₀/10</span>.</li>
        <li><strong>Numerical results:</strong> <span class="mono">p<sub>light</sub> ≈ 3.34×10⁻⁸ kg·m/s</span>; (a) <span class="mono">p ≈ 1.0×10⁻⁵</span> (≈300× larger than light); (b) <span class="mono">p<sub>e</sub> ≈ 2.75×10⁻²³</span> (light is ≈10¹⁵× larger).</li>
        <li><strong>Result type:</strong> numeric comparisons + ratios (dimensionless).</li>
      </ul>

      <div class="callouts">
        <div class="callout key">
          <strong>Key Equation</strong>
          In vacuum, a pulse of electromagnetic energy <span class="mono">E</span> carries momentum magnitude
          <span class="mono">p = E/c₀</span> in its propagation direction.
        </div>
        <div class="callout warn">
          <strong>Typical Pitfall</strong>
          Don’t confuse <em>energy per photon</em> with <em>total pulse energy</em>. We use the total <span class="mono">E</span>,
          so we don’t even need the wavelength here.
        </div>
      </div>
    </section>

    <!-- PART 0 -->
    <section id="part0">
      <h2>PART 0 — Concept Primer (Theory Before Solving)</h2>

      <h3>Core definitions (symbols &amp; units)</h3>
      <ul>
        <li><strong>Energy</strong> <span class="mono">E</span> (joule, J): capacity to do work; for a light pulse, it is the integrated electromagnetic energy in the pulse.</li>
        <li><strong>Momentum</strong> <span class="mono">p</span> (kg·m/s): “quantity of motion.” Momentum is conserved in isolated systems.</li>
        <li><strong>Speed of light in vacuum</strong> <span class="mono">c₀</span> (m/s): <span class="mono">c₀ ≈ 2.99792458×10⁸ m/s</span>.</li>
        <li><strong>Relativistic factor</strong> <span class="mono">γ = 1/√(1−β²)</span>, where <span class="mono">β = v/c₀</span>.</li>
      </ul>

      <h3>Physical meaning: why light has momentum</h3>
      <p>
        Electromagnetic waves transport not only energy but also <em>momentum</em>. This shows up experimentally as
        <strong>radiation pressure</strong>—light can exert a force when it is absorbed or reflected.
        In the photon picture, each photon has momentum <span class="mono">p<sub>γ</sub> = E<sub>γ</sub>/c₀</span>,
        so a whole pulse has total momentum equal to the sum over photons, which simplifies to <span class="mono">E/c₀</span>.
      </p>

      <h3>Key laws/principles (validity &amp; assumptions)</h3>
      <ul>
        <li><strong>Relativistic energy–momentum relation:</strong> for a photon, <span class="mono">E = pc₀</span> (always valid in vacuum).</li>
        <li><strong>Nonrelativistic momentum:</strong> <span class="mono">p = mv</span> when <span class="mono">v ≪ c₀</span>.</li>
        <li><strong>Relativistic momentum:</strong> <span class="mono">p = γmv</span> when <span class="mono">v</span> is a noticeable fraction of <span class="mono">c₀</span>.</li>
      </ul>

      <h3>Common models/approximations (and why)</h3>
      <ul>
        <li><strong>Pulse treated as a beam in vacuum:</strong> we use <span class="mono">p = E/c₀</span>, independent of wavelength and pulse shape.</li>
        <li><strong>Slow macroscopic object:</strong> the 1-g mass at 1 cm/s is extremely nonrelativistic, so <span class="mono">p=mv</span> is exact to extraordinary precision.</li>
        <li><strong>Mildly relativistic electron:</strong> at <span class="mono">v = 0.1c₀</span>, <span class="mono">γ</span> is close to 1, but we’ll include it for correctness.</li>
      </ul>

      <h3>Mini intuition examples</h3>
      <ul>
        <li><strong>Absorption “kick”:</strong> if a surface absorbs energy <span class="mono">E</span>, it must gain momentum <span class="mono">E/c₀</span> to conserve momentum.</li>
        <li><strong>Reflection doubles momentum transfer:</strong> reflecting a pulse reverses its momentum, giving an impulse about <span class="mono">2E/c₀</span> to the mirror.</li>
      </ul>

      <div class="callouts">
        <div class="callout assume">
          <strong>Assumptions</strong>
          Vacuum propagation, pulse energy entirely in the electromagnetic field, and “total momentum” means the net momentum along the beam direction.
        </div>
        <div class="callout warn">
          <strong>What to watch for</strong>
          Unit conversions (g→kg, cm/s→m/s), using <span class="mono">c₀</span> not an approximate value accidentally, and remembering momentum is a vector (we compare magnitudes here).
        </div>
      </div>
    </section>

    <!-- PART 1 -->
    <section id="part1">
      <h2>PART 1 — Problem Analysis (No Solving Yet)</h2>

      <h3>Restate the problem in plain words</h3>
      <p>
        A laser pulse carries total energy 10 J. Find the magnitude of the total momentum carried by all photons in the pulse,
        and compare it to: (a) a 1-g object moving at 1 cm/s, and (b) an electron moving at <span class="mono">c₀/10</span>.
      </p>

      <h3>Given quantities</h3>
      <ul>
        <li>Laser pulse energy: <span class="mono">E = 10 J</span></li>
        <li>(a) Mass: <span class="mono">m = 1 g = 1×10⁻³ kg</span>, speed: <span class="mono">v = 1 cm/s = 1×10⁻² m/s</span></li>
        <li>(b) Electron speed: <span class="mono">v = c₀/10</span>, electron mass: <span class="mono">m<sub>e</sub> = 9.109×10⁻³¹ kg</span> (constant)</li>
        <li>Speed of light: <span class="mono">c₀ = 2.99792458×10⁸ m/s</span></li>
      </ul>

      <h3>Unknowns</h3>
      <ul>
        <li>Total photon momentum magnitude: <span class="mono">p<sub>pulse</sub></span></li>
        <li>Momentum (a): <span class="mono">p<sub>a</sub></span>, Momentum (b): <span class="mono">p<sub>e</sub></span></li>
        <li>Comparisons (ratios): <span class="mono">p<sub>pulse</sub>/p<sub>a</sub></span>, <span class="mono">p<sub>pulse</sub>/p<sub>e</sub></span></li>
      </ul>

      <h3>Relevant principles and why they apply</h3>
      <ul>
        <li><strong>Photon momentum relation:</strong> For light in vacuum, energy and momentum satisfy <span class="mono">E = pc₀</span>, so the pulse momentum is <span class="mono">E/c₀</span>. This directly addresses “momentum in all photons.”</li>
        <li><strong>Classical momentum for slow mass:</strong> the 1-g mass at 0.01 m/s is deeply nonrelativistic, so <span class="mono">p=mv</span> applies.</li>
        <li><strong>Relativistic momentum for electron:</strong> at <span class="mono">0.1c₀</span>, relativity is small but measurable; use <span class="mono">p = γm<sub>e</sub>v</span>.</li>
      </ul>

      <h3>Explicit assumptions</h3>
      <ul>
        <li>Pulse travels in vacuum (or air ~ vacuum for this purpose), so we use <span class="mono">p=E/c₀</span>.</li>
        <li>We compare <strong>magnitudes</strong> of momenta.</li>
        <li>For the electron, we assume it is free (no potential energy complications) and moving at constant speed.</li>
      </ul>

      <h3>Possible approaches (2–3) and which is best</h3>
      <div class="grid2">
        <div class="box">
          <strong>Approach A: Photon energy–momentum relation</strong>
          <p>
            Use <span class="mono">E = pc₀</span> for photons and <span class="mono">p=mv</span>, <span class="mono">p=γmv</span> for matter.
            <br><span class="mono">Pros:</span> fastest, minimal information needed (no wavelength).
            <br><span class="mono">Cons:</span> must accept the relativistic photon relation as known.
          </p>
        </div>
        <div class="box">
          <strong>Approach B: Radiation pressure + impulse</strong>
          <p>
            Interpret the pulse momentum via pressure/force on absorption: impulse <span class="mono">J = E/c₀</span>.
            <br><span class="mono">Pros:</span> strong physical intuition.
            <br><span class="mono">Cons:</span> still relies on same core relation; adds extra steps.
          </p>
        </div>
      </div>
      <p>
        <strong>Best choice:</strong> Approach A. It is direct, rigorous, and matches exactly what is asked: “total momentum in all photons.”
      </p>
    </section>

    <!-- PART 2 -->
    <section id="part2">
      <h2>PART 2 — Strategy &amp; Tips (Roadmap Only)</h2>

      <div class="step">
        <strong>Step 1 — Convert units</strong>
        <p>
          <span class="mono">1 g → 10⁻³ kg</span>, <span class="mono">1 cm/s → 10⁻² m/s</span>.
          <br><em>Meaning:</em> momentum calculations are SI-consistent.
        </p>
      </div>

      <div class="step">
        <strong>Step 2 — Compute pulse momentum from energy</strong>
        <p>
          Use <span class="mono">p<sub>pulse</sub> = E/c₀</span>.
          <br><em>Meaning:</em> total photon momentum depends only on total energy in vacuum.
        </p>
      </div>

      <div class="step">
        <strong>Step 3 — Compute momentum of the 1-g mass</strong>
        <p>
          Use <span class="mono">p<sub>a</sub> = mv</span> (since <span class="mono">v ≪ c₀</span>).
          <br><em>Meaning:</em> classical momentum is sufficient.
        </p>
      </div>

      <div class="step">
        <strong>Step 4 — Compute electron momentum</strong>
        <p>
          Use <span class="mono">p<sub>e</sub> = γm<sub>e</sub>v</span> with <span class="mono">v = c₀/10</span>.
          <br><em>Meaning:</em> includes mild relativistic correction.
        </p>
      </div>

      <div class="step">
        <strong>Step 5 — Form comparisons</strong>
        <p>
          Compute ratios <span class="mono">p<sub>pulse</sub>/p<sub>a</sub></span> and <span class="mono">p<sub>pulse</sub>/p<sub>e</sub></span>.
          <br><em>Meaning:</em> dimensionless “how many times bigger/smaller.”
        </p>
      </div>

      <div class="callouts">
        <div class="callout warn">
          <strong>Common mistakes</strong>
          Mixing cm/s with m/s; using <span class="mono">p = E·c₀</span> (wrong direction); forgetting <span class="mono">γ</span> when asked for a relativistic speed.
        </div>
        <div class="callout key">
          <strong>Quick tips</strong>
          If you only need the <em>total</em> photon momentum, wavelength cancels out: sum of photon momenta equals total energy over <span class="mono">c₀</span>.
        </div>
      </div>
    </section>

    <!-- PART 3 -->
    <section id="part3">
      <h2>PART 3 — Full Solution (Detailed + Teaching)</h2>

      <h3>Physical intuition first</h3>
      <p>
        A 10-J pulse is a lot of energy by everyday standards, but light’s momentum is “energy divided by a huge number”
        (<span class="mono">c₀</span>), so we expect a modest momentum compared to even a slow-moving gram-scale object.
        On the other hand, an electron is incredibly light, so even at 0.1<span class="mono">c₀</span> its momentum is tiny—light can easily beat it.
      </p>

      <h3>Step-by-step derivation</h3>

      <p><strong>1) Photon (pulse) momentum in vacuum</strong></p>
      <p>
        For a photon (or any electromagnetic wave packet) in vacuum, the energy–momentum relation is:
      </p>
      <div class="eqbox">
        <div class="eq" id="eq1">E = p c₀  ⟹  p = E / c₀</div>
        <button class="btn small" data-copy="#eq1">Copy</button>
      </div>
      <p>
        Here:
        <span class="mono">E</span> is the total energy in the pulse (J),
        <span class="mono">p</span> is the magnitude of the pulse momentum (kg·m/s),
        and <span class="mono">c₀</span> is the speed of light (m/s).
      </p>
      <p>
        Insert the given pulse energy <span class="mono">E = 10 J</span>:
      </p>
      <div class="eqbox">
        <div class="eq" id="eq2">p_pulse = (10 J) / (2.99792458×10^8 m/s)</div>
        <button class="btn small" data-copy="#eq2">Copy</button>
      </div>
      <p>
        Compute:
      </p>
      <div class="eqbox">
        <div class="eq" id="eq3">p_pulse ≈ 3.3356×10^-8 kg·m/s</div>
        <button class="btn small" data-copy="#eq3">Copy</button>
      </div>
      <p><em>Explanation:</em> We used the fundamental photon relation <span class="mono">E=pc₀</span>. No wavelength is required because we are using the total pulse energy.</p>

      <p><strong>2) Momentum of a 1-g mass moving at 1 cm/s</strong></p>
      <p>
        Convert units:
        <span class="mono">m = 1 g = 1×10⁻³ kg</span>,
        <span class="mono">v = 1 cm/s = 1×10⁻² m/s</span>.
      </p>
      <p>
        Nonrelativistic momentum is:
      </p>
      <div class="eqbox">
        <div class="eq" id="eq4">p_a = m v = (1×10^-3 kg)(1×10^-2 m/s) = 1×10^-5 kg·m/s</div>
        <button class="btn small" data-copy="#eq4">Copy</button>
      </div>
      <p><em>Explanation:</em> Since <span class="mono">v</span> is tiny compared to <span class="mono">c₀</span>, classical momentum is fully adequate.</p>

      <p><strong>3) Momentum of an electron moving at v = c₀/10</strong></p>
      <p>
        For an electron, use relativistic momentum:
      </p>
      <div class="eqbox">
        <div class="eq" id="eq5">p_e = γ m_e v,  with  γ = 1/√(1 - (v/c₀)^2)</div>
        <button class="btn small" data-copy="#eq5">Copy</button>
      </div>
      <p>
        Here <span class="mono">m<sub>e</sub> = 9.109×10⁻³¹ kg</span> and <span class="mono">v = 0.1 c₀</span>, so:
        <span class="mono">β = 0.1</span> and
        <span class="mono">γ = 1/√(1−0.1²) = 1/√(0.99) ≈ 1.00504</span>.
      </p>
      <p>
        Then:
      </p>
      <div class="eqbox">
        <div class="eq" id="eq6">p_e = (1.00504)(9.109×10^-31 kg)(0.1×2.99792458×10^8 m/s) ≈ 2.75×10^-23 kg·m/s</div>
        <button class="btn small" data-copy="#eq6">Copy</button>
      </div>
      <p><em>Explanation:</em> The relativistic correction is small at 0.1<span class="mono">c₀</span>, but included for accuracy and good habits.</p>

      <h3>Comparisons</h3>
      <p><strong>(a) Pulse vs 1-g mass</strong></p>
      <div class="eqbox">
        <div class="eq" id="eq7">p_pulse / p_a ≈ (3.3356×10^-8) / (1×10^-5) ≈ 3.34×10^-3</div>
        <button class="btn small" data-copy="#eq7">Copy</button>
      </div>
      <p>
        So the 10-J light pulse carries about <span class="mono">0.00334</span> times the momentum of the 1-g mass,
        i.e. the mass’s momentum is about <span class="mono">~300</span> times larger.
      </p>

      <p><strong>(b) Pulse vs electron at c₀/10</strong></p>
      <div class="eqbox">
        <div class="eq" id="eq8">p_pulse / p_e ≈ (3.3356×10^-8) / (2.75×10^-23) ≈ 1.21×10^15</div>
        <button class="btn small" data-copy="#eq8">Copy</button>
      </div>
      <p>
        The light pulse carries an enormous momentum compared to the electron: roughly <span class="mono">10¹⁵</span> times larger.
      </p>

      <div class="callouts">
        <div class="callout final">
          <strong>Final Answer (numbers)</strong>
          <div class="box" style="margin:8px 0 0;">
            <div class="row" style="justify-content:space-between; gap:12px;">
              <div id="finalText" style="min-width:0;">
                <div><span class="mono">p_pulse = E/c₀ = 3.34×10⁻⁸ kg·m/s</span> (for E = 10 J)</div>
                <div>(a) <span class="mono">p_a = 1.00×10⁻⁵ kg·m/s</span>, so <span class="mono">p_pulse/p_a = 3.34×10⁻³</span> (mass is ≈ 300× larger)</div>
                <div>(b) <span class="mono">p_e ≈ 2.75×10⁻²³ kg·m/s</span>, so <span class="mono">p_pulse/p_e ≈ 1.21×10¹⁵</span></div>
              </div>
              <button class="btn" id="copyFinal">Copy final answer</button>
            </div>
          </div>
        </div>
        <div class="callout key">
          <strong>Sanity Checks</strong>
          <ul style="margin:8px 0 0 18px;">
            <li><strong>Units:</strong> <span class="mono">E/c₀</span> gives J·s/m = N·s = kg·m/s ✔</li>
            <li><strong>Limiting behavior:</strong> larger pulse energy → proportionally larger momentum ✔</li>
            <li><strong>Direction:</strong> momentum points along beam propagation; we compared magnitudes ✔</li>
          </ul>
        </div>
      </div>

      <p>
        <strong>Connection to the diagram and plots:</strong>
        The diagram shows a pulse moving right; its momentum vector points right.
        The main plot shows the linear relationship <span class="mono">p = E/c₀</span> and compares it to the fixed reference momenta
        from parts (a) and (b). The secondary plot shows how the <em>ratios</em> grow with pulse energy.
      </p>
    </section>

    <!-- Visualization block (diagram + plots + controls) -->
    <section id="viz">
      <h2>Interactive Visualizations</h2>

      <div class="controls" role="group" aria-label="Interactive controls">
        <label for="energySlider">Pulse energy <span class="mono">E</span> (J)</label>
        <input id="energySlider" type="range" min="0" max="100" step="0.5" value="10" />
        <div class="row" style="justify-content:space-between; margin-top:8px;">
          <div class="hint">
            Drag the slider. All canvases and the numeric readout update live.
          </div>
          <div class="row">
            <span class="kbd">E</span>
            <span class="mono" id="energyReadout">10.0</span>
            <span class="mono">J</span>
          </div>
        </div>

        <div class="statgrid" aria-label="Live numerical readouts">
          <div class="stat">
            <div class="k">Pulse momentum</div>
            <div class="v" id="pPulseReadout">—</div>
            <div class="u">kg·m/s</div>
          </div>
          <div class="stat">
            <div class="k">Ratio vs 1 g @ 1 cm/s</div>
            <div class="v" id="ratioMassReadout">—</div>
            <div class="u">dimensionless</div>
          </div>
          <div class="stat">
            <div class="k">Ratio vs e⁻ @ c₀/10</div>
            <div class="v" id="ratioElecReadout">—</div>
            <div class="u">dimensionless</div>
          </div>
        </div>
      </div>

      <figure>
        <canvas id="diagramCanvas" aria-label="Diagram: laser pulse carrying momentum"></canvas>
        <figcaption>
          Diagram: A laser pulse (energy <span class="mono">E</span>) travels in vacuum and carries momentum
          <span class="mono">p = E/c₀</span> in its propagation direction.
        </figcaption>
      </figure>

      <figure>
        <canvas id="mainPlot" class="canvasTall" aria-label="Main plot: momentum vs pulse energy"></canvas>
        <figcaption>
          Main plot: pulse momentum <span class="mono">p = E/c₀</span> versus energy. Horizontal reference lines show the
          momenta from parts (a) and (b).
        </figcaption>
      </figure>

      <figure>
        <canvas id="ratioPlot" class="canvasTall" aria-label="Secondary plot: momentum ratios vs pulse energy"></canvas>
        <figcaption>
          Secondary plot: ratios <span class="mono">p_pulse/p_a</span> and <span class="mono">p_pulse/p_e</span> versus energy (log scale).
        </figcaption>
      </figure>
    </section>

    <!-- PART 4 -->
    <section id="part4">
      <h2>PART 4 — Deeper Understanding (Theory Around the Result)</h2>

      <h3>Re-interpreting the final formulas</h3>
      <ul>
        <li><span class="mono">p_pulse = E/c₀</span>: the “momentum per joule” of light in vacuum is <span class="mono">1/c₀</span>. Because <span class="mono">c₀</span> is huge, light momentum is small per unit energy.</li>
        <li><span class="mono">p = mv</span>: for everyday objects, momentum is mass times speed—mass is typically large compared to photons’ “effective inertia.”</li>
        <li><span class="mono">p = γmv</span>: at higher speeds, momentum grows faster than linearly because of relativity (via <span class="mono">γ</span>).</li>
      </ul>

      <h3>How changing parameters affects the outcome (connect to plots)</h3>
      <ul>
        <li>Increasing <span class="mono">E</span> increases <span class="mono">p_pulse</span> linearly (main plot is a straight line).</li>
        <li>The comparison to the 1-g mass crosses “equality” when <span class="mono">E ≈ p_a c₀</span>. Since <span class="mono">p_a = 10⁻⁵</span>, this is around <span class="mono">E ~ 3000 J</span>, far beyond the 0–100 J example plot range—so the light remains smaller in that range.</li>
        <li>The comparison to the electron becomes huge quickly because <span class="mono">p_e</span> is extremely small; the ratio curve sits very high on the log plot.</li>
      </ul>

      <h3>Alternative derivation idea (brief)</h3>
      <p>
        Using the wave picture, the electromagnetic field carries momentum density proportional to the energy flux (Poynting vector).
        Integrating momentum density over the pulse volume again yields total momentum <span class="mono">E/c₀</span> in vacuum—consistent with the photon result.
      </p>

      <h3>Concept check (self-test)</h3>
      <ul>
        <li><strong>Q:</strong> If the pulse energy doubles, what happens to its momentum? <strong>A:</strong> It doubles, since <span class="mono">p = E/c₀</span>.</li>
        <li><strong>Q:</strong> Do you need the laser wavelength to find total momentum here? <strong>A:</strong> No—total momentum depends only on total energy in vacuum.</li>
        <li><strong>Q:</strong> Why does a slow gram-scale object beat the 10-J pulse in momentum? <strong>A:</strong> Because <span class="mono">mv</span> can be much larger than <span class="mono">E/c₀</span> even for small speeds when mass is macroscopic.</li>
        <li><strong>Q:</strong> Why does the pulse beat the electron so dramatically? <strong>A:</strong> The electron mass is tiny, so even at <span class="mono">0.1c₀</span> its momentum is minuscule compared to <span class="mono">10/c₀</span>.</li>
      </ul>
    </section>

    <!-- PART 5 -->
    <section id="part5">
      <h2>PART 5 — Visualization Guide (How to Read the Plots)</h2>

      <h3>What each canvas shows</h3>
      <ul>
        <li><strong>Diagram canvas:</strong> A pulse propagating right with a momentum arrow. The label updates with the current <span class="mono">E</span> and computed <span class="mono">p = E/c₀</span>.</li>
        <li><strong>Main plot:</strong> <span class="mono">p_pulse</span> vs <span class="mono">E</span> (linear axes). Reference lines indicate:
          <span class="mono">p_a</span> for the 1-g mass and <span class="mono">p_e</span> for the electron.</li>
        <li><strong>Secondary plot:</strong> Ratios <span class="mono">p_pulse/p_a</span> and <span class="mono">p_pulse/p_e</span> vs <span class="mono">E</span> (log y-axis) to fit very large and very small values on one graph.</li>
      </ul>

      <h3>Interactive control</h3>
      <p>
        The slider changes the pulse energy <span class="mono">E</span> (in joules). Since <span class="mono">p_pulse = E/c₀</span>, the pulse momentum scales linearly:
        the point on the main plot moves along the straight line, and both ratio curves move accordingly on the log plot.
      </p>
    </section>
  </article>
</main>

<footer class="fadeIn">
  <p>
    Tip for extensions: if a pulse is reflected instead of absorbed, the momentum transfer to the mirror is approximately
    <span class="mono">2E/c₀</span> (direction reversal). That’s the basis of radiation-pressure forces.
  </p>
</footer>

<script>
(function(){
  "use strict";

  // ---------- Constants ----------
  const c0 = 299792458;                 // m/s
  const me = 9.1093837015e-31;          // kg
  const beta_e = 0.1;                   // v/c0
  const v_e = beta_e * c0;              // m/s
  const gamma_e = 1 / Math.sqrt(1 - beta_e*beta_e);
  const p_e = gamma_e * me * v_e;       // kg m/s

  const m_a = 1e-3;                     // kg (1 g)
  const v_a = 1e-2;                     // m/s (1 cm/s)
  const p_a = m_a * v_a;                // kg m/s

  // ---------- DOM ----------
  const energySlider = document.getElementById("energySlider");
  const energyReadout = document.getElementById("energyReadout");
  const pPulseReadout = document.getElementById("pPulseReadout");
  const ratioMassReadout = document.getElementById("ratioMassReadout");
  const ratioElecReadout = document.getElementById("ratioElecReadout");
  const finalText = document.getElementById("finalText");
  const copyFinal = document.getElementById("copyFinal");

  // Canvases
  const canvDiagram = document.getElementById("diagramCanvas");
  const canvMain = document.getElementById("mainPlot");
  const canvRatio = document.getElementById("ratioPlot");

  // ---------- Utilities ----------
  function fmtSci(x, sig=3){
    if (x === 0) return "0";
    const ax = Math.abs(x);
    const exp = Math.floor(Math.log10(ax));
    const mant = x / Math.pow(10, exp);
    const m = mant.toPrecision(sig);
    return `${m}×10^${exp}`;
  }
  function fmtRatio(x){
    if (!isFinite(x)) return "—";
    if (x === 0) return "0";
    const ax = Math.abs(x);
    if (ax >= 1e4 || ax < 1e-3) return fmtSci(x, 3);
    return x.toFixed(4).replace(/0+$/,'').replace(/\.$/,'');
  }
  function copyText(text){
    if (navigator.clipboard && navigator.clipboard.writeText){
      navigator.clipboard.writeText(text).catch(()=>fallbackCopy(text));
    } else {
      fallbackCopy(text);
    }
  }
  function fallbackCopy(text){
    const ta = document.createElement("textarea");
    ta.value = text;
    ta.style.position = "fixed";
    ta.style.left = "-9999px";
    ta.style.top = "0";
    document.body.appendChild(ta);
    ta.focus();
    ta.select();
    try{ document.execCommand("copy"); }catch(e){}
    document.body.removeChild(ta);
  }

  // Copy buttons for equations
  document.querySelectorAll("[data-copy]").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const sel = btn.getAttribute("data-copy");
      const el = document.querySelector(sel);
      if (!el) return;
      const txt = el.textContent.replace(/\s+/g,' ').trim();
      copyText(txt);
      btn.textContent = "Copied";
      setTimeout(()=>btn.textContent="Copy", 900);
    });
  });

  copyFinal.addEventListener("click", ()=>{
    const txt = finalText.textContent.replace(/\s+\n/g,"\n").replace(/[ \t]+/g," ").trim();
    copyText(txt);
    copyFinal.textContent = "Copied";
    setTimeout(()=>copyFinal.textContent="Copy final answer", 1000);
  });

  // ---------- HiDPI canvas setup ----------
  function setupCanvas(canvas){
    const ctx = canvas.getContext("2d");
    function resize(){
      const dpr = window.devicePixelRatio || 1;
      const rect = canvas.getBoundingClientRect();
      const w = Math.max(10, rect.width);
      const h = Math.max(10, rect.height);
      canvas.width = Math.round(w * dpr);
      canvas.height = Math.round(h * dpr);
      ctx.setTransform(dpr,0,0,dpr,0,0);
      return {w, h, dpr};
    }
    return {ctx, resize};
  }

  const diag = setupCanvas(canvDiagram);
  const main = setupCanvas(canvMain);
  const ratio = setupCanvas(canvRatio);

  // Resize observer to redraw responsively
  const ro = new ResizeObserver(()=>{
    renderAll();
  });
  [canvDiagram, canvMain, canvRatio].forEach(c=>ro.observe(c));

  // ---------- Plot helpers ----------
  function clear(ctx, w, h){
    ctx.clearRect(0,0,w,h);
  }
  function gridBackground(ctx, x, y, w, h){
    // subtle panel
    ctx.save();
    ctx.fillStyle = "rgba(0,0,0,0.16)";
    ctx.fillRect(x,y,w,h);
    ctx.restore();
  }
  function drawAxes(ctx, box, xMin, xMax, yMin, yMax, opts){
    // opts: {title, xLabel, yLabel, xTicks, yTicks, yLog, xLog}
    const {x,y,w,h} = box;
    const padL = 64, padR = 16, padT = 44, padB = 54;
    const plot = {x:x+padL, y:y+padT, w:w-padL-padR, h:h-padT-padB};
    const title = opts.title || "";
    const xLabel = opts.xLabel || "";
    const yLabel = opts.yLabel || "";
    const xTicks = opts.xTicks || 5;
    const yTicks = opts.yTicks || 5;
    const yLog = !!opts.yLog;
    const xLog = !!opts.xLog;

    // background
    gridBackground(ctx, x, y, w, h);

    // title
    ctx.save();
    ctx.fillStyle = "rgba(233,238,255,0.96)";
    ctx.font = "700 14px ui-sans-serif, system-ui";
    ctx.fillText(title, x+14, y+22);
    ctx.restore();

    function xToPx(val){
      if (!xLog){
        return plot.x + (val - xMin) * (plot.w / (xMax - xMin));
      } else {
        const a = Math.log10(xMin), b = Math.log10(xMax);
        return plot.x + (Math.log10(val) - a) * (plot.w / (b - a));
      }
    }
    function yToPx(val){
      if (!yLog){
        return plot.y + plot.h - (val - yMin) * (plot.h / (yMax - yMin));
      } else {
        const a = Math.log10(yMin), b = Math.log10(yMax);
        return plot.y + plot.h - (Math.log10(val) - a) * (plot.h / (b - a));
      }
    }

    // gridlines + ticks
    ctx.save();
    ctx.strokeStyle = "rgba(185,195,255,0.10)";
    ctx.lineWidth = 1;

    // x grid
    for (let i=0;i<=xTicks;i++){
      const t = i/xTicks;
      const xv = !xLog ? (xMin + t*(xMax-xMin))
                       : Math.pow(10, Math.log10(xMin) + t*(Math.log10(xMax)-Math.log10(xMin)));
      const xp = xToPx(xv);
      ctx.beginPath();
      ctx.moveTo(xp, plot.y);
      ctx.lineTo(xp, plot.y+plot.h);
      ctx.stroke();
    }
    // y grid
    for (let i=0;i<=yTicks;i++){
      const t = i/yTicks;
      const yv = !yLog ? (yMin + t*(yMax-yMin))
                       : Math.pow(10, Math.log10(yMin) + t*(Math.log10(yMax)-Math.log10(yMin)));
      const yp = yToPx(yv);
      ctx.beginPath();
      ctx.moveTo(plot.x, yp);
      ctx.lineTo(plot.x+plot.w, yp);
      ctx.stroke();
    }
    ctx.restore();

    // axes border
    ctx.save();
    ctx.strokeStyle = "rgba(185,195,255,0.22)";
    ctx.lineWidth = 1.25;
    ctx.strokeRect(plot.x, plot.y, plot.w, plot.h);
    ctx.restore();

    // tick labels
    ctx.save();
    ctx.fillStyle = "rgba(233,238,255,0.86)";
    ctx.font = "12px ui-sans-serif, system-ui";

    // x labels
    for (let i=0;i<=xTicks;i++){
      const t = i/xTicks;
      const xv = !xLog ? (xMin + t*(xMax-xMin))
                       : Math.pow(10, Math.log10(xMin) + t*(Math.log10(xMax)-Math.log10(xMin)));
      const xp = xToPx(xv);
      const label = (!xLog)
        ? (xv>=10 ? xv.toFixed(0) : xv.toFixed(1))
        : ("1e" + Math.round(Math.log10(xv)));
      ctx.fillText(label, xp-10, plot.y+plot.h+18);
      // tick mark
      ctx.strokeStyle = "rgba(185,195,255,0.25)";
      ctx.beginPath();
      ctx.moveTo(xp, plot.y+plot.h);
      ctx.lineTo(xp, plot.y+plot.h+6);
      ctx.stroke();
    }
    // y labels
    for (let i=0;i<=yTicks;i++){
      const t = i/yTicks;
      const yv = !yLog ? (yMin + t*(yMax-yMin))
                       : Math.pow(10, Math.log10(yMin) + t*(Math.log10(yMax)-Math.log10(yMin)));
      const yp = yToPx(yv);
      const label = (!yLog)
        ? (Math.abs(yMax-yMin) < 1e-6 ? yv.toExponential(1) : fmtAxisLinear(yv, yMax))
        : ("1e" + Math.round(Math.log10(yv)));
      ctx.fillText(label, plot.x-56, yp+4);
      ctx.strokeStyle = "rgba(185,195,255,0.25)";
      ctx.beginPath();
      ctx.moveTo(plot.x-6, yp);
      ctx.lineTo(plot.x, yp);
      ctx.stroke();
    }
    ctx.restore();

    // axis labels
    ctx.save();
    ctx.fillStyle = "rgba(233,238,255,0.92)";
    ctx.font = "600 13px ui-sans-serif, system-ui";
    ctx.fillText(xLabel, plot.x + plot.w/2 - ctx.measureText(xLabel).width/2, plot.y+plot.h+42);

    // y label rotated
    ctx.translate(plot.x-48, plot.y + plot.h/2);
    ctx.rotate(-Math.PI/2);
    ctx.fillText(yLabel, -ctx.measureText(yLabel).width/2, 0);
    ctx.restore();

    return {plot, xToPx, yToPx};
  }

  function fmtAxisLinear(v, vmax){
    // keep readable, but avoid scientific spam
    const av = Math.abs(v);
    if (av === 0) return "0";
    if (av >= 1e3 || av < 1e-3) return v.toExponential(1);
    if (vmax <= 1e-6) return v.toExponential(1);
    if (av >= 10) return v.toFixed(0);
    if (av >= 1) return v.toFixed(1);
    return v.toFixed(2);
  }

  function drawLegend(ctx, items, x, y){
    ctx.save();
    ctx.font = "12px ui-sans-serif, system-ui";
    ctx.fillStyle = "rgba(233,238,255,0.92)";
    ctx.strokeStyle = "rgba(185,195,255,0.18)";
    ctx.lineWidth = 1;

    // compute box size
    let w = 0;
    const lineH = 16;
    items.forEach(it=>{
      w = Math.max(w, 26 + ctx.measureText(it.label).width);
    });
    const h = 10 + items.length*lineH;
    ctx.fillStyle = "rgba(0,0,0,0.28)";
    roundRect(ctx, x, y, w+14, h, 12, true, true);
    ctx.strokeStyle = "rgba(185,195,255,0.18)";
    roundRect(ctx, x, y, w+14, h, 12, false, true);

    // entries
    items.forEach((it, i)=>{
      const yy = y + 10 + i*lineH;
      ctx.strokeStyle = it.stroke;
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(x+10, yy-4);
      ctx.lineTo(x+24, yy-4);
      ctx.stroke();

      ctx.fillStyle = "rgba(233,238,255,0.92)";
      ctx.fillText(it.label, x+30, yy);
    });
    ctx.restore();
  }

  function roundRect(ctx, x, y, w, h, r, fill, stroke){
    const rr = Math.min(r, w/2, h/2);
    ctx.beginPath();
    ctx.moveTo(x+rr, y);
    ctx.arcTo(x+w, y, x+w, y+h, rr);
    ctx.arcTo(x+w, y+h, x, y+h, rr);
    ctx.arcTo(x, y+h, x, y, rr);
    ctx.arcTo(x, y, x+w, y, rr);
    ctx.closePath();
    if (fill) ctx.fill();
    if (stroke) ctx.stroke();
  }

  // ---------- Diagram ----------
  function drawDiagram(E){
    const {ctx} = diag;
    const {w,h} = diag.resize();
    clear(ctx, w, h);

    const margin = 18;
    const cx = margin, cy = margin, cw = w - 2*margin, ch = h - 2*margin;

    // panel
    ctx.save();
    ctx.fillStyle = "rgba(0,0,0,0.18)";
    roundRect(ctx, cx, cy, cw, ch, 18, true, false);
    ctx.strokeStyle = "rgba(185,195,255,0.16)";
    ctx.lineWidth = 1;
    roundRect(ctx, cx, cy, cw, ch, 18, false, true);
    ctx.restore();

    const p = E / c0;

    // beam path
    const x0 = cx + 40;
    const x1 = cx + cw - 40;
    const y0 = cy + ch*0.52;

    // beam "pulse" capsule
    const pulseW = Math.min(220, cw*0.42);
    const pulseH = 42;
    const pulseX = x0 + (x1-x0)*0.22;
    const pulseY = y0 - pulseH/2;

    // guide line
    ctx.save();
    ctx.strokeStyle = "rgba(185,195,255,0.22)";
    ctx.setLineDash([6,6]);
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(x0, y0);
    ctx.lineTo(x1, y0);
    ctx.stroke();
    ctx.restore();

    // pulse body
    ctx.save();
    ctx.fillStyle = "rgba(124,240,200,0.10)";
    ctx.strokeStyle = "rgba(124,240,200,0.35)";
    ctx.lineWidth = 2;
    roundRect(ctx, pulseX, pulseY, pulseW, pulseH, 18, true, true);
    ctx.restore();

    // photons as dots in pulse
    ctx.save();
    ctx.fillStyle = "rgba(233,238,255,0.75)";
    for (let i=0;i<18;i++){
      const px = pulseX + 16 + (pulseW-32)*(i/17);
      const py = pulseY + pulseH/2 + (Math.sin(i*0.9)*6);
      ctx.beginPath();
      ctx.arc(px, py, 2.3, 0, Math.PI*2);
      ctx.fill();
    }
    ctx.restore();

    // momentum arrow
    ctx.save();
    ctx.strokeStyle = "rgba(141,182,255,0.9)";
    ctx.lineWidth = 3;
    const ax0 = pulseX + pulseW*0.55;
    const ax1 = pulseX + pulseW + 90;
    const ay = pulseY - 18;
    ctx.beginPath();
    ctx.moveTo(ax0, ay);
    ctx.lineTo(ax1, ay);
    ctx.stroke();
    // arrow head
    ctx.fillStyle = "rgba(141,182,255,0.9)";
    ctx.beginPath();
    ctx.moveTo(ax1, ay);
    ctx.lineTo(ax1-10, ay-6);
    ctx.lineTo(ax1-10, ay+6);
    ctx.closePath();
    ctx.fill();
    ctx.restore();

    // labels
    ctx.save();
    ctx.fillStyle = "rgba(233,238,255,0.95)";
    ctx.font = "700 14px ui-sans-serif, system-ui";
    ctx.fillText("Laser pulse in vacuum", cx+18, cy+24);

    ctx.font = "600 13px ui-sans-serif, system-ui";
    ctx.fillStyle = "rgba(233,238,255,0.88)";
    ctx.fillText(`Energy: E = ${E.toFixed(1)} J`, cx+18, cy+48);
    ctx.fillText(`Momentum: p = E/c₀ ≈ ${fmtSci(p,4)} kg·m/s`, cx+18, cy+68);

    ctx.fillStyle = "rgba(185,195,255,0.80)";
    ctx.font = "12px ui-sans-serif, system-ui";
    ctx.fillText("Propagation direction", ax0, ay-10);
    ctx.restore();
  }

  // ---------- Main plot: p vs E ----------
  function drawMainPlot(E){
    const {ctx} = main;
    const {w,h} = main.resize();
    clear(ctx, w, h);

    // Plot range (example values for visualization)
    const xMin = 0, xMax = 100; // J
    // y max chosen to show line up to 100 J clearly and include p_a (1e-5) which is above by factor ~30
    // We'll include it; that pushes scale. Keep yMax somewhat above p_a.
    const yMin = 0;
    const yMax = 1.2e-5; // kg m/s

    const axes = drawAxes(ctx, {x:0,y:0,w,h}, xMin, xMax, yMin, yMax, {
      title: "Pulse momentum vs energy (vacuum)",
      xLabel: "Energy E (J)",
      yLabel: "Momentum p (kg·m/s)",
      xTicks: 5,
      yTicks: 6
    });
    const {plot, xToPx, yToPx} = axes;

    // line p=E/c0
    ctx.save();
    ctx.strokeStyle = "rgba(124,240,200,0.95)";
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    for (let i=0;i<=200;i++){
      const Ei = xMin + (xMax-xMin)*i/200;
      const pi = Ei / c0;
      const xp = xToPx(Ei), yp = yToPx(pi);
      if (i===0) ctx.moveTo(xp, yp); else ctx.lineTo(xp, yp);
    }
    ctx.stroke();
    ctx.restore();

    // reference lines
    function hLine(val, stroke, label){
      const yp = yToPx(val);
      ctx.save();
      ctx.strokeStyle = stroke;
      ctx.lineWidth = 2;
      ctx.setLineDash([7,6]);
      ctx.beginPath();
      ctx.moveTo(plot.x, yp);
      ctx.lineTo(plot.x+plot.w, yp);
      ctx.stroke();
      ctx.setLineDash([]);
      ctx.fillStyle = "rgba(233,238,255,0.86)";
      ctx.font = "12px ui-sans-serif, system-ui";
      ctx.fillText(label, plot.x+10, Math.max(plot.y+14, yp-6));
      ctx.restore();
    }
    hLine(p_a, "rgba(255,211,122,0.95)", "p_a (1 g @ 1 cm/s) = 1e-5");
    hLine(p_e, "rgba(255,143,179,0.95)", "p_e (electron @ 0.1c₀)");

    // current point
    const pPulse = E / c0;
    ctx.save();
    ctx.fillStyle = "rgba(124,240,200,1)";
    ctx.strokeStyle = "rgba(0,0,0,0.35)";
    ctx.lineWidth = 2;
    const xp = xToPx(E), yp = yToPx(pPulse);
    ctx.beginPath();
    ctx.arc(xp, yp, 5.5, 0, Math.PI*2);
    ctx.fill();
    ctx.stroke();
    ctx.restore();

    drawLegend(ctx, [
      {stroke:"rgba(124,240,200,0.95)", label:"p_pulse = E/c₀"},
      {stroke:"rgba(255,211,122,0.95)", label:"p_a reference"},
      {stroke:"rgba(255,143,179,0.95)", label:"p_e reference"}
    ], plot.x + plot.w - 190, plot.y + 12);

    // note about visibility
    ctx.save();
    ctx.fillStyle = "rgba(185,195,255,0.75)";
    ctx.font = "12px ui-sans-serif, system-ui";
    ctx.fillText("Note: p_a sits far above the pulse line in this 0–100 J range.", plot.x+10, plot.y+plot.h-10);
    ctx.restore();
  }

  // ---------- Ratio plot (log y) ----------
  function drawRatioPlot(E){
    const {ctx} = ratio;
    const {w,h} = ratio.resize();
    clear(ctx, w, h);

    const xMin = 0.5, xMax = 100; // avoid log issues at 0 for ratios if we used log x; we keep linear x
    // Ratios: p_pulse/p_a ~ E/(c0*p_a) up to 100 J ~ 0.033
    // Ratios: p_pulse/p_e huge up to ~ (100/c0)/p_e ~ 1e16
    const yMin = 1e-4;
    const yMax = 1e16;

    const axes = drawAxes(ctx, {x:0,y:0,w,h}, xMin, xMax, yMin, yMax, {
      title: "Momentum ratios vs energy",
      xLabel: "Energy E (J)",
      yLabel: "Ratio (dimensionless, log scale)",
      xTicks: 5,
      yTicks: 5,
      yLog: true
    });
    const {plot, xToPx, yToPx} = axes;

    // curves
    function plotCurve(f, stroke){
      ctx.save();
      ctx.strokeStyle = stroke;
      ctx.lineWidth = 2.5;
      ctx.beginPath();
      for (let i=0;i<=220;i++){
        const Ei = xMin + (xMax-xMin)*i/220;
        const yv = f(Ei);
        const xp = xToPx(Ei), yp = yToPx(Math.max(yMin, Math.min(yMax, yv)));
        if (i===0) ctx.moveTo(xp, yp); else ctx.lineTo(xp, yp);
      }
      ctx.stroke();
      ctx.restore();
    }
    plotCurve(Ei => (Ei/c0)/p_a, "rgba(255,211,122,0.95)"); // vs mass
    plotCurve(Ei => (Ei/c0)/p_e, "rgba(255,143,179,0.95)"); // vs electron

    // current point markers
    const rMass = (E/c0)/p_a;
    const rElec = (E/c0)/p_e;

    function point(Ei, yv, fill){
      const xp = xToPx(Ei), yp = yToPx(Math.max(yMin, Math.min(yMax, yv)));
      ctx.save();
      ctx.fillStyle = fill;
      ctx.strokeStyle = "rgba(0,0,0,0.35)";
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.arc(xp, yp, 5.5, 0, Math.PI*2);
      ctx.fill();
      ctx.stroke();
      ctx.restore();
    }
    point(E, rMass, "rgba(255,211,122,1)");
    point(E, rElec, "rgba(255,143,179,1)");

    drawLegend(ctx, [
      {stroke:"rgba(255,211,122,0.95)", label:"p_pulse / p_a"},
      {stroke:"rgba(255,143,179,0.95)", label:"p_pulse / p_e"}
    ], plot.x + plot.w - 170, plot.y + 12);

    // guide line at ratio=1
    const y1 = yToPx(1);
    ctx.save();
    ctx.strokeStyle = "rgba(185,195,255,0.28)";
    ctx.setLineDash([6,6]);
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(plot.x, y1);
    ctx.lineTo(plot.x+plot.w, y1);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = "rgba(185,195,255,0.80)";
    ctx.font = "12px ui-sans-serif, system-ui";
    ctx.fillText("ratio = 1 (equal momentum)", plot.x+10, Math.max(plot.y+14, y1-8));
    ctx.restore();
  }

  // ---------- Update text + render ----------
  function updateReadouts(E){
    const pPulse = E / c0;
    const rMass = pPulse / p_a;
    const rElec = pPulse / p_e;

    energyReadout.textContent = E.toFixed(1);
    pPulseReadout.textContent = fmtSci(pPulse, 4);
    ratioMassReadout.textContent = fmtRatio(rMass);
    ratioElecReadout.textContent = fmtRatio(rElec);

    // Update final answer block (keeping the original 10 J numbers as the problem's required result,
    // but we also show the live E-readout in a compact way).
    const p10 = 10 / c0;
    const r10Mass = p10 / p_a;
    const r10Elec = p10 / p_e;

    finalText.innerHTML = `
      <div><span class="mono">p_pulse = E/c₀ = ${fmtSci(p10,4)} kg·m/s</span> (for E = 10 J)</div>
      <div>(a) <span class="mono">p_a = ${fmtSci(p_a,3)} kg·m/s</span>, so <span class="mono">p_pulse/p_a = ${fmtSci(r10Mass,3)}</span> (mass is ≈ ${(1/r10Mass).toFixed(0)}× larger)</div>
      <div>(b) <span class="mono">p_e ≈ ${fmtSci(p_e,3)} kg·m/s</span>, so <span class="mono">p_pulse/p_e ≈ ${fmtSci(r10Elec,3)}</span></div>
      <div style="margin-top:8px; color: rgba(185,195,255,0.80); font-size: .94rem;">
        Live slider: <span class="mono">E = ${E.toFixed(1)} J</span> ⇒ <span class="mono">p = ${fmtSci(pPulse,4)} kg·m/s</span>
      </div>
    `;
  }

  function renderAll(){
    const E = parseFloat(energySlider.value);
    updateReadouts(E);
    drawDiagram(E);
    drawMainPlot(E);
    drawRatioPlot(E);
  }

  energySlider.addEventListener("input", renderAll);

  // Initial render
  renderAll();
})();
</script>
</body>
</html>
