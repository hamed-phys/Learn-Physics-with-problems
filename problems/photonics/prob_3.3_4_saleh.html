<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Axial Phase Condition for Hermite–Gaussian Resonator Modes</title>
  <style>
    :root{
      --bg:#0b1020;
      --panel:#111a33;
      --panel2:#0f1730;
      --text:#eaf0ff;
      --muted:#b9c3e6;
      --line:rgba(255,255,255,.12);
      --accent:#7dd3fc;
      --accent2:#a78bfa;
      --ok:#86efac;
      --warn:#fbbf24;
      --danger:#fb7185;
      --shadow: 0 18px 60px rgba(0,0,0,.35);
      --radius:18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:var(--sans);
      background: radial-gradient(1200px 800px at 15% 10%, rgba(125,211,252,.15), transparent 55%),
                  radial-gradient(1000px 700px at 75% 20%, rgba(167,139,250,.14), transparent 52%),
                  radial-gradient(900px 650px at 60% 90%, rgba(134,239,172,.10), transparent 55%),
                  var(--bg);
      color:var(--text);
      line-height:1.55;
    }
    header{
      padding:28px 18px 10px;
      max-width:1200px;
      margin:0 auto;
    }
    .hero{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:16px;
      align-items:stretch;
    }
    @media (max-width: 920px){
      .hero{ grid-template-columns: 1fr; }
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card-inner{ padding:18px 18px 16px; }
    h1{
      margin:0 0 6px;
      font-size: clamp(22px, 2.6vw, 34px);
      letter-spacing:.2px;
    }
    .subtitle{
      color:var(--muted);
      margin:0 0 14px;
      font-size: 14.5px;
    }
    .quick ul{
      margin:10px 0 0;
      padding-left: 18px;
      color: var(--text);
    }
    .quick li{ margin:6px 0; }
    .pillbar{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top: 10px;
    }
    .pill{
      font-size: 12px;
      color: var(--muted);
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      padding:6px 10px;
      border-radius: 999px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
    }
    .dot{
      width:8px; height:8px; border-radius:50%;
      background: var(--accent);
      box-shadow: 0 0 0 3px rgba(125,211,252,.12);
      flex:0 0 auto;
    }
    .dot.purple{ background: var(--accent2); box-shadow: 0 0 0 3px rgba(167,139,250,.12); }
    .dot.green{ background: var(--ok); box-shadow: 0 0 0 3px rgba(134,239,172,.12); }

    /* Sticky ToC */
    .toc{
      position: sticky;
      top: 10px;
      align-self:start;
      padding:14px 14px 12px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .toc h2{
      font-size: 13px;
      margin:0 0 10px;
      color: var(--muted);
      letter-spacing:.3px;
      text-transform: uppercase;
    }
    .toc a{
      display:block;
      padding:8px 10px;
      margin:4px 0;
      border-radius: 12px;
      color: var(--text);
      text-decoration:none;
      border:1px solid transparent;
      background: rgba(255,255,255,.02);
    }
    .toc a:hover{
      border-color: rgba(125,211,252,.35);
      background: rgba(125,211,252,.08);
    }

    main{
      max-width:1200px;
      margin: 0 auto;
      padding: 12px 18px 48px;
      display:grid;
      grid-template-columns: 1fr 280px;
      gap: 16px;
    }
    @media (max-width: 980px){
      main{ grid-template-columns: 1fr; }
      .toc{ position: relative; top:auto; }
    }

    section.card{ overflow: visible; }
    section.card .card-inner{ padding: 18px; }

    h2{
      margin: 0 0 10px;
      font-size: 20px;
    }
    h3{
      margin: 16px 0 8px;
      font-size: 16px;
      color: var(--text);
    }
    p{ margin: 8px 0; color: var(--text); }
    .muted{ color: var(--muted); }
    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 820px){
      .grid2{ grid-template-columns: 1fr; }
    }

    .callout{
      border:1px solid rgba(125,211,252,.25);
      background: rgba(125,211,252,.06);
      border-radius: 16px;
      padding: 12px 12px;
    }
    .callout.warn{
      border-color: rgba(251,191,36,.35);
      background: rgba(251,191,36,.08);
    }
    .callout.ok{
      border-color: rgba(134,239,172,.30);
      background: rgba(134,239,172,.08);
    }
    .eqwrap{
      margin: 10px 0;
      display:flex;
      gap:10px;
      align-items:stretch;
      flex-wrap:wrap;
    }
    pre.eq{
      margin:0;
      padding: 12px 12px;
      border-radius: 14px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.25);
      font-family: var(--mono);
      font-size: 13px;
      overflow:auto;
      flex:1 1 520px;
      white-space: pre;
    }
    .copybtn{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      color: var(--text);
      border-radius: 14px;
      padding: 10px 12px;
      cursor:pointer;
      font-weight: 600;
      letter-spacing:.2px;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
      flex: 0 0 auto;
      height: fit-content;
    }
    .copybtn:hover{ background: rgba(125,211,252,.10); border-color: rgba(125,211,252,.35); }
    .copybtn:active{ transform: translateY(1px); }

    .boxed{
      border:1px solid rgba(134,239,172,.32);
      background: rgba(134,239,172,.08);
      border-radius: 18px;
      padding: 14px 14px;
      margin: 14px 0;
    }
    .boxed .title{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 8px;
    }
    .tag{
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(134,239,172,.35);
      background: rgba(134,239,172,.10);
      color: var(--text);
      user-select:none;
    }

    table{
      width:100%;
      border-collapse: separate;
      border-spacing: 0;
      overflow:hidden;
      border-radius: 16px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.18);
      margin-top: 10px;
    }
    th, td{
      padding: 10px 10px;
      border-bottom:1px solid rgba(255,255,255,.08);
      font-size: 13px;
    }
    th{
      text-align:left;
      color: var(--muted);
      font-weight: 700;
      background: rgba(255,255,255,.05);
    }
    tr:last-child td{ border-bottom:none; }
    .right{ text-align:right; font-variant-numeric: tabular-nums; }
    .mono{ font-family: var(--mono); font-variant-numeric: tabular-nums; }

    /* Viz area */
    figure{
      margin: 0;
      padding: 12px;
      border-radius: 18px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
    }
    figcaption{
      margin-top: 8px;
      color: var(--muted);
      font-size: 12.5px;
    }
    canvas{
      width: 100%;
      height: 280px;
      display:block;
      border-radius: 14px;
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.10);
    }
    .canvasTall{ height: 320px; }

    .controls{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    @media (max-width: 720px){ .controls{ grid-template-columns: 1fr; } }
    .ctrl{
      border:1px solid var(--line);
      background: rgba(0,0,0,.18);
      border-radius: 16px;
      padding: 10px 12px;
    }
    .ctrl label{
      display:flex;
      justify-content:space-between;
      gap:10px;
      color: var(--muted);
      font-size: 12px;
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing:.35px;
    }
    .ctrl input[type="range"]{ width:100%; }
    .ctrl select, .ctrl input[type="number"]{
      width:100%;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 8px 10px;
      outline:none;
    }
    .ctrl small{ color: var(--muted); display:block; margin-top: 6px; }
    .fadein{
      animation: pop .35s ease both;
    }
    @keyframes pop{
      from{ opacity:0; transform: translateY(6px); }
      to{ opacity:1; transform: translateY(0); }
    }

    footer{
      max-width:1200px;
      margin:0 auto;
      padding: 0 18px 28px;
      color: var(--muted);
      font-size: 12.5px;
    }

    /* Print-friendly */
    @media print{
      body{ background: #fff; color:#000; }
      .card, .toc{ box-shadow:none; }
      canvas{ border:1px solid #ccc; background:#fff; }
      .copybtn, .controls, .pillbar{ display:none !important; }
      a{ color:#000; text-decoration:none; }
    }
  </style>
</head>

<body>
<header>
  <div class="hero">
    <div class="card">
      <div class="card-inner">
        <h1>Axial Phase Condition for Hermite–Gaussian (HG) Resonator Modes</h1>
        <p class="subtitle">
          We find the resonator mode frequencies near <span class="mono">ν = 10¹⁴ Hz</span> that make the on-axis phase
          shift between <span class="mono">z = −z₀</span> and <span class="mono">z = +z₀</span> an integer multiple of <span class="mono">π</span>,
          including the Gouy phase for HG<sub>ℓm</sub> beams.
        </p>

        <div class="quick callout ok fadein">
          <h3 style="margin-top:0">Quick Summary</h3>
          <ul>
            <li>HG on-axis phase: <span class="mono">φ(z) = kz − (ℓ+m+1) arctan(z/z₀)</span> (up to a constant).</li>
            <li>Phase retardation between <span class="mono">−z₀</span> and <span class="mono">+z₀</span> is
              <span class="mono">Δφ = 2kz₀ − (ℓ+m+1)π</span>.</li>
            <li>Mode condition <span class="mono">Δφ = qπ</span> gives
              <span class="mono">ν<sub>q,ℓ,m</sub> = (c/(4nz₀)) (q+ℓ+m+1)</span>.</li>
            <li>For <span class="mono">z₀ = 0.30 m</span>, <span class="mono">n=1</span>:
              <span class="mono">FSR = c/(4z₀) ≈ 2.49827×10⁸ Hz</span>.</li>
            <li>Within <span class="mono">10¹⁴ ± 2×10⁹ Hz</span>, there are <span class="mono">16</span> allowed longitudinal indices.</li>
          </ul>
        </div>

        <div class="pillbar" aria-label="key facts">
          <span class="pill"><span class="dot"></span> Gouy phase included</span>
          <span class="pill"><span class="dot purple"></span> Resonator modes (two mirrors at ±z₀)</span>
          <span class="pill"><span class="dot green"></span> Interactive plots below</span>
        </div>
      </div>
    </div>

    <nav class="toc" aria-label="Table of Contents">
      <h2>Contents</h2>
      <a href="#analysis">Part 1 — Problem Analysis</a>
      <a href="#strategy">Part 2 — Strategy & Tips</a>
      <a href="#solution">Part 3 — Full Solution</a>
      <a href="#viz">Interactive Visualizations</a>
      <a href="#final">Final Answers</a>
    </nav>
  </div>
</header>

<main>
  <article class="card" id="analysis">
    <div class="card-inner">
      <h2>PART 1 — Problem Analysis (no solving yet)</h2>

      <h3>1) Restate the problem (in plain language)</h3>
      <p>
        We have Hermite–Gaussian beams of any transverse order HG<sub>ℓm</sub> with Rayleigh range
        <span class="mono">z₀ = 30 cm</span> propagating in a medium of refractive index <span class="mono">n = 1</span>.
        Consider the on-axis phase of such a beam. We must find which optical frequencies
        <span class="mono">ν</span> inside the band
        <span class="mono">ν = 10¹⁴ ± 2×10⁹ Hz</span>
        make the phase retardation (phase difference) between the planes <span class="mono">z = −z₀</span> and <span class="mono">z = +z₀</span>
        equal to an integer multiple of <span class="mono">π</span>.
      </p>
      <p class="muted">
        These special frequencies correspond to the longitudinal/transverse mode frequencies of a resonator made of two spherical mirrors placed at
        <span class="mono">z = ±z₀</span>.
      </p>

      <div class="grid2">
        <div class="callout">
          <h3 style="margin-top:0">Given</h3>
          <ul>
            <li>Rayleigh range: <span class="mono">z₀ = 30 cm = 0.30 m</span></li>
            <li>Refractive index: <span class="mono">n = 1</span></li>
            <li>Frequency band: <span class="mono">ν ∈ [10¹⁴ − 2×10⁹, 10¹⁴ + 2×10⁹] Hz</span></li>
            <li>HG mode indices: <span class="mono">ℓ, m = 0,1,2,…</span></li>
          </ul>
        </div>
        <div class="callout">
          <h3 style="margin-top:0">Unknowns</h3>
          <ul>
            <li>The set of frequencies <span class="mono">ν</span> in the band satisfying the axial phase condition</li>
            <li>How those frequencies relate to the mode indices <span class="mono">(q,ℓ,m)</span></li>
          </ul>
          <h3>Must find / prove</h3>
          <ul>
            <li>A frequency formula for the allowed modes</li>
            <li>All values in the specified numerical band</li>
          </ul>
        </div>
      </div>

      <h3>2) Relevant physics and why it applies</h3>
      <ul>
        <li>
          <b>Gaussian beam phase structure:</b> HG modes accumulate not only the plane-wave phase <span class="mono">kz</span>,
          but also a <b>Gouy phase</b> shift <span class="mono">−(ℓ+m+1) arctan(z/z₀)</span>. This changes the phase difference between two planes.
        </li>
        <li>
          <b>Resonator mode condition:</b> Standing-wave (or self-reproducing) resonator modes require the round-trip (or specified plane-to-plane)
          phase change to be an integer multiple of <span class="mono">π</span> (equivalently, the field reproduces itself up to sign).
        </li>
      </ul>

      <h3>3) Possible approaches (compare 2–3)</h3>
      <ol>
        <li>
          <b>Direct axial phase difference:</b> Write <span class="mono">φ(z)</span> for HG modes, compute
          <span class="mono">Δφ = φ(+z₀) − φ(−z₀)</span>, set <span class="mono">Δφ = qπ</span>, solve for <span class="mono">ν</span>.
          <span class="muted">(Fast, transparent, minimal geometry.)</span>
        </li>
        <li>
          <b>Resonator eigenfrequency formula:</b> Use standard cavity mode expression
          <span class="mono">ν = (c/2nL)(q + (ℓ+m+1)·(gouy/π))</span> with the appropriate Gouy phase per half-trip.
          <span class="muted">(Also works, but needs recalling cavity theory details.)</span>
        </li>
        <li>
          <b>ABCD matrix + self-consistency:</b> Build cavity ray matrix, compute Gouy phase from stability parameters, then infer frequency.
          <span class="muted">(Most general, but overkill here.)</span>
        </li>
      </ol>

      <p class="callout ok">
        <b>Chosen approach:</b> (1) compute the <b>on-axis phase difference</b> between <span class="mono">−z₀</span> and <span class="mono">+z₀</span>.
        It directly uses the known HG beam phase (including Gouy phase) and leads immediately to the allowed frequencies.
      </p>
    </div>
  </article>

  <aside class="toc" aria-label="On-page helper">
    <h2>On this page</h2>
    <a href="#analysis">Part 1</a>
    <a href="#strategy">Part 2</a>
    <a href="#solution">Part 3</a>
    <a href="#viz">Visualizations</a>
    <a href="#final">Final answers</a>
  </aside>

  <article class="card" id="strategy">
    <div class="card-inner">
      <h2>PART 2 — Strategy & Tips (roadmap only)</h2>

      <h3>Step-by-step plan (no algebra yet)</h3>
      <ol>
        <li>
          <b>Write the HG on-axis phase</b> <span class="mono">φ(z)</span>.
          <div class="muted">Tool: Gaussian-beam/HG mode phase including Gouy phase.</div>
        </li>
        <li>
          <b>Compute the phase retardation</b> <span class="mono">Δφ = φ(+z₀) − φ(−z₀)</span>.
          <div class="muted">Tool: use symmetry of <span class="mono">arctan(z/z₀)</span>.</div>
        </li>
        <li>
          <b>Impose the mode condition</b> <span class="mono">Δφ = qπ</span>, where <span class="mono">q</span> is an integer.
          <div class="muted">Principle: standing-wave/self-reproducing field condition.</div>
        </li>
        <li>
          <b>Replace</b> <span class="mono">k = 2πnν/c</span> and solve for <span class="mono">ν</span>.
          <div class="muted">Tool: dispersion-free relation between frequency and wavenumber.</div>
        </li>
        <li>
          <b>Compute numeric spacing</b> (free spectral range in this geometry) using <span class="mono">z₀</span> and <span class="mono">n</span>.
          <div class="muted">Tool: evaluate <span class="mono">c/(4nz₀)</span>.</div>
        </li>
        <li>
          <b>Find all integers</b> that place <span class="mono">ν</span> inside the band <span class="mono">10¹⁴ ± 2×10⁹ Hz</span>.
          <div class="muted">Tool: integer bounds via floor/ceil.</div>
        </li>
      </ol>

      <div class="grid2">
        <div class="callout warn">
          <h3 style="margin-top:0">Common mistakes</h3>
          <ul>
            <li>Forgetting the <b>Gouy phase</b> term (it shifts mode families).</li>
            <li>Using <span class="mono">2z₀</span> but forgetting the factor <span class="mono">k = 2πnν/c</span>.</li>
            <li>Mixing up “integer multiple of <span class="mono">π</span>” vs “integer multiple of <span class="mono">2π</span>”.</li>
          </ul>
        </div>
        <div class="callout ok">
          <h3 style="margin-top:0">Quick tips</h3>
          <ul>
            <li>Use <span class="mono">arctan(1)=π/4</span> and <span class="mono">arctan(−1)=−π/4</span>.</li>
            <li>Define <span class="mono">N ≡
