<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Transmission of a Gaussian Beam Through a Graded-Index (SELFOC) Slab — ABCD Solution</title>
  <style>
    :root{
      --bg:#0b0f14;
      --panel:#101824;
      --panel2:#0f1620;
      --text:#eaf0f7;
      --muted:#a9b6c6;
      --accent:#7dd3fc;
      --accent2:#a78bfa;
      --ok:#34d399;
      --warn:#fbbf24;
      --bad:#fb7185;
      --border:rgba(255,255,255,0.09);
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius:18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:
        radial-gradient(1200px 900px at 10% 0%, rgba(125,211,252,.14), transparent 55%),
        radial-gradient(1000px 700px at 90% 10%, rgba(167,139,250,.14), transparent 55%),
        radial-gradient(900px 700px at 40% 100%, rgba(52,211,153,.08), transparent 50%),
        var(--bg);
      line-height:1.55;
    }

    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    code, .eq{
      font-family:var(--mono);
      font-size:.96em;
      background:rgba(255,255,255,0.06);
      padding:.18em .42em;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.08);
      white-space:nowrap;
    }
    pre{
      font-family:var(--mono);
      background:rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.08);
      border-radius:14px;
      padding:14px 14px;
      overflow:auto;
      margin:12px 0;
    }
    .wrap{
      max-width:1180px;
      margin:0 auto;
      padding:28px 18px 70px;
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:18px;
      align-items:start;
    }

    header{
      grid-column: 1 / -1;
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:20px 18px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    header:before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(800px 250px at 20% 0%, rgba(125,211,252,.17), transparent 60%),
                  radial-gradient(700px 220px at 80% 20%, rgba(167,139,250,.14), transparent 60%);
      opacity:.9;
      pointer-events:none;
    }
    header > * {position:relative}
    .title{
      display:flex;
      flex-wrap:wrap;
      gap:10px 12px;
      align-items:baseline;
      margin:0 0 8px;
    }
    h1{
      margin:0;
      font-size:1.45rem;
      letter-spacing:.2px;
    }
    .subtitle{
      margin:0;
      color:var(--muted);
      font-size:.98rem;
      max-width: 980px;
    }

    .pillrow{margin-top:14px; display:flex; flex-wrap:wrap; gap:10px}
    .pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.10);
      background:rgba(16,24,36,0.55);
      color:var(--muted);
      font-size:.92rem;
      backdrop-filter: blur(6px);
    }
    .dot{width:10px;height:10px;border-radius:50%}
    .dot.a{background:var(--accent)}
    .dot.b{background:var(--accent2)}
    .dot.c{background:var(--ok)}

    /* Sticky TOC */
    nav.toc{
      position:sticky;
      top:14px;
      align-self:start;
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:14px 14px 10px;
      box-shadow: var(--shadow);
    }
    nav.toc h2{
      margin:0 0 10px;
      font-size:1.02rem;
      letter-spacing:.2px;
      display:flex; align-items:center; gap:10px;
    }
    .toc small{color:var(--muted); font-weight:500}
    .toc a{
      display:block;
      padding:8px 10px;
      margin:4px 0;
      border-radius:12px;
      border:1px solid transparent;
      color:var(--text);
      background:rgba(255,255,255,0.03);
    }
    .toc a:hover{
      border-color:rgba(125,211,252,0.35);
      background:rgba(125,211,252,0.08);
      text-decoration:none;
    }

    main{
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:18px;
      box-shadow: var(--shadow);
    }
    section{
      padding:10px 0 18px;
      border-bottom:1px solid rgba(255,255,255,0.07);
    }
    section:last-child{border-bottom:none}
    h2{
      margin:0 0 10px;
      font-size:1.18rem;
      letter-spacing:.2px;
    }
    h3{
      margin:14px 0 8px;
      font-size:1.05rem;
      letter-spacing:.15px;
    }
    p{margin:8px 0; color:rgba(234,240,247,.95)}
    ul{margin:8px 0 0 18px; color:rgba(234,240,247,.95)}
    li{margin:6px 0}
    .muted{color:var(--muted)}
    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 980px){
      .wrap{grid-template-columns:1fr}
      nav.toc{position:relative; top:auto}
      .grid2{grid-template-columns:1fr}
    }

    .card{
      background:rgba(12,18,28,0.55);
      border:1px solid rgba(255,255,255,0.09);
      border-radius: var(--radius);
      padding:14px 14px;
      box-shadow: 0 14px 50px rgba(0,0,0,.35);
      overflow:hidden;
    }
    .callout{
      border-left: 4px solid rgba(125,211,252,0.9);
      background:rgba(125,211,252,0.07);
    }
    .callout.warn{border-left-color:rgba(251,191,36,0.95); background:rgba(251,191,36,0.08)}
    .callout.ok{border-left-color:rgba(52,211,153,0.95); background:rgba(52,211,153,0.07)}
    .callout.bad{border-left-color:rgba(251,113,133,0.95); background:rgba(251,113,133,0.07)}

    .eqrow{
      display:flex;
      gap:10px;
      align-items:flex-start;
      flex-wrap:wrap;
      margin:10px 0;
    }

    .copyBtn{
      appearance:none;
      border:1px solid rgba(255,255,255,0.14);
      background:rgba(255,255,255,0.06);
      color:var(--text);
      padding:7px 10px;
      border-radius:12px;
      cursor:pointer;
      font-weight:600;
      font-size:.9rem;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      user-select:none;
    }
    .copyBtn:hover{
      background:rgba(125,211,252,0.10);
      border-color: rgba(125,211,252,0.40);
      transform: translateY(-1px);
    }
    .copyBtn:active{transform: translateY(0px) scale(.99)}
    .copyBtn .mini{opacity:.85; font-weight:700}
    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%);
      background:rgba(16,24,36,0.92);
      border:1px solid rgba(255,255,255,0.12);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      box-shadow: var(--shadow);
      opacity:0;
      pointer-events:none;
      transition: opacity .2s ease, transform .2s ease;
      font-weight:650;
      z-index:50;
    }
    .toast.show{opacity:1; transform:translateX(-50%) translateY(-4px)}
    .controls{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 640px){
      .controls{grid-template-columns:1fr}
    }
    .ctrl{
      background:rgba(255,255,255,0.03);
      border:1px solid rgba(255,255,255,0.08);
      border-radius:16px;
      padding:10px 10px;
    }
    .ctrl label{
      display:flex;
      justify-content:space-between;
      align-items:baseline;
      gap:10px;
      font-weight:700;
      font-size:.92rem;
      margin-bottom:6px;
    }
    .ctrl label span.value{
      color:var(--muted);
      font-family:var(--mono);
      font-weight:700;
      font-size:.92rem;
      white-space:nowrap;
    }
    input[type="range"]{width:100%}
    select{
      width:100%;
      background:rgba(16,24,36,0.8);
      border:1px solid rgba(255,255,255,0.12);
      color:var(--text);
      border-radius:12px;
      padding:8px 10px;
      font-weight:650;
      outline:none;
    }

    figure{
      margin:12px 0 0;
      padding:0;
    }
    .canvasCard{
      padding:12px;
    }
    canvas{
      width:100%;
      height:320px;
      display:block;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.10);
      background:rgba(0,0,0,0.18);
    }
    .cap{
      margin-top:8px;
      color:var(--muted);
      font-size:.92rem;
    }

    .boxed{
      border:1px solid rgba(125,211,252,0.35);
      background: rgba(125,211,252,0.08);
      border-radius: 16px;
      padding:12px 12px;
      overflow:auto;
    }
    .boxed .lead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:6px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight:800;
      font-size:.85rem;
      padding:6px 9px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.12);
      background:rgba(16,24,36,0.65);
      color:var(--muted);
    }
    .kpi{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media (max-width: 860px){ .kpi{grid-template-columns:1fr} }
    .kpi .item{
      background:rgba(255,255,255,0.03);
      border:1px solid rgba(255,255,255,0.08);
      border-radius:16px;
      padding:10px;
    }
    .kpi .item .t{color:var(--muted); font-size:.86rem; font-weight:750}
    .kpi .item .v{font-family:var(--mono); font-weight:850; margin-top:6px}
    footer{
      grid-column:1 / -1;
      margin-top:14px;
      color:var(--muted);
      font-size:.92rem;
      text-align:center;
      padding:14px 6px 4px;
    }

    @media print{
      body{background:#fff; color:#000}
      header, main, nav.toc{box-shadow:none}
      header, main, nav.toc{border:1px solid #ddd}
      .copyBtn, .controls{display:none !important}
      canvas{border:1px solid #bbb}
      .muted{color:#333}
      a{color:#000; text-decoration:underline}
      code{border:1px solid #ddd}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1>Gaussian Beam Through a Quadratic Graded-Index (SELFOC) Slab via ABCD</h1>
      </div>
      <p class="subtitle">
        A Gaussian beam enters a graded-index slab <span class="eq">n(y) ≈ n₀(1 − ½ a² y²)</span> at its waist. Using the slab’s ABCD matrix, we derive the beam width
        <span class="eq">w(d)</span> inside the medium, and visualize how the beam “breathes” periodically.
      </p>
      <div class="pillrow">
        <span class="pill"><span class="dot a"></span>ABCD law for Gaussian beams</span>
        <span class="pill"><span class="dot b"></span>Quadratic GRIN → sinusoidal ray matrix</span>
        <span class="pill"><span class="dot c"></span>Periodic beam-width oscillation (“breathing”)</span>
      </div>
    </header>

    <nav class="toc" aria-label="Table of contents">
      <h2>Contents <small>(sticky)</small></h2>
      <a href="#quick" data-scroll>Quick Summary</a>
      <a href="#part1" data-scroll>PART 1 — Problem Analysis</a>
      <a href="#part2" data-scroll>PART 2 — Strategy & Tips</a>
      <a href="#part3" data-scroll>PART 3 — Full Solution</a>
      <a href="#viz" data-scroll>Interactive Visualizations</a>
      <a href="#shape" data-scroll>Beam Shape Sketch & Interpretation</a>
    </nav>

    <main>
      <section id="quick">
        <h2>Quick Summary</h2>
        <div class="card callout ok">
          <ul>
            <li>The SELFOC slab has ABCD matrix: <span class="eq">A=D=cos(ad)</span>, <span class="eq">B=(1/a)sin(ad)</span>, <span class="eq">C=−a sin(ad)</span>.</li>
            <li>At the entrance plane, the beam is at a waist: <span class="eq">R=∞</span>, <span class="eq">w=W₀</span>, so <span class="eq">q₁ = i z<sub>R</sub></span>.</li>
            <li>Inside a medium of on-axis index <span class="eq">n₀</span>, use <span class="eq">z<sub>R</sub> = π n₀ W₀² / λ₀</span> (λ₀ = free-space wavelength).</li>
            <li>ABCD law: <span class="eq">q(d) = (A q₁ + B)/(C q₁ + D)</span>.</li>
            <li><b>Result:</b> <span class="eq">w(d) = W₀ √( cos²(ad) + [sin²(ad)]/(a² z<sub>R</sub>²) )</span> (periodic breathing with period <span class="eq">π/a</span>).</li>
          </ul>
        </div>
      </section>

      <section id="part1">
        <h2>PART 1 — Problem Analysis (no solving yet)</h2>

        <h3>1) Restate the problem</h3>
        <p>
          A Gaussian beam (free-space wavelength <span class="eq">λ₀</span>) propagates along the <span class="eq">z</span>-axis and enters a graded-index slab of length <span class="eq">d</span>.
          The slab has a quadratic refractive-index profile in the transverse coordinate <span class="eq">y</span>:
          <span class="eq">n(y) ≈ n₀(1 − ½ a² y²)</span>.
          The beam enters exactly at its waist (so the wavefront is planar at the entrance plane).
          Using the provided ABCD matrix for paraxial propagation in this SELFOC slab, we must find the beam width <span class="eq">w(d)</span> in the <span class="eq">y</span>-direction as a function of the slab length <span class="eq">d</span>, and sketch how the beam size evolves as it travels through the medium.
        </p>

        <h3>2) Given quantities</h3>
        <ul>
          <li>Index profile: <span class="eq">n(y) ≈ n₀(1 − ½ a² y²)</span></li>
          <li>Slab length: <span class="eq">d</span></li>
          <li>ABCD matrix elements:
            <span class="eq">A = cos(ad)</span>,
            <span class="eq">B = (1/a) sin(ad)</span>,
            <span class="eq">C = −a sin(ad)</span>,
            <span class="eq">D = cos(ad)</span>
          </li>
          <li>Beam wavelength in free space: <span class="eq">λ₀</span></li>
          <li>Beam waist radius at entrance: <span class="eq">W₀</span></li>
          <li>Beam enters at its waist: <span class="eq">R(0)=∞</span>, <span class="eq">w(0)=W₀</span></li>
        </ul>

        <h3>3) Unknowns</h3>
        <ul>
          <li>Beam radius (1/e field radius) inside the slab as a function of propagation distance: <span class="eq">w(d)</span></li>
          <li>Qualitative shape (“sketch”) of beam envelope through the GRIN medium</li>
        </ul>

        <h3>4) What must be found</h3>
        <ul>
          <li>Symbolic expression for <span class="eq">w(d)</span> using the ABCD law for Gaussian beams</li>
          <li>Sketch/description of the beam’s periodic focusing/defocusing inside the slab</li>
        </ul>

        <h3>5) Relevant physical principles (and why they apply)</h3>
        <div class="grid2">
          <div class="card">
            <h3 style="margin-top:0">Paraxial optics in GRIN media</h3>
            <p class="muted">
              A quadratic index profile produces harmonic-oscillator-like ray trajectories.
              In paraxial form, propagation through such a medium is represented by a simple sinusoidal ABCD matrix.
            </p>
          </div>
          <div class="card">
            <h3 style="margin-top:0">ABCD law for Gaussian beams</h3>
            <p class="muted">
              A Gaussian beam is fully characterized (paraxially) by its complex beam parameter <span class="eq">q</span>.
              Under any first-order optical system (ABCD), <span class="eq">q</span> transforms via a Möbius map.
              From <span class="eq">q(d)</span> we extract the spot size <span class="eq">w(d)</span>.
            </p>
          </div>
        </div>

        <h3>6) Possible approaches (compare 2–3)</h3>
        <ol>
          <li><b>ABCD + q-parameter (best):</b> Use <span class="eq">q(d)=(Aq₀+B)/(Cq₀+D)</span>, then compute <span class="eq">w(d)</span> from <span class="eq">q(d)</span>. Fast, standard, directly matches the problem statement.</li>
          <li><b>Wave equation / paraxial Helmholtz:</b> Solve the paraxial equation with a quadratic potential (GRIN), giving a “breathing Gaussian” solution. Elegant but longer and not what the prompt asks for.</li>
          <li><b>Second-moment (ABCD for moments):</b> Propagate beam moments (like <span class="eq">⟨y²⟩</span>) through an equivalent linear canonical transform. Works but still effectively re-derives the q-law.</li>
        </ol>

        <h3>Chosen approach</h3>
        <div class="card callout">
          <p>
            We will use the <b>ABCD law for Gaussian beams</b> because the slab’s ABCD matrix is explicitly given, and the beam enters at a waist (simple initial condition). This yields a clean symbolic expression for <span class="eq">w(d)</span> with minimal overhead.
          </p>
        </div>
      </section>

      <section id="part2">
        <h2>PART 2 — Strategy & Tips (roadmap only)</h2>

        <div class="card">
          <h3 style="margin-top:0">Step-by-step plan (5–10 steps)</h3>
          <ol>
            <li><b>Define the Gaussian beam parameter:</b> use <span class="eq">1/q = 1/R − i (λ₀)/(π n₀ w²)</span> (inside the medium). Goal: relate <span class="eq">q</span> to <span class="eq">w</span>.</li>
            <li><b>Set initial condition at waist:</b> at the entrance plane, <span class="eq">R=∞</span>, <span class="eq">w=W₀</span> ⇒ <span class="eq">q₁ = i z_R</span>. Goal: get <span class="eq">z_R</span> in terms of <span class="eq">λ
