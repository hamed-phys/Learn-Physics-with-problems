<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Undamped Spring–Mass with an Impulse at t = π (Laplace Transform Solution)</title>
  <style>
    :root{
      --bg:#0b0f14;
      --panel:#101824;
      --card:#0f1722;
      --ink:#e8eef7;
      --muted:#b7c4d6;
      --soft:#7f93ad;
      --accent:#7dd3fc;
      --accent2:#a7f3d0;
      --warn:#fbbf24;
      --danger:#fb7185;
      --border:rgba(255,255,255,.10);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      background: radial-gradient(1200px 800px at 15% 10%, rgba(125,211,252,.12), transparent 55%),
                  radial-gradient(1000px 700px at 90% 20%, rgba(167,243,208,.10), transparent 55%),
                  radial-gradient(900px 700px at 35% 95%, rgba(251,191,36,.07), transparent 60%),
                  var(--bg);
      color:var(--ink);
      line-height:1.55;
    }
    header{
      position:relative;
      padding:40px 18px 18px;
      max-width:1200px;
      margin:0 auto;
    }
    .hero{
      display:grid;
      grid-template-columns: 1.3fr .9fr;
      gap:18px;
      align-items:stretch;
    }
    @media (max-width: 980px){
      .hero{grid-template-columns:1fr}
    }
    h1{
      margin:0 0 10px;
      font-size: clamp(1.45rem, 2.2vw, 2.2rem);
      letter-spacing: .2px;
    }
    .subtitle{
      margin:0;
      color:var(--muted);
      font-size: 1rem;
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card-inner{padding:16px 16px 14px}
    .callout{
      border-left: 4px solid var(--accent);
      padding:12px 14px;
      background: rgba(125,211,252,.07);
      border-radius: 12px;
      margin: 12px 0 0;
    }
    .callout strong{color:#d6f2ff}
    .quick ul{
      margin:10px 0 0 18px;
      color:var(--muted);
    }
    main{
      max-width:1200px;
      margin:0 auto;
      padding: 0 18px 60px;
      display:grid;
      grid-template-columns: 270px 1fr;
      gap:18px;
    }
    @media (max-width: 980px){
      main{grid-template-columns:1fr}
    }
    nav.toc{
      position: sticky;
      top: 14px;
      align-self:start;
      padding:14px;
      border-radius: var(--radius);
      background: rgba(16,24,36,.72);
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }
    nav.toc h2{
      font-size:.95rem;
      margin:0 0 8px;
      color:var(--ink);
      letter-spacing:.2px;
    }
    nav.toc a{
      display:block;
      padding:7px 10px;
      border-radius: 12px;
      color:var(--muted);
      text-decoration:none;
      font-size:.92rem;
      transition: transform .12s ease, background .12s ease;
    }
    nav.toc a:hover{
      background: rgba(125,211,252,.10);
      color: var(--ink);
      transform: translateX(2px);
    }
    article{
      min-width:0;
    }
    section{
      margin-top: 18px;
      padding: 16px;
    }
    section + section{margin-top:14px}
    section h2{
      margin:0 0 10px;
      font-size: 1.25rem;
    }
    section h3{
      margin:16px 0 8px;
      font-size: 1.05rem;
      color: #d9e7fb;
    }
    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
    }
    @media (max-width: 980px){
      .grid2{grid-template-columns:1fr}
    }
    .muted{color:var(--muted)}
    .soft{color:var(--soft)}
    .eq{
      position:relative;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 14px;
      padding: 12px 12px 10px;
      overflow:hidden;
    }
    pre{
      margin:0;
      white-space: pre-wrap;
      word-break: break-word;
      font-family: var(--mono);
      font-size: .95rem;
      color: #eaf2ff;
    }
    .copybar{
      display:flex;
      gap:8px;
      justify-content:flex-end;
      margin:10px 0 0;
    }
    button{
      appearance:none;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: var(--ink);
      padding:8px 10px;
      border-radius: 12px;
      cursor:pointer;
      font-size:.92rem;
      transition: background .12s ease, transform .12s ease, border-color .12s ease;
    }
    button:hover{
      background: rgba(125,211,252,.10);
      border-color: rgba(125,211,252,.35);
      transform: translateY(-1px);
    }
    .pill{
      display:inline-block;
      padding:3px 10px;
      border-radius: 999px;
      font-size:.85rem;
      background: rgba(167,243,208,.10);
      border:1px solid rgba(167,243,208,.26);
      color:#dbfff2;
    }
    .warnpill{
      background: rgba(251,191,36,.10);
      border:1px solid rgba(251,191,36,.28);
      color:#fff3d0;
    }
    figure{
      margin:0;
      padding: 12px;
    }
    figcaption{
      margin-top:8px;
      color:var(--muted);
      font-size:.92rem;
    }
    canvas{
      width:100%;
      height: 300px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      display:block;
    }
    .controls{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      margin:10px 0 0;
      padding: 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
    }
    .controls label{
      font-size:.92rem;
      color:var(--muted);
      display:flex;
      align-items:center;
      gap:10px;
      flex: 1 1 260px;
      min-width: 240px;
    }
    input[type="range"]{width: 220px; max-width: 100%;}
    .readout{
      font-family: var(--mono);
      font-size:.93rem;
      color:#eaf2ff;
      background: rgba(125,211,252,.10);
      border:1px solid rgba(125,211,252,.25);
      padding:6px 10px;
      border-radius: 12px;
    }
    .box{
      padding:14px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.16);
    }
    .final{
      border:1px solid rgba(167,243,208,.35);
      background: rgba(167,243,208,.09);
    }
    .print-note{display:none}
    footer{
      max-width:1200px;
      margin:0 auto;
      padding: 10px 18px 40px;
      color: var(--soft);
      font-size:.9rem;
    }
    @media print{
      body{background:#fff; color:#000}
      .card, nav.toc, canvas, .controls{box-shadow:none}
      nav.toc{position:static}
      .print-note{display:block}
      button{display:none}
      .eq{background:#fff}
    }
  </style>
</head>
<body>
<!DOCTYPE html>
<header>
  <div class="hero">
    <div class="card">
      <div class="card-inner">
        <h1>Undamped Spring–Mass with an Impulse at <span class="pill">t = π</span> (Laplace Transform)</h1>
        <p class="subtitle">
          Solve <span class="pill">x'' + x = f(t)</span> with <span class="pill">x(0)=0</span>, <span class="pill">x'(0)=1</span>,
          where <span class="pill">f(t)=F₀ δ(t−π)</span>. Then interpret and graph the motion, including the special case <span class="warnpill">F₀=1</span>.
        </p>
        <div class="callout quick">
          <strong>Quick Summary</strong>
          <ul>
            <li>Before the impulse, the motion is the free oscillation from the initial velocity: <span class="pill">x(t)=sin t</span> for <span class="pill">0≤t&lt;π</span>.</li>
            <li>An impulse at <span class="pill">t=π</span> causes an instantaneous jump in velocity: <span class="pill">x'(π⁺) − x'(π⁻) = F₀</span>.</li>
            <li>After the impulse, the oscillator continues with a new amplitude: <span class="pill">x(t)=(F₀−1) sin(t−π)</span> for <span class="pill">t&gt;π</span>.</li>
            <li>Compact “u-form” (Heaviside): <span class="pill">x(t)=sin t + F₀ u(t−π) sin(t−π)</span>.</li>
            <li>Special case <span class="warnpill">F₀=1</span>: the impulse exactly cancels the velocity at <span class="pill">t=π</span>, leaving <span class="pill">x=0</span>, <span class="pill">x'=0</span> ⇒ motion stops.</li>
          </ul>
        </div>
        <p class="print-note"><strong>Print note:</strong> Interactive graphics are hidden in print view.</p>
      </div>
    </div>

    <div class="card">
      <figure>
        <canvas id="setupCanvas" aria-label="spring-mass diagram"></canvas>
        <figcaption>
          Labeled physical setup. The impulse at <span class="pill">t=π</span> changes momentum instantly (velocity jump).
        </figcaption>
      </figure>
    </div>
  </div>
</header>

<main>
  <nav class="toc" aria-label="Table of contents">
    <h2>On this page</h2>
    <a href="#analysis">PART 1 — Problem Analysis</a>
    <a href="#strategy">PART 2 — Strategy & Tips</a>
    <a href="#solution">PART 3 — Full Solution</a>
    <a href="#viz">Interactive Visualizations</a>
    <a href="#final">Final Answer (copy-ready)</a>
  </nav>

  <article>
    <section id="analysis" class="card">
      <div class="card-inner">
        <h2>PART 1 — Problem Analysis (no solving yet)</h2>

        <h3>Restate the problem (in my own words)</h3>
        <p class="muted">
          We have an undamped mass–spring oscillator whose equation of motion (in nondimensional units) is
          <span class="pill">x'' + x = f(t)</span>. The system begins at equilibrium
          <span class="pill">x(0)=0</span> but is launched with initial velocity <span class="pill">x'(0)=1</span>.
          An external force acts only as an <em>impulse</em> of magnitude <span class="pill">F₀</span> at time <span class="pill">t=π</span>,
          i.e. <span class="pill">f(t)=F₀ δ(t−π)</span>. Find the position <span class="pill">x(t)</span>, present it both in Heaviside “u-form”
          and in explicit piecewise (“cases”) form, graph it, and explain what happens when <span class="warnpill">F₀=1</span>.
        </p>

        <div class="grid2">
          <div class="box">
            <h3>Given</h3>
            <ul class="muted">
              <li>ODE: <span class="pill">x'' + x = f(t)</span> (undamped, natural frequency 1 rad/s in these units)</li>
              <li>Initial conditions: <span class="pill">x(0)=0</span>, <span class="pill">x'(0)=1</span></li>
              <li>Forcing: <span class="pill">f(t)=F₀ δ(t−π)</span> (impulse at <span class="pill">t=π</span>)</li>
            </ul>
          </div>
          <div class="box">
            <h3>Unknowns & tasks</h3>
            <ul class="muted">
              <li>Find the closed-form solution <span class="pill">x(t)</span> using Laplace transforms.</li>
              <li>Express <span class="pill">x(t)</span> in:
                <ul>
                  <li>Heaviside step “u-form”</li>
                  <li>piecewise “cases” form</li>
                </ul>
              </li>
              <li>Graph the solution; interpret the special case <span class="warnpill">F₀=1</span>.</li>
            </ul>
          </div>
        </div>

        <h3>Relevant physics & why it applies</h3>
        <ul class="muted">
          <li><strong>Newton’s 2nd law for a mass–spring:</strong> in scaled units the restoring force is <span class="pill">−x</span>,
              so <span class="pill">x'' = −x + f(t)</span> → <span class="pill">x'' + x = f(t)</span>.</li>
          <li><strong>Impulse–momentum principle:</strong> an impulse <span class="pill">∫ f(t) dt</span> causes an instantaneous change in momentum,
              which here manifests as a jump in velocity <span class="pill">Δx'</span>.</li>
          <li><strong>Linearity and time-shift:</strong> Laplace transforms handle impulses and shifted inputs cleanly via <span class="pill">e^{-as}</span>
              and the Heaviside step <span class="pill">u(t-a)</span>.</li>
        </ul>

        <h3>Possible approaches (and comparison)</h3>
        <ol class="muted">
          <li><strong>Laplace transform (recommended):</strong> Directly converts the ODE with δ-forcing into algebraic form; gives u-form naturally.</li>
          <li><strong>Impulse jump condition + homogeneous solution:</strong> Solve free motion, apply <span class="pill">Δx' = F₀</span> at <span class="pill">t=π</span>, continue with new initial data. Fast and very physical.</li>
          <li><strong>Convolution with Green’s function:</strong> Use impulse response <span class="pill">sin t</span> to build the forced solution. Elegant but resembles Laplace in result.</li>
        </ol>

        <p class="callout">
          <strong>Chosen approach:</strong> Laplace transforms, because the problem explicitly requests it and because δ(t−π) becomes especially simple:
          <span class="pill">ℒ{δ(t−a)} = e^{-as}</span>, leading directly to both the u-form and the cases form.
        </p>
      </div>
    </section>

    <section id="strategy" class="card">
      <div class="card-inner">
        <h2>PART 2 — Strategy & Tips (roadmap only)</h2>

        <h3>Plan (5–10 steps)</h3>
        <ol class="muted">
          <li><strong>Goal:</strong> Translate the ODE to the Laplace domain. <br/><span class="soft">Tool:</span> <span class="pill">ℒ{x''}=s²X − s x(0) − x'(0)</span>.</li>
          <li><strong>Goal:</strong> Laplace-transform the impulse forcing. <br/><span class="soft">Tool:</span> <span class="pill">ℒ{δ(t−a)}=e^{−as}</span>.</li>
          <li><strong>Goal:</strong> Solve algebraically for <span class="pill">X(s)</span>. <br/><span class="soft">Tool:</span> rearrange to isolate <span class="pill">X</span>.</li>
          <li><strong>Goal:</strong> Invert term-by-term. <br/><span class="soft">Tools:</span> <span class="pill">ℒ⁻¹{1/(s²+1)}=sin t</span>, and time-shift:
            <span class="pill">ℒ⁻¹{e^{−as}F(s)} = u(t−a) f(t−a)</span>.</li>
          <li><strong>Goal:</strong> Rewrite in explicit piecewise form by considering <span class="pill">t&lt;π</span> and <span class="pill">t&gt;π</span>.</li>
          <li><strong>Goal:</strong> Interpret the special case <span class="warnpill">F₀=1</span> using velocity jump (impulse–momentum).</li>
          <li><strong>Goal:</strong> Sanity checks: continuity of <span class="pill">x</span>, jump of <span class="pill">x'</span>, and energy change.</li>
        </ol>

        <h3>Common mistakes & quick tips</h3>
        <ul class="muted">
          <li><strong>Mistake:</strong> assuming the impulse makes <span class="pill">x</span> jump. <br/>✅ <strong>Tip:</strong> δ-force makes <span class="pill">x'</span> jump; <span class="pill">x</span> remains continuous.</li>
          <li><strong>Mistake:</strong> forgetting initial-condition terms in <span class="pill">ℒ{x''}</span>. <br/>✅ <strong>Tip:</strong> write it every time: <span class="pill">s²X − s x(0) − x'(0)</span>.</li>
          <li><strong>Mistake:</strong> mishandling the time shift. <br/>✅ <strong>Tip:</strong> <span class="pill">e^{−as}/(s²+1)</span> ↔ <span class="pill">u(t−a) sin(t−a)</span>.</li>
          <li><strong>Mistake:</strong> mixing “u-form” and “cases” inconsistently. <br/>✅ <strong>Tip:</strong> pick one symbolic expression and convert carefully.</li>
        </ul>
      </div>
    </section>

    <section id="solution" class="card">
      <div class="card-inner">
        <h2>PART 3 — Full Solution</h2>

        <h3>Physical intuition first</h3>
        <p class="muted">
          With no forcing, <span class="pill">x''+x=0</span> is a unit-frequency oscillator. Starting at <span class="pill">x(0)=0</span> with <span class="pill">x'(0)=1</span> produces
          <span class="pill">x(t)=sin t</span>, a constant-amplitude oscillation.
          At <span class="pill">t=π</span>, the mass passes through equilibrium again (since <span class="pill">sin π=0</span>) but is moving left with velocity
          <span class="pill">x'(π^-)=cos π=-1</span>.
          An impulse of magnitude <span class="pill">F₀</span> delivers an instantaneous momentum kick, so the velocity jumps by <span class="pill">F₀</span>.
          If that kick exactly cancels the velocity (i.e. <span class="warnpill">F₀=1</span>), then right after the impulse we have <span class="pill">x=0</span>, <span class="pill">x'=0</span>,
          and the mass stays at rest forever.
        </p>

        <h3>Step-by-step Laplace transform derivation</h3>

        <p class="muted">
          The equation is
          <span class="pill">x''(t) + x(t) = F₀ δ(t−π)</span>,
          with <span class="pill">x(0)=0</span> and <span class="pill">x'(0)=1</span>.
          Let <span class="pill">X(s)=ℒ{x(t)}</span>.
        </p>

        <div class="eq" id="eq1">
          <pre><code>Laplace of x'':
ℒ{x''} = s^2 X(s) − s x(0) − x'(0)

Given x(0)=0, x'(0)=1 ⇒ ℒ{x''} = s^2 X(s) − 1</code></pre>
          <div class="copybar">
            <button data-copy="#eq1">Copy</button>
          </div>
        </div>

        <p class="muted" style="margin-top:12px;">
          Take Laplace transforms of both sides:
        </p>

        <div class="eq" id="eq2">
          <pre><code>ℒ{x'' + x} = ℒ{F0 δ(t−π)}

(s^2 X(s) − 1) + X(s) = F0 e^{−π s}

⇒ (s^2 + 1) X(s) − 1 = F0 e^{−π s}

⇒ X(s) = [1 + F0 e^{−π s}] / (s^2 + 1)</code></pre>
          <div class="copybar">
            <button data-copy="#eq2">Copy</button>
          </div>
        </div>

        <p class="muted" style="margin-top:12px;">
          Now invert term-by-term. Use the standard transform pair:
          <span class="pill">ℒ⁻¹{1/(s²+1)} = sin t</span>.
          Also use the time-shift property:
          <span class="pill">ℒ⁻¹{e^{−as}F(s)} = u(t−a) f(t−a)</span>.
        </p>

        <div class="eq" id="eq3">
          <pre><code>Split X(s):
X(s) = 1/(s^2+1)  +  F0 [e^{−π s}/(s^2+1)]

Invert:
ℒ⁻¹{1/(s^2+1)} = sin t
ℒ⁻¹{e^{−π s}/(s^2+1)} = u(t−π) sin(t−π)

Therefore:
x(t) = sin t + F0 u(t−π) sin(t−π)</code></pre>
          <div class="copybar">
            <button data-copy="#eq3">Copy</button>
          </div>
        </div>

        <h3>Convert to “cases” form</h3>
        <p class="muted">
          Since <span class="pill">u(t−π)=0</span> for <span class="pill">t&lt;π</span> and <span class="pill">u(t−π)=1</span> for <span class="pill">t&gt;π</span>:
        </p>

        <div class="eq" id="eq4">
          <pre><code>x(t) = { sin t,                                0 ≤ t < π
       { sin t + F0 sin(t−π),                   t ≥ π

Using sin(t) = sin((t−π)+π) = −sin(t−π) for t ≥ π:

For t ≥ π:
x(t) = −sin(t−π) + F0 sin(t−π) = (F0 − 1) sin(t−π)</code></pre>
          <div class="copybar">
            <button data-copy="#eq4">Copy</button>
          </div>
        </div>

        <h3>Impulse effect (velocity jump) sanity check</h3>
        <p class="muted">
          Integrate the equation across a tiny interval around <span class="pill">t=π</span>:
          <span class="pill">∫(x''+x)dt = ∫F₀ δ(t−π)dt = F₀</span>.
          As the interval shrinks, <span class="pill">∫x dt → 0</span> (bounded), while <span class="pill">∫x'' dt = x'(π⁺)−x'(π⁻)</span>.
          Hence:
          <span class="pill">x'(π⁺)−x'(π⁻)=F₀</span>, and <span class="pill">x</span> remains continuous.
          From the pre-impulse solution <span class="pill">x(t)=sin t</span>, we have <span class="pill">x'(π⁻)=cos π=−1</span>, so
          <span class="pill">x'(π⁺)=−1+F₀</span>, matching the post-impulse amplitude <span class="pill">(F₀−1)</span>.
        </p>

        <h3>Special case F₀ = 1: what happens and why?</h3>
        <p class="muted">
          When <span class="warnpill">F₀=1</span>, the velocity jump is <span class="pill">+1</span>. Right before the impulse,
          <span class="pill">x(π)=0</span> and <span class="pill">x'(π⁻)=−1</span>. The impulse makes
          <span class="pill">x'(π⁺)=−1+1=0</span>.
          So immediately after the impulse the system is exactly at equilibrium with zero velocity:
          <span class="pill">x(π⁺)=0</span>, <span class="pill">x'(π⁺)=0</span>.
          With no damping and no further forcing, the unique solution is <span class="pill">x(t)=0</span> for all <span class="pill">t≥π</span>.
          Physically: the impulse removes exactly the kinetic energy the mass had at that instant (a perfectly timed “kick” opposite the motion).
        </p>

        <h3>Sanity checks</h3>
        <div class="grid2">
          <div class="box">
            <p class="muted"><strong>Continuity:</strong> At <span class="pill">t=π</span>, <span class="pill">x(π)=sin π + F₀·0 = 0</span>. No jump in position ✔</p>
            <p class="muted"><strong>Velocity jump:</strong> <span class="pill">x'(t)=cos t</span> for <span class="pill">t&lt;π</span>, and <span class="pill">x'(t)=(F₀−1)cos(t−π)</span> for <span class="pill">t&gt;π</span> (ignoring the δ spike). At <span class="pill">t=π</span>:
              <span class="pill">x'(π⁺)−x'(π⁻)=(F₀−1)·1 − (−1)=F₀</span> ✔</p>
          </div>
          <div class="box">
            <p class="muted"><strong>Units:</strong> In these scaled units, <span class="pill">x</span> is length, <span class="pill">t</span> is time, and the impulse magnitude <span class="pill">F₀</span> has units of velocity jump (momentum per mass). The equation is consistent ✔</p>
            <p class="muted"><strong>Limiting cases:</strong>
              <br/>• <span class="pill">F₀=0</span> ⇒ no impulse ⇒ <span class="pill">x(t)=sin t</span> ✔
              <br/>• Large <span class="pill">|F₀|</span> ⇒ post-impulse amplitude scales like <span class="pill">|F₀−1|</span> ✔
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="viz" class="card">
      <div class="card-inner">
        <h2>Interactive Visualizations</h2>
        <p class="muted">
          Use the slider to change the impulse magnitude <span class="pill">F₀</span>. All plots update live:
          (i) position vs time, and (ii) mechanical energy <span class="pill">E = ½(x'^2 + x^2)</span> (in these units).
          A dashed vertical marker indicates the impulse time <span class="pill">t=π</span>.
        </p>

        <div class="controls" role="group" aria-label="interactive controls">
          <label>
            Impulse magnitude F₀
            <input id="F0" type="range" min="-2" max="3" step="0.01" value="1"/>
            <span class="readout" id="F0Readout">1.00</span>
          </label>
          <label>
            Time window (multiple of π)
            <input id="Tmul" type="range" min="2" max="8" step="0.1" value="4"/>
            <span class="readout" id="TmulReadout">4.0π</span>
          </label>
          <button id="snapBtn" title="Set F0=1 (stops motion after t=π)">Snap F₀ = 1</button>
        </div>

        <div class="grid2" style="margin-top:12px;">
          <figure class="box">
            <canvas id="mainCanvas" aria-label="position vs time plot"></canvas>
            <figcaption><strong>Main plot:</strong> Position <span class="pill">x(t)</span> vs time <span class="pill">t</span> (units: radians of phase time; ω=1).</figcaption>
          </figure>
          <figure class="box">
            <canvas id="energyCanvas" aria-label="energy vs time plot"></canvas>
            <figcaption><strong>Secondary plot:</strong> Energy <span class="pill">E(t)=½(x'^2+x^2)</span> shows a jump at the impulse.</figcaption>
          </figure>
        </div>
      </div>
    </section>

    <section id="final" class="card">
      <div class="card-inner">
        <h2>Final Answer (copy-ready)</h2>

        <div class="box final eq" id="finalBox">
          <pre><code>Given x'' + x = F0 δ(t−π),  x(0)=0,  x'(0)=1.

Laplace:
(s^2 X − 1) + X = F0 e^{−π s}  ⇒  X(s) = [1 + F0 e^{−π s}]/(s^2+1).

u-form (Heaviside):
x(t) = sin(t) + F0 u(t−π) sin(t−π).

Cases form:
x(t) = sin(t),                         0 ≤ t < π
x(t) = (F0 − 1) sin(t−π),              t ≥ π.

Special case F0 = 1:
x(t) = sin(t) for 0 ≤ t < π, and x(t)=0 for t ≥ π,
because the impulse makes x'(π+) = x'(π−) + F0 = −1 + 1 = 0 while x(π)=0,
so the oscillator is left exactly at rest at equilibrium.</code></pre>
          <div class="copybar">
            <button data-copy="#finalBox">Copy final answer</button>
          </div>
        </div>
      </div>
    </section>
  </article>
</main>

<footer>
  Built with vanilla HTML/CSS/JS. Interactive plots are rendered on &lt;canvas&gt; with high-DPI support.
</footer>

<script>
(() => {
  // ---------- Helpers ----------
  const PI = Math.PI;

  function clamp(x, a, b){ return Math.max(a, Math.min(b, x)); }

  function $(id){ return document.getElementById(id); }

  function fmt(x, digits=2){
    const p = Math.pow(10,digits);
    return (Math.round(x*p)/p).toFixed(digits);
  }

  function setupHiDPI(canvas){
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    const w = Math.max(2, Math.floor(rect.width * dpr));
    const h = Math.max(2, Math.floor(rect.height * dpr));
    if (canvas.width !== w || canvas.height !== h){
      canvas.width = w; canvas.height = h;
    }
    const ctx = canvas.getContext('2d');
    ctx.setTransform(dpr,0,0,dpr,0,0); // draw in CSS pixels
    return {ctx, wCSS: rect.width, hCSS: rect.height, dpr};
  }

  // Draw axes + grid
  function drawPlotFrame(ctx, x0, y0, w, h, title){
    // background
    ctx.save();
    ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);

    // Title
    ctx.fillStyle = "rgba(232,238,247,0.92)";
    ctx.font = "600 14px system-ui, -apple-system, Segoe UI, Roboto, Arial";
    ctx.fillText(title, x0, y0 - 10);

    // frame
    ctx.strokeStyle = "rgba(255,255,255,0.14)";
    ctx.lineWidth = 1;
    ctx.strokeRect(x0, y0, w, h);

    ctx.restore();
  }

  function drawGrid(ctx, x0, y0, w, h, nx=10, ny=8){
    ctx.save();
    ctx.strokeStyle = "rgba(255,255,255,0.08)";
    ctx.lineWidth = 1;
    for(let i=1;i<nx;i++){
      const x = x0 + (w*i)/nx;
      ctx.beginPath();
      ctx.moveTo(x, y0);
      ctx.lineTo(x, y0+h);
      ctx.stroke();
    }
    for(let j=1;j<ny;j++){
      const y = y0 + (h*j)/ny;
      ctx.beginPath();
      ctx.moveTo(x0, y);
      ctx.lineTo(x0+w, y);
      ctx.stroke();
    }
    ctx.restore();
  }

  function drawTicks(ctx, x0, y0, w, h, xMin, xMax, yMin, yMax, xLabel, yLabel){
    ctx.save();
    ctx.fillStyle = "rgba(183,196,214,0.92)";
    ctx.strokeStyle = "rgba(255,255,255,0.14)";
    ctx.lineWidth = 1;
    ctx.font = "12px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace";

    // ticks
    const nXTicks = 6;
    const nYTicks = 6;

    for(let i=0;i<=nXTicks;i++){
      const t = i/nXTicks;
      const x = x0 + t*w;
      ctx.beginPath();
      ctx.moveTo(x, y0+h);
      ctx.lineTo(x, y0+h+6);
      ctx.stroke();
      const val = xMin + t*(xMax-xMin);
      const label = (Math.abs(val/PI) < 1e6) ? `${fmt(val/PI,2)}π` : fmt(val,2);
      ctx.fillText(label, x-18, y0+h+18);
    }

    for(let j=0;j<=nYTicks;j++){
      const t = j/nYTicks;
      const y = y0 + (1-t)*h;
      ctx.beginPath();
      ctx.moveTo(x0-6, y);
      ctx.lineTo(x0, y);
      ctx.stroke();
      const val = yMin + t*(yMax-yMin);
      ctx.fillText(fmt(val,2), x0-44, y+4);
    }

    // axis labels
    ctx.font = "600 12px system-ui, -apple-system, Segoe UI, Roboto, Arial";
    ctx.fillText(xLabel, x0 + w - 70, y0 + h + 38);

    // y-label (rotated)
    ctx.save();
    ctx.translate(x0 - 58, y0 + 14);
    ctx.rotate(-Math.PI/2);
    ctx.fillText(yLabel, 0, 0);
    ctx.restore();

    ctx.restore();
  }

  function mapX(x, x0, w, xMin, xMax){ return x0 + (x - xMin) * w / (xMax - xMin); }
  function mapY(y, y0, h, yMin, yMax){ return y0 + (yMax - y) * h / (yMax - yMin); }

  // ---------- Model ----------
  // x(t) = sin t + F0 u(t-π) sin(t-π)
  function xOfT(t, F0){
    if (t < PI) return Math.sin(t);
    return Math.sin(t) + F0 * Math.sin(t - PI); // u=1
  }

  // For plotting (ignoring delta spike): derivative piecewise
  function vOfT(t, F0){
    if (t < PI) return Math.cos(t);
    return (F0 - 1) * Math.cos(t - PI); // equivalent to derivative of (F0-1)sin(t-π)
  }

  function energyOfT(t, F0){
    const x = xOfT(t, F0);
    const v = vOfT(t, F0);
    return 0.5*(v*v + x*x);
  }

  // ---------- Drawing: Setup Diagram ----------
  function drawSetup(){
    const canvas = $("setupCanvas");
    const {ctx, wCSS:w, hCSS:h} = setupHiDPI(canvas);

    ctx.clearRect(0,0,w,h);

    // margins
    const pad = 18;
    const midY = h*0.55;

    // wall
    ctx.strokeStyle = "rgba(255,255,255,0.25)";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(pad, pad);
    ctx.lineTo(pad, h-pad);
    ctx.stroke();

    // spring
    const springStart = pad;
    const springEndX = w*0.55;
    const coils = 10;
    const amp = 12;
    const y = midY;
    ctx.strokeStyle = "rgba(125,211,252,0.85)";
    ctx.lineWidth = 2;

    ctx.beginPath();
    ctx.moveTo(springStart, y);
    const L = springEndX - springStart;
    for(let i=1;i<=coils;i++){
      const x = springStart + (L*i)/coils;
      const yy = y + (i%2===0 ? -amp : amp);
      ctx.lineTo(x, yy);
    }
    ctx.lineTo(springEndX, y);
    ctx.stroke();

    // mass block
    const blockW = 90, blockH = 60;
    const blockX = springEndX;
    const blockY = y - blockH/2;
    ctx.fillStyle = "rgba(167,243,208,0.14)";
    ctx.strokeStyle = "rgba(167,243,208,0.55)";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.roundRect(blockX, blockY, blockW, blockH, 14);
    ctx.fill();
    ctx.stroke();

    // labels
    ctx.fillStyle = "rgba(232,238,247,0.92)";
    ctx.font = "600 13px system-ui, -apple-system, Segoe UI, Roboto, Arial";
    ctx.fillText("Wall", pad+8, pad+18);
    ctx.fillText("Spring (k)", springStart + 60, y - 40);
    ctx.fillText("Mass (m)", blockX + 12, blockY + 22);

    // coordinate axis
    const axisX0 = blockX + blockW + 20;
    ctx.strokeStyle = "rgba(255,255,255,0.20)";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(axisX0, y);
    ctx.lineTo(w - pad, y);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(w - pad, y);
    ctx.lineTo(w - pad - 10, y - 6);
    ctx.lineTo(w - pad - 10, y + 6);
    ctx.closePath();
    ctx.fillStyle = "rgba(255,255,255,0.20)";
    ctx.fill();

    ctx.fillStyle = "rgba(183,196,214,0.95)";
    ctx.font = "12px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace";
    ctx.fillText("x(t)", w - pad - 28, y - 10);

    // impulse arrow
    const arrowX = blockX + blockW/2;
    const arrowY0 = blockY - 10;
    const arrowY1 = blockY - 52;
    ctx.strokeStyle = "rgba(251,191,36,0.9)";
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(arrowX, arrowY0);
    ctx.lineTo(arrowX, arrowY1);
    ctx.stroke();
    ctx.fillStyle = "rgba(251,191,36,0.9)";
    ctx.beginPath();
    ctx.moveTo(arrowX, arrowY1);
    ctx.lineTo(arrowX-8, arrowY1+14);
    ctx.lineTo(arrowX+8, arrowY1+14);
    ctx.closePath();
    ctx.fill();

    ctx.fillStyle = "rgba(255,243,208,0.95)";
    ctx.font = "600 12px system-ui, -apple-system, Segoe UI, Roboto, Arial";
    ctx.fillText("Impulse: f(t)=F₀ δ(t−π)", blockX - 10, arrowY1 - 10);

    // small note
    ctx.fillStyle = "rgba(183,196,214,0.9)";
    ctx.font = "12px system-ui, -apple-system, Segoe UI, Roboto, Arial";
    ctx.fillText("Impulse causes instantaneous velocity jump:  x'(π⁺)−x'(π⁻)=F₀", pad, h - pad - 8);
  }

  // ---------- Drawing: Plots ----------
  function drawMainPlot(F0, Tmul){
    const canvas = $("mainCanvas");
    const {ctx, wCSS:w, hCSS:h} = setupHiDPI(canvas);

    const x0 = 54, y0 = 34, pw = w - 72, ph = h - 86;
    const tMax = Tmul * PI;
    const tMin = 0;

    // Determine y range based on amplitude
    // Before: amplitude 1. After: amplitude |F0-1|.
    const amp = Math.max(1, Math.abs(F0 - 1));
    const yMax = 1.25 * amp;
    const yMin = -yMax;

    drawPlotFrame(ctx, x0, y0, pw, ph, "Position x(t) vs time t");
    drawGrid(ctx, x0, y0, pw, ph, 10, 8);
    drawTicks(ctx, x0, y0, pw, ph, tMin, tMax, yMin, yMax, "t (multiples of π)", "x (arb. units)");

    // impulse marker at t=π
    const xPi = mapX(PI, x0, pw, tMin, tMax);
    ctx.save();
    ctx.setLineDash([6,6]);
    ctx.strokeStyle = "rgba(251,191,36,0.75)";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(xPi, y0);
    ctx.lineTo(xPi, y0+ph);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = "rgba(255,243,208,0.92)";
    ctx.font = "12px system-ui, -apple-system, Segoe UI, Roboto, Arial";
    ctx.fillText("t=π (impulse)", xPi+6, y0+16);
    ctx.restore();

    // plot x(t)
    const N = 1400;
    ctx.save();
    ctx.strokeStyle = "rgba(125,211,252,0.95)";
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    for(let i=0;i<=N;i++){
      const t = tMin + (tMax - tMin)*i/N;
      const x = xOfT(t, F0);
      const X = mapX(t, x0, pw, tMin, tMax);
      const Y = mapY(x, y0, ph, yMin, yMax);
      if(i===0) ctx.moveTo(X,Y);
      else ctx.lineTo(X,Y);
    }
    ctx.stroke();
    ctx.restore();

    // Legend
    ctx.save();
    ctx.fillStyle = "rgba(232,238,247,0.92)";
    ctx.font = "600 12px system-ui, -apple-system, Segoe UI, Roboto, Arial";
    ctx.fillText(`F₀ = ${fmt(F0,2)}   | post-impulse amplitude = |F₀−1| = ${fmt(Math.abs(F0-1),2)}`, x0, y0+ph+58);
    ctx.fillStyle = "rgba(183,196,214,0.92)";
    ctx.font = "12px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace";
    ctx.fillText("x(t)=sin t  (t<π);   x(t)=(F₀−1) sin(t−π)  (t≥π)", x0, y0+ph+78);
    ctx.restore();
  }

  function drawEnergyPlot(F0, Tmul){
    const canvas = $("energyCanvas");
    const {ctx, wCSS:w, hCSS:h} = setupHiDPI(canvas);

    const x0 = 54, y0 = 34, pw = w - 72, ph = h - 86;
    const tMax = Tmul * PI;
    const tMin = 0;

    // Energy: E=1/2 before, E=1/2 (F0-1)^2 after (ignoring delta at impulse).
    const E1 = 0.5;
    const E2 = 0.5 * (F0 - 1) * (F0 - 1);
    const eMax = Math.max(E1, E2) * 1.3 + 0.05;
    const eMin = 0;

    drawPlotFrame(ctx, x0, y0, pw, ph, "Energy E(t) vs time t");
    drawGrid(ctx, x0, y0, pw, ph, 10, 8);
    drawTicks(ctx, x0, y0, pw, ph, tMin, tMax, eMin, eMax, "t (multiples of π)", "E (arb.)");

    // impulse marker at t=π
    const xPi = mapX(PI, x0, pw, tMin, tMax);
    ctx.save();
    ctx.setLineDash([6,6]);
    ctx.strokeStyle = "rgba(251,191,36,0.75)";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(xPi, y0);
    ctx.lineTo(xPi, y0+ph);
    ctx.stroke();
    ctx.restore();

    // piecewise-constant energy lines
    const yE1 = mapY(E1, y0, ph, eMin, eMax);
    const yE2 = mapY(E2, y0, ph, eMin, eMax);
    const xStart = mapX(tMin, x0, pw, tMin, tMax);
    const xEnd = mapX(tMax, x0, pw, tMin, tMax);

    // before
    ctx.save();
    ctx.strokeStyle = "rgba(167,243,208,0.95)";
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(xStart, yE1);
    ctx.lineTo(Math.min(xPi, xEnd), yE1);
    ctx.stroke();

    // after
    ctx.strokeStyle = "rgba(167,243,208,0.55)";
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(Math.min(xPi, xEnd), yE2);
    ctx.lineTo(xEnd, yE2);
    ctx.stroke();
    ctx.restore();

    // Jump annotation
    ctx.save();
    ctx.fillStyle = "rgba(232,238,247,0.92)";
    ctx.font = "600 12px system-ui, -apple-system, Segoe UI, Roboto, Arial";
    const dE = E2 - E1;
    ctx.fillText(`E before = 1/2 = ${fmt(E1,2)}   |   E after = 1/2(F₀−1)² = ${fmt(E2,2)}   |   ΔE = ${fmt(dE,2)}`, x0, y0+ph+58);
    ctx.fillStyle = "rgba(183,196,214,0.92)";
    ctx.font = "12px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace";
    ctx.fillText("E(t)=½(x'^2+x^2) is constant between impulses; the impulse changes it instantly.", x0, y0+ph+78);
    ctx.restore();

    // draw a thin vertical segment indicating jump
    if (PI >= tMin && PI <= tMax){
      ctx.save();
      ctx.strokeStyle = "rgba(251,191,36,0.9)";
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(xPi, yE1);
      ctx.lineTo(xPi, yE2);
      ctx.stroke();
      ctx.restore();
    }
  }

  // ---------- UI wiring ----------
  function updateAll(){
    const F0 = parseFloat($("F0").value);
    const Tmul = parseFloat($("Tmul").value);
    $("F0Readout").textContent = fmt(F0,2);
    $("TmulReadout").textContent = `${fmt(Tmul,1)}π`;

    drawSetup();
    drawMainPlot(F0, Tmul);
    drawEnergyPlot(F0, Tmul);
  }

  // ---------- Copy buttons ----------
  function wireCopyButtons(){
    document.querySelectorAll("button[data-copy]").forEach(btn => {
      btn.addEventListener("click", async () => {
        const sel = btn.getAttribute("data-copy");
        const box = document.querySelector(sel);
        const text = box ? box.innerText.replace(/\n{3,}/g,"\n\n").trim() : "";
        try{
          await navigator.clipboard.writeText(text);
          const old = btn.textContent;
          btn.textContent = "Copied ✓";
          setTimeout(()=>btn.textContent=old, 900);
        }catch(e){
          const old = btn.textContent;
          btn.textContent = "Copy failed";
          setTimeout(()=>btn.textContent=old, 900);
        }
      });
    });
  }

  // Smooth scroll for TOC
  function wireTOC(){
    document.querySelectorAll('nav.toc a[href^="#"]').forEach(a=>{
      a.addEventListener("click", (ev)=>{
        ev.preventDefault();
        const id = a.getAttribute("href").slice(1);
        const target = document.getElementById(id);
        if(target) target.scrollIntoView({behavior:"smooth", block:"start"});
      });
    });
  }

  // resize observer
  let resizeTimer = null;
  function wireResize(){
    window.addEventListener("resize", () => {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(updateAll, 80);
    });
  }

  // init
  $("F0").addEventListener("input", updateAll);
  $("Tmul").addEventListener("input", updateAll);
  $("snapBtn").addEventListener("click", ()=>{
    $("F0").value = "1";
    updateAll();
  });

  // Polyfill for roundRect in older browsers
  if (!CanvasRenderingContext2D.prototype.roundRect){
    CanvasRenderingContext2D.prototype.roundRect = function(x,y,w,h,r){
      r = Math.min(r, w/2, h/2);
      this.beginPath();
      this.moveTo(x+r, y);
      this.arcTo(x+w, y, x+w, y+h, r);
      this.arcTo(x+w, y+h, x, y+h, r);
      this.arcTo(x, y+h, x, y, r);
      this.arcTo(x, y, x+w, y, r);
      this.closePath();
      return this;
    };
  }

  wireCopyButtons();
  wireTOC();
  wireResize();
  updateAll();
})();
</script>
</body>
</html>
