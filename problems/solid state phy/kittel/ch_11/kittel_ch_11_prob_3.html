<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Triplet Excited States: Magnetization, Susceptibility, and Isentropic Cooling</title>
  <style>
    :root{
      --bg:#0b0f17;
      --panel:#0f1626;
      --panel2:#0d1322;
      --text:#e7ecff;
      --muted:#b9c2e6;
      --faint:#7f8ab8;
      --accent:#7aa2ff;
      --accent2:#5ef0c5;
      --warn:#ffcc66;
      --danger:#ff6b8a;
      --border: rgba(255,255,255,0.10);
      --shadow: 0 18px 45px rgba(0,0,0,0.45);
      --radius: 18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--sans);
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 10% -10%, rgba(122,162,255,0.22), transparent 55%),
        radial-gradient(900px 600px at 110% 10%, rgba(94,240,197,0.14), transparent 55%),
        radial-gradient(900px 600px at 40% 120%, rgba(255,204,102,0.12), transparent 55%),
        linear-gradient(180deg, var(--bg), #070a11 70%, #05070c);
      line-height:1.55;
    }
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    header{
      padding:28px 18px 10px;
      position:relative;
    }
    .wrap{
      max-width:1180px;
      margin:0 auto;
      padding:0 14px 44px;
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:18px;
      align-items:start;
    }
    .hero{
      max-width:1180px;
      margin:0 auto;
      padding:0 14px 18px;
    }
    .titleCard{
      background: linear-gradient(180deg, rgba(15,22,38,0.92), rgba(13,19,34,0.88));
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:18px 18px 16px;
      overflow:hidden;
      position:relative;
    }
    .titleCard:before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(700px 220px at 20% 0%, rgba(122,162,255,0.22), transparent 60%),
                  radial-gradient(680px 240px at 90% 20%, rgba(94,240,197,0.16), transparent 65%);
      pointer-events:none;
      filter: blur(0.2px);
    }
    .titleInner{position:relative}
    h1{
      margin:0 0 6px;
      font-size: clamp(1.25rem, 2.2vw, 1.85rem);
      letter-spacing:0.2px;
    }
    .subtitle{
      margin:0;
      color:var(--muted);
      font-size:0.98rem;
      max-width: 78ch;
    }
    .badgeRow{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:12px;
    }
    .badge{
      font-size:0.78rem;
      color:var(--muted);
      border:1px solid var(--border);
      background: rgba(255,255,255,0.03);
      padding:6px 10px;
      border-radius: 999px;
      backdrop-filter: blur(6px);
    }

    nav.toc{
      position: sticky;
      top: 14px;
      background: linear-gradient(180deg, rgba(15,22,38,0.92), rgba(13,19,34,0.88));
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:14px 12px;
      max-height: calc(100vh - 24px);
      overflow:auto;
    }
    .toc h2{
      font-size:0.95rem;
      margin:2px 8px 10px;
      color:var(--muted);
      letter-spacing:0.3px;
      text-transform:uppercase;
    }
    .toc a{
      display:block;
      padding:8px 10px;
      border-radius: 12px;
      color:var(--text);
      border:1px solid transparent;
      margin:4px 2px;
      font-size:0.93rem;
    }
    .toc a:hover{
      background: rgba(122,162,255,0.10);
      border-color: rgba(122,162,255,0.22);
      text-decoration:none;
    }
    .toc .mini{
      color:var(--faint);
      font-size:0.82rem;
      margin:8px 10px 2px;
    }

    main{
      background: linear-gradient(180deg, rgba(15,22,38,0.86), rgba(13,19,34,0.82));
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
      overflow:hidden;
    }

    section{
      padding: 10px 2px 8px;
    }
    section + section{
      border-top:1px solid rgba(255,255,255,0.08);
      margin-top:10px;
      padding-top:18px;
    }
    h2{
      margin:0 0 10px;
      font-size:1.2rem;
      letter-spacing:0.2px;
    }
    h3{
      margin:14px 0 8px;
      font-size:1.03rem;
      color:var(--muted);
    }
    p{margin:8px 0; color:var(--text)}
    ul{margin:8px 0 8px 20px; color:var(--text)}
    li{margin:6px 0}
    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 980px){
      .wrap{grid-template-columns: 1fr}
      nav.toc{position:relative; top:auto; max-height:none}
      .grid2{grid-template-columns: 1fr}
    }

    .callout{
      border:1px solid var(--border);
      border-radius: 16px;
      padding:12px 12px 10px;
      background: rgba(255,255,255,0.03);
      margin:10px 0;
    }
    .callout strong{color:var(--muted)}
    .callout.assump{border-color: rgba(255,204,102,0.25); background: rgba(255,204,102,0.06)}
    .callout.keyeq{border-color: rgba(122,162,255,0.25); background: rgba(122,162,255,0.06)}
    .callout.mist{border-color: rgba(255,107,138,0.22); background: rgba(255,107,138,0.06)}
    .callout.math{border-color: rgba(94,240,197,0.22); background: rgba(94,240,197,0.06)}
    .pill{
      display:inline-block;
      padding:2px 8px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,0.03);
      color: var(--muted);
      font-size:0.78rem;
      vertical-align:middle;
      margin-left:6px;
    }
    code, pre{
      font-family: var(--mono);
      font-size:0.93rem;
    }
    pre{
      margin:10px 0;
      padding:12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.25);
      overflow:auto;
      position:relative;
    }
    .copyRow{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      margin:8px 0 2px;
    }
    .btn{
      appearance:none;
      border:1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.04);
      color: var(--text);
      padding:8px 10px;
      border-radius: 12px;
      cursor:pointer;
      font-size:0.9rem;
      transition: transform 120ms ease, background 120ms ease, border-color 120ms ease;
    }
    .btn:hover{background: rgba(122,162,255,0.10); border-color: rgba(122,162,255,0.22)}
    .btn:active{transform: translateY(1px)}
    .btn.small{padding:6px 8px; font-size:0.82rem}
    .status{
      color:var(--faint);
      font-size:0.86rem;
    }
    figure{
      margin: 12px 0;
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: 16px;
      background: rgba(255,255,255,0.02);
    }
    figcaption{color:var(--muted); font-size:0.9rem; margin-top:10px}
    canvas{
      width:100%;
      height:340px;
      display:block;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.22);
    }

    details{
      border:1px solid rgba(255,255,255,0.10);
      border-radius: 14px;
      padding:10px 12px;
      background: rgba(255,255,255,0.02);
      margin:10px 0;
    }
    summary{
      cursor:pointer;
      color:var(--muted);
      font-weight:600;
    }
    summary::-webkit-details-marker{display:none}
    summary:before{
      content:"▸";
      display:inline-block;
      margin-right:8px;
      color:var(--accent2);
      transition: transform 120ms ease;
    }
    details[open] summary:before{transform: rotate(90deg)}
    .backTop{
      margin-top:10px;
      display:inline-block;
      font-size:0.9rem;
      color:var(--muted);
    }
    .kpi{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin:10px 0 6px;
    }
    .kpi .card{
      border:1px solid rgba(255,255,255,0.10);
      border-radius: 16px;
      background: rgba(255,255,255,0.02);
      padding:10px 12px;
      min-height:86px;
    }
    .kpi .label{color:var(--faint); font-size:0.82rem}
    .kpi .value{margin-top:6px; font-weight:700}
    @media (max-width: 740px){
      .kpi{grid-template-columns: 1fr}
    }

    /* subtle micro-animations */
    @media (prefers-reduced-motion: no-preference){
      .titleCard, nav.toc, main{animation: floatIn 420ms ease both}
      @keyframes floatIn{
        from{opacity:0; transform: translateY(6px)}
        to{opacity:1; transform: translateY(0)}
      }
    }

    /* print-friendly */
    @media print{
      body{background:#fff; color:#000}
      nav.toc{display:none}
      .wrap{grid-template-columns:1fr}
      .titleCard, main, figure, pre, .callout, details{box-shadow:none; background:#fff; color:#000}
      a{color:#000; text-decoration:underline}
      pre{background:#f6f6f6}
      canvas{border:1px solid #999; background:#fff}
      section{break-inside: avoid-page}
      h2{break-after: avoid-page}
      .btn, .status{display:none}
    }
  </style>
</head>
<body>
<header id="top">
  <div class="hero">
    <div class="titleCard">
      <div class="titleInner">
        <h1>Triplet Excited States (S = 1): Magnetization, Susceptibility, and Isentropic Cooling</h1>
        <p class="subtitle">
          We model an organic molecule with a nonmagnetic singlet ground state (S = 0) and a magnetic triplet excited state (S = 1)
          lying <code>kB·Δ</code> above the ground. In a magnetic field, the triplet Zeeman-splits, producing a thermally activated paramagnetic response
          and a magnetocaloric (isentropic) cooling mechanism.
        </p>
        <div class="badgeRow">
          <span class="badge">Statistical Mechanics</span>
          <span class="badge">Zeeman Splitting</span>
          <span class="badge">Thermally Activated Paramagnetism</span>
          <span class="badge">Industrial Magnetometry &amp; Sensing</span>
        </div>
      </div>
    </div>
  </div>
</header>

<div class="wrap">
  <nav class="toc" aria-label="Table of contents">
    <h2>Contents</h2>
    <div class="mini">Jump to a section</div>
    <a href="#quick-summary">Quick Summary</a>
    <a href="#part0">PART 0 — Concept Primer</a>
    <a href="#part0b">PART 0B — Industry &amp; Applied Physics</a>
    <a href="#part1">PART 1 — Problem Analysis</a>
    <a href="#part2">PART 2 — Strategy &amp; Tips</a>
    <a href="#part3">PART 3 — Full Solution</a>
    <a href="#part4">PART 4 — Deeper Understanding</a>
    <a href="#part5">PART 5 — Optional Plot Guide</a>
    <a href="#footer">End / Back to top</a>
  </nav>

  <main>
    <article>
      <section id="quick-summary">
        <h2>Quick Summary</h2>
        <ul>
          <li><strong>What this is about:</strong> A molecule has a <em>nonmagnetic</em> singlet ground state and a <em>magnetic</em> triplet excited state at energy <code>kB·Δ</code> above it.</li>
          <li><strong>Key physics idea:</strong> The triplet’s <code>m = −1,0,+1</code> Zeeman sublevels split in a field; only the excited manifold contributes to magnetization.</li>
          <li><strong>Governing tool:</strong> Canonical ensemble with partition function <code>Z = Σ exp(−βE)</code>, <code>β = 1/(kB T)</code>.</li>
          <li><strong>Main result (symbolic):</strong> Magnetic moment per molecule
            <code>μ(B) = [2 g μB e^(−Δ/T) sinh(x)] / [1 + e^(−Δ/T)(1 + 2 cosh(x))]</code>,
            where <code>x = g μB B/(kB T)</code>.
          </li>
          <li><strong>Susceptibility:</strong>
            <code>χ = (∂μ/∂B)|B=0 = [2 (g μB)^2/(kB T)] · e^(−Δ/T)/(1 + 3 e^(−Δ/T))</code>.
          </li>
          <li><strong>High-T insight:</strong> For <code>T &gt;&gt; Δ</code>, <code>e^(−Δ/T) ≈ 1</code>, so
            <code>χ ≈ (g μB)^2/(2 kB T)</code>, approximately independent of <code>Δ</code> (Curie-like).
          </li>
          <li><strong>Cooling mechanism:</strong> Isentropic magnetization reduces spin entropy; to keep entropy constant, the system cools (magnetocaloric effect), especially when <code>kB T</code> is comparable to the level gaps.</li>
          <li><strong>Industrial relevance:</strong> Thermally activated paramagnetism appears in organic semiconductors, luminescent triplet states, low-field magnetometry calibration, and cryogenic cooling concepts.</li>
        </ul>

        <div class="kpi" role="group" aria-label="Key takeaways">
          <div class="card">
            <div class="label">Thermal activation</div>
            <div class="value">Triplet population ∝ e<sup>−Δ/T</sup></div>
          </div>
          <div class="card">
            <div class="label">Field scale</div>
            <div class="value">x = g μB B/(kB T)</div>
          </div>
          <div class="card">
            <div class="label">High-T limit</div>
            <div class="value">χ ≈ (g μB)²/(2 kB T)</div>
          </div>
        </div>
      </section>

      <section id="part0">
        <h2>PART 0 — Concept Primer (Theory Before Solving)</h2>

        <h3>Core definitions (symbols + SI units)</h3>
        <ul>
          <li><code>kB</code>: Boltzmann constant (J/K).</li>
          <li><code>T</code>: absolute temperature (K).</li>
          <li><code>β = 1/(kB T)</code>: inverse thermal energy (1/J).</li>
          <li><code>Δ</code>: excited-state gap in Kelvin units such that the energy offset is <code>Egap = kB·Δ</code> (J).</li>
          <li><code>S</code>: spin quantum number (dimensionless). Here: ground <code>S=0</code>, excited <code>S=1</code>.</li>
          <li><code>m</code>: magnetic quantum number (dimensionless). For <code>S=1</code>, <code>m ∈ {−1,0,+1}</code>.</li>
          <li><code>μB</code>: Bohr magneton (J/T).</li>
          <li><code>g</code>: Landé g-factor (dimensionless; often ~2 for organic radicals/triplets, but material-dependent).</li>
          <li><code>B</code>: magnetic flux density (“magnetic field”) (T).</li>
          <li><code>μ(B)</code>: thermal average magnetic moment per molecule along <code>B</code> (J/T = A·m²).</li>
          <li><code>χ</code>: susceptibility per molecule (A·m² per T = J/T²). (Multiply by number density for volume susceptibility.)</li>
        </ul>

        <h3>Physical meaning of key quantities</h3>
        <ul>
          <li><strong>Partition function <code>Z</code></strong> counts thermally accessible microstates, weighted by Boltzmann factors.</li>
          <li><strong>Thermally activated magnetism:</strong> the ground state is nonmagnetic, so magnetization comes only from the excited triplet, whose population is suppressed by <code>e^(−Δ/T)</code>.</li>
          <li><strong>Zeeman splitting:</strong> a field shifts energies by <code>−μ·B</code>, favoring alignment, lowering entropy.</li>
        </ul>

        <h3>Key laws/principles + validity conditions</h3>
        <div class="callout assump">
          <strong>Assumptions (regime of validity)</strong>
          <ul>
            <li>Thermal equilibrium (canonical ensemble) with well-defined temperature <code>T</code>.</li>
            <li>Non-interacting molecules (no cooperative magnetism; dilute paramagnet).</li>
            <li>Triplet behaves as an effective spin <code>S=1</code> with Zeeman energy <code>−g μB m B</code>.</li>
            <li>Neglects zero-field splitting, anisotropic g-tensor, and spin-orbit fine structure (common in real organics; discussed later as non-idealities).</li>
            <li>Field is uniform; we track only the component along <code>B</code> (choose <code>z</code>-axis along the field).</li>
          </ul>
        </div>

        <h3>Common models/approximations and why they’re used</h3>
        <ul>
          <li><strong>Canonical ensemble:</strong> simplest way to compute magnetization as a thermal average.</li>
          <li><strong>Low-field expansion:</strong> for susceptibility, expand in small <code>x = g μB B/(kB T)</code>.</li>
          <li><strong>High-temperature expansion:</strong> for <code>T &gt;&gt; Δ</code>, use <code>e^(−Δ/T) ≈ 1 − Δ/T + …</code> to show weak dependence on <code>Δ</code>.</li>
        </ul>

        <h3>Mini intuition examples (minimal algebra)</h3>
        <ul>
          <li><strong>If <code>T → 0</code>:</strong> excited triplet is essentially unpopulated ⇒ <code>μ ≈ 0</code> even in a field.</li>
          <li><strong>If <code>T</code> is large:</strong> triplet is populated along with singlet ⇒ behaves like an <code>S=1</code> paramagnet but diluted by the presence of the singlet state.</li>
          <li><strong>If <code>B</code> increases:</strong> the <code>m=+1</code> sublevel lowers (for <code>g&gt;0</code>) ⇒ magnetization increases and entropy decreases.</li>
        </ul>

        <h3>What to watch for (pitfalls)</h3>
        <ul>
          <li><strong>Sign conventions:</strong> using <code>E = −μ·B</code> consistently; magnetization aligns with lower energy.</li>
          <li><strong>Units:</strong> the problem’s <code>Δ</code> is in Kelvin-like units because the energy gap is <code>kB Δ</code>.</li>
          <li><strong>Degeneracy:</strong> triplet has 3 states; ground has 1. This matters in <code>Z</code> and in high-T limits.</li>
          <li><strong>Real molecules:</strong> zero-field splitting can break the simple <code>m</code> degeneracy even at <code>B=0</code>.</li>
        </ul>

        <div class="callout math">
          <strong>Math Insight</strong> <span class="pill">Thermodynamic generating function</span>
          <p>
            The partition function <code>Z(B,T)</code> is a <em>generating function</em>:
            derivatives of <code>ln Z</code> produce observables. In particular,
            magnetization is the field-derivative of the free energy <code>F = −kB T ln Z</code>:
          </p>
          <pre><code>F(B,T) = −kB T ln Z(B,T)
μ(B,T) = −∂F/∂B = kB T · ∂(ln Z)/∂B</code></pre>
          <p>
            Mathematically, this is the same “log-partition” structure used in probability theory (cumulant generating functions) and in optimization/industrial inference.
          </p>
        </div>
      </section>

      <section id="part0b">
        <h2>PART 0B — Industry &amp; Applied Physics Perspective</h2>

        <h3>Where this appears in industry (examples)</h3>
        <ul>
          <li><strong>Organic electronics &amp; OLEDs:</strong> triplet excitons dominate emission/energy-loss channels; magnetic fields can influence intersystem crossing and triplet populations.</li>
          <li><strong>Magnetic sensing &amp; calibration materials:</strong> thermally activated paramagnetism provides temperature-dependent magnetic signatures useful for calibration or diagnostics.</li>
          <li><strong>Cryogenic engineering concepts:</strong> magnetocaloric cooling (including adiabatic demagnetization) inspires solid-state cooling approaches; activated-level systems can show strong entropy changes near level crossings/splittings.</li>
          <li><strong>Quality control in materials:</strong> magnetometry (e.g., SQUID/VSM/EPR) can detect trace paramagnetic states, triplet yields, and defects that alter <code>Δ</code> or <code>g</code>.</li>
        </ul>

        <h3>Why engineers care</h3>
        <ul>
          <li><strong>Performance:</strong> triplet populations affect luminescence efficiency and device lifetime (triplet–triplet annihilation, quenching).</li>
          <li><strong>Reliability:</strong> temperature dependence (<code>e^(−Δ/T)</code>) can cause strong drift; knowing <code>χ(T)</code> helps design compensation and robust operating windows.</li>
          <li><strong>Cost/complexity:</strong> simple analytic models guide quick estimates before expensive characterization campaigns.</li>
        </ul>

        <h3>Typical measurement / validation methods</h3>
        <ul>
          <li><strong>Magnetometry:</strong> VSM/SQUID to measure <code>M(B,T)</code> and extract <code>χ(T)</code>.</li>
          <li><strong>EPR/ESR:</strong> directly probes <code>g</code> factors, zero-field splitting, and triplet signatures.</li>
          <li><strong>Optical spectroscopy:</strong> phosphorescence lifetimes and intersystem crossing rates relate to triplet formation and energy gaps.</li>
        </ul>

        <h3>Design trade-offs &amp; constraints</h3>
        <ul>
          <li><strong>Non-idealities:</strong> anisotropic <code>g</code>-tensor, zero-field splitting, vibronic structure; these modify the simple three-level picture.</li>
          <li><strong>Thermal management:</strong> device self-heating changes <code>T</code>, which exponentially changes triplet occupation.</li>
          <li><strong>Manufacturability:</strong> microstructure and impurities can introduce additional paramagnetic centers that mask the clean “singlet + triplet” response.</li>
        </ul>

        <details>
          <summary>From lab to product: adapting the ideal model</summary>
          <p>
            In real organic solids, the triplet often has <em>zero-field splitting</em> (even at <code>B=0</code>) due to anisotropy and dipolar interactions.
            Engineers commonly fit magnetometry/EPR data with an “effective” model:
            replace <code>E_m = kBΔ − g μB m B</code> by <code>E_m = kBΔ + D f(m) − g(θ) μB m B</code>,
            then average over orientations and distributions of <code>Δ, D, g</code>.
            The clean derivation below is still the correct baseline and is invaluable for sanity checks and scaling.
          </p>
        </details>
      </section>

      <section id="part1">
        <h2>PART 1 — Problem Analysis (No Solving Yet)</h2>

        <h3>Problem restatement</h3>
        <p>
          A molecule has a singlet ground state (<code>S=0</code>) and a triplet excited state (<code>S=1</code>) at energy <code>kBΔ</code> above the ground.
          (a) Find the thermal average magnetic moment <code>μ(B)</code> in a magnetic field <code>B</code>.
          (b) Show that for <code>T &gt;&gt; Δ</code), the susceptibility is approximately independent of <code>Δ</code>.
          (c) Using an energy-level diagram versus field and a sketch of entropy versus field, explain how isentropic magnetization could cool the system.
        </p>

        <div class="grid2">
          <div class="callout">
            <strong>Given</strong>
            <ul>
              <li>Ground: singlet <code>S=0</code>, energy set to <code>E=0</code>.</li>
              <li>Excited: triplet <code>S=1</code>, baseline energy <code>E = kBΔ</code>.</li>
              <li>Magnetic field <code>B</code> (take along <code>z</code>).</li>
              <li>Thermal equilibrium at temperature <code>T</code>.</li>
            </ul>
          </div>
          <div class="callout">
            <strong>Unknowns / what to find</strong>
            <ul>
              <li>(a) <code>μ(B,T)</code> per molecule.</li>
              <li>(b) <code>χ(T)</code> and its high-T dependence on <code>Δ</code>.</li>
              <li>(c) Qualitative magnetocaloric explanation via <code>S(B,T)</code>.</li>
            </ul>
          </div>
        </div>

        <h3>Relevant principles and why they apply</h3>
        <ul>
          <li><strong>Canonical ensemble:</strong> fixed <code>T</code>, weak coupling to a bath; compute averages by <code>⟨A⟩ = Σ A_i e^(−βE_i)/Z</code>.</li>
          <li><strong>Zeeman energy:</strong> for spin in a field, <code>H_Z = − g μB B S_z/ħ</code> ⇒ energies shift linearly with <code>m</code>.</li>
          <li><strong>Susceptibility:</strong> linear response at small <code>B</code>, <code>χ = (∂μ/∂B)|_{B=0}</code>.</li>
          <li><strong>Entropy and magnetocaloric effect:</strong> <code>S = −(∂F/∂T)_B</code>; isentropic paths link <code>T</code> and <code>B</code>.</li>
        </ul>

        <div class="callout assump">
          <strong>Model (mathematical physics statement)</strong>
          <ul>
            <li>State space: discrete energy levels indexed by <code>i</code> (no spatial coordinate needed).</li>
            <li>External control parameters: <code>(B,T)</code> in domains <code>B ≥ 0</code>, <code>T &gt; 0</code>.</li>
            <li>Hamiltonian: <code>H(B) = H0 + HZ(B)</code>, with <code>H0</code> giving singlet and triplet offset, <code>HZ</code> giving Zeeman splitting.</li>
            <li>Boundary/initial conditions: not applicable (equilibrium problem, not a PDE/IVP).</li>
          </ul>
        </div>

        <h3>Possible approaches (compare)</h3>
        <ul>
          <li><strong>Approach A — Partition function:</strong> write all energies, compute <code>Z</code>, then compute <code>μ = −∂F/∂B</code>. <em>Pros:</em> systematic, extends to entropy for part (c). <em>Cons:</em> algebraic but straightforward.</li>
          <li><strong>Approach B — Direct thermal average of <code>μ_z</code>:</strong> compute <code>μ = Σ μ_m p_m</code>. <em>Pros:</em> intuitive. <em>Cons:</em> must carefully include the singlet in normalization.</li>
          <li><strong>Approach C — Linear response (susceptibility) only:</strong> expand small <code>B</code> from the start. <em>Pros:</em> fastest for (b). <em>Cons:</em> doesn’t directly give full <code>μ(B)</code> for (a).</li>
        </ul>
        <p><strong>Choice:</strong> Use <strong>Approach A</strong> (partition function + free energy) because it cleanly produces <code>μ(B)</code>, <code>χ</code>, and sets up the entropy argument for isentropic cooling.</p>
      </section>

      <section id="part2">
        <h2>PART 2 — Strategy &amp; Tips (Roadmap Only)</h2>

        <ol>
          <li><strong>Set the energy zero</strong> at the singlet ground state: <code>E_g = 0</code>. (Simplifies <code>Z</code>.)</li>
          <li><strong>Write Zeeman-split triplet energies</strong> for <code>m = −1,0,+1</code> using <code>H_Z</code>. (Defines how field enters.)</li>
          <li><strong>Build the partition function</strong> <code>Z = 1 + Σ_m exp(−β E_m)</code>. (Include singlet!)</li>
          <li><strong>Compute magnetization</strong> using <code>μ = −∂F/∂B</code> with <code>F = −kB T ln Z</code>. (No “manual” probabilities needed.)</li>
          <li><strong>Extract susceptibility</strong> by expanding for small <code>B</code> (small <code>x</code>) and taking <code>(∂μ/∂B)|_{0}</code>.</li>
          <li><strong>High-T asymptotics</strong>: expand <code>e^(−Δ/T)</code> for <code>T &gt;&gt; Δ</code> to show <code>Δ</code>-independence at leading order.</li>
          <li><strong>Entropy argument</strong>: use <code>S(B,T) = −(∂F/∂T)_B</code> qualitatively (or partially analytically) to show <code>S</code> decreases with <code>B</code> at fixed <code>T</code>, hence isentropic magnetization forces <code>T</code> down.</li>
        </ol>

        <div class="callout mist">
          <strong>Common mistakes</strong>
          <ul>
            <li>Forgetting the <strong>singlet ground state</strong> contribution <code>+1</code> in <code>Z</code>.</li>
            <li>Mixing units: <code>Δ</code> is in K-like units because the gap is <code>kBΔ</code>.</li>
            <li>Getting the sign wrong in Zeeman energy (<code>E = −μ·B</code>).</li>
            <li>Taking “<code>T &gt;&gt; Δ</code>” to mean “triplet dominates”; actually singlet still matters through normalization.</li>
          </ul>
        </div>
      </section>

      <section id="part3">
        <h2>PART 3 — Full Solution (Detailed + Teaching)</h2>

        <h3>Qualitative expectation before calculating</h3>
        <ul>
          <li>At low <code>T</code>, almost all molecules are in the singlet ground state ⇒ magnetization should be tiny.</li>
          <li>At high <code>T</code>, the triplet is populated and Zeeman splitting biases <code>m=+1</code> over <code>m=−1</code> ⇒ paramagnetic response.</li>
          <li>At small fields, <code>μ</code> should be linear in <code>B</code> (defining <code>χ</code>).</li>
        </ul>

        <h3>Step 1 — Hamiltonian and energy levels (mathematical model)</h3>
        <p>
          Choose the magnetic field direction as the <code>z</code>-axis. The Zeeman term for a spin is
        </p>
        <div class="callout keyeq">
          <strong>Key equation: Zeeman Hamiltonian</strong>
          <pre><code>H_Z(B) = − g μB B (S_z/ħ)</code></pre>
        </div>
        <p>
          For an eigenstate with spin quantum number <code>S=1</code> and magnetic quantum number <code>m</code>,
          <code>S_z |S,m⟩ = m ħ |S,m⟩</code>. Therefore the Zeeman energy shift is
        </p>
        <pre><code>E_Z(m) = ⟨S,m|H_Z|S,m⟩ = − g μB B m,   where m ∈ {−1,0,+1}.</code></pre>
        <p>
          The total energies are:
        </p>
        <pre><code>Ground singlet (S=0):   E_g = 0  (no Zeeman splitting)
Triplet excited (S=1):  E_m(B) = kB Δ − g μB B m,   m = −1,0,+1</code></pre>
        <p>
          <strong>Why this step is valid:</strong> the Hamiltonian is linear in <code>B</code>, and <code>S_z</code> has discrete eigenvalues.
          We assume no additional splitting (e.g., zero-field splitting) and treat <code>g</code> as isotropic.
        </p>

        <h3>Step 2 — Partition function <code>Z(B,T)</code></h3>
        <p>
          The canonical partition function sums Boltzmann weights over all accessible states:
        </p>
        <pre><code>Z(B,T) = Σ_i exp(−β E_i),   β = 1/(kB T).</code></pre>
        <p>
          Here there is one ground state plus three triplet states:
        </p>
        <pre><code>Z(B,T) = exp(−β·0) + Σ_{m=−1}^1 exp(−β [kBΔ − g μB B m])
       = 1 + e^{−β kBΔ} Σ_{m=−1}^1 exp(β g μB B m).</code></pre>
        <p>
          Define the dimensionless field parameter
        </p>
        <pre><code>x := β g μB B = (g μB B)/(kB T).</code></pre>
        <p>
          Then the triplet sum is
        </p>
        <pre><code>Σ_{m=−1}^1 e^{x m} = e^{−x} + 1 + e^{x} = 1 + 2 cosh(x).</code></pre>
        <p>
          Also note <code>β kB Δ = Δ/T</code> because the gap energy is <code>kBΔ</code>. Hence
        </p>
        <div class="callout keyeq">
          <strong>Partition function</strong>
          <div class="copyRow">
            <button class="btn small" data-copy="#eqZ">Copy equation (plain text)</button>
            <span class="status" id="stZ"></span>
          </div>
          <pre id="eqZ"><code>Z(B,T) = 1 + e^(−Δ/T) [1 + 2 cosh(x)],   x = (g μB B)/(kB T).</code></pre>
        </div>

        <h3>Step 3 — Magnetic moment from free energy</h3>
        <p>
          The Helmholtz free energy is <code>F = −kB T ln Z</code>. The magnetic moment along the field is
        </p>
        <pre><code>μ(B,T) = − (∂F/∂B)_T = kB T · (∂ ln Z/∂B)_T.</code></pre>
        <p>
          Compute the derivative carefully. Since <code>Z</code> depends on <code>B</code> only through <code>x</code>,
        </p>
        <pre><code>∂Z/∂B = (∂Z/∂x)(∂x/∂B),   with ∂x/∂B = g μB/(kB T).</code></pre>
        <p>
          From <code>Z = 1 + e^(−Δ/T)[1 + 2 cosh(x)]</code>,
        </p>
        <pre><code>∂Z/∂x = e^(−Δ/T) · [2 sinh(x)].</code></pre>
        <p>
          Therefore
        </p>
        <pre><code>∂Z/∂B = e^(−Δ/T) · 2 sinh(x) · (g μB/(kB T)).</code></pre>
        <p>
          Insert into <code>μ = kB T (1/Z)(∂Z/∂B)</code>:
        </p>
        <pre><code>μ(B,T) = kB T · (1/Z) · e^(−Δ/T) · 2 sinh(x) · (g μB/(kB T))
       = (2 g μB e^(−Δ/T) sinh(x)) / Z.</code></pre>

        <div class="callout keyeq">
          <strong>(a) Final magnetic moment per molecule</strong>
          <div class="copyRow">
            <button class="btn small" data-copy="#eqMu">Copy equation (plain text)</button>
            <span class="status" id="stMu"></span>
          </div>
          <pre id="eqMu"><code>μ(B,T) =
  [2 g μB e^(−Δ/T) sinh(x)] / [1 + e^(−Δ/T)(1 + 2 cosh(x))],
where x = (g μB B)/(kB T).</code></pre>
        </div>

        <h3>Sanity checks for (a)</h3>
        <div class="grid2">
          <div class="callout">
            <strong>Units</strong>
            <ul>
              <li><code>sinh(x)</code>, <code>cosh(x)</code>, and <code>e^(−Δ/T)</code> are dimensionless.</li>
              <li>Prefactor <code>g μB</code> has units J/T = A·m², matching a magnetic moment.</li>
            </ul>
          </div>
          <div class="callout">
            <strong>Limiting cases</strong>
            <ul>
              <li><code>B → 0</code>: <code>sinh(x) ~ x</code> ⇒ <code>μ ~ const·B</code> (linear response).</li>
              <li><code>T → 0</code>: <code>e^(−Δ/T) → 0</code> ⇒ <code>μ → 0</code> (triplet unpopulated).</li>
              <li>Large <code>B</code> at fixed <code>T</code>: alignment grows; saturation is limited because the singlet remains in the partition sum unless the field drives a crossing.</li>
            </ul>
          </div>
        </div>

        <h3>Step 4 — Susceptibility (linear response) and high-T behavior</h3>
        <p>
          Susceptibility per molecule is
        </p>
        <pre><code>χ(T) = (∂μ/∂B)_{B=0}.</code></pre>

        <p>
          For small <code>B</code>, <code>x = (g μB B)/(kB T)</code> is small. Use Taylor expansions:
        </p>
        <pre><code>sinh(x) = x + O(x^3)
cosh(x) = 1 + x^2/2 + O(x^4).</code></pre>

        <p>
          First evaluate <code>Z</code> near <code>B=0</code>:
        </p>
        <pre><code>Z(B,T) = 1 + e^(−Δ/T)[1 + 2 cosh(x)]
       ≈ 1 + e^(−Δ/T)[1 + 2(1 + x^2/2)]
       = 1 + e^(−Δ/T)(3 + x^2)
       = Z0 + e^(−Δ/T) x^2,  where Z0 = 1 + 3 e^(−Δ/T).</code></pre>

        <p>
          The magnetization numerator near <code>x=0</code> is
        </p>
        <pre><code>2 g μB e^(−Δ/T) sinh(x) ≈ 2 g μB e^(−Δ/T) x.</code></pre>

        <p>
          Keeping only linear terms in <code>x</code> (since susceptibility is the linear coefficient),
          we may replace <code>Z</code> by <code>Z0</code> in the denominator (the <code>x^2</code> correction would only affect higher orders).
          Thus
        </p>
        <pre><code>μ(B,T) ≈ [2 g μB e^(−Δ/T) x] / [1 + 3 e^(−Δ/T)].</code></pre>

        <p>
          Substitute <code>x = (g μB B)/(kB T)</code>:
        </p>
        <pre><code>μ(B,T) ≈ [2 (g μB)^2 /(kB T)] · [ e^(−Δ/T) / (1 + 3 e^(−Δ/T)) ] · B.</code></pre>

        <div class="callout keyeq">
          <strong>(b) Susceptibility per molecule</strong>
          <div class="copyRow">
            <button class="btn small" data-copy="#eqChi">Copy equation (plain text)</button>
            <span class="status" id="stChi"></span>
          </div>
          <pre id="eqChi"><code>χ(T) = (∂μ/∂B)_{B=0}
     = [2 (g μB)^2 /(kB T)] · [ e^(−Δ/T) / (1 + 3 e^(−Δ/T)) ].</code></pre>
        </div>

        <h3>High-T asymptotics: show weak dependence on Δ</h3>
        <p>
          For <code>T &gt;&gt; Δ</code>, let <code>y = Δ/T</code>, so <code>y ≪ 1</code>. Then
        </p>
        <pre><code>e^(−Δ/T) = e^(−y) = 1 − y + y^2/2 + O(y^3).</code></pre>
        <p>
          Insert into the factor
        </p>
        <pre><code>R := e^(−y) / (1 + 3 e^(−y)).</code></pre>
        <p>
          Expand denominator:
        </p>
        <pre><code>1 + 3 e^(−y) = 1 + 3(1 − y + y^2/2 + ...)
             = 4 − 3y + (3/2)y^2 + ...</code></pre>
        <p>
          Then
        </p>
        <pre><code>R = (1 − y + y^2/2 + ...) / (4 − 3y + ...)
  = (1/4) · (1 − y + ...) · 1/(1 − (3/4)y + ...)
  ≈ (1/4) · (1 − y) · (1 + (3/4)y)   [since 1/(1−a)≈1+a for small a]
  ≈ (1/4) · (1 − y + (3/4)y + O(y^2))
  ≈ (1/4) · (1 − y/4 + O(y^2)).</code></pre>
        <p>
          Therefore, to leading order,
        </p>
        <pre><code>χ(T) ≈ [2 (g μB)^2 /(kB T)] · (1/4)
     = (g μB)^2 /(2 kB T),   for T >> Δ,</code></pre>
        <p>
          which is <strong>independent of Δ at leading order</strong>, with corrections of relative size <code>O(Δ/T)</code>.
        </p>

        <div class="callout assump">
          <strong>Dimensional check (b)</strong>
          <p>
            <code>(g μB)^2/(kB T)</code> has units (J/T)² / J = J/T², matching susceptibility per molecule. The remaining factor is dimensionless.
          </p>
        </div>

        <h3>Step 5 — (c) Isentropic magnetization cooling (qualitative but anchored in thermodynamics)</h3>
        <p>
          The entropy is obtained from free energy:
        </p>
        <pre><code>F(B,T) = −kB T ln Z(B,T)
S(B,T) = −(∂F/∂T)_B = kB ln Z + kB T (∂ ln Z/∂T)_B.</code></pre>
        <p>
          While the full expression is algebraic, the key qualitative fact is:
        </p>
        <div class="callout keyeq">
          <strong>Key idea</strong>
          <p>
            At fixed temperature, increasing <code>B</code> lifts degeneracy and biases the population toward one Zeeman sublevel, reducing the “spin disorder.”
            That typically <strong>reduces entropy</strong>: <code>S(B,T)</code> decreases as <code>B</code> increases (over a broad range where no level crossing produces extra degeneracy).
          </p>
        </div>

        <p>
          In an <strong>isentropic</strong> (adiabatic, reversible) magnetization, we follow a path of constant entropy:
        </p>
        <pre><code>S(B,T) = constant.</code></pre>
        <p>
          If <code>S</code> decreases with increasing <code>B</code> at fixed <code>T</code>, then to keep <code>S</code> constant while increasing <code>B</code>, the system must compensate by <strong>decreasing T</strong> (because lowering <code>T</code> also reduces thermal mixing and can restore the same entropy level).
          Hence, the temperature drops: <strong>cooling by isentropic magnetization</strong>.
        </p>

        <details>
          <summary>Energy-level vs field: what the “diagram” looks like</summary>
          <p>
            Sketch energy <code>E</code> on the vertical axis and field <code>B</code> on the horizontal axis.
            The singlet is a horizontal line at <code>E=0</code>.
            The triplet consists of three lines starting at <code>E=kBΔ</code> at <code>B=0</code>:
          </p>
          <ul>
            <li><code>m=+1</code>: <code>E = kBΔ − g μB B</code> (slopes downward with <code>B</code>).</li>
            <li><code>m=0</code>: <code>E = kBΔ</code> (flat line).</li>
            <li><code>m=−1</code>: <code>E = kBΔ + g μB B</code> (slopes upward).</li>
          </ul>
          <p>
            As <code>B</code> increases, the <code>m=+1</code> state becomes relatively more favorable, concentrating probability into fewer microstates, reducing entropy.
            If <code>B</code> were so large that <code>kBΔ − g μB B</code> approaches 0 (a crossing-like condition), the population and entropy can change rapidly—often where magnetocaloric effects become strongest.
          </p>
        </details>

        <details>
          <summary>Entropy vs field: the rough sketch and the cooling logic</summary>
          <p>
            At a fixed <code>T</code>, draw <code>S</code> versus <code>B</code>. Near <code>B=0</code> there is higher degeneracy/more balanced populations among the triplet sublevels, giving higher entropy. As <code>B</code> increases, populations become polarized and <code>S</code> decreases.
          </p>
          <p>
            For an isentropic process (constant <code>S</code>), you draw a horizontal line at the initial entropy and move to higher <code>B</code>. Because the constant-<code>T</code> curves drop with <code>B</code>, you must go to a lower <code>T</code> curve to stay at the same <code>S</code>.
            That vertical shift is the cooling.
          </p>
        </details>

        <div class="callout keyeq">
          <strong>Final Answer (all parts, plain text)</strong>
          <div class="copyRow">
            <button class="btn" data-copy="#finalAnswer">Copy final answer (plain text)</button>
            <span class="status" id="stFinal"></span>
          </div>
          <pre id="finalAnswer"><code>(a) With energies E_g=0 and E_m(B)=kBΔ − gμB B m (m=−1,0,+1),
    Z(B,T)=1+e^(−Δ/T)[1+2cosh(x)],  x=(gμB B)/(kB T),
    μ(B,T)=[2 gμB e^(−Δ/T) sinh(x)] / [1+e^(−Δ/T)(1+2cosh(x))].

(b) χ(T)=(∂μ/∂B)_{B=0} = [2(gμB)^2/(kB T)] · e^(−Δ/T)/(1+3e^(−Δ/T)).
    For T>>Δ, e^(−Δ/T)≈1 so χ≈(gμB)^2/(2kB T) (Δ-independent to leading order; corrections O(Δ/T)).

(c) In field, the triplet splits: E= kBΔ − gμB B (m=+1), kBΔ (m=0), kBΔ + gμB B (m=−1) while the singlet stays at 0.
    Increasing B at fixed T biases population into fewer Zeeman states, lowering entropy S(B,T).
    For an isentropic (adiabatic, reversible) magnetization with S constant, this entropy reduction must be compensated by lowering T, hence cooling (magnetocaloric effect), often strongest when kB T is comparable to the relevant level separations.</code></pre>
        </div>

        <a class="backTop" href="#top">↑ Back to top</a>
      </section>

      <section id="part4">
        <h2>PART 4 — Deeper Understanding (Theory Around the Result)</h2>

        <h3>Re-interpret the magnetization formula</h3>
        <p>
          The result
          <code>μ(B,T) ∝ e^(−Δ/T)</code> times a Zeeman polarization factor tells a clear story:
        </p>
        <ul>
          <li><strong><code>e^(−Δ/T)</code></strong> controls <em>how many molecules are even in the magnetic manifold</em> (thermal activation).</li>
          <li><strong><code>sinh(x)</code>/<code>cosh(x)</code></strong> encode <em>field-induced imbalance</em> between <code>m=+1</code> and <code>m=−1</code>.</li>
          <li><strong>The denominator</strong> includes the ever-present singlet weight “1” plus the triplet weight, meaning the magnetic response is “diluted” by the nonmagnetic ground state.</li>
        </ul>

        <h3>Parameter dependence (qualitative + quantitative cues)</h3>
        <ul>
          <li><strong>Increase <code>Δ</code></strong> at fixed <code>T</code>: suppresses triplet population ⇒ smaller <code>μ</code> and <code>χ</code> exponentially.</li>
          <li><strong>Increase <code>T</code></strong> at fixed <code>Δ</code>:
            <ul>
              <li>Activation increases (larger triplet fraction), but Curie factor <code>1/T</code> decreases.</li>
              <li>This competition yields a broad maximum in certain normalized responses (classic Schottky-like behavior).</li>
            </ul>
          </li>
          <li><strong>Increase <code>B</code></strong> at fixed <code>T</code>: increases <code>x</code> and pushes polarization; response becomes nonlinear when <code>x ≳ 1</code>, i.e.,
            <code>g μB B ≳ kB T</code>.
          </li>
        </ul>

        <h3>Alternative derivation idea (brief but meaningful)</h3>
        <p>
          Instead of differentiating <code>F</code>, compute the thermal average of <code>μ_z</code> directly:
          the moment for a triplet state is <code>μ_z(m) = g μB m</code>, and the probability of each level is
          <code>p_m = e^(−βE_m)/Z</code> (with the singlet included in <code>Z</code> but contributing zero moment).
          Then
          <code>μ = Σ_m (g μB m) p_m</code>.
          This yields the same <code>2 sinh(x)</code> structure immediately because the <code>m=0</code> state drops out.
        </p>

        <h3>Concept check (self-test Q&amp;A)</h3>
        <ul>
          <li><strong>Q:</strong> Why does <code>μ → 0</code> as <code>T → 0</code> even if <code>B</code> is nonzero?<br/>
              <strong>A:</strong> The triplet manifold lies at energy <code>kBΔ</code>; its population vanishes as <code>e^(−Δ/T)</code>.</li>
          <li><strong>Q:</strong> Why does <code>χ</code> become approximately independent of <code>Δ</code> at high temperature?<br/>
              <strong>A:</strong> Because <code>e^(−Δ/T) ≈ 1</code>, so the singlet+triplet partition weights approach fixed ratios set by degeneracy (1 vs 3), removing explicit <code>Δ</code> dependence at leading order.</li>
          <li><strong>Q:</strong> What field scale marks departure from linear susceptibility?<br/>
              <strong>A:</strong> When <code>x = g μB B/(kB T) ≳ 1</code>, i.e., Zeeman splitting comparable to thermal energy.</li>
          <li><strong>Q:</strong> In an isentropic magnetization, why does temperature drop?<br/>
              <strong>A:</strong> Increasing <code>B</code> reduces spin entropy by polarizing populations; to keep entropy constant, the system must move to lower <code>T</code>.</li>
        </ul>

        <div class="callout math">
          <strong>Math Insight</strong> <span class="pill">Cumulants from ln Z</span>
          <p>
            In general, <code>∂(ln Z)/∂B</code> produces the first cumulant (mean) of the conjugate variable (magnetic moment),
            and <code>∂²(ln Z)/∂B²</code> produces the second cumulant (fluctuation), which underlies susceptibility via fluctuation–dissipation.
            Here, the discrete sum makes this structure explicit and easy to compute.
          </p>
        </div>

        <a class="backTop" href="#top">↑ Back to top</a>
      </section>

      <section id="part5">
        <h2>PART 5 — Optional Plot Guide</h2>

        <p>
          A plot is useful here because it highlights two regimes at a glance:
          low-<code>T</code> activation (susceptibility suppressed exponentially) and high-<code>T</code> Curie-like behavior
          that becomes nearly independent of <code>Δ</code>.
        </p>

        <figure>
          <canvas id="plot" aria-label="Plot of normalized susceptibility vs T/Δ"></canvas>
          <figcaption>
            <strong>Static plot (dimensionless):</strong>
            We plot the normalized susceptibility
            <code>χ̃(t) = χ · (kB T)/(g μB)² = 2 e^(−1/t)/(1 + 3 e^(−1/t))</code>
            versus <code>t = T/Δ</code>.
            As <code>t → ∞</code> (high T), <code>χ̃ → 1/2</code>, independent of Δ.
            (No numerical constants needed because everything is scaled.)
          </figcaption>
        </figure>

        <div class="callout">
          <strong>Axes and units</strong>
          <ul>
            <li><strong>x-axis:</strong> <code>t = T/Δ</code> (dimensionless).</li>
            <li><strong>y-axis:</strong> <code>χ̃ = χ (kB T)/(g μB)²</code> (dimensionless).</li>
          </ul>
        </div>

        <div class="callout">
          <strong>What to notice</strong>
          <ul>
            <li><strong>Low T (t ≪ 1):</strong> <code>χ̃</code> is tiny because <code>e^(−1/t)</code> is extremely small (triplet unpopulated).</li>
            <li><strong>High T (t ≫ 1):</strong> <code>χ̃</code> approaches <code>1/2</code>, which corresponds to <code>χ ≈ (g μB)²/(2 kB T)</code>.</li>
            <li><strong>Crossover:</strong> around <code>t ~ 1</code> the activated triplet begins contributing substantially.</li>
          </ul>
        </div>

        <a class="backTop" href="#top">↑ Back to top</a>
      </section>
    </article>

    <footer id="footer" style="padding-top:14px;">
      <div class="callout" style="margin-top:0;">
        <strong>End note</strong>
        <p style="margin:6px 0 0;">
          This “singlet + thermally accessible triplet” model is a compact example of how discrete energy spectra,
          degeneracy, and fields combine to produce measurable macroscopic behavior—exactly the kind of scaling intuition
          that transfers well to industrial diagnostics and design.
        </p>
      </div>
      <a class="backTop" href="#top">↑ Back to top</a>
    </footer>
  </main>
</div>

<script>
  // Smooth scroll for internal anchors
  document.addEventListener('click', (e) => {
    const a = e.target.closest('a[href^="#"]');
    if(!a) return;
    const id = a.getAttribute('href');
    const el = document.querySelector(id);
    if(el){
      e.preventDefault();
      el.scrollIntoView({behavior:'smooth', block:'start'});
      history.replaceState(null, "", id);
    }
  });

  // Copy helpers
  function copyTextFromSelector(sel, statusEl){
    const node = document.querySelector(sel);
    const text = node ? node.innerText.trim() : "";
    if(!text) return;
    navigator.clipboard.writeText(text).then(()=>{
      if(statusEl){
        statusEl.textContent = "Copied ✓";
        setTimeout(()=> statusEl.textContent = "", 1200);
      }
    }).catch(()=>{
      if(statusEl){
        statusEl.textContent = "Copy failed (browser blocked)";
        setTimeout(()=> statusEl.textContent = "", 1600);
      }
    });
  }
  document.querySelectorAll('button[data-copy]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const sel = btn.getAttribute('data-copy');
      const map = {
        "#eqZ": document.getElementById('stZ'),
        "#eqMu": document.getElementById('stMu'),
        "#eqChi": document.getElementById('stChi'),
        "#finalAnswer": document.getElementById('stFinal')
      };
      copyTextFromSelector(sel, map[sel] || null);
    });
  });

  // Plot: normalized susceptibility vs t=T/Δ
  const canvas = document.getElementById('plot');
  const ctx = canvas.getContext('2d');

  function chiTilde(t){
    // χ̃(t) = 2 e^(−1/t) / (1 + 3 e^(−1/t))
    if(t <= 0) return 0;
    const a = Math.exp(-1/t);
    return (2*a) / (1 + 3*a);
  }

  function draw(){
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    const W = Math.max(420, rect.width);
    const H = rect.height;

    canvas.width = Math.floor(W * dpr);
    canvas.height = Math.floor(H * dpr);
    ctx.setTransform(dpr,0,0,dpr,0,0);

    // Layout
    const padL = 64, padR = 18, padT = 34, padB = 48;
    const plotW = W - padL - padR;
    const plotH = H - padT - padB;

    // Clear
    ctx.clearRect(0,0,W,H);

    // Colors (no explicit styling request constraints here; but we keep minimal)
    const grid = "rgba(255,255,255,0.10)";
    const axes = "rgba(255,255,255,0.22)";
    const text = "rgba(231,236,255,0.90)";
    const faint = "rgba(185,194,230,0.78)";
    const curve = "rgba(122,162,255,0.95)";
    const curve2 = "rgba(94,240,197,0.85)";

    // Axes ranges
    const tMin = 0.15, tMax = 6.0;      // dimensionless
    const yMin = 0.0, yMax = 0.55;      // χ̃ approaches 0.5

    function xMap(t){ return padL + ( (t - tMin)/(tMax - tMin) ) * plotW; }
    function yMap(y){ return padT + (1 - (y - yMin)/(yMax - yMin)) * plotH; }

    // Title
    ctx.font = "600 14px system-ui, -apple-system, Segoe UI, Roboto, Arial";
    ctx.fillStyle = text;
    ctx.fillText("Normalized susceptibility  χ̃(t)  vs  t = T/Δ", padL, 20);

    // Grid + ticks
    ctx.lineWidth = 1;

    // x ticks
    const xTicks = [0.2,0.5,1,2,3,4,5,6];
    ctx.strokeStyle = grid;
    xTicks.forEach(t=>{
      if(t < tMin || t > tMax) return;
      const x = xMap(t);
      ctx.beginPath();
      ctx.moveTo(x, padT);
      ctx.lineTo(x, padT + plotH);
      ctx.stroke();
    });

    // y ticks
    const yTicks = [0,0.1,0.2,0.3,0.4,0.5];
    yTicks.forEach(y=>{
      const yy = yMap(y);
      ctx.beginPath();
      ctx.moveTo(padL, yy);
      ctx.lineTo(padL + plotW, yy);
      ctx.stroke();
    });

    // Axes
    ctx.strokeStyle = axes;
    ctx.beginPath();
    ctx.moveTo(padL, padT);
    ctx.lineTo(padL, padT + plotH);
    ctx.lineTo(padL + plotW, padT + plotH);
    ctx.stroke();

    // Tick labels
    ctx.fillStyle = faint;
    ctx.font = "12px ui-monospace, SFMono-Regular, Menlo, Consolas, monospace";
    xTicks.forEach(t=>{
      if(t < tMin || t > tMax) return;
      const x = xMap(t);
      ctx.fillText(String(t), x - 10, padT + plotH + 18);
    });
    yTicks.forEach(y=>{
      const yy = yMap(y);
      ctx.fillText(String(y.toFixed(1)), 10, yy + 4);
    });

    // Axis labels
    ctx.fillStyle = text;
    ctx.font = "13px system-ui, -apple-system, Segoe UI, Roboto, Arial";
    ctx.fillText("t = T/Δ  (dimensionless)", padL + plotW/2 - 72, padT + plotH + 38);

    ctx.save();
    ctx.translate(16, padT + plotH/2 + 60);
    ctx.rotate(-Math.PI/2);
    ctx.fillText("χ̃ = χ (kB T)/(g μB)²  (dimensionless)", 0, 0);
    ctx.restore();

    // Curve
    ctx.strokeStyle = curve;
    ctx.lineWidth = 2;
    ctx.beginPath();
    let first = true;
    const N = 450;
    for(let i=0;i<=N;i++){
      const t = tMin + (tMax - tMin) * (i/N);
      const y = chiTilde(t);
      const x = xMap(t);
      const yy = yMap(y);
      if(first){ ctx.moveTo(x, yy); first = false; }
      else { ctx.lineTo(x, yy); }
    }
    ctx.stroke();

    // Reference line at 0.5 (high-T limit)
    ctx.strokeStyle = curve2;
    ctx.setLineDash([6,6]);
    ctx.beginPath();
    ctx.moveTo(padL, yMap(0.5));
    ctx.lineTo(padL + plotW, yMap(0.5));
    ctx.stroke();
    ctx.setLineDash([]);

    // Legend
    const lx = padL + 12, ly = padT + 10;
    ctx.fillStyle = "rgba(255,255,255,0.06)";
    ctx.strokeStyle = "rgba(255,255,255,0.10)";
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.roundRect(lx, ly, 230, 52, 10);
    ctx.fill();
    ctx.stroke();

    // Legend entries
    ctx.font = "12px system-ui, -apple-system, Segoe UI, Roboto, Arial";
    // Curve swatch
    ctx.strokeStyle = curve;
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(lx+12, ly+18);
    ctx.lineTo(lx+40, ly+18);
    ctx.stroke();
    ctx.fillStyle = text;
    ctx.fillText("χ̃(t) = 2 e^(−1/t)/(1+3 e^(−1/t))", lx+48, ly+22);

    // Dashed line swatch
    ctx.strokeStyle = curve2;
    ctx.lineWidth = 3;
    ctx.setLineDash([6,6]);
    ctx.beginPath();
    ctx.moveTo(lx+12, ly+38);
    ctx.lineTo(lx+40, ly+38);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = text;
    ctx.fillText("High-T limit: χ̃ → 0.5", lx+48, ly+42);
  }

  // Polyfill roundRect for older browsers
  if(!CanvasRenderingContext2D.prototype.roundRect){
    CanvasRenderingContext2D.prototype.roundRect = function(x,y,w,h,r){
      const rr = Math.min(r, w/2, h/2);
      this.beginPath();
      this.moveTo(x+rr, y);
      this.arcTo(x+w, y, x+w, y+h, rr);
      this.arcTo(x+w, y+h, x, y+h, rr);
      this.arcTo(x, y+h, x, y, rr);
      this.arcTo(x, y, x+w, y, rr);
      this.closePath();
      return this;
    }
  }

  const ro = new ResizeObserver(()=>draw());
  ro.observe(canvas);
  draw();
</script>
</body>
</html>
