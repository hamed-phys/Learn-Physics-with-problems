<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Diamond Structure: Vanishing Fourier Component and Vanishing First-Order Band Gap</title>
  <style>
    :root{
      --bg:#0b0f14;
      --panel:#0f1620;
      --panel2:#0c121a;
      --text:#e8eef7;
      --muted:#a9b7c9;
      --faint:#7f93ac;
      --accent:#6ee7ff;
      --accent2:#a78bfa;
      --ok:#34d399;
      --warn:#fbbf24;
      --bad:#fb7185;
      --line:rgba(255,255,255,.10);
      --shadow:0 18px 50px rgba(0,0,0,.45);
      --radius:16px;
      --radius2:22px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 20% 0%, rgba(110,231,255,.10), transparent 60%),
        radial-gradient(900px 600px at 80% 10%, rgba(167,139,250,.10), transparent 55%),
        linear-gradient(180deg, var(--bg), #070a0f 60%, #05070b);
      line-height:1.55;
    }
    header{
      position:relative;
      padding:42px 18px 24px;
      border-bottom:1px solid var(--line);
      overflow:hidden;
    }
    header::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(700px 320px at 15% 40%, rgba(110,231,255,.15), transparent 60%),
        radial-gradient(620px 280px at 85% 35%, rgba(167,139,250,.14), transparent 60%);
      pointer-events:none;
    }
    .wrap{
      max-width:1180px;
      margin:0 auto;
      padding:0 18px;
      position:relative;
    }
    .hero{
      display:grid;
      grid-template-columns: 1.35fr .65fr;
      gap:18px;
      align-items:stretch;
    }
    @media (max-width: 980px){
      .hero{grid-template-columns:1fr}
    }
    .titleCard{
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:var(--radius2);
      box-shadow:var(--shadow);
      padding:20px 18px;
      backdrop-filter: blur(6px);
    }
    h1{
      margin:0 0 10px 0;
      font-size: clamp(1.45rem, 2.2vw, 2.1rem);
      letter-spacing:.2px;
    }
    .subtitle{
      margin:0;
      color:var(--muted);
      font-size:1rem;
    }
    .metaCard{
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
      border:1px solid var(--line);
      border-radius:var(--radius2);
      box-shadow:var(--shadow);
      padding:16px 16px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap:10px;
    }
    .metaRow{
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      color:var(--muted);
      font-size:.92rem;
      white-space:nowrap;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background:var(--accent);
      box-shadow:0 0 0 3px rgba(110,231,255,.14);
    }
    .dot.purple{background:var(--accent2); box-shadow:0 0 0 3px rgba(167,139,250,.14);}
    main{
      padding:18px 18px 70px;
    }
    .grid{
      display:grid;
      grid-template-columns: 300px 1fr;
      gap:18px;
      align-items:start;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
    }
    nav.toc{
      position:sticky;
      top:14px;
      background:linear-gradient(180deg, rgba(255,255,255,.035), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:var(--radius2);
      box-shadow:var(--shadow);
      padding:14px 14px;
    }
    .toc h2{
      margin:0 0 10px 0;
      font-size:1rem;
      color:var(--text);
      letter-spacing:.2px;
    }
    .toc a{
      display:block;
      padding:8px 10px;
      margin:4px 0;
      text-decoration:none;
      color:var(--muted);
      border-radius:12px;
      border:1px solid transparent;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
    }
    .toc a:hover{
      background:rgba(110,231,255,.06);
      border-color:rgba(110,231,255,.16);
      color:var(--text);
      transform: translateX(2px);
    }
    .toc small{color:var(--faint)}
    article.content{
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
      border:1px solid var(--line);
      border-radius:var(--radius2);
      box-shadow:var(--shadow);
      padding:18px 18px 8px;
      overflow:hidden;
    }
    section{
      padding:14px 2px 6px;
      border-top:1px solid var(--line);
    }
    section:first-of-type{border-top:none}
    h2{
      margin:0 0 10px 0;
      font-size:1.25rem;
      letter-spacing:.2px;
    }
    h3{
      margin:12px 0 8px;
      font-size:1.05rem;
      color:var(--text);
    }
    p{margin:8px 0; color:var(--text)}
    ul{margin:8px 0 10px 20px; color:var(--muted)}
    li{margin:5px 0}
    .cards{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin:10px 0 6px;
    }
    @media (max-width: 780px){
      .cards{grid-template-columns:1fr}
    }
    .card{
      border:1px solid var(--line);
      background:rgba(0,0,0,.18);
      border-radius:var(--radius);
      padding:12px 12px;
    }
    .callout{
      border-left:4px solid var(--accent);
      background:rgba(110,231,255,.06);
    }
    .callout.purple{
      border-left-color:var(--accent2);
      background:rgba(167,139,250,.07);
    }
    .callout.warn{
      border-left-color:var(--warn);
      background:rgba(251,191,36,.08);
    }
    .callout.ok{
      border-left-color:var(--ok);
      background:rgba(52,211,153,.08);
    }
    .callout.bad{
      border-left-color:var(--bad);
      background:rgba(251,113,133,.08);
    }
    .label{
      display:inline-flex; align-items:center; gap:8px;
      color:var(--text);
      font-weight:700;
      margin:0 0 6px 0;
      font-size:.95rem;
    }
    .label .mini{
      width:8px; height:8px; border-radius:50%;
      background:var(--accent);
      box-shadow:0 0 0 3px rgba(110,231,255,.14);
    }
    .eq{
      border:1px solid var(--line);
      border-radius:14px;
      background:linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.18));
      padding:10px 10px 10px;
      margin:10px 0;
      position:relative;
      overflow:hidden;
    }
    .eq pre{
      margin:0;
      font-family:var(--mono);
      font-size:.92rem;
      color:#eaf2ff;
      white-space:pre-wrap;
      word-break:break-word;
      line-height:1.45;
    }
    .btnRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin:10px 0 4px;
    }
    button.copy{
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--text);
      padding:9px 12px;
      border-radius:999px;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      font-weight:650;
    }
    button.copy:hover{
      transform:translateY(-1px);
      background:rgba(110,231,255,.06);
      border-color:rgba(110,231,255,.20);
    }
    button.copy:active{transform:translateY(0px) scale(.99)}
    .hint{
      color:var(--faint);
      font-size:.92rem;
      margin-top:6px;
    }
    details{
      margin:10px 0;
      border:1px solid var(--line);
      border-radius:var(--radius);
      background:rgba(0,0,0,.16);
      overflow:hidden;
    }
    summary{
      cursor:pointer;
      padding:10px 12px;
      color:var(--text);
      font-weight:700;
      user-select:none;
    }
    details > div{
      padding:0 12px 12px 12px;
      color:var(--muted);
    }
    .backTop{
      display:inline-block;
      margin:12px 0 6px;
      text-decoration:none;
      color:var(--accent);
      border-bottom:1px dashed rgba(110,231,255,.45);
    }
    .backTop:hover{color:#bff3ff}
    footer{
      padding:18px 18px 40px;
      color:var(--faint);
      border-top:1px solid var(--line);
      background:rgba(0,0,0,.12);
    }
    .printNote{display:none}
    @media print{
      :root{ --bg:#ffffff; --text:#000; --muted:#111; --faint:#333; --line:#bbb; }
      body{background:#fff; color:#000}
      header, nav.toc, .btnRow, button.copy, .backTop{display:none !important}
      article.content, .card, .eq, details{box-shadow:none !important}
      article.content{border:1px solid #aaa}
      a{color:#000; text-decoration:none}
      section{break-inside:avoid}
      .printNote{display:block; color:#000}
    }
  </style>
</head>
<body>
<header id="top">
  <div class="wrap hero">
    <div class="titleCard">
      <h1>Potential Energy in the Diamond Structure: (a) A Vanishing Fourier Component, (b) A Vanishing First-Order Band Gap</h1>
      <p class="subtitle">
        We use the periodic Schrödinger eigenvalue problem, Fourier/structure-factor reasoning, and the nearly-free-electron
        (two-wave) approximation to show why a particular zone-boundary gap disappears in diamond.
      </p>
    </div>
    <aside class="metaCard" aria-label="At-a-glance">
      <div class="metaRow">
        <span class="pill"><span class="dot"></span> Topic: crystal potential Fourier components</span>
        <span class="pill"><span class="dot purple"></span> Method: structure factor + 2×2 NFE coupling</span>
      </div>
      <div class="metaRow">
        <span class="pill">Result: symbolic (selection rule + gap = 0)</span>
        <span class="pill">Applies: diamond / Si / Ge (same basis symmetry)</span>
      </div>
      <p class="hint printNote">Print tip: this page is print-friendly; copy buttons and the TOC are hidden when printing.</p>
    </aside>
  </div>
</header>

<main>
  <div class="wrap grid">
    <nav class="toc" aria-label="Table of contents">
      <h2>Table of Contents</h2>
      <a href="#quick">Quick Summary</a>
      <a href="#part0">PART 0 — Concept Primer</a>
      <a href="#part0b">PART 0B — Industry &amp; Applied Physics Perspective</a>
      <a href="#part1">PART 1 — Problem Analysis</a>
      <a href="#part2">PART 2 — Strategy &amp; Tips</a>
      <a href="#part3">PART 3 — Full Solution</a>
      <a href="#part4">PART 4 — Deeper Understanding</a>
      <a href="#part5">PART 5 — Optional Plot Guide</a>
      <small>Sticky TOC • click to jump</small>
    </nav>

    <article class="content" role="article" aria-label="Solution article">
      <section id="quick">
        <h2>Quick Summary</h2>
        <ul>
          <li><strong>What this problem is about:</strong> how the <em>diamond basis</em> modifies the Fourier components of a periodic crystal potential and therefore modifies band gaps.</li>
          <li><strong>Key physics idea:</strong> the band gap at a Bragg plane is controlled (in first order) by the crystal-potential Fourier coefficient <span style="color:var(--accent)">U<sub>G</sub></span> that couples two degenerate plane waves.</li>
          <li><strong>Governing eigenproblem:</strong> time-independent Schrödinger equation in a periodic potential, an elliptic PDE:
            <span style="white-space:nowrap;">(−ħ²/2m)∇²ψ + U(r)ψ = Eψ</span>, with Bloch-periodic boundary structure.</li>
          <li><strong>Fourier representation:</strong> U(r)=∑<sub>G</sub>U<sub>G</sub>e^{iG·r}; selection rules come from the <em>structure factor</em> of the basis.</li>
          <li><strong>Part (a) result:</strong> for diamond, <strong>U<sub>G</sub>=0</strong> when <strong>G = 2A</strong> (A a basic reciprocal vector along ⟨111⟩ in the conventional cubic description).</li>
          <li><strong>Part (b) result:</strong> in the standard two-wave (first-order) nearly-free-electron approximation, the zone-boundary gap is
            <strong>ΔE ≈ 2|U<sub>G</sub>|</strong>; hence for the Bragg plane associated with <strong>G=2A</strong>, the gap <strong>vanishes</strong> because U<sub>2A</sub>=0.</li>
          <li><strong>Physical meaning:</strong> symmetry/interference from the two-atom basis cancels the Bragg scattering that would open the gap.</li>
          <li><strong>Industrial lens:</strong> these “forbidden” Fourier components influence semiconductor band edges, effective masses, and tunneling through interfaces (complex k), impacting device performance.</li>
        </ul>
        <a class="backTop" href="#top">Back to top</a>
      </section>

      <section id="part0">
        <h2>PART 0 — Concept Primer (THEORY BEFORE SOLVING)</h2>

        <div class="cards">
          <div class="card callout">
            <div class="label"><span class="mini"></span>Core definitions (symbols + SI units)</div>
            <ul>
              <li><strong>r</strong> (m): position vector in real space.</li>
              <li><strong>U(r)</strong> (J): periodic crystal potential energy seen by an electron; U(r+R)=U(r) for any lattice translation <strong>R</strong>.</li>
              <li><strong>G</strong> (m<sup>−1</sup>): reciprocal-lattice vector; e^{iG·R}=1 for all lattice translations R.</li>
              <li><strong>U<sub>G</sub></strong> (J): Fourier coefficient of the potential at wavevector G.</li>
              <li><strong>ψ(r)</strong> (m<sup>−3/2</sup>): electron wavefunction; |ψ|² is probability density.</li>
              <li><strong>k</strong> (m<sup>−1</sup>): Bloch wavevector (crystal momentum).</li>
              <li><strong>ħ</strong> (J·s), <strong>m</strong> (kg): reduced Planck constant and electron mass (often replaced by effective mass in refined models).</li>
              <li><strong>a</strong> (m): conventional cubic lattice constant for diamond (e.g., Si, Ge).</li>
            </ul>
          </div>

          <div class="card callout purple">
            <div class="label"><span class="mini" style="background:var(--accent2); box-shadow:0 0 0 3px rgba(167,139,250,.14)"></span>Physical meaning (intuition)</div>
            <ul>
              <li><strong>U<sub>G</sub></strong> measures how strongly the lattice can Bragg-scatter an electron by momentum transfer ħG.</li>
              <li>Band gaps open at Brillouin-zone boundaries because two free-electron states become degenerate and are mixed by U<sub>G</sub>.</li>
              <li>A multi-atom basis can cause <strong>destructive interference</strong> in scattering, making certain U<sub>G</sub> vanish (selection rules).</li>
            </ul>
          </div>
        </div>

        <h3>Mathematical model (formal structure)</h3>
        <p>
          We model an electron in an infinite periodic lattice by the stationary Schrödinger eigenvalue problem (a linear elliptic PDE):
        </p>
        <div class="eq" data-copy="(-ħ^2/(2m)) ∇^2 ψ(r) + U(r) ψ(r) = E ψ(r),   with   U(r+R)=U(r)">
          <pre>(-ħ^2/(2m)) ∇^2 ψ(r) + U(r) ψ(r) = E ψ(r),
with periodicity: U(r + R) = U(r) for all lattice translations R.</pre>
        </div>
        <div class="btnRow">
          <button class="copy" data-copy-btn="eq">Copy key equation</button>
        </div>

        <p>
          By Bloch’s theorem, solutions take the form ψ<sub>k</sub>(r)=e^{ik·r}u<sub>k</sub>(r) where u<sub>k</sub>(r) has the lattice periodicity.
          Because the operator (−ħ²/2m)∇² + U(r) is linear and translation-invariant under lattice translations,
          its eigenfunctions can be chosen as simultaneous eigenfunctions of translation operators.
        </p>

        <h3>Fourier expansions and why they work</h3>
        <p>
          Any sufficiently well-behaved periodic function can be expanded in reciprocal-space Fourier series. In particular,
        </p>
        <div class="eq" data-copy="U(r)=∑_G U_G e^{i G·r},   U_G=(1/Ω)∫_Ω U(r) e^{-i G·r} d^3r">
          <pre>U(r) = ∑_G U_G e^{i G·r},
U_G = (1/Ω) ∫_Ω U(r) e^{-i G·r} d^3r,   (Ω = unit-cell volume)</pre>
        </div>
        <div class="btnRow">
          <button class="copy" data-copy-btn="eq">Copy Fourier definition</button>
        </div>

        <h3>Nearly-free-electron (NFE) approximation (what it neglects)</h3>
        <ul>
          <li>Assume U(r) is “weak” compared with the free-electron kinetic energy scale near the energies of interest.</li>
          <li>Keep only the most important couplings between plane waves whose wavevectors differ by a single reciprocal vector G that satisfies a near-degeneracy (Bragg condition).</li>
          <li>Mathematically: truncate an infinite linear system (Fourier-space eigenvalue problem) to a small matrix (often 2×2) near a zone boundary.</li>
        </ul>

        <div class="card callout warn">
          <div class="label"><span class="mini" style="background:var(--warn); box-shadow:0 0 0 3px rgba(251,191,36,.14)"></span>What to watch for (pitfalls)</div>
          <ul>
            <li><strong>Which “unit cell”?</strong> Diamond is an fcc Bravais lattice with a two-atom basis; the “conventional cubic cell” contains more atoms than the primitive cell.</li>
            <li><strong>Which reciprocal vectors are allowed?</strong> For an fcc Bravais lattice, (h,k,l) are all even or all odd (in conventional cubic indexing).</li>
            <li><strong>Which Bragg plane?</strong> The first zone boundary for a given reciprocal lattice point G is the plane perpendicular to G passing through G/2.</li>
            <li><strong>Basis interference:</strong> even if the Bravais lattice allows G, the basis can make the structure factor vanish.</li>
          </ul>
        </div>

        <details>
          <summary>Math Insight (why this becomes a matrix eigenvalue problem)</summary>
          <div>
            The Schrödinger operator is linear. Expanding ψ in plane waves, the Laplacian acts diagonally in k-space:
            ∇² e^{i(k+G)·r} = −|k+G|² e^{i(k+G)·r}. The periodic potential acts by convolution in reciprocal space:
            multiplying by U(r)=∑_G U_G e^{iG·r} shifts wavevectors by reciprocal lattice vectors. Therefore the PDE turns into an
            infinite coupled linear algebra system for the plane-wave coefficients. Near a zone boundary, only a few coefficients
            dominate, giving a small (e.g., 2×2) Hermitian eigenproblem.
          </div>
        </details>

        <a class="backTop" href="#top">Back to top</a>
      </section>

      <section id="part0b">
        <h2>PART 0B — Industry &amp; Applied Physics Perspective</h2>
        <p>
          The “vanishing Fourier component” and “vanishing first-order gap” are not just textbook curiosities:
          they are symmetry constraints that shape real semiconductor bandstructures, which in turn affect manufacturable device behavior.
        </p>

        <div class="cards">
          <div class="card callout ok">
            <div class="label"><span class="mini" style="background:var(--ok); box-shadow:0 0 0 3px rgba(52,211,153,.14)"></span>Where this appears (3+ application areas)</div>
            <ul>
              <li><strong>CMOS/FinFET logic:</strong> band edges and effective masses in Si/SiGe determine mobility, leakage, and drive current.</li>
              <li><strong>Power electronics:</strong> gap-related tunneling and interface states influence breakdown and switching losses.</li>
              <li><strong>Photonics &amp; optoelectronics:</strong> bandstructure selection rules influence absorption edges and indirect vs direct transitions (Si is indirect).</li>
              <li><strong>Quantum devices:</strong> valley splitting and symmetry-driven coupling matter for spin qubits in Si.</li>
            </ul>
          </div>

          <div class="card callout purple">
            <div class="label"><span class="mini" style="background:var(--accent2); box-shadow:0 0 0 3px rgba(167,139,250,.14)"></span>Why engineers care (performance + constraints)</div>
            <ul>
              <li><strong>Performance:</strong> scattering channels and band curvature impact mobility and conductivity.</li>
              <li><strong>Reliability:</strong> tunneling leakage and hot-carrier effects depend on band edges and forbidden/allowed couplings.</li>
              <li><strong>Cost/manufacturability:</strong> strain engineering and alloying exploit symmetry and bandstructure to improve yield/performance without exotic materials.</li>
              <li><strong>Constraints:</strong> real crystals have defects, strain gradients, and interfaces that relax perfect periodicity—so “selection rules” become “strong suppressions,” not absolute zeros.</li>
            </ul>
          </div>
        </div>

        <h3>Typical measurement/validation methods</h3>
        <ul>
          <li><strong>ARPES</strong> (angle-resolved photoemission) for surface band dispersions (more common for metals/2D materials; challenging for bulk Si but informative on prepared surfaces).</li>
          <li><strong>Optical spectroscopy</strong> (absorption edge, ellipsometry) to infer band gaps and critical points.</li>
          <li><strong>Transport</strong> (Hall mobility, magnetoresistance) to infer effective masses and scattering mechanisms.</li>
          <li><strong>Electron microscopy/diffraction</strong> to validate structure factors and systematic absences (basis interference).</li>
        </ul>

        <h3>From lab to product (how ideal theory is adapted)</h3>
        <p>
          Device modeling rarely uses the bare periodic potential U(r). Instead, engineers use:
          (i) empirical pseudopotentials or DFT-derived potentials, (ii) effective mass / k·p models near band extrema, and
          (iii) interface-specific boundary conditions (e.g., envelope-function matching). Even there, the same symmetry principle survives:
          if a coupling term is symmetry-forbidden in the perfect crystal, it remains strongly suppressed in realistic designs—until defects/strain/interface roughness re-enable it.
        </p>

        <a class="backTop" href="#top">Back to top</a>
      </section>

      <section id="part1">
        <h2>PART 1 — Problem Analysis (no solving yet)</h2>

        <div class="card callout">
          <div class="label"><span class="mini"></span>Problem restatement (in plain words)</div>
          <p>
            For the diamond structure (fcc Bravais lattice + two-atom basis), prove:
            <strong>(a)</strong> a specific Fourier coefficient of the crystal potential vanishes, namely U<sub>G</sub>=0 when G=2A,
            where A is a basic reciprocal-lattice vector expressed in the conventional cubic indexing.
            Then <strong>(b)</strong> show that in the standard first-order nearly-free-electron treatment, the energy gap at the Brillouin-zone boundary plane associated with that direction disappears.
          </p>
        </div>

        <h3>Given quantities</h3>
        <ul>
          <li>Diamond structure: fcc Bravais lattice with a two-point basis at positions
            τ<sub>1</sub>=0 and τ<sub>2</sub>=(a/4)(1,1,1) in the conventional cubic cell coordinate system.</li>
          <li>Periodic potential U(r) with the periodicity of the crystal.</li>
          <li>Reciprocal-lattice vectors G labeled in conventional cubic Miller indices (h,k,l) for the fcc reciprocal lattice selection rule.</li>
        </ul>

        <h3>Unknowns / what to prove</h3>
        <ul>
          <li><strong>(a)</strong> Show U<sub>G</sub>=0 for G=2A (with A a basic reciprocal vector).</li>
          <li><strong>(b)</strong> Using the usual first-order (two-wave) approximation, show the band gap at the zone boundary plane normal to the end of A is zero.</li>
        </ul>

        <h3>Relevant principles (and why they apply)</h3>
        <ul>
          <li><strong>Fourier decomposition</strong> of periodic functions: applies because U(r) is lattice-periodic.</li>
          <li><strong>Structure factor</strong> for a basis: applies because diamond is not a simple Bravais lattice; the basis modifies scattering amplitudes.</li>
          <li><strong>Nearly-free-electron 2×2 coupling</strong> at a Bragg plane: applies because the question explicitly invokes the “usual first-order approximation.”</li>
        </ul>

        <div class="card callout warn">
          <div class="label"><span class="mini" style="background:var(--warn); box-shadow:0 0 0 3px rgba(251,191,36,.14)"></span>Assumptions (explicit)</div>
          <ul>
            <li>Infinite perfect crystal (no surfaces/defects), so Bloch periodicity holds.</li>
            <li>Weak potential / small Fourier coupling: justify truncating to a two-wave (first-order) model near degeneracy.</li>
            <li>Two identical atoms in the diamond basis (e.g., C in diamond, Si in silicon), so the basis contributions have equal weight (same atomic form factor/pseudopotential).</li>
          </ul>
        </div>

        <h3>Possible approaches (2–3) and comparison</h3>
        <ul>
          <li><strong>Approach A (best):</strong> write U<sub>G</sub> as “Bravais-lattice factor × basis structure factor” and show the structure factor vanishes for G=2A. Then use ΔE≈2|U<sub>G</sub>|. <em>Pros:</em> shortest, clearest symmetry logic. <em>Cons:</em> requires comfort with reciprocal indexing.</li>
          <li><strong>Approach B:</strong> compute U<sub>G</sub> by direct integration over a conventional cubic cell treating U(r) as a sum of identical atomic potentials centered at basis sites. <em>Pros:</em> very explicit. <em>Cons:</em> algebra heavy; still reduces to the same phase cancellation.</li>
          <li><strong>Approach C:</strong> use diffraction “systematic absences” for diamond (selection rules) and translate to U<sub>G</sub>. <em>Pros:</em> intuitive for crystallography. <em>Cons:</em> less directly tied to NFE band-gap formula unless you connect the dots.</li>
        </ul>

        <p>
          We choose <strong>Approach A</strong>: it cleanly separates (i) which G exist for the fcc Bravais lattice and (ii) which are canceled by the diamond basis, then directly feeds into the first-order NFE gap formula.
        </p>

        <a class="backTop" href="#top">Back to top</a>
      </section>

      <section id="part2">
        <h2>PART 2 — Strategy &amp; Tips (roadmap only)</h2>

        <ol style="margin:8px 0 10px 22px; color:var(--muted)">
          <li><strong>Define the lattice + basis</strong> (fcc Bravais + τ= (a/4)(1,1,1)). Goal: know where identical scatterers sit.</li>
          <li><strong>Write U(r) as a sum over basis sites</strong> inside each Bravais cell. Tool: periodicity + translation invariance.</li>
          <li><strong>Compute U<sub>G</sub></strong> and factor it into “Bravais sum” × “basis structure factor” S(G)=∑ e^{-iG·τ<sub>j</sub>}.</li>
          <li><strong>Evaluate S(G) for diamond</strong>: S(G)=1+e^{-iG·τ}. Goal: find when it vanishes.</li>
          <li><strong>Express G in conventional cubic indices</strong>: G=(2π/a)(h,k,l) with fcc rule (h,k,l all even or all odd). Compute phase e^{-i(π/2)(h+k+l)}.</li>
          <li><strong>Identify G=2A case</strong> (e.g., A along (111) ⇒ 2A corresponds to (222)). Show h+k+l=6 ⇒ S=0.</li>
          <li><strong>Set up the 2×2 NFE problem near the Bragg plane for G=2A</strong>: coupling between |k⟩ and |k−G⟩.</li>
          <li><strong>Diagonalize the 2×2 matrix</strong> to get E± and the gap ΔE=2|U<sub>G</sub>|.</li>
          <li><strong>Conclude</strong>: since U<sub>2A</sub>=0, ΔE=0 at that zone boundary plane.</li>
        </ol>

        <div class="card callout bad">
          <div class="label"><span class="mini" style="background:var(--bad); box-shadow:0 0 0 3px rgba(251,113,133,.14)"></span>Common mistakes (quick tips)</div>
          <ul>
            <li>Mixing up the <strong>primitive</strong> and <strong>conventional cubic</strong> reciprocal indices for fcc.</li>
            <li>Using the gap formula ΔE=2|U<sub>G</sub>| but plugging the <em>wrong</em> G (wrong Bragg plane).</li>
            <li>Forgetting that diamond’s basis has <strong>two identical atoms</strong>, giving S(G)=1+phase (not arbitrary weights).</li>
            <li>Dropping the factor of 2 in “G=2A” when identifying Miller indices (222 vs 111).</li>
          </ul>
        </div>

        <a class="backTop" href="#top">Back to top</a>
      </section>

      <section id="part3">
        <h2>PART 3 — Full Solution (DETAILED + TEACHING)</h2>

        <h3>Qualitative expectation (before calculating)</h3>
        <p>
          In a simple Bravais lattice, Bragg planes typically open gaps because the periodic potential couples degenerate plane waves.
          In diamond, however, the extra basis atom can cause destructive interference for certain reciprocal vectors, so the coupling can vanish
          and the corresponding “would-be” gap disappears (at least to first order).
        </p>

        <h3>Step 1: Specify the diamond lattice and basis (conventional cubic coordinates)</h3>
        <p>
          Diamond = fcc Bravais lattice + two-atom basis. Take the basis positions (within a primitive fcc cell) as:
        </p>
        <div class="eq" data-copy="τ1 = 0,   τ2 = (a/4)(1,1,1)">
          <pre>τ₁ = 0,
τ₂ = (a/4) (1,1,1).</pre>
        </div>

        <p>
          Let R run over all fcc Bravais lattice translation vectors. Then the set of atomic positions is {R+τ<sub>1</sub>, R+τ<sub>2</sub>}.
        </p>

        <h3>Step 2: A minimal (standard) model for U(r) and its Fourier coefficient</h3>
        <p>
          A common (and sufficient) representation is that the crystal potential is a sum of identical single-atom contributions centered at each atom:
        </p>
        <div class="eq" data-copy="U(r) = ∑_R [ u(r-(R+τ1)) + u(r-(R+τ2)) ]">
          <pre>U(r) = ∑_R [ u(r - (R + τ₁)) + u(r - (R + τ₂)) ],</pre>
        </div>
        <p>
          where u(r) is the potential from one atom (or an effective pseudopotential). This step is valid because:
          (i) the crystal is built by translating the same basis, and (ii) we assume identical atoms on both basis sites.
        </p>

        <p>
          Define the Fourier coefficient over a primitive cell of volume Ω (any choice consistent with the lattice periodicity works):
        </p>
        <div class="eq" data-copy="U_G = (1/Ω) ∫_Ω U(r) e^{-iG·r} d^3r">
          <pre>U_G = (1/Ω) ∫_Ω U(r) e^{-i G·r} d^3r.</pre>
        </div>

        <h3>Step 3: Factorization into atomic form factor × structure factor</h3>
        <p>
          Insert U(r)=∑<sub>R</sub>∑<sub>j=1..2</sub> u(r-(R+τ<sub>j</sub>)) into the integral:
        </p>
        <div class="eq" data-copy="U_G=(1/Ω)∫_Ω ∑_R∑_j u(r-(R+τ_j)) e^{-iG·r} d^3r">
          <pre>U_G = (1/Ω) ∫_Ω ∑_R ∑_{j=1}^2 u(r - (R + τ_j)) e^{-i G·r} d^3r.</pre>
        </div>

        <p>
          Use a change of variables for each term: r' = r - (R+τ<sub>j</sub>). Then r = r' + (R+τ<sub>j</sub>), and d³r = d³r' (translation leaves volume element invariant).
          Because the integration over one cell plus the sum over R tiles space, the integral of u over all translated cells becomes the full-space Fourier transform of u.
          The only r-dependence in the exponential gives a phase factor:
        </p>

        <div class="eq" data-copy="U_G = u_G * S(G),  with  S(G)=∑_j e^{-iG·τ_j}">
          <pre>U_G = u_G · S(G),
S(G) = ∑_{j=1}^2 e^{-i G·τ_j}.</pre>
        </div>

        <p>
          Here u<sub>G</sub> is the (appropriate) Fourier coefficient / form factor of the single-atom potential (details not needed),
          and <strong>S(G)</strong> is the <strong>basis structure factor</strong>. This separation is the key mathematical simplification:
          the Bravais-lattice periodicity determines which G are allowed, while the basis determines whether the amplitude is enhanced or canceled.
        </p>

        <h3>Step 4: Evaluate the diamond structure factor</h3>
        <p>
          For τ<sub>1</sub>=0 and τ<sub>2</sub>=τ=(a/4)(1,1,1),
        </p>
        <div class="eq" data-copy="S(G)=1+e^{-iG·τ}">
          <pre>S(G) = e^{-i G·0} + e^{-i G·τ} = 1 + e^{-i G·τ}.</pre>
        </div>

        <h3>Step 5: Write G in conventional cubic Miller indices and compute the phase</h3>
        <p>
          In the conventional cubic description, reciprocal vectors can be written as
          G = (2π/a)(h,k,l). For the <strong>fcc</strong> Bravais lattice, only those with (h,k,l) all even or all odd belong to the reciprocal lattice.
          (This is the standard fcc selection rule, ensuring e^{iG·R}=1 for all fcc translations R.)
        </p>

        <p>
          Compute the dot product:
        </p>
        <div class="eq" data-copy="G·τ = (2π/a)(h,k,l)·(a/4)(1,1,1) = (π/2)(h+k+l)">
          <pre>G·τ = (2π/a)(h,k,l) · (a/4)(1,1,1)
     = (2π)(1/4)(h + k + l)
     = (π/2)(h + k + l).</pre>
        </div>

        <p>
          Therefore,
        </p>
        <div class="eq" data-copy="S(G)=1+exp[-i(π/2)(h+k+l)]">
          <pre>S(G) = 1 + exp[ -i (π/2)(h + k + l) ].</pre>
        </div>

        <h3>Step 6: Part (a) — Show U<sub>G</sub>=0 for G=2A</h3>
        <p>
          Take A to be a basic (short) reciprocal-lattice vector along the ⟨111⟩ direction in the conventional cubic indexing,
          i.e. A corresponds to (111) (a shortest fcc reciprocal vector). Then 2A corresponds to (222):
        </p>
        <div class="eq" data-copy="A ↔ (111),  so  2A ↔ (222)">
          <pre>A  ↔ (1,1,1),
2A ↔ (2,2,2).</pre>
        </div>

        <p>
          For G=2A ⇒ (h,k,l)=(2,2,2). Then h+k+l=6, and:
        </p>
        <div class="eq" data-copy="S(2A)=1+exp[-i(π/2)*6]=1+exp(-i3π)=1-1=0">
          <pre>S(2A) = 1 + exp[ -i (π/2)·6 ]
      = 1 + exp( -i 3π )
      = 1 + ( -1 )
      = 0.</pre>
        </div>

        <p>
          Since U<sub>G</sub> = u<sub>G</sub> S(G), it follows immediately that:
        </p>

        <div class="card callout ok" style="margin-top:10px">
          <div class="label"><span class="mini" style="background:var(--ok); box-shadow:0 0 0 3px rgba(52,211,153,.14)"></span>Part (a) boxed result</div>
          <div class="eq" data-copy="For diamond: U_{2A} = u_{2A} S(2A) = 0">
            <pre><strong>For the diamond structure:</strong>
U_{2A} = u_{2A} · S(2A) = 0.</pre>
          </div>
          <div class="btnRow">
            <button class="copy" data-copy-btn="eq">Copy Part (a) result</button>
          </div>
        </div>

        <p class="hint">
          Dimensional check: U<sub>G</sub> has units of energy (J). S(G) is dimensionless, so u<sub>G</sub> must carry energy units—consistent with it being a Fourier coefficient of a potential.
        </p>

        <h3>Step 7: Part (b) — Nearly-free-electron (two-wave) gap at a Bragg plane</h3>
        <p>
          In the NFE method, expand the Bloch function as a sum of plane waves:
        </p>
        <div class="eq" data-copy="ψ_k(r)=∑_G c_{k+G} e^{i(k+G)·r}">
          <pre>ψ_k(r) = ∑_G c_{k+G} e^{i (k+G)·r}.</pre>
        </div>

        <p>
          Substituting into (−ħ²/2m)∇²ψ + Uψ = Eψ and using the Fourier series for U produces an infinite linear system:
        </p>
        <div class="eq" data-copy="[(ħ^2/2m)|k+G|^2 - E] c_{k+G} + ∑_{G'} U_{G-G'} c_{k+G'} = 0">
          <pre>[(ħ^2/2m) |k+G|^2 − E] c_{k+G} + ∑_{G'} U_{G−G'} c_{k+G'} = 0.</pre>
        </div>
        <p>
          This step is valid because of linearity: the Laplacian is linear and acts diagonally on each plane wave,
          while multiplication by U(r) becomes convolution in reciprocal space (shifting indices by reciprocal vectors).
        </p>

        <h3>Step 8: Identify the relevant zone-boundary plane “normal to the end of A”</h3>
        <p>
          A Brillouin-zone boundary plane associated with a reciprocal lattice point G is the plane perpendicular to G that
          bisects the segment between 0 and G, i.e. it passes through G/2. If we choose G=2A, then that plane passes through:
        </p>
        <div class="eq" data-copy="G=2A  ⇒  plane passes through G/2 = A and is normal to A">
          <pre>G = 2A  ⇒  Bragg plane at  G/2 = A,
and the plane is perpendicular to G (hence to A).</pre>
        </div>
        <p>
          This matches the wording “the zone boundary plane normal to the end of vector A”: it is the boundary plane perpendicular to the A-direction that goes through the point A in k-space.
        </p>

        <h3>Step 9: Two-wave truncation at the degeneracy</h3>
        <p>
          On the Bragg plane for G=2A, the free-electron energies of plane waves with wavevectors k and k−G become degenerate:
        </p>
        <div class="eq" data-copy="|k|^2 = |k-G|^2  on the Bragg plane for G">
          <pre>Free-electron degeneracy condition:
(ħ^2/2m)|k|^2 = (ħ^2/2m)|k−G|^2
⇔ |k|^2 = |k−G|^2, which holds on the Bragg plane for G.</pre>
        </div>

        <p>
          Near such a degeneracy, the dominant coupling is between the two coefficients c<sub>k</sub> and c<sub>k−G</sub>. Truncate the infinite system to these two:
        </p>

        <div class="eq" data-copy="[(E0(k)-E)    U_G      ;  U_G*   (E0(k-G)-E)] [c_k; c_{k-G}] = 0">
          <pre>⎡ E0(k)    − E     U_G     ⎤ ⎡ c_k     ⎤ = 0
⎣   U_G*  E0(k−G) − E     ⎦ ⎣ c_{k−G} ⎦

where E0(q) = (ħ^2/2m)|q|^2.</pre>
        </div>

        <p>
          This is a 2×2 Hermitian eigenvalue problem (because U(r) is real ⇒ U<sub>−G</sub>=U<sub>G</sub>*), so its eigenvalues are real—consistent with physical energies.
        </p>

        <h3>Step 10: Diagonalize and extract the energy gap</h3>
        <p>
          Solve det(…)=0:
        </p>
        <div class="eq" data-copy="(E0(k)-E)(E0(k-G)-E) - |U_G|^2 = 0">
          <pre>(E0(k) − E)(E0(k−G) − E) − |U_G|^2 = 0.</pre>
        </div>

        <p>
          On the Bragg plane, E0(k)=E0(k−G)≡E0. Then:
        </p>
        <div class="eq" data-copy="(E0-E)^2 - |U_G|^2 = 0  ⇒  E = E0 ± |U_G|  ⇒  ΔE = 2|U_G|">
          <pre>(E0 − E)^2 − |U_G|^2 = 0
⇒ E0 − E = ± |U_G|
⇒ E = E0 ± |U_G|.

Therefore the first-order gap is:
ΔE = (E0 + |U_G|) − (E0 − |U_G|) = 2|U_G|.</pre>
        </div>

        <h3>Step 11: Apply to G=2A and use Part (a)</h3>
        <p>
          For the zone boundary plane corresponding to G=2A (the plane through A, normal to A), the gap is:
        </p>

        <div class="card callout ok" style="margin-top:10px">
          <div class="label"><span class="mini" style="background:var(--ok); box-shadow:0 0 0 3px rgba(52,211,153,.14)"></span>Part (b) boxed result</div>
          <div class="eq" data-copy="ΔE(Bragg plane for G=2A) = 2|U_{2A}| = 0">
            <pre><strong>ΔE on the Bragg plane for G = 2A:</strong>
ΔE = 2|U_{2A}| = 0,  because  U_{2A} = 0 (diamond basis cancellation).</pre>
          </div>
          <div class="btnRow">
            <button class="copy" data-copy-btn="eq">Copy Part (b) result</button>
          </div>
        </div>

        <h3>Sanity checks</h3>
        <div class="cards">
          <div class="card callout">
            <div class="label"><span class="mini"></span>Units/dimensions</div>
            <ul>
              <li>U<sub>G</sub> has units of energy ⇒ ΔE=2|U<sub>G</sub>| has units of energy ✔</li>
              <li>G and k have units m<sup>−1</sup>; E0=(ħ²/2m)|k|² has units of energy ✔</li>
            </ul>
          </div>
          <div class="card callout purple">
            <div class="label"><span class="mini" style="background:var(--accent2); box-shadow:0 0 0 3px rgba(167,139,250,.14)"></span>Limiting cases</div>
            <ul>
              <li>If the basis were absent (simple fcc Bravais only), S(G)=1 and the gap would generally be nonzero at that Bragg plane.</li>
              <li>If the two basis atoms were different (e.g., zincblende), weights differ and S(G) need not vanish ⇒ a gap can open.</li>
            </ul>
          </div>
        </div>

        <div class="card callout warn">
          <div class="label"><span class="mini" style="background:var(--warn); box-shadow:0 0 0 3px rgba(251,191,36,.14)"></span>Physical interpretation (plain language)</div>
          <p>
            At that specific zone boundary, the electron would need to Bragg-scatter by momentum ħ(2A) to mix two degenerate plane waves.
            In diamond, scattering from the two atoms in the basis contributes equal amplitudes but opposite phases for G=2A, so the net
            scattering amplitude is zero. With no coupling, the degeneracy is not lifted at first order → no gap.
          </p>
        </div>

        <div class="btnRow" style="margin-top:12px">
          <button class="copy" id="copyFinal">Copy final answer (plain text)</button>
        </div>

        <div class="eq" id="finalAnswer" data-copy="(a) Diamond basis τ1=0, τ2=(a/4)(1,1,1) gives structure factor S(G)=1+e^{-iG·τ}. With G=(2π/a)(h,k,l), G·τ=(π/2)(h+k+l). For G=2A ↔ (222), h+k+l=6 ⇒ S(2A)=1+e^{-i3π}=0 ⇒ U_{2A}=u_{2A}S(2A)=0. (b) In the two-wave (first-order) nearly-free-electron approximation at the Bragg plane for reciprocal vector G, energies are E=E0±|U_G|, so the gap is ΔE=2|U_G|. For the zone boundary plane normal to A passing through k=A (i.e., Bragg plane for G=2A), ΔE=2|U_{2A}|=0.">
          <pre>(a) Diamond basis τ1=0, τ2=(a/4)(1,1,1) gives structure factor S(G)=1+e^{-iG·τ}.
With G=(2π/a)(h,k,l), G·τ=(π/2)(h+k+l).
For G=2A ↔ (222), h+k+l=6 ⇒ S(2A)=1+e^{-i3π}=0 ⇒ U_{2A}=u_{2A}S(2A)=0.

(b) In the two-wave (first-order) nearly-free-electron approximation at the Bragg plane for reciprocal vector G,
energies are E=E0±|U_G|, so the gap is ΔE=2|U_G|.
For the zone boundary plane normal to A passing through k=A (i.e., Bragg plane for G=2A),
ΔE=2|U_{2A}|=0.</pre>
        </div>

        <a class="backTop" href="#top">Back to top</a>
      </section>

      <section id="part4">
        <h2>PART 4 — Deeper Understanding (THEORY AROUND THE RESULT)</h2>

        <h3>Re-interpreting the result: what controls the gap?</h3>
        <p>
          In first-order NFE theory, the gap at a Bragg plane is controlled by <strong>|U<sub>G</sub>|</strong>, and in a basis crystal:
        </p>
        <div class="eq" data-copy="U_G = u_G S(G)   with   S(G)=∑_basis e^{-iG·τ_j}">
          <pre>U_G = u_G · S(G),
S(G) = ∑_{basis atoms j} e^{-i G·τ_j}.</pre>
        </div>
        <p>
          So you can think of the gap as “single-atom scattering strength” × “interference from the basis.” Diamond’s interference cancels the G=2A component completely.
        </p>

        <h3>Parameter dependence (qualitative)</h3>
        <ul>
          <li><strong>Change the basis displacement τ:</strong> S(G)=1+e^{-iG·τ} changes phase; zeros occur when G·τ = (2n+1)π.</li>
          <li><strong>Change lattice constant a:</strong> changes which physical wavevector corresponds to a given (h,k,l); the phase uses G·τ, so cancellations follow the geometry of the basis, not the absolute scale.</li>
          <li><strong>Change atomic species (diamond → zincblende):</strong> weights differ, so S(G) becomes w1 + w2 e^{-iG·τ}; cancellation is generally incomplete, so the gap reappears.</li>
        </ul>

        <details>
          <summary>Alternative derivation idea (brief but meaningful)</summary>
          <div>
            Use crystallographic “systematic absences”: the diamond structure factor for reflections with (h,k,l) all even
            vanishes when (h+k+l) ≡ 2 (mod 4). For (222), h+k+l=6 ≡ 2 (mod 4), hence the reflection is absent—equivalently
            the Fourier component (scattering amplitude) at that G is zero. Translating diffraction amplitude to U_G gives the same result,
            then the NFE gap formula yields ΔE=0.
          </div>
        </details>

        <div class="card callout">
          <div class="label"><span class="mini"></span>Concept check (self-test with answers)</div>
          <ul>
            <li><strong>Q:</strong> Why does a band gap open at a zone boundary in the nearly-free-electron picture?
              <br><strong>A:</strong> Because two free-electron plane waves become degenerate and the periodic potential couples them, lifting degeneracy.</li>
            <li><strong>Q:</strong> What quantity sets the first-order gap size?
              <br><strong>A:</strong> ΔE ≈ 2|U<sub>G</sub>| for the reciprocal vector G defining that Bragg plane.</li>
            <li><strong>Q:</strong> Why can U<sub>G</sub> vanish even if G is an allowed reciprocal vector?
              <br><strong>A:</strong> The basis structure factor S(G)=∑ e^{-iG·τ<sub>j</sub>} can cancel by destructive interference.</li>
            <li><strong>Q:</strong> For diamond with τ=(a/4)(1,1,1), when does S(G) vanish?
              <br><strong>A:</strong> When G·τ = (2n+1)π, i.e. exp(−iG·τ)=−1, so 1 + exp(−iG·τ)=0.</li>
          </ul>
        </div>

        <a class="backTop" href="#top">Back to top</a>
      </section>

      <section id="part5">
        <h2>PART 5 — Optional Plot Guide</h2>
        <p>
          No plot is necessary here because the problem is <strong>purely symbolic</strong> and hinges on a <strong>selection rule</strong>
          (a structure-factor zero) and a <strong>closed-form</strong> first-order gap formula (ΔE=2|U<sub>G</sub>|).
          A numerical plot would add arbitrary parameter choices without improving the core logic.
        </p>
        <a class="backTop" href="#top">Back to top</a>
      </section>
    </article>
  </div>
</main>

<footer>
  <div class="wrap">
    <p>
      <strong>Key takeaway:</strong> In diamond, the two-atom basis produces phase cancellation for certain reciprocal vectors (here G=2A),
      forcing U<sub>G</sub>=0 and eliminating the corresponding first-order nearly-free-electron gap at that Bragg plane.
    </p>
    <p class="hint">
      Note: Higher-order couplings (via other G) or symmetry-breaking perturbations (strain, defects, interfaces) can re-introduce small splittings,
      but the first-order (two-wave) gap tied directly to U<sub>2A</sub> is exactly zero in the ideal diamond lattice.
    </p>
  </div>
</footer>

<script>
  // Smooth scroll for in-page links
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', (e)=>{
      const id = a.getAttribute('href');
      const el = document.querySelector(id);
      if(!el) return;
      e.preventDefault();
      el.scrollIntoView({behavior:'smooth', block:'start'});
      history.replaceState(null, '', id);
    });
  });

  function copyText(text){
    if(!text) return;
    navigator.clipboard.writeText(text).then(()=>{}).catch(()=>{});
  }

  // Copy buttons for equation blocks
  document.querySelectorAll('button.copy[data-copy-btn="eq"]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      let eq = btn.closest('.card')?.querySelector('.eq');
      if(!eq){
        const parent = btn.parentElement;
        const prev = parent?.previousElementSibling;
        if(prev && prev.classList && prev.classList.contains('eq')) eq = prev;
      }
      if(!eq) return;
      const txt = eq.getAttribute('data-copy') || eq.innerText || '';
      const old = btn.textContent;
      copyText(txt.trim());
      btn.textContent = "Copied ✓";
      setTimeout(()=>btn.textContent = old, 900);
    });
  });

  // Copy final answer
  const copyFinalBtn = document.getElementById('copyFinal');
  const finalBox = document.getElementById('finalAnswer');
  if(copyFinalBtn && finalBox){
    copyFinalBtn.addEventListener('click', ()=>{
      const txt = finalBox.getAttribute('data-copy') || finalBox.innerText || '';
      const old = copyFinalBtn.textContent;
      copyText(txt.trim());
      copyFinalBtn.textContent = "Copied ✓";
      setTimeout(()=>copyFinalBtn.textContent = old, 900);
    });
  }
</script>
</body>
</html>
