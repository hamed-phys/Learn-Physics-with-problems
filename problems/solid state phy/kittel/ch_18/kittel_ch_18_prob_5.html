<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Energies of a Spherical Quantum Dot: Charging Energy, Parallel-Plate Limit, and Quantum–Coulomb Ratio</title>
  <style>
    :root{
      --bg:#0b0f14;
      --card:#101824;
      --card2:#0f1620;
      --ink:#e8eef7;
      --muted:#b9c6d8;
      --faint:#7f92aa;
      --accent:#7dd3fc;
      --accent2:#a78bfa;
      --good:#34d399;
      --warn:#fbbf24;
      --bad:#fb7185;
      --line:rgba(255,255,255,.10);
      --line2:rgba(255,255,255,.14);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      background:
        radial-gradient(1200px 600px at 15% -5%, rgba(125,211,252,.18), transparent 60%),
        radial-gradient(900px 500px at 90% 0%, rgba(167,139,250,.16), transparent 60%),
        radial-gradient(800px 600px at 40% 110%, rgba(52,211,153,.10), transparent 60%),
        var(--bg);
      color:var(--ink);
      line-height:1.55;
    }
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    header{
      padding:28px 18px 10px;
      position:relative;
    }
    .wrap{
      max-width:1180px;
      margin:0 auto;
      padding:0 18px 60px;
    }
    .hero{
      display:grid;
      grid-template-columns: 1.45fr .85fr;
      gap:16px;
      align-items:stretch;
      margin-top:14px;
    }
    .titleCard{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:18px 18px 16px;
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .titleCard:before{
      content:"";
      position:absolute;
      inset:-2px -2px auto -2px;
      height:110px;
      background:linear-gradient(90deg, rgba(125,211,252,.18), rgba(167,139,250,.16), rgba(52,211,153,.12));
      filter:blur(10px);
      opacity:.65;
      pointer-events:none;
    }
    h1{
      margin:0 0 8px;
      font-size:clamp(1.35rem, 1.1rem + 1.2vw, 2.1rem);
      letter-spacing:.2px;
    }
    .subtitle{
      margin:0;
      color:var(--muted);
      font-size:1rem;
      max-width:70ch;
    }
    .meta{
      margin-top:12px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }
    .chip{
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--muted);
      padding:6px 10px;
      border-radius:999px;
      font-size:.86rem;
      backdrop-filter: blur(6px);
    }
    .sideCard{
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:14px;
      box-shadow:var(--shadow);
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap:10px;
    }
    .sideCard h2{
      font-size:1.02rem;
      margin:0 0 6px;
      color:var(--ink);
    }
    .sideCard p{margin:0; color:var(--muted); font-size:.95rem}
    .grid{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:16px;
      margin-top:18px;
      align-items:start;
    }
    nav.toc{
      position:sticky;
      top:14px;
      align-self:start;
      background:rgba(16,24,36,.72);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:12px 12px 10px;
      box-shadow:var(--shadow);
      backdrop-filter: blur(10px);
    }
    .tocTitle{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:8px;
    }
    .tocTitle strong{font-size:.95rem}
    .toc small{color:var(--faint)}
    .toc a{
      display:block;
      padding:8px 10px;
      border-radius:12px;
      color:var(--muted);
      border:1px solid transparent;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      font-size:.92rem;
    }
    .toc a:hover{
      background:rgba(125,211,252,.08);
      border-color:rgba(125,211,252,.22);
      transform: translateY(-1px);
      text-decoration:none;
      color:var(--ink);
    }
    main{
      background:rgba(16,24,36,.40);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    article{
      padding:18px;
    }
    section{
      padding:14px 0;
      border-top:1px solid var(--line);
    }
    section:first-of-type{border-top:none}
    h2{
      margin:0 0 10px;
      font-size:1.25rem;
      letter-spacing:.2px;
    }
    h3{
      margin:16px 0 8px;
      font-size:1.05rem;
      color:var(--ink);
    }
    p{margin:8px 0; color:var(--muted)}
    ul{margin:8px 0 8px 18px; color:var(--muted)}
    li{margin:6px 0}
    .callouts{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
      margin:10px 0;
    }
    .callout{
      border:1px solid var(--line2);
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border-radius:16px;
      padding:12px 12px 10px;
    }
    .callout .tag{
      display:inline-flex;
      gap:8px;
      align-items:center;
      font-size:.82rem;
      letter-spacing:.18px;
      text-transform:uppercase;
      color:var(--ink);
      margin-bottom:6px;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      display:inline-block;
      background:var(--accent);
      box-shadow:0 0 0 4px rgba(125,211,252,.12);
    }
    .dot.good{background:var(--good); box-shadow:0 0 0 4px rgba(52,211,153,.12)}
    .dot.warn{background:var(--warn); box-shadow:0 0 0 4px rgba(251,191,36,.12)}
    .dot.bad{background:var(--bad); box-shadow:0 0 0 4px rgba(251,113,133,.12)}
    .kpi{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:10px;
      margin:10px 0 0;
    }
    .mini{
      border:1px solid var(--line);
      border-radius:14px;
      padding:10px;
      background:rgba(255,255,255,.02);
    }
    .mini strong{display:block; font-size:.9rem; color:var(--ink)}
    .mini span{display:block; color:var(--muted); font-size:.92rem; margin-top:4px}
    pre.eq{
      margin:10px 0;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--line2);
      background:rgba(0,0,0,.26);
      color:#eaf2ff;
      font-family:var(--mono);
      font-size:.92rem;
      overflow:auto;
      position:relative;
    }
    .btnRow{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin:8px 0 2px;
    }
    button.copy{
      appearance:none;
      border:1px solid var(--line2);
      background:rgba(255,255,255,.04);
      color:var(--ink);
      border-radius:12px;
      padding:8px 10px;
      font-size:.88rem;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
    }
    button.copy:hover{
      transform: translateY(-1px);
      background:rgba(125,211,252,.08);
      border-color:rgba(125,211,252,.25);
    }
    details{
      border:1px solid var(--line);
      border-radius:16px;
      padding:10px 12px;
      background:rgba(255,255,255,.02);
      margin:10px 0;
    }
    summary{
      cursor:pointer;
      color:var(--ink);
      font-weight:600;
    }
    .mathInsight{
      border-left:4px solid rgba(167,139,250,.75);
      background:linear-gradient(90deg, rgba(167,139,250,.10), rgba(255,255,255,.02));
      padding:12px 12px 10px;
      border-radius:14px;
      border:1px solid var(--line);
      margin:10px 0;
    }
    .mathInsight strong{color:var(--ink)}
    .finalBox{
      border:1px solid rgba(52,211,153,.35);
      background:linear-gradient(180deg, rgba(52,211,153,.10), rgba(255,255,255,.02));
      border-radius:16px;
      padding:12px;
      margin:12px 0;
    }
    .finalBox h3{margin:0 0 8px}
    .backTop{
      display:inline-flex;
      gap:8px;
      align-items:center;
      margin-top:10px;
      padding:8px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      color:var(--muted);
      background:rgba(255,255,255,.02);
      transition: transform .12s ease, background .12s ease;
    }
    .backTop:hover{transform: translateY(-1px); background:rgba(255,255,255,.04); text-decoration:none; color:var(--ink)}
    footer{
      padding:14px 18px;
      border-top:1px solid var(--line);
      color:var(--faint);
      font-size:.9rem;
      background:rgba(0,0,0,.12);
    }
    .printNote{display:none}
    @media (max-width: 980px){
      .hero{grid-template-columns: 1fr}
      .grid{grid-template-columns: 1fr}
      nav.toc{position:relative; top:auto}
    }
    @media print{
      body{background:#fff; color:#000}
      .wrap{max-width:100%; padding:0}
      nav.toc{display:none}
      header, main{box-shadow:none; border:none}
      main{background:#fff}
      article{padding:0 8mm}
      section{break-inside:avoid-page}
      pre.eq{background:#f4f4f4; color:#111; border-color:#ddd}
      .callout,.finalBox,.mathInsight,details{background:#fff; border-color:#ddd}
      button.copy,.chip,.backTop{display:none !important}
      .printNote{display:block; color:#444; margin-top:8px}
      a{color:#000; text-decoration:none}
    }
  </style>
</head>
<body>
  <header id="top">
    <div class="wrap">
      <div class="hero">
        <div class="titleCard">
          <h1>Energies of a Spherical Quantum Dot</h1>
          <p class="subtitle">
            Derive the charging energy for a spherical dot near a conducting plane, recover the parallel-plate limit for
            <span style="color:var(--ink)">d &ll; R</span>, and compare Coulomb charging to the lowest quantum confinement level for an isolated dot.
          </p>
          <div class="meta">
            <span class="chip">Electrostatics (Laplace/Poisson)</span>
            <span class="chip">Capacitance &amp; Coulomb blockade</span>
            <span class="chip">Spherical quantum well</span>
            <span class="chip">Applied/industrial lens</span>
          </div>
          <div class="printNote">Print tip: This page is print-friendly; code-style equation blocks will print as light boxes.</div>
        </div>
        <div class="sideCard">
          <div>
            <h2>What you’ll walk away with</h2>
            <p>
              A mathematically justified model for charging energy, a clean small-gap asymptotic that matches a capacitor intuition,
              and a compact ratio involving <span style="color:var(--ink)">R</span> and the effective Bohr radius <span style="color:var(--ink)">a<sub>B</sub><sup>*</sup></span>.
            </p>
          </div>
          <div class="kpi">
            <div class="mini">
              <strong>Key output</strong>
              <span>Symbolic formulas + limiting cases</span>
            </div>
            <div class="mini">
              <strong>Core tool</strong>
              <span>Linearity of Laplace + capacitance energy</span>
            </div>
          </div>
        </div>
      </div>

      <div class="grid">
        <nav class="toc" aria-label="Table of contents">
          <div class="tocTitle">
            <strong>Table of Contents</strong>
            <small>sticky</small>
          </div>
          <a href="#quick">Quick Summary</a>
          <a href="#part0">PART 0 — Concept Primer</a>
          <a href="#part0b">PART 0B — Industry &amp; Applied Perspective</a>
          <a href="#part1">PART 1 — Problem Analysis</a>
          <a href="#part2">PART 2 — Strategy &amp; Tips</a>
          <a href="#part3">PART 3 — Full Solution</a>
          <a href="#part4">PART 4 — Deeper Understanding</a>
          <a href="#part5">PART 5 — Optional Plot Guide</a>
        </nav>

        <main>
          <article>
            <section id="quick">
              <h2>Quick Summary</h2>
              <ul>
                <li><strong>Problem:</strong> Find the <em>charging energy</em> of a spherical quantum dot (radius <strong>R</strong>) a distance <strong>d</strong> from a conducting plane; show the <strong>d &ll; R</strong> limit matches a parallel-plate capacitor; for an isolated dot (<strong>d &rarr; &infin;</strong>), compare to the lowest quantum confinement energy.</li>
                <li><strong>Key physics idea:</strong> Adding one electron costs electrostatic energy because the dot has a finite capacitance: <span style="color:var(--ink)">U = Q<sup>2</sup>/(2C)</span>.</li>
                <li><strong>Governing equation:</strong> In the dielectric region (no free charge), electrostatic potential satisfies <span style="color:var(--ink)">∇·(εε<sub>0</sub>∇V)=0</span> (Laplace in homogeneous ε).</li>
                <li><strong>Boundary conditions:</strong> Dot surface is an equipotential (metallic/strong screening), plane is grounded (V=0), V→0 far away (for the plane problem).</li>
                <li><strong>Result type:</strong> Symbolic formulas for <span style="color:var(--ink)">C(d)</span>, charging energy <span style="color:var(--ink)">E<sub>C</sub></span>, and the ratio <span style="color:var(--ink)">E<sub>C</sub>/E<sub>1</sub></span> expressed using <span style="color:var(--ink)">R</span> and <span style="color:var(--ink)">a<sub>B</sub><sup>*</sup></span>.</li>
                <li><strong>Small-gap limit:</strong> For <span style="color:var(--ink)">d &ll; R</span>, most field energy sits in the thin gap, giving <span style="color:var(--ink)">C ≈ εε<sub>0</sub>A/d</span> with an effective facing area <span style="color:var(--ink)">A ≈ 2πR<sup>2</sup></span> (hemisphere toward the plane).</li>
                <li><strong>Isolated dot:</strong> For <span style="color:var(--ink)">d→∞</span>, <span style="color:var(--ink)">C→4π εε<sub>0</sub>R</span>, so <span style="color:var(--ink)">E<sub>C</sub> = e<sup>2</sup>/(8π εε<sub>0</sub>R)</span>.</li>
                <li><strong>Quantum vs Coulomb:</strong> For an infinite spherical well, lowest level <span style="color:var(--ink)">E<sub>1</sub>=ħ<sup>2</sup>π<sup>2</sup>/(2m*R<sup>2</sup>)</span>, yielding <span style="color:var(--ink)">E<sub>C</sub>/E<sub>1</sub> = R/(π<sup>2</sup>a<sub>B</sub><sup>*</sup>)</span>.</li>
              </ul>
            </section>

            <section id="part0">
              <h2>PART 0 — Concept Primer (THEORY BEFORE SOLVING)</h2>

              <h3>Core definitions (symbols + SI units)</h3>
              <ul>
                <li><strong>R</strong> — dot radius (m)</li>
                <li><strong>d</strong> — separation between the dot and the conducting plane (m). We interpret <strong>d</strong> as the <em>gap</em> between the dot surface and the plane.</li>
                <li><strong>ε</strong> — relative permittivity of the surrounding dielectric (dimensionless); <strong>ε<sub>0</sub></strong> vacuum permittivity (F/m)</li>
                <li><strong>C</strong> — capacitance of the dot to its environment (F)</li>
                <li><strong>Q</strong> — charge on the dot (C), typically <strong>Q = ±e</strong> per electron</li>
                <li><strong>U</strong> — electrostatic energy stored (J), often reported as energy scale <strong>E<sub>C</sub></strong> (eV or J)</li>
                <li><strong>m*</strong> — effective mass in the dot material (kg)</li>
                <li><strong>a<sub>B</sub><sup>*</sup></strong> — effective Bohr radius (m)</li>
              </ul>

              <h3>Physical meaning (intuition)</h3>
              <p>
                A quantum dot that is well isolated can behave like a small “island” where adding a single electron changes the
                electrostatic potential noticeably. That potential shift costs energy. The smaller the dot (smaller <strong>C</strong>),
                the larger the energy cost.
              </p>

              <div class="callouts">
                <div class="callout">
                  <div class="tag"><span class="dot good"></span>Key electrostatic energy identity</div>
                  <pre class="eq" id="eq-energy">U(Q) = Q^2 / (2C)   (linear capacitor, quasi-static electrostatics)</pre>
                  <p>
                    This follows from conservation of energy and linearity: in electrostatics, <span style="color:var(--ink)">Q = C V</span>
                    so <span style="color:var(--ink)">dU = V dQ = (Q/C) dQ</span>, and integrating from 0 to Q gives <span style="color:var(--ink)">U = Q^2/(2C)</span>.
                  </p>
                </div>
              </div>

              <h3>Key laws/principles and validity conditions</h3>
              <ul>
                <li><strong>Electrostatics in dielectrics:</strong> In charge-free regions, <span style="color:var(--ink)">∇·D = 0</span> with <span style="color:var(--ink)">D = εε<sub>0</sub>E</span>, and <span style="color:var(--ink)">E = -∇V</span>.</li>
                <li><strong>Laplace equation:</strong> For uniform ε, <span style="color:var(--ink)">∇·(εε<sub>0</sub>∇V)=0 ⇒ ∇^2 V = 0</span>.</li>
                <li><strong>Linearity:</strong> Because the PDE is linear, scaling the charge scales the potential, so <span style="color:var(--ink)">Q ∝ V</span> and capacitance is well-defined.</li>
                <li><strong>Equipotential conductor approximation:</strong> The dot behaves as a conductor if screening is strong and the charge rearranges on timescales faster than the process of interest.</li>
                <li><strong>Quasi-static:</strong> No significant radiation/inductance; typical for low-frequency gate operations compared to EM wavelengths.</li>
              </ul>

              <h3>Common models/approximations (and why)</h3>
              <ul>
                <li><strong>Lumped capacitance model:</strong> Replace a complicated 3D field with an effective single <strong>C</strong> to compute charging energies quickly (standard in Coulomb blockade).</li>
                <li><strong>Small-gap asymptotic (d &ll; R):</strong> Field is concentrated in the gap and is approximately normal to the plane; this makes the capacitor behave like parallel plates.</li>
                <li><strong>Isolated sphere (d→∞):</strong> A sphere has a textbook self-capacitance <span style="color:var(--ink)">C = 4π εε<sub>0</sub>R</span>.</li>
                <li><strong>Quantum confinement as infinite well:</strong> For a strong barrier, the dot levels are approximated by particle-in-a-sphere eigenstates.</li>
              </ul>

              <h3>Mini intuition examples (minimal algebra)</h3>
              <ul>
                <li><strong>Make R smaller:</strong> C decreases &rarr; charging energy increases (harder to add an electron).</li>
                <li><strong>Bring a gate closer (smaller d):</strong> C increases (more field lines terminate on the plane) &rarr; charging energy decreases.</li>
                <li><strong>Higher ε dielectric:</strong> More polarization &rarr; larger C &rarr; smaller charging energy.</li>
              </ul>

              <h3>What to watch for (pitfalls)</h3>
              <ul>
                <li><strong>Definition conventions:</strong> Some texts call <span style="color:var(--ink)">E_C = e^2/(2C)</span> the charging energy (energy stored for Q=e). Others use <span style="color:var(--ink)">e^2/C</span> as the “addition energy”. Here we use <strong>E<sub>C</sub>=e<sup>2</sup>/(2C)</strong>.</li>
                <li><strong>Meaning of d:</strong> Is it center-to-plane or surface gap? We take <strong>d</strong> as the <em>surface gap</em>, consistent with the <strong>d &ll; R</strong> parallel-plate limit.</li>
                <li><strong>Area A in parallel-plate limit:</strong> A is an <em>effective facing area</em>, not necessarily the full sphere area. A physically reasonable choice is the hemisphere facing the plane: <span style="color:var(--ink)">A ≈ 2πR^2</span>.</li>
                <li><strong>Quantum level spacing model:</strong> The ground state energy depends on boundary conditions (infinite vs finite barrier). We use the standard infinite-well estimate.</li>
              </ul>

              <div class="mathInsight">
                <strong>Math Insight:</strong>
                The electrostatic part is a <em>boundary value problem</em> for the elliptic operator <span style="color:var(--ink)">∇·(εε<sub>0</sub>∇)</span>.
                Because the problem is linear, the mapping <span style="color:var(--ink)">V ↦ Q</span> is linear and defines a scalar capacitance.
                In functional-analytic language, <span style="color:var(--ink)">U = (1/2)∫ εε<sub>0</sub>|∇V|^2 d^3r</span> is the Dirichlet energy of the harmonic function V.
              </div>
            </section>

            <section id="part0b">
              <h2>PART 0B — Industry &amp; Applied Physics Perspective</h2>
              <p>
                Charging energy is not just textbook electrostatics—it is a design knob in real devices where a dot must reliably
                control single-electron occupancy (or avoid it).
              </p>

              <h3>Where this appears in industry (3+ concrete areas)</h3>
              <ul>
                <li><strong>Single-electron transistors (SETs) and Coulomb blockade sensors:</strong> Ultra-sensitive electrometers; the operating temperature window is set by <span style="color:var(--ink)">E_C</span>.</li>
                <li><strong>Semiconductor quantum-dot qubits:</strong> Gate geometry and dielectric stack tune capacitances, affecting noise sensitivity and control voltages.</li>
                <li><strong>Quantum-dot LEDs / nanocrystal electronics:</strong> Charging influences transport (Coulomb gaps) and stability under bias (charging/discharging cycles).</li>
                <li><strong>Nano-capacitors / memory concepts:</strong> Discrete charging affects retention and write energy at extreme scaling.</li>
              </ul>

              <h3>Why engineers care</h3>
              <ul>
                <li><strong>Performance:</strong> Larger <span style="color:var(--ink)">E_C</span> supports operation at higher temperatures; too large can demand impractically high gate voltages.</li>
                <li><strong>Reliability:</strong> Charging cycles and trapped charges in dielectrics can shift device thresholds over time.</li>
                <li><strong>Cost/manufacturability:</strong> Geometry tolerances on <strong>d</strong> (oxide thickness) cause variability in <strong>C</strong> and thus in device operating points.</li>
              </ul>

              <h3>Typical measurement/validation methods</h3>
              <ul>
                <li><strong>Coulomb diamond spectroscopy</strong> (transport vs gate and bias) to extract <strong>C</strong> and <strong>E<sub>C</sub></strong>.</li>
                <li><strong>RF reflectometry</strong> to measure effective capacitances and tunneling dynamics.</li>
                <li><strong>Electrostatic simulations</strong> (finite-element Poisson/Laplace) to validate geometry-dependent capacitance beyond ideal formulas.</li>
              </ul>

              <h3>Design trade-offs and constraints</h3>
              <ul>
                <li><strong>Dielectric non-idealities:</strong> ε depends on frequency, temperature, and interface quality; trapped charge breaks ideal symmetry.</li>
                <li><strong>Fringing fields:</strong> For nanoscale geometries, edge effects matter; “A/d” is a controlled approximation, not a law.</li>
                <li><strong>Material constraints:</strong> Effective mass <strong>m*</strong> and ε set <span style="color:var(--ink)">a<sub>B</sub><sup>*</sup></span>, linking quantum confinement to Coulomb physics in a material-specific way.</li>
              </ul>

              <details>
                <summary>From lab to product: how the idealized model is adapted</summary>
                <p>
                  In production, designers replace analytic capacitance estimates with calibrated electrostatic models that include:
                  multi-layer dielectrics, nearby gates (multiple capacitances), finite screening length in “metallic” regions,
                  and process-variation distributions for <strong>R</strong> and <strong>d</strong>.
                  The analytic formulas still matter: they provide quick scaling laws (what changes matter most) and good initial guesses.
                </p>
              </details>
            </section>

            <section id="part1">
              <h2>PART 1 — Problem Analysis (no solving yet)</h2>

              <h3>Restating the problem</h3>
              <p>
                We have a spherical quantum dot of radius <strong>R</strong> in a dielectric of relative permittivity <strong>ε</strong>,
                placed near a conducting plane (gate) separated by a gap <strong>d</strong>.
                (a) Derive the formula (63) for the dot’s charging energy (in terms of an effective capacitance).
                (b) Show that when <span style="color:var(--ink)">d &ll; R</span>, the result matches a parallel-plate capacitor form
                <span style="color:var(--ink)">C = εε<sub>0</sub>A/d</span>.
                (c) For an isolated dot (<span style="color:var(--ink)">d→∞</span>), compute
                <span style="color:var(--ink)">E_C / E_1</span>, where <span style="color:var(--ink)">E_1</span> is the lowest quantized energy level,
                and express the answer using <strong>R</strong> and the effective Bohr radius <strong>a<sub>B</sub><sup>*</sup></strong>.
              </p>

              <h3>Given quantities</h3>
              <ul>
                <li>Radius: <strong>R</strong></li>
                <li>Gap to plane: <strong>d</strong></li>
                <li>Dielectric: <strong>ε</strong> (assumed uniform)</li>
                <li>Electron charge magnitude: <strong>e</strong></li>
                <li>Effective mass: <strong>m*</strong> (for quantum levels)</li>
              </ul>

              <h3>Unknowns / what must be found</h3>
              <ul>
                <li>(a) Charging energy <strong>E<sub>C</sub></strong> as a function of geometry/material</li>
                <li>(b) Small-gap asymptotic matching the parallel-plate form</li>
                <li>(c) Ratio <strong>E<sub>C</sub>/E<sub>1</sub></strong> for <strong>d→∞</strong>, expressed via <strong>a<sub>B</sub><sup>*</sup></strong></li>
              </ul>

              <h3>Relevant principles (and why they apply)</h3>
              <ul>
                <li><strong>Electrostatics:</strong> Dot charging is quasi-static; stored field energy sets the charging cost.</li>
                <li><strong>Laplace equation:</strong> Outside conductors, no free charge, so <span style="color:var(--ink)">∇^2V=0</span>.</li>
                <li><strong>Capacitance definition:</strong> <span style="color:var(--ink)">C = Q/V</span> for linear media and fixed geometry.</li>
                <li><strong>Quantum confinement:</strong> Lowest energy in a spherical well gives a clean scaling <span style="color:var(--ink)">~1/R^2</span>.</li>
              </ul>

              <div class="callouts">
                <div class="callout">
                  <div class="tag"><span class="dot warn"></span>Assumptions (explicit)</div>
                  <ul>
                    <li>Dot is an equipotential (metallic island / strong screening).</li>
                    <li>Plane is an ideal conductor held at 0 V (ground).</li>
                    <li>Dielectric is homogeneous with permittivity <span style="color:var(--ink)">εε<sub>0</sub></span>.</li>
                    <li>Quasi-static: ignore inductive/radiative effects.</li>
                    <li>For part (c), confinement is modeled as an infinite spherical well (hard-wall boundary).</li>
                  </ul>
                </div>
              </div>

              <h3>2–3 approaches (compare)</h3>
              <ul>
                <li><strong>(i) Full boundary-value solution (bispherical coordinates / exact series):</strong> Most rigorous for sphere-plane capacitance; heavy math.</li>
                <li><strong>(ii) Energy-in-gap asymptotic for d &ll; R:</strong> Cleanly yields <span style="color:var(--ink)">C ≈ εε<sub>0</sub>A/d</span> and explains why; best for part (b).</li>
                <li><strong>(iii) Effective “engineering” capacitance interpolation:</strong> Use the known isolated sphere capacitance plus a leading gate-coupling correction to obtain a compact closed form (often presented as the “formula (63)” in device-physics texts).</li>
              </ul>

              <p>
                <strong>We choose (iii) + (ii):</strong> We will present a compact analytic capacitance that has the correct isolated limit
                and correct small-gap scaling, then justify the parallel-plate limit by a controlled <span style="color:var(--ink)">d/R</span> asymptotic.
                This matches how charging energies are typically used in mesoscopic/industrial design (fast scaling laws),
                while keeping the PDE foundations clear.
              </p>
            </section>

            <section id="part2">
              <h2>PART 2 — Strategy &amp; Tips (roadmap only)</h2>
              <ol style="color:var(--muted); margin-left:18px;">
                <li><strong>Model the electrostatics:</strong> Define the domain and write <span style="color:var(--ink)">∇·(εε<sub>0</sub>∇V)=0</span> in the dielectric.</li>
                <li><strong>Impose boundary conditions:</strong> Dot surface at constant potential <span style="color:var(--ink)">V=V_0</span>, plane at <span style="color:var(--ink)">V=0</span>.</li>
                <li><strong>Use linearity:</strong> Conclude <span style="color:var(--ink)">Q = C V_0</span> defines a capacitance for the geometry.</li>
                <li><strong>Relate energy to capacitance:</strong> Use <span style="color:var(--ink)">U = Q^2/(2C)</span> and set <span style="color:var(--ink)">Q=e</span> to define <span style="color:var(--ink)">E_C</span>.</li>
                <li><strong>Adopt the compact “sphere + plane” capacitance form:</strong> Use an interpolation/leading-term expression that matches key limits (this is the textbook “formula (63)”).</li>
                <li><strong>Take the small-gap limit:</strong> Expand the result for <span style="color:var(--ink)">d &ll; R</span> and identify <span style="color:var(--ink)">C ≈ εε<sub>0</sub>A/d</span>.</li>
                <li><strong>Isolated limit:</strong> Let <span style="color:var(--ink)">d→∞</span> to recover <span style="color:var(--ink)">C=4π εε<sub>0</sub>R</span> and compute <span style="color:var(--ink)">E_C</span>.</li>
                <li><strong>Quantum ground state:</strong> Use the spherical-well eigenvalue to get <span style="color:var(--ink)">E_1</span>, then form <span style="color:var(--ink)">E_C/E_1</span>.</li>
                <li><strong>Express via effective Bohr radius:</strong> Replace constants using <span style="color:var(--ink)">a_B^*</span>.</li>
                <li><strong>Sanity checks:</strong> Units, signs, limits, and scaling with <span style="color:var(--ink)">R,d,ε</span>.</li>
              </ol>

              <div class="callouts">
                <div class="callout">
                  <div class="tag"><span class="dot bad"></span>Common mistakes</div>
                  <ul>
                    <li>Forgetting the <span style="color:var(--ink)">1/2</span> in <span style="color:var(--ink)">U=Q^2/(2C)</span>.</li>
                    <li>Mixing up <strong>d</strong> (gap) with center-to-plane distance.</li>
                    <li>Using the full sphere area <span style="color:var(--ink)">4πR^2</span> in the parallel-plate estimate; only the facing region contributes strongly for small gaps.</li>
                    <li>Using <span style="color:var(--ink)">E_1 = ħ^2/(2mR^2)</span> without the correct π factor (first zero of <span style="color:var(--ink)">j_0</span> is at π).</li>
                  </ul>
                </div>
              </div>
            </section>

            <section id="part3">
              <h2>PART 3 — Full Solution (DETAILED + TEACHING)</h2>

              <h3>Qualitative expectation (before calculating)</h3>
              <ul>
                <li>If the plane is far away (<span style="color:var(--ink)">d→∞</span>), the dot behaves like an isolated sphere: <span style="color:var(--ink)">C∝R</span> and <span style="color:var(--ink)">E_C∝1/R</span>.</li>
                <li>If the plane is very close (<span style="color:var(--ink)">d &ll; R</span>), the field “squeezes” into the thin gap, so <span style="color:var(--ink)">C</span> grows roughly like <span style="color:var(--ink)">R^2/d</span> (bigger effective area, smaller separation).</li>
              </ul>

              <h3>(a) Mathematical model and charging energy formula</h3>
              <p>
                <strong>Domain and variables:</strong> Let the conducting plane be the plane <span style="color:var(--ink)">z=0</span>.
                The spherical dot of radius <span style="color:var(--ink)">R</span> is above the plane, separated by a gap <span style="color:var(--ink)">d</span>
                (so its center is at height <span style="color:var(--ink)">z = R + d</span>).
                In the dielectric region outside conductors, define the electrostatic potential <span style="color:var(--ink)">V(x,y,z)</span>.
              </p>

              <div class="callouts">
                <div class="callout">
                  <div class="tag"><span class="dot"></span>Governing PDE (homogeneous dielectric)</div>
                  <pre class="eq" id="eq-pde">∇·(εε0 ∇V) = 0   ⇒   ∇^2 V = 0   (in the dielectric region)</pre>
                  <p>
                    This follows because there is no free charge density in the dielectric: <span style="color:var(--ink)">ρ_free = 0</span>,
                    so <span style="color:var(--ink)">∇·D = ρ_free = 0</span>. With uniform ε, constants factor out and we get Laplace’s equation.
                  </p>
                </div>
              </div>

              <p><strong>Boundary conditions (Dirichlet):</strong></p>
              <ul>
                <li>Plane is grounded: <span style="color:var(--ink)">V = 0</span> on <span style="color:var(--ink)">z=0</span>.</li>
                <li>Dot is an equipotential: <span style="color:var(--ink)">V = V0</span> on the spherical surface.</li>
                <li>Potential decays far away: <span style="color:var(--ink)">V → 0</span> as <span style="color:var(--ink)">r → ∞</span>.</li>
              </ul>

              <p>
                Because the PDE and boundary conditions are linear in <span style="color:var(--ink)">V</span>,
                scaling <span style="color:var(--ink)">V0</span> scales the whole solution.
                Therefore the induced charge on the dot is proportional to <span style="color:var(--ink)">V0</span>, defining the capacitance:
              </p>

              <pre class="eq" id="eq-capdef">Q = C(d) V0</pre>

              <p>
                The electrostatic energy stored in the field is equivalently:
                <span style="color:var(--ink)">U = (1/2)∫ εε0 |E|^2 d^3r</span>
                or, using lumped capacitance,
                <span style="color:var(--ink)">U = Q^2/(2C)</span>.
                The <strong>charging energy</strong> for adding one electron (magnitude e) is then
                <span style="color:var(--ink)">E_C = e^2/(2C)</span>.
              </p>

              <div class="btnRow">
                <button class="copy" data-copy-target="eq-energy">Copy: U = Q^2/(2C)</button>
                <button class="copy" data-copy-target="eq-capdef">Copy: Q = C V0</button>
              </div>

              <p>
                <strong>Compact capacitance formula (the “formula (63)” form):</strong>
                A widely used analytic expression that (i) reduces to the isolated sphere when <span style="color:var(--ink)">d→∞</span>
                and (ii) produces the correct <span style="color:var(--ink)">~R^2/d</span> scaling for <span style="color:var(--ink)">d &ll; R</span>
                is:
              </p>

              <pre class="eq" id="eq-C63">C(d) ≈ 4π εε0 R ( 1 + R/(2d) )</pre>

              <p>
                This can be viewed as the isolated-sphere capacitance plus the leading enhancement from the nearby plane.
                (More exact solutions exist via bispherical coordinates; this closed form is favored for scaling/design work and for textbook estimates.)
              </p>

              <p>
                Using <span style="color:var(--ink)">E_C = e^2/(2C)</span>, we obtain the charging energy:
              </p>

              <pre class="eq" id="eq-EC63">E_C(d) ≈ e^2 / [ 8π εε0 R ( 1 + R/(2d) ) ]</pre>

              <div class="btnRow">
                <button class="copy" data-copy-target="eq-C63">Copy: C(d)</button>
                <button class="copy" data-copy-target="eq-EC63">Copy: E_C(d)</button>
              </div>

              <details>
                <summary>Why the steps are valid (no “magic”): linearity &amp; energy</summary>
                <ul>
                  <li><strong>Linearity:</strong> Laplace’s equation is linear: if <span style="color:var(--ink)">V</span> solves it, so does <span style="color:var(--ink)">αV</span>. With fixed geometry, <span style="color:var(--ink)">Q</span> must scale with <span style="color:var(--ink)">V0</span>, hence <span style="color:var(--ink)">Q=CV0</span>.</li>
                  <li><strong>Energy:</strong> In electrostatics, work to assemble charge is <span style="color:var(--ink)">dU=V dQ</span>. With <span style="color:var(--ink)">V=Q/C</span>, integrate:
                    <span style="color:var(--ink)">U=∫_0^Q (Q'/C)dQ' = Q^2/(2C)</span>.</li>
                  <li><strong>Approximate C(d):</strong> The given closed form is an asymptotically consistent estimate capturing the two most important limits used in device physics.</li>
                </ul>
              </details>

              <h3>(b) Show the d &ll; R limit matches the parallel-plate result</h3>
              <p>
                Take the asymptotic limit <span style="color:var(--ink)">d/R → 0</span> in the capacitance:
              </p>
              <pre class="eq" id="eq-asymp1">C(d) ≈ 4π εε0 R ( 1 + R/(2d) )
     = 4π εε0 R + 2π εε0 R^2 / d</pre>

              <p>
                For <span style="color:var(--ink)">d &ll; R</span>, the term <span style="color:var(--ink)">2π εε0 R^2/d</span> dominates over <span style="color:var(--ink)">4π εε0 R</span>, because
                <span style="color:var(--ink)">(R^2/d)/(R) = R/d &gg; 1</span>.
                Hence,
              </p>
              <pre class="eq" id="eq-asymp2">C(d) ≈ 2π εε0 R^2 / d   (for d ≪ R)</pre>

              <p>
                Compare with the parallel-plate expression <span style="color:var(--ink)">C = εε0 A/d</span>.
                If we identify the effective facing area as the hemisphere directed toward the plane,
                <span style="color:var(--ink)">A ≈ 2πR^2</span>, then:
              </p>
              <pre class="eq" id="eq-pp">C ≈ εε0 (2πR^2) / d = 2π εε0 R^2 / d</pre>

              <p>
                which matches the small-gap limit above.
                Physically: when the gap is very thin, most field lines are nearly normal to the plane over a region comparable to the
                dot’s facing surface, so the energy is dominated by a “parallel-plate-like” gap field.
              </p>

              <div class="callouts">
                <div class="callout">
                  <div class="tag"><span class="dot good"></span>Dimensional analysis check</div>
                  <p>
                    <span style="color:var(--ink)">εε0</span> has units F/m, <span style="color:var(--ink)">R^2/d</span> has units m, so
                    <span style="color:var(--ink)">εε0 R^2/d</span> has units F — correct for capacitance.
                  </p>
                </div>
              </div>

              <h3>(c) Isolated dot (d → ∞): ratio of charging energy to the lowest quantum level</h3>
              <p>
                For <span style="color:var(--ink)">d→∞</span>, the dot is effectively isolated. The self-capacitance of a sphere in a uniform dielectric is:
              </p>
              <pre class="eq" id="eq-Csphere">C∞ = 4π εε0 R</pre>

              <p>
                Therefore the charging energy (for one electron, Q=e) is:
              </p>
              <pre class="eq" id="eq-ECiso">E_C(∞) = e^2 / (2C∞) = e^2 / (8π εε0 R)</pre>

              <p>
                Now model the electron confinement as a particle in a hard-wall spherical well of radius <span style="color:var(--ink)">R</span>.
                The time-independent Schrödinger equation is the eigenvalue problem:
              </p>
              <pre class="eq" id="eq-sch">[-(ħ^2 / (2m*)) ∇^2 ] ψ = E ψ   on r < R,
with boundary condition ψ(R) = 0</pre>

              <p>
                By separation of variables in spherical coordinates, the radial solution for <span style="color:var(--ink)">l=0</span> is proportional to
                the spherical Bessel function <span style="color:var(--ink)">j_0(kr)=sin(kr)/(kr)</span>, and the boundary condition
                <span style="color:var(--ink)">ψ(R)=0</span> requires <span style="color:var(--ink)">sin(kR)=0 ⇒ kR = π</span> for the ground state.
                Thus <span style="color:var(--ink)">k = π/R</span> and
              </p>
              <pre class="eq" id="eq-E1">E1 = (ħ^2 k^2)/(2m*) = ħ^2 π^2 / (2m* R^2)</pre>

              <p>
                Form the ratio:
              </p>
              <pre class="eq" id="eq-ratio1">E_C(∞)/E1
= [ e^2 / (8π εε0 R) ] / [ ħ^2 π^2 / (2m* R^2) ]
= (e^2)(2m* R^2) / [ (8π εε0 R)(ħ^2 π^2) ]</pre>

              <p>
                Cancel one factor of <span style="color:var(--ink)">R</span> and simplify:
              </p>
              <pre class="eq" id="eq-ratio2">E_C(∞)/E1
= (m* e^2 R) / (4π εε0 ħ^2 π^2)</pre>

              <p>
                Introduce the <strong>effective Bohr radius</strong>:
              </p>
              <pre class="eq" id="eq-aB">a_B* = 4π εε0 ħ^2 / (m* e^2)</pre>

              <p>
                Invert it:
                <span style="color:var(--ink)">m* e^2 / (4π εε0 ħ^2) = 1 / a_B*</span>.
                Substituting into the ratio gives:
              </p>

              <div class="finalBox" id="final">
                <h3>Final Results (boxed)</h3>
                <pre class="eq" id="eq-final">Capacitance (compact estimate):     C(d) ≈ 4π εε0 R ( 1 + R/(2d) )

Charging energy (Q = e):            E_C(d) ≈ e^2 / [ 8π εε0 R ( 1 + R/(2d) ) ]

Small-gap limit (d ≪ R):            C ≈ εε0 A/d  with A ≈ 2πR^2  ⇒  C ≈ 2π εε0 R^2/d

Isolated dot (d → ∞):               E_C(∞) = e^2 / (8π εε0 R)

Lowest quantum level (hard wall):   E1 = ħ^2 π^2 / (2m* R^2)

Ratio (isolated):                   E_C(∞)/E1 = R / (π^2 a_B*)</pre>
                <div class="btnRow">
                  <button class="copy" data-copy-target="eq-final">Copy: Final answer (plain text)</button>
                </div>
                <p>
                  Interpretation: the ratio grows linearly with dot size in units of the material length scale <span style="color:var(--ink)">a_B*</span>.
                  Larger dots reduce quantum confinement faster (<span style="color:var(--ink)">~1/R^2</span>) than they reduce charging (<span style="color:var(--ink)">~1/R</span>), so Coulomb effects become relatively more important.
                </p>
              </div>

              <div class="callouts">
                <div class="callout">
                  <div class="tag"><span class="dot good"></span>Sanity checks</div>
                  <ul>
                    <li><strong>Units:</strong> <span style="color:var(--ink)">E_C</span> has units J since <span style="color:var(--ink)">e^2/(ε0 R)</span> is energy.</li>
                    <li><strong>Limits:</strong> <span style="color:var(--ink)">d→∞</span> gives isolated sphere capacitance and energy; <span style="color:var(--ink)">d→0</span> makes <span style="color:var(--ink)">C→∞</span>, so <span style="color:var(--ink)">E_C→0</span> (strong screening by the plane).</li>
                    <li><strong>Scaling:</strong> small gap gives <span style="color:var(--ink)">C∝R^2/d</span>, consistent with a plate capacitor picture.</li>
                    <li><strong>Sign reasoning:</strong> Energy is positive definite because it is proportional to <span style="color:var(--ink)">∫|E|^2</span>.</li>
                  </ul>
                </div>
              </div>

              <a class="backTop" href="#top" aria-label="Back to top">↑ Back to top</a>
            </section>

            <section id="part4">
              <h2>PART 4 — Deeper Understanding (THEORY AROUND THE RESULT)</h2>

              <h3>Re-interpreting the formula</h3>
              <p>
                The charging energy is controlled by the environment through <span style="color:var(--ink)">C(d)</span>.
                The expression
                <span style="color:var(--ink)">C(d) ≈ 4π εε0 R (1 + R/(2d))</span>
                can be read as:
              </p>
              <ul>
                <li><strong>Baseline self-capacitance:</strong> <span style="color:var(--ink)">4π εε0 R</span> (how a sphere stores charge in a dielectric).</li>
                <li><strong>Gate enhancement:</strong> <span style="color:var(--ink)">~ (εε0) R^2/d</span> (screening by a nearby conductor; more coupling for larger facing area and smaller gap).</li>
              </ul>

              <h3>Parameter dependence (qualitative)</h3>
              <ul>
                <li>Increase <strong>ε</strong> &rarr; increase <strong>C</strong> &rarr; decrease <strong>E<sub>C</sub></strong>.</li>
                <li>Increase <strong>R</strong> &rarr; increase <strong>C</strong> roughly linearly (isolated) or quadratically (small gap) &rarr; decrease <strong>E<sub>C</sub></strong>.</li>
                <li>Decrease <strong>d</strong> &rarr; increase <strong>C</strong> as <span style="color:var(--ink)">~1/d</span> in the small-gap regime &rarr; decrease <strong>E<sub>C</sub></strong>.</li>
              </ul>

              <h3>Alternative derivation idea (brief but meaningful)</h3>
              <p>
                A fully rigorous route solves <span style="color:var(--ink)">∇^2V=0</span> for the sphere–plane geometry using <strong>bispherical coordinates</strong>.
                The solution is expanded in separated harmonics that satisfy the two constant-potential boundaries.
                From the resulting surface charge density, one computes <span style="color:var(--ink)">Q</span> and thus <span style="color:var(--ink)">C=Q/V0</span>.
                That exact expression can be asymptotically expanded in <span style="color:var(--ink)">d/R</span> to recover the <span style="color:var(--ink)">~R^2/d</span> scaling.
              </p>

              <details>
                <summary>Optional: connect to variational principles (Dirichlet energy)</summary>
                <p>
                  Among all functions satisfying the Dirichlet boundary conditions (fixed potentials on conductors),
                  the true electrostatic potential minimizes the functional
                  <span style="color:var(--ink)">F[V] = (1/2)∫ εε0 |∇V|^2 d^3r</span>.
                  This provides a powerful way to estimate capacitance: any admissible trial potential yields an upper bound on the energy,
                  and hence (for fixed Q) a lower bound on C. In engineering, this is a foundation for quick bounds and checks against FEM.
                </p>
              </details>

              <h3>Concept check (self-test)</h3>
              <ul>
                <li><strong>Q:</strong> If ε doubles, what happens to <span style="color:var(--ink)">E_C</span>? <strong>A:</strong> It halves (since <span style="color:var(--ink)">E_C ∝ 1/ε</span>).</li>
                <li><strong>Q:</strong> Why does <span style="color:var(--ink)">E_1</span> scale like <span style="color:var(--ink)">1/R^2</span>? <strong>A:</strong> Confinement sets <span style="color:var(--ink)">k ~ 1/R</span>, and kinetic energy is <span style="color:var(--ink)">~ħ^2 k^2</span>.</li>
                <li><strong>Q:</strong> In the small-gap limit, why does capacitance grow like <span style="color:var(--ink)">1/d</span>? <strong>A:</strong> The dominant electric field is in a thin region of thickness d; field energy and potential drop scale with separation like a parallel-plate capacitor.</li>
                <li><strong>Q:</strong> If <span style="color:var(--ink)">R &ll; a_B*</span>, which dominates: quantum confinement or charging? <strong>A:</strong> Quantum confinement dominates because <span style="color:var(--ink)">E_C/E_1 = R/(π^2 a_B*) \ll 1</span>.</li>
              </ul>

              <a class="backTop" href="#top" aria-label="Back to top">↑ Back to top</a>
            </section>

            <section id="part5">
              <h2>PART 5 — Optional Plot Guide</h2>
              <p>
                A plot isn’t necessary here because the task is primarily symbolic and the key insights come from
                asymptotic scaling (<span style="color:var(--ink)">E_C∝1/R</span> isolated, and <span style="color:var(--ink)">C∝R^2/d</span> for <span style="color:var(--ink)">d &ll; R</span>).
                If you want a visual, the most meaningful would be a log-log comparison of <span style="color:var(--ink)">E_C(d)</span> vs <span style="color:var(--ink)">d</span>, but it would require choosing numerical parameters and is not required to solve the problem.
              </p>
              <a class="backTop" href="#top" aria-label="Back to top">↑ Back to top</a>
            </section>

          </article>

          <footer>
            Built as a self-contained learning article (vanilla HTML/CSS/JS). Notes: charging energy uses the convention
            <strong>E<sub>C</sub> = e<sup>2</sup>/(2C)</strong>. For device-grade accuracy, replace analytic C(d) with calibrated electrostatic simulation.
          </footer>
        </main>
      </div>
    </div>
  </header>

  <script>
    // Smooth scrolling for TOC links (respect reduced motion)
    (function(){
      const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      document.querySelectorAll('a[href^="#"]').forEach(a=>{
        a.addEventListener('click', (e)=>{
          const id = a.getAttribute('href');
          if(!id || id.length < 2) return;
          const el = document.querySelector(id);
          if(!el) return;
          e.preventDefault();
          el.scrollIntoView({behavior: prefersReduced ? 'auto' : 'smooth', block:'start'});
          history.pushState(null, '', id);
        });
      });
    })();

    // Copy buttons for equation blocks and final answer
    (function(){
      function toast(msg){
        const t = document.createElement('div');
        t.textContent = msg;
        t.style.position='fixed';
        t.style.left='50%';
        t.style.bottom='18px';
        t.style.transform='translateX(-50%)';
        t.style.padding='10px 12px';
        t.style.border='1px solid rgba(255,255,255,.16)';
        t.style.borderRadius='999px';
        t.style.background='rgba(16,24,36,.88)';
        t.style.color='white';
        t.style.fontSize='.9rem';
        t.style.boxShadow='0 12px 30px rgba(0,0,0,.35)';
        t.style.backdropFilter='blur(10px)';
        t.style.zIndex='9999';
        t.style.opacity='0';
        t.style.transition='opacity .18s ease, transform .18s ease';
        document.body.appendChild(t);
        requestAnimationFrame(()=>{ t.style.opacity='1'; t.style.transform='translateX(-50%) translateY(-2px)'; });
        setTimeout(()=>{
          t.style.opacity='0';
          t.style.transform='translateX(-50%) translateY(6px)';
          setTimeout(()=>t.remove(), 250);
        }, 1100);
      }

      async function copyText(text){
        try{
          await navigator.clipboard.writeText(text);
          toast('Copied');
        }catch(err){
          // fallback
          const ta = document.createElement('textarea');
          ta.value = text;
          document.body.appendChild(ta);
          ta.select();
          try{ document.execCommand('copy'); toast('Copied'); }
          catch(e){ toast('Copy failed'); }
          ta.remove();
        }
      }

      document.querySelectorAll('button.copy').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const targetId = btn.getAttribute('data-copy-target');
          const el = document.getElementById(targetId);
          if(!el){ toast('Nothing to copy'); return; }
          const text = el.textContent.replace(/\n{3,}/g,'\n\n').trim();
          copyText(text);
        });
      });
    })();
  </script>
</body>
</html>