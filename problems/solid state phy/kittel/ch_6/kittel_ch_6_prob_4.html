<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#0b0f14" />
  <title>Fermi Gases in Astrophysics: Sun, White Dwarfs, and Pulsars (Mathematically Rigorous)</title>
  <style>
    :root{
      --bg:#0b0f14;
      --panel:#111824;
      --panel2:#0f1520;
      --text:#e9eef6;
      --muted:#b7c3d6;
      --faint:#8ea0bb;
      --line:rgba(255,255,255,.10);
      --line2:rgba(255,255,255,.14);
      --accent:#6ee7ff;
      --accent2:#a78bfa;
      --good:#34d399;
      --warn:#fbbf24;
      --bad:#fb7185;
      --shadow: 0 12px 35px rgba(0,0,0,.35);
      --radius:18px;
      --radius2:24px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f7f9fd;
        --panel:#ffffff;
        --panel2:#f2f6ff;
        --text:#0c1420;
        --muted:#334a6b;
        --faint:#5a6f90;
        --line:rgba(12,20,32,.10);
        --line2:rgba(12,20,32,.14);
        --shadow: 0 10px 28px rgba(12,20,32,.10);
      }
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family:var(--sans);
      background: radial-gradient(1000px 600px at 20% -10%, rgba(110,231,255,.12), transparent 55%),
                  radial-gradient(900px 700px at 110% 10%, rgba(167,139,250,.12), transparent 55%),
                  var(--bg);
      color:var(--text);
      line-height:1.55;
    }
    a{color:inherit}
    .wrap{
      max-width:1180px;
      margin:0 auto;
      padding:28px 18px 90px;
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:18px;
    }
    header{
      grid-column: 1 / -1;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius: var(--radius2);
      padding:22px 20px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    header:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(700px 200px at 30% 0%, rgba(110,231,255,.20), transparent 60%),
                  radial-gradient(700px 200px at 80% 0%, rgba(167,139,250,.16), transparent 60%);
      pointer-events:none;
      filter: blur(2px);
      opacity:.9;
    }
    header > *{position:relative}
    .title{
      display:flex; flex-wrap:wrap; gap:10px 14px; align-items:baseline;
      margin:0 0 6px 0;
    }
    .title h1{
      margin:0;
      font-size: clamp(1.25rem, 1.2rem + 1.2vw, 2.05rem);
      letter-spacing:.2px;
    }
    .title .tag{
      font-size:.85rem;
      color:var(--muted);
      padding:5px 10px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      border-radius: 999px;
      backdrop-filter: blur(6px);
    }
    .sub{
      margin:0;
      color:var(--muted);
      max-width: 90ch;
    }

    /* Sticky TOC */
    nav{
      position: sticky;
      top:14px;
      align-self:start;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      padding:14px 14px 10px;
      overflow:hidden;
    }
    nav .toc-title{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      margin:0 0 10px 0;
    }
    nav h2{
      font-size:1rem;
      margin:0;
      letter-spacing:.2px;
    }
    .pill{
      font-size:.78rem;
      color:var(--faint);
      border:1px solid var(--line);
      border-radius:999px;
      padding:4px 10px;
      background: rgba(255,255,255,.03);
    }
    nav a{
      display:block;
      text-decoration:none;
      padding:8px 10px;
      border-radius:12px;
      color:var(--muted);
      border:1px solid transparent;
      transition: transform .18s ease, background .18s ease, border-color .18s ease;
    }
    nav a:hover{
      background: rgba(255,255,255,.06);
      border-color: var(--line);
      transform: translateY(-1px);
      color: var(--text);
    }
    nav a small{
      color:var(--faint);
      display:block;
      font-size:.78rem;
      margin-top:2px;
    }

    main{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      padding: 18px;
      overflow:hidden;
    }

    section{
      background: rgba(255,255,255,.02);
      border:1px solid var(--line);
      border-radius: var(--radius2);
      padding:16px;
      margin: 0 0 14px 0;
    }
    section h2{
      margin:0 0 10px 0;
      font-size:1.15rem;
      letter-spacing:.15px;
    }
    section h3{
      margin:14px 0 8px 0;
      font-size:1.02rem;
      letter-spacing:.12px;
      color: var(--text);
    }
    p{margin: 10px 0; color: var(--muted)}
    ul{margin: 10px 0 10px 22px; color:var(--muted)}
    li{margin:6px 0}
    .grid2{display:grid; grid-template-columns: 1fr 1fr; gap:12px}
    @media (max-width: 980px){
      .wrap{grid-template-columns: 1fr}
      nav{position:relative; top:auto}
      .grid2{grid-template-columns: 1fr}
    }

    .callouts{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin-top:10px;
    }
    @media (max-width: 820px){
      .callouts{grid-template-columns: 1fr}
    }
    .card{
      border:1px solid var(--line);
      border-radius: var(--radius);
      padding:12px 12px 10px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      position:relative;
      overflow:hidden;
    }
    .card:before{
      content:"";
      position:absolute; inset:-1px;
      background: radial-gradient(500px 150px at 0% 0%, rgba(110,231,255,.13), transparent 60%),
                  radial-gradient(500px 150px at 100% 0%, rgba(167,139,250,.11), transparent 60%);
      opacity:.65;
      pointer-events:none;
    }
    .card > *{position:relative}
    .card h4{margin:0 0 8px 0; font-size:.98rem}
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:.78rem;
      color:var(--faint);
      border:1px solid var(--line);
      border-radius:999px;
      padding:4px 10px;
      background: rgba(255,255,255,.03);
      margin-bottom:8px;
    }

    .eq{
      margin:10px 0;
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: rgba(0,0,0,.14);
      padding:10px;
      overflow:auto;
      position:relative;
    }
    @media (prefers-color-scheme: light){
      .eq{background: rgba(12,20,32,.04)}
    }
    .eq code{
      font-family: var(--mono);
      font-size: .92rem;
      color: var(--text);
      white-space: pre;
    }
    .eq .copyRow{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:8px;
    }
    .btn{
      appearance:none;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      color: var(--text);
      border-radius: 12px;
      padding: 7px 10px;
      font-size: .82rem;
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease, opacity .15s ease;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.07); border-color: var(--line2)}
    .btn:active{transform: translateY(0px); opacity:.85}
    .btn.small{padding:6px 9px; font-size:.78rem}
    .muted{color: var(--faint)}
    .kpi{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin-top:10px;
    }
    @media (max-width: 880px){ .kpi{grid-template-columns: 1fr} }
    .kpi .tile{
      border:1px solid var(--line);
      border-radius: var(--radius);
      padding:12px;
      background: rgba(255,255,255,.03);
    }
    .tile .label{color:var(--faint); font-size:.82rem}
    .tile .value{font-size:1.1rem; margin-top:4px; color:var(--text); font-family: var(--mono)}
    .tile .note{color:var(--muted); font-size:.85rem; margin-top:6px}

    details{
      border:1px dashed var(--line2);
      border-radius: var(--radius);
      padding:10px 12px;
      background: rgba(255,255,255,.02);
      margin: 10px 0;
    }
    summary{
      cursor:pointer;
      color:var(--text);
      font-weight:600;
    }
    .final{
      border: 1px solid rgba(110,231,255,.28);
      background: radial-gradient(800px 220px at 20% 0%, rgba(110,231,255,.14), transparent 62%),
                  rgba(255,255,255,.02);
      border-radius: var(--radius2);
      padding: 14px;
    }
    .final h3{margin-top:0}
    .hr{
      height:1px;
      background: var(--line);
      margin: 12px 0;
    }
    .backTop{
      display:inline-flex;
      align-items:center;
      gap:8px;
      text-decoration:none;
      color:var(--muted);
      border:1px solid var(--line);
      padding:8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.03);
      transition: transform .15s ease, background .15s ease;
    }
    .backTop:hover{transform: translateY(-1px); background: rgba(255,255,255,.06); color: var(--text)}
    figure{
      margin: 10px 0 0 0;
      border:1px solid var(--line);
      border-radius: var(--radius2);
      padding:10px;
      background: rgba(255,255,255,.02);
    }
    figcaption{
      color: var(--faint);
      font-size:.85rem;
      margin-top:8px;
    }

    footer{
      grid-column: 1 / -1;
      color: var(--faint);
      padding: 6px 2px 0;
      font-size:.9rem;
    }

    /* Print */
    @media print{
      body{background:#fff; color:#000}
      header, nav, main, section, figure{box-shadow:none !important}
      nav{display:none}
      .wrap{display:block; max-width:none}
      header{break-after:avoid; border-color:#ddd}
      section{break-inside:avoid; border-color:#ddd}
      .btn{display:none !important}
      a{color:#000; text-decoration:none}
      .eq{background:#fafafa}
    }
  </style>
</head>

<body id="top">
  <div class="wrap">
    <header>
      <div class="title">
        <h1>Fermi Gases in Astrophysics: Sun &rarr; White Dwarf &rarr; Pulsar</h1>
        <span class="tag">Degenerate Fermi gas • Relativistic limit • Rigorous math-physics</span>
      </div>
      <p class="sub">
        We estimate the electron count in the Sun, compute the electron Fermi energy if those electrons are packed into a white dwarf
        (radius 2×10<sup>9</sup> cm), derive the scaling &epsilon;<sub>F</sub> &propto; (N/V)<sup>1/3</sup> in the ultra-relativistic limit, and
        then show why packing the same electron number into a 10 km pulsar implies an enormous Fermi energy.
      </p>
    </header>

    <nav aria-label="Table of contents">
      <div class="toc-title">
        <h2>Table of Contents</h2>
        <span class="pill">Sticky</span>
      </div>
      <a href="#quick">Quick Summary<small>What, equations, results</small></a>
      <a href="#primer">PART 0 — Concept Primer<small>Degeneracy, DOS, assumptions</small></a>
      <a href="#industry">PART 0B — Industry & Applied Physics<small>Why engineers care</small></a>
      <a href="#analysis">PART 1 — Problem Analysis<small>Given/unknowns/approach</small></a>
      <a href="#strategy">PART 2 — Strategy & Tips<small>Roadmap + mistakes</small></a>
      <a href="#solution">PART 3 — Full Solution<small>Step-by-step derivation</small></a>
      <a href="#deeper">PART 4 — Deeper Understanding<small>Interpretation + checks</small></a>
      <a href="#plot">PART 5 — Optional Plot Guide<small>One plot + reading it</small></a>
      <a href="#end">Back to Top Link<small>Quick navigation</small></a>
    </nav>

    <main>
      <section id="quick">
        <h2>Quick Summary</h2>
        <ul>
          <li><strong>What this is:</strong> estimate electron count in the Sun and compute <em>degenerate</em> electron Fermi energies when packed into compact stars.</li>
          <li><strong>Key physics idea:</strong> Pauli exclusion fills momentum states up to a Fermi momentum p<sub>F</sub>; at T≈0, all states below are occupied.</li>
          <li><strong>Governing model:</strong> free-fermion Hamiltonian H = √(p²c² + m²c⁴); with p operator <code>-iħ∇</code> and periodic boundary conditions in a volume V.</li>
          <li><strong>Counting states (spin-½):</strong> N = 2·V/(2π)³ ∫<sub>|k|≤kF</sub> d³k = V k<sub>F</sub>³/(3π²).</li>
          <li><strong>Ultra-relativistic relation:</strong> ε = pc = ħck ⇒ ε<sub>F</sub> = ħc k<sub>F</sub> = ħc(3π²N/V)<sup>1/3</sup> ≈ ħc (N/V)<sup>1/3</sup> (roughly).</li>
          <li><strong>Numerical results (order-of-magnitude):</strong>
            <ul>
              <li>Sun electrons: N<sub>e</sub> ≈ 1.2×10<sup>57</sup> (rough estimate).</li>
              <li>White dwarf R = 2×10<sup>9</sup> cm: ε<sub>F</sub> ≈ 2×10<sup>5</sup> eV (≈0.2 MeV).</li>
              <li>Pulsar R = 10 km: ε<sub>F</sub> ≈ 4×10<sup>8</sup> eV (hundreds of MeV), certainly &gt; 10<sup>5</sup> eV.</li>
            </ul>
          </li>
          <li><strong>Physical meaning:</strong> as V shrinks, density n=N/V rises, so ε<sub>F</sub> rises like n<sup>1/3</sup>; huge ε<sub>F</sub> in neutron stars suppresses electrons/protons in favor of neutrons (beta equilibrium).</li>
        </ul>

        <div class="kpi" aria-label="Key numeric outputs">
          <div class="tile">
            <div class="label">Estimated Sun electron count</div>
            <div class="value" id="kpiNe">Nₑ ≈ 1.20×10^57</div>
            <div class="note">Using M⊙ = 2×10^33 g and ≈1 electron per proton (rough).</div>
          </div>
          <div class="tile">
            <div class="label">White dwarf (R = 2×10^9 cm) Fermi energy</div>
            <div class="value" id="kpiWD">ε_F ≈ 2.01×10^5 eV</div>
            <div class="note">Ultra-relativistic estimate ε_F = ħc(3π²n)^(1/3).</div>
          </div>
          <div class="tile">
            <div class="label">Pulsar (R = 10 km) Fermi energy</div>
            <div class="value" id="kpiNS">ε_F ≈ 4.02×10^8 eV</div>
            <div class="note">Same N packed into far smaller V → ε_F increases ~ 2000×.</div>
          </div>
        </div>
      </section>

      <section id="primer">
        <h2>PART 0 — Concept Primer (Theory Before Solving)</h2>

        <div class="callouts">
          <div class="card">
            <div class="badge">Core definitions</div>
            <h4>Symbols (with SI units)</h4>
            <ul>
              <li>N: total number of electrons (dimensionless)</li>
              <li>V: volume (m³), n = N/V number density (m⁻³)</li>
              <li>k: wavevector (m⁻¹); p = ħk momentum (kg·m/s)</li>
              <li>k<sub>F</sub>: Fermi wavevector (m⁻¹); p<sub>F</sub>=ħk<sub>F</sub></li>
              <li>ε(p): single-particle energy (J or eV)</li>
              <li>ε<sub>F</sub>: Fermi energy (eV)</li>
              <li>ħ: reduced Planck constant; c: speed of light</li>
            </ul>
          </div>
          <div class="card">
            <div class="badge">Physical meaning</div>
            <h4>What “degeneracy pressure” really is</h4>
            <p>
              Even at T≈0, fermions cannot all sit at p=0. The exclusion principle forces occupation of distinct momentum states up to p<sub>F</sub>.
              The resulting large momenta imply large kinetic energy and an effective pressure that can support stars against gravity.
            </p>
            <p class="muted">
              Key intuition: making V smaller forces momentum-space filling outward, so p<sub>F</sub> rises.
            </p>
          </div>
        </div>

        <h3>Mathematical model (explicit)</h3>
        <p>
          We model electrons as an ideal (non-interacting) spin-½ Fermi gas at zero temperature (T→0). The many-body ground state is obtained by
          filling all one-particle eigenstates up to a Fermi surface in k-space.
        </p>

        <div class="eq" role="group" aria-label="Hamiltonian and operators">
          <div class="copyRow">
            <div class="muted"><strong>Key equations</strong> (operators, dispersion)</div>
            <button class="btn small copyEq" data-copy="p̂ = -iħ∇
H = sqrt(p̂^2 c^2 + m^2 c^4)
Ultra-relativistic (p >> mc): ε ≈ pc = ħck">Copy</button>
          </div>
          <code>p̂ = -iħ∇
H = √(p̂² c² + m² c⁴)
Ultra-relativistic (p ≫ mc): ε(p) ≈ pc = ħc k</code>
        </div>

        <p>
          <strong>Domain and coordinates:</strong> take a large cube Ω = [0,L]³ with volume V=L³ (or any region with volume V). Use Cartesian coordinates (x,y,z).
          Impose periodic boundary conditions ψ(x+L,y,z)=ψ(x,y,z) (and similarly in y,z). This makes the eigenfunctions plane waves and turns the counting
          of states into a clean lattice-counting problem in k-space.
        </p>
        <p>
          <strong>Boundary conditions (BC):</strong> periodic BC quantize wavevectors as k = (2π/L)(n<sub>x</sub>,n<sub>y</sub>,n<sub>z</sub>) with integers n<sub>i</sub>.
          Any other “box-like” BC leads to the same large-V density of states up to small surface corrections; for astrophysical order-of-magnitude estimates,
          periodic BC is the standard mathematically controlled choice.
        </p>

        <h3>Core principle: counting states via symmetry</h3>
        <p>
          Because the dispersion ε depends only on |k| (isotropic), the occupied region in k-space is a sphere of radius k<sub>F</sub>.
          This uses rotational symmetry in k-space (SO(3) invariance) of the free Hamiltonian.
        </p>

        <details>
          <summary>Optional note: why “free electron gas” is reasonable here</summary>
          <p>
            In white dwarfs and neutron star crusts, Coulomb interactions exist but (i) at high densities electrons are highly degenerate and have short
            de Broglie wavelengths; (ii) screening reduces long-range effects; (iii) for a first estimate, the leading-order scaling of ε<sub>F</sub> with n
            comes directly from Pauli filling and does not depend on detailed interactions. Interactions shift numerical prefactors but rarely change the n<sup>1/3</sup>
            scaling in the ultra-relativistic regime.
          </p>
        </details>

        <h3>What to watch for (pitfalls)</h3>
        <ul>
          <li><strong>Units:</strong> keep n in m⁻³ if you use ħc in eV·m; keep track when converting cm to m.</li>
          <li><strong>Regime check:</strong> ultra-relativistic requires p<sub>F</sub> ≫ m<sub>e</sub>c, i.e., ε<sub>F</sub> ≫ 511 keV.</li>
          <li><strong>“Fermi energy” definition:</strong> at T=0, it is the chemical potential μ(T=0)=ε<sub>F</sub>.</li>
          <li><strong>Composition details:</strong> the Sun is not pure H; N<sub>e</sub> changes by an O(1) factor (μ<sub>e</sub>)—acceptable for “estimate”.</li>
        </ul>

        <div class="card">
          <div class="badge">Math Insight</div>
          <h4>Core equation as a mathematical object</h4>
          <p>
            The relation <code>N = (V/(3π²)) k_F³</code> is essentially a <strong>volume-of-a-ball</strong> result in k-space (a geometric counting law)
            arising from the eigenvalue problem of the Laplacian:
            <code>(-∇²)ψ = k² ψ</code> with periodic BC (a spectral problem). The Fermi surface is the level set |k|=k<sub>F</sub>,
            and the ground state is a “filled spectral ball” up to that eigenvalue.
          </p>
        </div>
      </section>

      <section id="industry">
        <h2>PART 0B — Industry & Applied Physics Perspective</h2>
        <p>
          While neutron stars and white dwarfs are not “industrial devices,” the <em>same mathematical model</em> (degenerate Fermi gas, density of states,
          dispersion relations) is foundational across engineering and applied physics.
        </p>

        <div class="grid2">
          <div class="card">
            <div class="badge">Where it appears (3+ areas)</div>
            <h4>Concrete engineering/industry analogs</h4>
            <ul>
              <li><strong>Metals & semiconductor devices:</strong> electron Fermi energy sets carrier statistics, contact physics, and transport models.</li>
              <li><strong>High-pressure materials:</strong> equation-of-state models use Fermi-gas-like terms (electron degeneracy) in extreme compression (shock physics).</li>
              <li><strong>Plasma & fusion engineering:</strong> dense plasmas (inertial confinement, warm dense matter) require degeneracy corrections to pressure and conductivity.</li>
              <li><strong>Cryogenics & quantum materials:</strong> low-T heat capacity and thermal transport scale with the DOS at ε<sub>F</sub>.</li>
            </ul>
          </div>
          <div class="card">
            <div class="badge">Why engineers care</div>
            <h4>Performance, reliability, cost</h4>
            <ul>
              <li>Predicting <strong>pressure</strong>, <strong>compressibility</strong>, and <strong>stability</strong> in high-density systems (safety margins).</li>
              <li>Designing electronics where <strong>Fermi level alignment</strong> controls leakage, switching thresholds, and contact resistance.</li>
              <li>Model calibration: the n<sup>1/3</sup> scaling provides a <strong>robust sanity check</strong> when validating simulations or experiments.</li>
            </ul>
          </div>
        </div>

        <h3>Measurement/validation in practice (brief)</h3>
        <ul>
          <li>Solid-state: ARPES, Hall effect, quantum oscillations (Shubnikov–de Haas) probe ε<sub>F</sub> and DOS.</li>
          <li>Dense matter: shock compression + x-ray diagnostics; conductivity/opacity measurements constrain EOS models.</li>
          <li>Astrophysics (applied remote sensing): mass-radius observations and pulsar timing constrain degeneracy physics indirectly.</li>
        </ul>

        <h3>Design trade-offs and constraints</h3>
        <ul>
          <li>Real systems include interactions, band structure, disorder, and finite temperature: engineers add correction factors while keeping the core DOS/Pauli structure.</li>
          <li>Manufacturing tolerances: doping variability changes n, hence changes ε<sub>F</sub> and device behavior (threshold shifts, mobility changes).</li>
          <li>Model selection: choose non-relativistic vs relativistic dispersion depending on parameter regime (a classic scaling decision).</li>
        </ul>

        <details>
          <summary>From lab to product: how the ideal model gets adapted</summary>
          <p>
            Engineers typically keep the state-counting framework (k-space filling, DOS) but replace ε(k) with the relevant dispersion (e.g., effective mass band structure),
            include scattering via relaxation times, add electrostatics with Poisson’s equation (∇·(ε∇φ)=−ρ), and incorporate finite-T Fermi–Dirac integrals.
            The “Fermi sphere” becomes a “Fermi surface” shaped by anisotropy—yet the math is still spectral counting of eigenmodes.
          </p>
        </details>
      </section>

      <section id="analysis">
        <h2>PART 1 — Problem Analysis (No Solving Yet)</h2>

        <h3>Restatement (in my own words)</h3>
        <p>
          (a) Using M⊙ = 2×10<sup>33</sup> g, estimate how many electrons the Sun contains.
          (b) Put that many electrons into a white dwarf of radius R = 2×10<sup>9</sup> cm (assume uniform density) and compute the electron Fermi energy in eV.
          Use the relativistic relation ε = pc = ħck and show the rough scaling ε<sub>F</sub> ≈ ħc (N/V)<sup>1/3</sup>.
          (c) Put the same electron number into a pulsar of radius 10 km and show ε<sub>F</sub> would be enormous (problem text notes &gt;10<sup>5</sup> eV).
        </p>

        <h3>Given quantities</h3>
        <ul>
          <li>M⊙ = 2×10<sup>33</sup> g</li>
          <li>White dwarf radius R<sub>WD</sub> = 2×10<sup>9</sup> cm</li>
          <li>Pulsar radius R<sub>NS</sub> = 10 km</li>
          <li>Relativistic limit: ε = pc = ħck</li>
        </ul>

        <h3>Unknowns</h3>
        <ul>
          <li>N<sub>e,⊙</sub>: number of electrons in the Sun</li>
          <li>ε<sub>F,WD</sub> and ε<sub>F,NS</sub>: Fermi energies (eV)</li>
          <li>Scaling proof: ε<sub>F</sub> ∝ (N/V)<sup>1/3</sup> (with the (3π²)<sup>1/3</sup> prefactor)</li>
        </ul>

        <h3>Relevant principles (and why they apply)</h3>
        <ul>
          <li><strong>Quantum state counting:</strong> electrons are fermions with spin ½; at T≈0 they fill momentum states up to k<sub>F</sub>.</li>
          <li><strong>Isotropy/symmetry:</strong> free-particle dispersion depends on |k|, so occupied region in k-space is a sphere (symmetry argument).</li>
          <li><strong>Relativistic dispersion (approximation):</strong> use ε≈pc only as a modeling assumption; we will also check when it’s self-consistent.</li>
        </ul>

        <div class="card">
          <div class="badge">Assumptions (explicit)</div>
          <h4>Idealizations used</h4>
          <ul>
            <li>Uniform electron density: n = N/V with V = (4/3)πR³.</li>
            <li>Zero temperature (T→0): sharp Fermi surface; simplifies to pure geometry in k-space.</li>
            <li>Free-electron model: ignore interactions/band effects; acceptable for order-of-magnitude astrophysical degeneracy estimates.</li>
            <li>Relativistic limit in part (b) derivation; later we check consistency.</li>
          </ul>
        </div>

        <h3>Possible approaches (compare)</h3>
        <ul>
          <li><strong>Approach A (k-space counting):</strong> derive N–k<sub>F</sub> relation from periodic BC and count states inside a sphere. <em>Pros:</em> transparent, rigorous geometry. <em>Cons:</em> requires comfort with DOS.</li>
          <li><strong>Approach B (density of states formula):</strong> use g(ε) and integrate up to ε<sub>F</sub>. <em>Pros:</em> generalizes to nonzero T. <em>Cons:</em> hides geometry unless derived.</li>
          <li><strong>Approach C (scaling only):</strong> dimensional reasoning to get ε<sub>F</sub>~ħc n<sup>1/3</sup>. <em>Pros:</em> fast. <em>Cons:</em> misses the important prefactor and state-counting justification.</li>
        </ul>
        <p><strong>Chosen approach:</strong> A, with B as a cross-check, because the problem explicitly references ε=ħck and asks to “show” the scaling.</p>
      </section>

      <section id="strategy">
        <h2>PART 2 — Strategy & Tips (Roadmap Only)</h2>

        <ol style="color:var(--muted); margin-left:22px">
          <li><strong>Estimate N<sub>e</sub> in the Sun</strong>: treat Sun as mostly ionized matter; use N ≈ M⊙/m<sub>p</sub> (rough). Meaning: how many charged particles exist.</li>
          <li><strong>Define geometry</strong>: V = (4/3)πR³ for WD and pulsar. Meaning: turn “radius” into density n=N/V.</li>
          <li><strong>Quantize k</strong> using periodic BC: k = (2π/L)n. Meaning: discrete lattice in k-space.</li>
          <li><strong>Count states</strong>: number of k-states inside sphere |k|≤k<sub>F</sub> with spin degeneracy 2. Meaning: Pauli filling.</li>
          <li><strong>Solve for k<sub>F</sub></strong>: k<sub>F</sub> = (3π²n)<sup>1/3</sup>. Meaning: Fermi surface radius in k-space.</li>
          <li><strong>Convert to energy</strong>: ε<sub>F</sub> = ħc k<sub>F</sub> (ultra-relativistic). Meaning: maximum occupied energy at T=0.</li>
          <li><strong>Compute numbers</strong> and express in eV. Meaning: compare to nuclear beta-decay energy scales.</li>
          <li><strong>Sanity checks</strong>: dimensions, scaling with R, and regime consistency (ε<sub>F</sub> vs m<sub>e</sub>c²).</li>
        </ol>

        <div class="callouts">
          <div class="card">
            <div class="badge">Common mistakes</div>
            <h4>Quick tips</h4>
            <ul>
              <li>Don’t forget <strong>spin factor 2</strong> in state counting.</li>
              <li>Use <strong>meters</strong> if you use ħc in eV·m (or convert consistently).</li>
              <li>Remember: k-space sphere volume is (4/3)πk<sub>F</sub>³, but the prefactor becomes 1/(3π²) after dividing by (2π)³ and multiplying by 2.</li>
              <li>Scaling: if R shrinks by factor a, then V shrinks by a³ and ε<sub>F</sub> rises by a.</li>
            </ul>
          </div>
          <div class="card">
            <div class="badge">Units sanity</div>
            <h4>Dimensional analysis</h4>
            <p>
              k<sub>F</sub> has units m⁻¹ because it comes from n<sup>1/3</sup>. Then ħc·k<sub>F</sub> has units (eV·m)(m⁻¹)=eV. So ε<sub>F</sub> in eV is consistent.
            </p>
          </div>
        </div>
      </section>

      <section id="solution">
        <h2>PART 3 — Full Solution (Detailed + Teaching)</h2>

        <h3>Qualitative expectation (before calculating)</h3>
        <p>
          If you compress a fixed number of electrons into a smaller radius, the density n increases ~ 1/R³.
          Pauli exclusion then forces the Fermi momentum p<sub>F</sub> to rise ~ ħ n<sup>1/3</sup> ~ 1/R. So we expect ε<sub>F</sub> to grow roughly like 1/R.
          A pulsar (R≈10 km) is ~2000× smaller than a white dwarf (R≈2×10<sup>7</sup> m), so ε<sub>F</sub> should be ~2000× larger.
        </p>

        <div class="hr"></div>

        <article>
          <h3>(a) Estimate the number of electrons in the Sun</h3>

          <p>
            <strong>Model:</strong> the Sun’s mass is mostly baryons (protons + neutrons) in ionized plasma.
            A rough estimate takes “one electron per proton,” and “protons count ~ total baryons,” so
            N<sub>e</sub> is of order M⊙/m<sub>p</sub>.
          </p>

          <div class="eq">
            <div class="copyRow">
              <div class="muted"><strong>Key equation</strong> (rough electron count)</div>
              <button class="btn small copyEq" data-copy="N_e ≈ M_sun / m_p">Copy</button>
            </div>
            <code>Nₑ ≈ M⊙ / m_p</code>
          </div>

          <p>
            Insert numbers (showing units explicitly):
          </p>
          <div class="eq">
            <div class="copyRow">
              <div class="muted">Numerical substitution</div>
              <button class="btn small copyEq" data-copy="M_sun = 2×10^33 g
m_p ≈ 1.67×10^-24 g
N_e ≈ (2×10^33)/(1.67×10^-24) ≈ 1.2×10^57">Copy</button>
            </div>
            <code>M⊙ = 2×10^33 g
m_p ≈ 1.67×10^-24 g

Nₑ ≈ (2×10^33 g)/(1.67×10^-24 g)
   ≈ 1.2×10^57</code>
          </div>

          <p>
            <strong>Answer (a):</strong> <span style="color:var(--text); font-weight:700">N<sub>e,⊙</sub> ≈ 1.2×10<sup>57</sup></span> (order-of-magnitude).
          </p>

          <details>
            <summary>Deeper accuracy note: mean molecular weight per electron</summary>
            <p>
              If you include composition (H/He mixture), you often write
              N<sub>e</sub> = M⊙/(μ<sub>e</sub> m<sub>u</sub>) with μ<sub>e</sub> ~ 1.1–1.2 for solar-like composition.
              This only changes N by an O(1) factor, consistent with “estimate” wording.
            </p>
          </details>

          <div class="hr"></div>

          <h3>(b) Fermi energy in a white dwarf (R = 2×10<sup>9</sup> cm)</h3>

          <h4>Step 1: Geometry and density</h4>
          <p>
            Take a sphere of radius R and volume V = (4/3)πR³. Assume uniform electron density:
            n = N/V.
          </p>

          <div class="eq">
            <div class="copyRow">
              <div class="muted"><strong>Geometry</strong></div>
              <button class="btn small copyEq" data-copy="V = (4/3)πR^3
n = N/V">Copy</button>
            </div>
            <code>V = (4/3)πR³
n = N/V</code>
          </div>

          <p>
            Convert radius to SI (because we will use ħc in eV·m):
          </p>
          <div class="eq">
            <div class="copyRow">
              <div class="muted">Unit conversion</div>
              <button class="btn small copyEq" data-copy="R = 2×10^9 cm = 2×10^7 m">Copy</button>
            </div>
            <code>R = 2×10^9 cm = 2×10^7 m</code>
          </div>

          <p>
            Therefore:
          </p>
          <div class="eq">
            <div class="copyRow">
              <div class="muted">Compute n (shown as algebra)</div>
              <button class="btn small copyEq" data-copy="V_WD = (4/3)π(2×10^7 m)^3
n_WD = N / V_WD">Copy</button>
            </div>
            <code>V_WD = (4/3)π(2×10^7 m)³
n_WD = N / V_WD</code>
          </div>

          <h4>Step 2: Quantization + state counting (mathematical physics core)</h4>
          <p>
            Consider the one-particle eigenvalue problem in Ω = [0,L]³ with periodic BC.
            The momentum operator is p̂ = −iħ∇. Plane-wave eigenfunctions
            ψ<sub>k</sub>(x)=V<sup>−1/2</sup>e<sup>i k·x</sup> satisfy
            p̂ψ<sub>k</sub> = ħk ψ<sub>k</sub>.
            The periodic BC force discrete k values:
          </p>

          <div class="eq">
            <div class="copyRow">
              <div class="muted"><strong>k quantization</strong> (periodic BC)</div>
              <button class="btn small copyEq" data-copy="k = (2π/L)(n_x, n_y, n_z),  n_i ∈ ℤ">Copy</button>
            </div>
            <code>k = (2π/L)(n_x, n_y, n_z),   n_i ∈ ℤ</code>
          </div>

          <p>
            In the large-volume limit, the lattice of k-points has density V/(2π)³ in k-space.
            Because electrons have two spin states, each k-state holds 2 electrons.
            At T=0, the ground state fills all states with |k|≤k<sub>F</sub>.
            So:
          </p>

          <div class="eq">
            <div class="copyRow">
              <div class="muted"><strong>State-counting integral</strong></div>
              <button class="btn small copyEq" data-copy="N = 2 * (V/(2π)^3) * ∫_{|k|≤kF} d^3k">Copy</button>
            </div>
            <code>N = 2 · (V/(2π)³) · ∫_{|k|≤k_F} d³k</code>
          </div>

          <p>
            Use spherical coordinates in k-space (symmetry: integrand is 1, region is a ball):
            ∫<sub>|k|≤kF</sub> d³k = (4/3)π k<sub>F</sub>³. This step is valid because of rotational symmetry (no preferred direction).
            Substitute:
          </p>

          <div class="eq">
            <div class="copyRow">
              <div class="muted">Algebra (no jumps)</div>
              <button class="btn small copyEq" data-copy="N = 2*(V/(2π)^3)*(4π/3) kF^3
= 2*V*(4π/3) kF^3 / (8π^3)
= V kF^3 / (3π^2)
⇒ kF = (3π^2 N/V)^(1/3) = (3π^2 n)^(1/3)">Copy</button>
            </div>
            <code>N = 2*(V/(2π)³)*((4π/3) k_F³)
  = 2*V*(4π/3) k_F³ / (8π³)
  = V k_F³ / (3π²)

⇒ k_F = (3π² N/V)^(1/3) = (3π² n)^(1/3)</code>
          </div>

          <h4>Step 3: Convert k<sub>F</sub> to Fermi energy (relativistic limit)</h4>
          <p>
            In the ultra-relativistic regime, ε = pc = ħck. Therefore:
          </p>

          <div class="eq">
            <div class="copyRow">
              <div class="muted"><strong>Fermi energy</strong> (ultra-relativistic)</div>
              <button class="btn small copyEq" data-copy="ε_F = ħc k_F = ħc (3π^2 n)^(1/3) = ħc (3π^2 N/V)^(1/3)
Roughly: ε_F ≈ ħc (N/V)^(1/3) (dropping O(1) factors)">Copy</button>
            </div>
            <code>ε_F = ħc k_F = ħc (3π² n)^(1/3) = ħc (3π² N/V)^(1/3)

Roughly: ε_F ≈ ħc (N/V)^(1/3)  (dropping O(1) factors)</code>
          </div>

          <p>
            <strong>Dimensional check:</strong> n has units m⁻³, so n<sup>1/3</sup> is m⁻¹. Then ħc·n<sup>1/3</sup> is eV·m·m⁻¹=eV.
          </p>

          <h4>Step 4: Numerical value for the white dwarf</h4>
          <p>
            Use ħc ≈ 197.3 eV·nm = 197.3×10<sup>−9</sup> eV·m.
            With N≈1.2×10<sup>57</sup> and R=2×10<sup>7</sup> m:
          </p>

          <div class="eq">
            <div class="copyRow">
              <div class="muted">Numbers used</div>
              <button class="btn small copyEq" data-copy="ħc ≈ 197.3×10^-9 eV·m
N ≈ 1.2×10^57
R_WD = 2×10^7 m
V_WD = (4/3)πR^3
n_WD = N/V_WD
ε_F = ħc(3π^2 n_WD)^(1/3)">Copy</button>
            </div>
            <code>ħc ≈ 197.3×10^-9 eV·m
N ≈ 1.2×10^57
R_WD = 2×10^7 m

V_WD = (4/3)πR_WD^3
n_WD = N / V_WD
ε_F = ħc(3π² n_WD)^(1/3)</code>
          </div>

          <p>
            Carrying out the computation gives:
            <strong style="color:var(--text)">ε<sub>F,WD</sub> ≈ 2.0×10<sup>5</sup> eV</strong> (≈0.2 MeV).
            This matches the “~10<sup>5</sup> eV” order-of-magnitude expectation.
          </p>

          <details>
            <summary>Consistency check: is the ultra-relativistic approximation valid for the white dwarf number?</summary>
            <p>
              Ultra-relativistic requires ε_F ≫ m_e c² ≈ 511 keV.
              Here ε_F ≈ 201 keV, which is < 511 keV, so the electrons are only mildly relativistic.
              That means the <em>scaling derivation</em> (ε∝n^(1/3)) remains instructive, but the more accurate energy would use
              ε_F = √((p_F c)² + (m_e c²)²) − m_e c² with p_F=ħk_F.
              Numerically, p_F c ≈ 201 keV, giving a kinetic ε_F ≈ √(201²+511²)−511 keV ≈ 38 keV.
              Still, the problem explicitly asks for the relativistic-limit expression; we follow that instruction while acknowledging the regime.
            </p>
          </details>

          <div class="hr"></div>

          <h3>(c) Fermi energy if the same electrons are in a pulsar of radius 10 km</h3>

          <p>
            Let R<sub>NS</sub> = 10 km = 10<sup>4</sup> m. Repeat the same steps: V=(4/3)πR³, n=N/V, ε<sub>F</sub>=ħc(3π²n)<sup>1/3</sup>.
          </p>

          <div class="eq">
            <div class="copyRow">
              <div class="muted"><strong>Scaling shortcut</strong> (important)</div>
              <button class="btn small copyEq" data-copy="For fixed N: n ∝ 1/R^3, so ε_F ∝ n^(1/3) ∝ 1/R.
Thus ε_F(NS)/ε_F(WD) = R_WD / R_NS.">Copy</button>
            </div>
            <code>For fixed N: n ∝ 1/R³, so ε_F ∝ n^(1/3) ∝ 1/R.
Thus  ε_F(NS) / ε_F(WD) = R_WD / R_NS.</code>
          </div>

          <p>
            With R<sub>WD</sub>=2×10<sup>7</sup> m and R<sub>NS</sub>=10<sup>4</sup> m, the ratio is 2000. Therefore:
          </p>

          <div class="eq">
            <div class="copyRow">
              <div class="muted">Compute via scaling</div>
              <button class="btn small copyEq" data-copy="ε_F(NS) ≈ 2000 × ε_F(WD) ≈ 2000 × 2×10^5 eV ≈ 4×10^8 eV">Copy</button>
            </div>
            <code>ε_F(NS) ≈ (R_WD/R_NS) ε_F(WD)
        ≈ 2000 × (2×10^5 eV)
        ≈ 4×10^8 eV</code>
          </div>

          <p>
            <strong>Answer (c):</strong> <span style="color:var(--text); font-weight:700">ε<sub>F,NS</sub> ≈ 4×10<sup>8</sup> eV</span>,
            which is vastly greater than 10<sup>5</sup> eV (as the problem statement suggests) and in fact hundreds of MeV.
          </p>

          <h4>Why this implies pulsars are neutron-rich (physical interpretation)</h4>
          <p>
            The beta equilibrium reaction (schematically) n ⇌ p + e⁻ + (ν̄) involves an energy scale of about 0.8×10<sup>6</sup> eV (0.8 MeV) in the problem statement.
            If electrons had to occupy states up to ε<sub>F</sub> ≫ 0.8 MeV, then creating/maintaining many electrons is energetically costly.
            The system lowers total energy by converting p+e⁻ into neutrons until chemical potentials balance (beta equilibrium), yielding neutron-star matter.
          </p>

          <div class="final" id="finalAnswerBlock">
            <h3>Final Answers (boxed)</h3>

            <div class="eq">
              <div class="copyRow">
                <div class="muted"><strong>Final answer (plain text)</strong></div>
                <button class="btn copyFinal">Copy final answer</button>
              </div>
              <code id="finalAnswerText">Given M⊙ = 2×10^33 g:

(a) N_e,⊙ ≈ M⊙/m_p ≈ (2×10^33 g)/(1.67×10^-24 g) ≈ 1.2×10^57 electrons.

(b) For electrons in volume V, T→0:
N = (V/(3π^2)) k_F^3  ⇒  k_F = (3π^2 N/V)^(1/3) = (3π^2 n)^(1/3).
Ultra-relativistic ε = pc = ħck ⇒ ε_F = ħc k_F = ħc(3π^2 n)^(1/3) ≈ ħc(N/V)^(1/3).
For R_WD = 2×10^9 cm = 2×10^7 m, V = (4/3)πR^3:
ε_F,WD ≈ 2.0×10^5 eV (≈0.2 MeV) (order of 10^5 eV).

(c) For R_NS = 10 km = 10^4 m:
At fixed N, ε_F ∝ 1/R, so ε_F,NS ≈ (R_WD/R_NS) ε_F,WD ≈ 2000×(2×10^5 eV) ≈ 4×10^8 eV (≫10^5 eV).</code>
            </div>

            <p class="muted">
              Note: part (b) uses the problem’s requested relativistic-limit relation ε=pc. For a white dwarf, electrons may be only mildly relativistic; the scaling and order-of-magnitude remain the key takeaway.
            </p>
          </div>

          <div style="margin-top:12px">
            <a class="backTop" href="#top" id="end" aria-label="Back to top">↑ Back to top</a>
          </div>
        </article>
      </section>

      <section id="deeper">
        <h2>PART 4 — Deeper Understanding (Theory Around the Result)</h2>

        <h3>Re-interpret the final formula</h3>
        <p>
          The core result
          <span style="color:var(--text); font-weight:700">ε<sub>F</sub> = ħc(3π²n)<sup>1/3</sup></span>
          says: the “highest occupied energy” depends only on density, not on temperature (at T≈0).
          The (3π²)<sup>1/3</sup> factor is a geometric consequence of a sphere in 3D k-space and the (2π)³ normalization.
        </p>

        <h3>Parameter dependence (qualitative + quantitative)</h3>
        <ul>
          <li><strong>Density:</strong> ε<sub>F</sub> ∝ n<sup>1/3</sup>. Increasing density by a factor 8 doubles ε<sub>F</sub>.</li>
          <li><strong>Radius at fixed N:</strong> n ∝ R⁻³ ⇒ ε<sub>F</sub> ∝ R⁻¹. Shrinking the star by 10× increases ε<sub>F</sub> by 10×.</li>
          <li><strong>Dimensionality:</strong> in d dimensions, the “Fermi ball” gives k<sub>F</sub> ∝ n<sup>1/d</sup>. The exponent 1/3 comes from 3D geometry.</li>
        </ul>

        <h3>Alternative derivation idea (brief but meaningful): density of states</h3>
        <p>
          Starting from the density of states in k-space,
          g(k)dk = 2·V/(2π)³ · 4πk² dk,
          integrate N = ∫<sub>0</sub><sup>kF</sup> g(k)dk to obtain the same N = Vk<sub>F</sub>³/(3π²).
          Then map k to energy using ε=ħck.
          This is mathematically the same geometry, written as a 1D integral after symmetry reduction.
        </p>

        <div class="card">
          <div class="badge">Approximation statement (explicit)</div>
          <h4>What is neglected in the ultra-relativistic limit?</h4>
          <p>
            Using ε=pc discards the rest-mass contribution m<sub>e</sub>c² and any corrections of order (m<sub>e</sub>c/p)².
            Mathematically, it means replacing:
            <code>ε(p)=√(p²c²+m_e²c⁴)</code> by <code>ε(p)≈pc</code> when p≫m<sub>e</sub>c.
          </p>
        </div>

        <h3>Concept check (self-test Q&amp;A)</h3>
        <ul>
          <li><strong>Q:</strong> Why is the filled region in k-space a sphere?<br><strong>A:</strong> The free Hamiltonian depends only on |k|, so energy levels are isotropic; minimizing total energy fills lowest |k| states first.</li>
          <li><strong>Q:</strong> Where does the factor 2 come from in N counting?<br><strong>A:</strong> Spin degeneracy: two spin states per spatial k state.</li>
          <li><strong>Q:</strong> If density increases by 27×, how does ε<sub>F</sub> change?<br><strong>A:</strong> ε<sub>F</sub> ∝ n<sup>1/3</sup>, so it increases by 3×.</li>
          <li><strong>Q:</strong> Why does a smaller star raise ε<sub>F</sub>?<br><strong>A:</strong> Smaller V means fewer k-states near 0; Pauli exclusion forces occupation of higher k, increasing p<sub>F</sub> and ε<sub>F</sub>.</li>
        </ul>
      </section>

      <section id="plot">
        <h2>PART 5 — Optional Plot Guide</h2>

        <p>
          A plot is useful here because the key relationship is a <strong>power law</strong>:
          ε<sub>F</sub> ∝ n<sup>1/3</sup>. Visualizing that scaling helps you instantly predict how extreme compression changes the energy scale.
          Below is a single static plot (log-log) showing ε<sub>F</sub> versus n in the ultra-relativistic model, with the white dwarf and pulsar points marked.
        </p>

        <figure>
          <canvas id="plotCanvas" style="width:100%; height:360px; display:block;"></canvas>
          <figcaption>
            Ultra-relativistic example plot: ε<sub>F</sub> = ħc(3π²n)<sup>1/3</sup>. Points: white dwarf density (R=2×10<sup>9</sup> cm) and pulsar density (R=10 km) for N≈1.2×10<sup>57</sup>.
          </figcaption>
        </figure>

        <h3>How to read the plot</h3>
        <ul>
          <li><strong>x-axis:</strong> electron number density n (m⁻³), logarithmic ticks.</li>
          <li><strong>y-axis:</strong> Fermi energy ε<sub>F</sub> (eV), logarithmic ticks.</li>
          <li><strong>Feature to notice:</strong> straight line on log-log with slope 1/3 (because ε<sub>F</sub> ∝ n<sup>1/3</sup>).</li>
          <li><strong>Example values:</strong> the marked points use the problem’s radii and the rough Sun electron count; the curve itself is the symbolic model.</li>
        </ul>

        <div style="margin-top:12px">
          <a class="backTop" href="#top" aria-label="Back to top">↑ Back to top</a>
        </div>
      </section>
    </main>

    <footer>
      <p>
        Built as a single self-contained HTML article (no external libraries). Includes rigorous state-counting derivation and engineering relevance notes.
      </p>
    </footer>
  </div>

  <script>
    // ---------- Copy helpers ----------
    function copyText(text){
      const t = String(text);
      if (navigator.clipboard && navigator.clipboard.writeText){
        navigator.clipboard.writeText(t).catch(()=>fallbackCopy(t));
      } else {
        fallbackCopy(t);
      }
    }
    function fallbackCopy(text){
      const ta = document.createElement('textarea');
      ta.value = text;
      ta.setAttribute('readonly','');
      ta.style.position = 'fixed';
      ta.style.top = '-1000px';
      document.body.appendChild(ta);
      ta.select();
      try{ document.execCommand('copy'); }catch(e){}
      document.body.removeChild(ta);
    }

    document.querySelectorAll('.copyEq').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        copyText(btn.getAttribute('data-copy') || '');
        btn.textContent = 'Copied ✓';
        setTimeout(()=>btn.textContent='Copy', 900);
      });
    });

    const finalBtn = document.querySelector('.copyFinal');
    if(finalBtn){
      finalBtn.addEventListener('click', ()=>{
        const txt = document.getElementById('finalAnswerText')?.textContent || '';
        copyText(txt.trim());
        finalBtn.textContent = 'Copied ✓';
        setTimeout(()=>finalBtn.textContent='Copy final answer', 1000);
      });
    }

    // ---------- Plot (single, static, crisp) ----------
    // Plot: epsilon_F (eV) vs n (m^-3) for ultra-relativistic epsilon_F = ħc (3π^2 n)^(1/3)
    (function(){
      const canvas = document.getElementById('plotCanvas');
      if(!canvas) return;
      const ctx = canvas.getContext('2d');

      function resize(){
        const dpr = Math.max(1, window.devicePixelRatio || 1);
        const rect = canvas.getBoundingClientRect();
        canvas.width = Math.round(rect.width * dpr);
        canvas.height = Math.round(rect.height * dpr);
        ctx.setTransform(dpr,0,0,dpr,0,0);
        draw(rect.width, rect.height);
      }

      function log10(x){ return Math.log(x)/Math.LN10; }
      function pow10(a){ return Math.pow(10,a); }

      // Example points from the problem numbers used in this article:
      const N = 1.195727498246914e57;
      const Rwd = 2e7;   // m
      const Rns = 1e4;   // m
      const Vwd = (4/3)*Math.PI*Math.pow(Rwd,3);
      const Vns = (4/3)*Math.PI*Math.pow(Rns,3);
      const nwd = N / Vwd;
      const nns = N / Vns;

      // constants: ħc in eV·m
      const hbarc = 197.3269804e-9;

      function epsF(n){
        return hbarc * Math.pow(3*Math.PI*Math.PI*n, 1/3);
      }

      function draw(w,h){
        // layout
        ctx.clearRect(0,0,w,h);
        const padL=56, padR=18, padT=34, padB=46;
        const x0=padL, y0=padT, x1=w-padR, y1=h-padB;

        // ranges (log-log)
        const xmin = 1e30, xmax = 1e46;
        const ymin = 1e4,  ymax = 1e10;

        const lxmin=log10(xmin), lxmax=log10(xmax);
        const lymin=log10(ymin), lymax=log10(ymax);

        function X(n){ return x0 + (log10(n)-lxmin)/(lxmax-lxmin)*(x1-x0); }
        function Y(e){ return y1 - (log10(e)-lymin)/(lymax-lymin)*(y1-y0); }

        // background
        ctx.fillStyle = 'rgba(255,255,255,0.02)';
        ctx.fillRect(x0,y0,x1-x0,y1-y0);

        // gridlines + ticks
        ctx.lineWidth = 1;
        ctx.strokeStyle = 'rgba(255,255,255,0.10)';
        ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--muted').trim() || '#b7c3d6';
        ctx.font = '12px ' + getComputedStyle(document.body).fontFamily;

        // x ticks at decades
        for(let a=30; a<=46; a+=2){
          const n = pow10(a);
          const xx = X(n);
          ctx.beginPath();
          ctx.moveTo(xx,y0);
          ctx.lineTo(xx,y1);
          ctx.stroke();

          ctx.fillText('10^' + a, xx-14, y1+18);
        }

        // y ticks at decades
        for(let a=4; a<=10; a+=1){
          const e = pow10(a);
          const yy = Y(e);
          ctx.beginPath();
          ctx.moveTo(x0,yy);
          ctx.lineTo(x1,yy);
          ctx.stroke();

          ctx.fillText('10^' + a, 10, yy+4);
        }

        // axes
        ctx.strokeStyle = 'rgba(255,255,255,0.22)';
        ctx.lineWidth = 1.25;
        ctx.beginPath();
        ctx.moveTo(x0,y0);
        ctx.lineTo(x0,y1);
        ctx.lineTo(x1,y1);
        ctx.stroke();

        // title
        ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text').trim() || '#e9eef6';
        ctx.font = 'bold 14px ' + getComputedStyle(document.body).fontFamily;
        ctx.fillText('Ultra-relativistic Fermi energy: ε_F = ħc(3π²n)^{1/3}', x0, 18);

        // labels
        ctx.font = '12px ' + getComputedStyle(document.body).fontFamily;
        ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--muted').trim() || '#b7c3d6';
        ctx.fillText('n (m⁻³) [log scale]', Math.round((x0+x1)/2)-52, h-14);

        ctx.save();
        ctx.translate(16, Math.round((y0+y1)/2)+40);
        ctx.rotate(-Math.PI/2);
        ctx.fillText('ε_F (eV) [log scale]', 0, 0);
        ctx.restore();

        // curve
        ctx.strokeStyle = 'rgba(110,231,255,0.90)';
        ctx.lineWidth = 2;

        ctx.beginPath();
        const steps = 220;
        for(let i=0;i<=steps;i++){
          const t = i/steps;
          const ln = lxmin + t*(lxmax-lxmin);
          const n = pow10(ln);
          const e = epsF(n);
          const xx = X(n), yy=Y(e);
          if(i===0) ctx.moveTo(xx,yy);
          else ctx.lineTo(xx,yy);
        }
        ctx.stroke();

        // points
        function drawPoint(n, label){
          const e = epsF(n);
          const xx=X(n), yy=Y(e);
          ctx.fillStyle = 'rgba(251,191,36,0.95)';
          ctx.beginPath();
          ctx.arc(xx,yy,4.5,0,Math.PI*2);
          ctx.fill();

          ctx.strokeStyle = 'rgba(0,0,0,0.35)';
          ctx.lineWidth = 1;
          ctx.stroke();

          ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text').trim() || '#e9eef6';
          ctx.font = '12px ' + getComputedStyle(document.body).fontFamily;
          ctx.fillText(label, xx+8, yy-8);

          ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--faint').trim() || '#8ea0bb';
          ctx.font = '11px ' + getComputedStyle(document.body).fontFamily;
          ctx.fillText('n≈' + n.toExponential(2) + ' m⁻³', xx+8, yy+8);
          ctx.fillText('ε_F≈' + e.toExponential(2) + ' eV', xx+8, yy+22);
        }

        drawPoint(nwd, 'White dwarf point');
        drawPoint(nns, 'Pulsar point');

        // legend
        const lx = x1 - 210, ly = y0 + 10;
        ctx.fillStyle = 'rgba(255,255,255,0.04)';
        ctx.strokeStyle = 'rgba(255,255,255,0.12)';
        ctx.lineWidth = 1;
        ctx.beginPath();
        roundRect(ctx, lx, ly, 200, 54, 12);
        ctx.fill(); ctx.stroke();

        ctx.strokeStyle = 'rgba(110,231,255,0.90)';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(lx+12, ly+18);
        ctx.lineTo(lx+52, ly+18);
        ctx.stroke();
        ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--muted').trim() || '#b7c3d6';
        ctx.font = '12px ' + getComputedStyle(document.body).fontFamily;
        ctx.fillText('Model curve', lx+60, ly+22);

        ctx.fillStyle = 'rgba(251,191,36,0.95)';
        ctx.beginPath();
        ctx.arc(lx+32, ly+38, 4.5, 0, Math.PI*2);
        ctx.fill();
        ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--muted').trim() || '#b7c3d6';
        ctx.fillText('Example star points', lx+60, ly+42);
      }

      function roundRect(ctx, x, y, w, h, r){
        const rr = Math.min(r, w/2, h/2);
        ctx.moveTo(x+rr, y);
        ctx.arcTo(x+w, y, x+w, y+h, rr);
        ctx.arcTo(x+w, y+h, x, y+h, rr);
        ctx.arcTo(x, y+h, x, y, rr);
        ctx.arcTo(x, y, x+w, y, rr);
        ctx.closePath();
      }

      window.addEventListener('resize', resize, {passive:true});
      resize();
    })();
  </script>
</body>
</html>
