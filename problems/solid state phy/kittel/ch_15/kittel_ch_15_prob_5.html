<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dielectric Constant and the Semiconductor Energy Gap (Delta-Absorption Model)</title>
  <style>
    :root{
      --bg:#0b1020;
      --card:#0f1733;
      --muted:#a9b3d1;
      --text:#eaf0ff;
      --accent:#6ee7ff;
      --accent2:#a78bfa;
      --line:rgba(255,255,255,0.10);
      --good:#34d399;
      --warn:#fbbf24;
      --bad:#fb7185;
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --radius:18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family:var(--sans);
      background: radial-gradient(1200px 700px at 20% -10%, rgba(110,231,255,0.18), transparent 55%),
                  radial-gradient(900px 600px at 100% 10%, rgba(167,139,250,0.16), transparent 55%),
                  var(--bg);
      color:var(--text);
      line-height:1.55;
    }
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    header{
      padding:32px 18px 18px;
      max-width:1180px;
      margin:0 auto;
    }
    .title{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      padding:22px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .title:before{
      content:"";
      position:absolute;
      inset:-2px -2px auto -2px;
      height:4px;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      opacity:0.9;
    }
    h1{
      margin:0;
      font-size: clamp(1.35rem, 2.4vw, 2.1rem);
      letter-spacing:0.2px;
    }
    .subtitle{
      color:var(--muted);
      font-size: 0.98rem;
      max-width: 85ch;
    }

    main{
      max-width:1180px;
      margin:0 auto;
      padding:0 18px 54px;
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:18px;
    }

    nav.toc{
      position:sticky;
      top:14px;
      align-self:start;
      border:1px solid var(--line);
      background: rgba(255,255,255,0.03);
      border-radius: var(--radius);
      padding:14px 14px 12px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.18);
      backdrop-filter: blur(10px);
    }
    .toc h2{
      margin:0 0 10px;
      font-size:1rem;
      color: var(--text);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .toc small{color:var(--muted); font-weight:500}
    .toc a{
      display:block;
      padding:8px 10px;
      border-radius:12px;
      margin:6px 0;
      color: var(--text);
      border:1px solid transparent;
      transition: transform .08s ease, background .18s ease, border-color .18s ease;
      font-size:0.94rem;
    }
    .toc a:hover{
      background: rgba(110,231,255,0.10);
      border-color: rgba(110,231,255,0.20);
      transform: translateY(-1px);
      text-decoration:none;
    }
    .toc .toplink{
      margin-top:10px;
      padding-top:10px;
      border-top:1px solid var(--line);
      color: var(--muted);
      font-size:0.92rem;
    }

    article{
      border:1px solid var(--line);
      background: rgba(255,255,255,0.03);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    section{
      padding:18px 18px 4px;
      border-top:1px solid var(--line);
    }
    section:first-child{border-top:none}
    h2{
      margin:0 0 10px;
      font-size:1.22rem;
      letter-spacing:0.2px;
    }
    h3{
      margin:16px 0 8px;
      font-size:1.05rem;
      color:#dbe6ff;
    }
    p{margin:10px 0; color:#e6ecff}
    ul,ol{margin:10px 0 14px; padding-left:20px}
    li{margin:6px 0; color:#e6ecff}
    .muted{color:var(--muted)}
    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 980px){
      main{grid-template-columns: 1fr}
      nav.toc{position:relative; top:auto}
      .grid2{grid-template-columns:1fr}
    }

    .callouts{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin:10px 0 14px;
    }
    @media (max-width: 820px){
      .callouts{grid-template-columns:1fr}
    }
    .card{
      border:1px solid var(--line);
      border-radius:16px;
      padding:14px;
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      position:relative;
      overflow:hidden;
    }
    .card .tag{
      display:inline-flex;
      gap:8px;
      align-items:center;
      font-weight:700;
      letter-spacing:0.2px;
      font-size:0.84rem;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04);
      margin-bottom:8px;
    }
    .tag.good{color:var(--good); border-color: rgba(52,211,153,0.25); background: rgba(52,211,153,0.08)}
    .tag.warn{color:var(--warn); border-color: rgba(251,191,36,0.25); background: rgba(251,191,36,0.08)}
    .tag.bad{color:var(--bad); border-color: rgba(251,113,133,0.25); background: rgba(251,113,133,0.08)}
    .eqblock{
      margin:10px 0 14px;
      border:1px solid rgba(110,231,255,0.22);
      background: rgba(110,231,255,0.06);
      border-radius: 16px;
      padding:12px 12px 10px;
      position:relative;
      overflow:hidden;
    }
    .eqblock:before{
      content:"";
      position:absolute;
      inset:0 auto 0 0;
      width:4px;
      background: linear-gradient(180deg, var(--accent), var(--accent2));
      opacity:0.9;
    }
    pre, code{
      font-family: var(--mono);
      font-size: 0.94rem;
      line-height: 1.45;
      color: #eaf0ff;
      white-space: pre-wrap;
      word-break: break-word;
      margin:0;
    }
    .copyrow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }
    .btn{
      appearance:none;
      border:1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      color:var(--text);
      padding:8px 10px;
      border-radius: 12px;
      cursor:pointer;
      font-weight:700;
      font-size:0.9rem;
      transition: transform .08s ease, background .18s ease, border-color .18s ease;
    }
    .btn:hover{
      background: rgba(110,231,255,0.12);
      border-color: rgba(110,231,255,0.28);
      transform: translateY(-1px);
    }
    .btn:active{transform: translateY(0px)}
    .pill{
      font-size:0.85rem;
      color:var(--muted);
      border:1px solid var(--line);
      padding:6px 10px;
      border-radius:999px;
      background: rgba(255,255,255,0.03);
    }
    details{
      border:1px solid var(--line);
      border-radius: 16px;
      padding:10px 12px;
      background: rgba(255,255,255,0.02);
      margin: 10px 0 14px;
    }
    summary{
      cursor:pointer;
      font-weight:800;
      color:#dbe6ff;
      outline:none;
    }
    summary::-webkit-details-marker{display:none}
    .kpi{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:8px;
    }
    .kpi .pill{background: rgba(255,255,255,0.02)}
    figure{
      margin: 10px 0 16px;
      border:1px solid var(--line);
      border-radius: 16px;
      padding: 12px;
      background: rgba(255,255,255,0.02);
      overflow:hidden;
    }
    figcaption{
      color: var(--muted);
      font-size:0.92rem;
      margin-top:10px;
    }
    canvas{
      width:100%;
      height:360px;
      display:block;
      border-radius: 14px;
      background: rgba(0,0,0,0.20);
      border:1px solid rgba(255,255,255,0.10);
    }
    footer{
      max-width:1180px;
      margin:0 auto;
      padding: 10px 18px 30px;
      color: var(--muted);
      font-size:0.92rem;
    }

    /* Print-friendly */
    @media print{
      body{background:#fff; color:#000}
      nav.toc{display:none}
      main{display:block}
      article{box-shadow:none; background:#fff; border:1px solid #bbb}
      .eqblock{background:#f5fbff; border-color:#9ad7e6}
      .card{background:#fff}
      a{color:#000; text-decoration:underline}
      .btn{display:none}
      canvas{border:1px solid #666; background:#fff}
      section{break-inside:avoid-page}
      h2{break-after:avoid-page}
    }

    /* Small micro-animation for section headers on hover */
    section h2{
      display:inline-block;
      padding-bottom:4px;
      border-bottom:1px solid transparent;
      transition: border-color .18s ease, transform .18s ease;
    }
    section:hover h2{
      border-color: rgba(110,231,255,0.22);
      transform: translateY(-1px);
    }
  </style>
</head>

<body>
  <header id="top">
    <div class="title">
      <h1>Dielectric Constant vs. Semiconductor Gap: A Delta-Absorption (Toy) Model</h1>
      <div class="subtitle">
        We model interband absorption as a single spike at the gap frequency and use the causal (Kramers–Kronig) dispersion relation to compute the real part of the dielectric function. The result is a simple, industry-useful rule-of-thumb: a larger gap typically implies a smaller static dielectric constant.
      </div>
      <div class="kpi">
        <span class="pill">Topic: linear response • causality • dispersion</span>
        <span class="pill">Result: symbolic ε′(ω)</span>
        <span class="pill">Key tool: Kramers–Kronig (Hilbert transform)</span>
      </div>
    </div>
  </header>

  <main>
    <nav class="toc" aria-label="Table of contents">
      <h2>
        <span>Contents</span>
        <small>sticky</small>
      </h2>
      <a href="#qs">Quick Summary</a>
      <a href="#part0">PART 0 — Concept Primer</a>
      <a href="#part0b">PART 0B — Industry & Applied Physics Perspective</a>
      <a href="#part1">PART 1 — Problem Analysis</a>
      <a href="#part2">PART 2 — Strategy & Tips</a>
      <a href="#part3">PART 3 — Full Solution</a>
      <a href="#part4">PART 4 — Deeper Understanding</a>
      <a href="#part5">PART 5 — Optional Plot Guide</a>
      <div class="toplink">
        <a href="#top">↑ Back to top</a>
      </div>
    </nav>

    <article>
      <!-- Quick Summary -->
      <section id="qs">
        <h2>Quick Summary</h2>
        <ul>
          <li><b>What this problem is about:</b> Connect a semiconductor’s <b>energy gap</b> (gap frequency ω<sub>g</sub>) to the <b>real</b> dielectric response ε′(ω) using a crude absorption model for ε″(ω).</li>
          <li><b>Key physics idea:</b> <b>Causality</b> in linear response forces ε′ and ε″ to be linked by a <b>dispersion (Kramers–Kronig) relation</b>, a Hilbert-transform-type integral.</li>
          <li><b>Governing relation used:</b> For ω ≥ 0,
            <span class="muted">ε′(ω) − 1 = (2/π) P∫<sub>0</sub><sup>∞</sup> [ω′ ε″(ω′)]/(ω′² − ω²) dω′</span>.
          </li>
          <li><b>Model for absorption:</b> All interband absorption placed at ω = ω<sub>g</sub>:
            <span class="muted">ε″(ω) = (2π n e²)/(m ω) δ(ω − ω<sub>g</sub>)</span>.
          </li>
          <li><b>Final symbolic result:</b> ε′(ω) = 1 + ω<sub>p</sub>²/(ω<sub>g</sub>² − ω²), with ω<sub>p</sub>² = 4π n e²/m.</li>
          <li><b>Physical meaning:</b> A resonance-like dispersive contribution centered at the gap; as ω→0, ε′(0) = 1 + ω<sub>p</sub>²/ω<sub>g</sub>².</li>
          <li><b>Engineering takeaway:</b> Bigger gap (larger ω<sub>g</sub>) → generally smaller static dielectric constant, important for capacitors, RF substrates, gate stacks, and optical design.</li>
        </ul>
      </section>

      <!-- PART 0 -->
      <section id="part0">
        <h2>PART 0 — Concept Primer (Theory Before Solving)</h2>

        <h3>Core definitions (symbols + SI units)</h3>
        <div class="eqblock">
          <div class="copyrow">
            <span class="pill">Key definitions</span>
            <button class="btn" data-copy="defs">Copy equations</button>
          </div>
<pre id="defs">Complex dielectric function: ε(ω) = ε′(ω) + i ε″(ω)   (dimensionless)

Electric displacement: D(ω) = ε0 ε(ω) E(ω)           (SI: D in C/m^2, E in V/m)

Plasma frequency (Gaussian/CGS form used in the problem):
ω_p^2 = 4π n e^2 / m

Gap frequency: ω_g = E_g / ħ</pre>
        </div>

        <p>
          <b>Meaning of ε′ and ε″:</b> ε′(ω) measures how strongly a material <i>stores</i> electric energy (polarization in-phase with E),
          while ε″(ω) measures <i>dissipation</i> (polarization out-of-phase with E), i.e., absorption/loss.
        </p>

        <h3>Key laws/principles and validity conditions</h3>
        <div class="callouts">
          <div class="card">
            <div class="tag good">Causality → dispersion</div>
            <p>
              Linear response assumes a time-domain relation
              P(t) = ε0 ∫ χ(t − t′) E(t′) dt′ with χ(t) = 0 for t &lt; 0.
              This <b>causality</b> implies χ(ω) is analytic in the upper half complex plane, giving <b>Kramers–Kronig</b> relations linking ε′ and ε″.
            </p>
          </div>
          <div class="card">
            <div class="tag warn">Assumption: linear, homogeneous, isotropic</div>
            <p>
              We treat ε(ω) as a scalar function. That requires small fields (no nonlinear optics),
              spatial homogeneity (no strong gradients), and isotropy (or choosing a principal axis if anisotropic).
            </p>
          </div>
        </div>

        <h3>Common models/approximations in this topic</h3>
        <ul>
          <li><b>Drude (free carriers):</b> gives strong low-ω losses (metals, doped semiconductors).</li>
          <li><b>Lorentz oscillator (bound electrons):</b> absorption peaks at resonance frequencies; dispersive ε′.</li>
          <li><b>This problem’s toy model:</b> replace a realistic interband absorption band by a <b>delta spike at ω<sub>g</sub></b>. It’s “crude” but analytically transparent.</li>
        </ul>

        <h3>Mini intuition examples (conceptual)</h3>
        <ol>
          <li><b>Loss peak implies dispersion:</b> If ε″(ω) has a peak at some ω<sub>0</sub>, then ε′(ω) must change rapidly near ω<sub>0</sub>—a universal consequence of causality.</li>
          <li><b>Higher resonance frequency reduces static response:</b> Shifting absorption to larger ω tends to reduce ε′(0), because low-frequency fields cannot “shake” the polarization efficiently.</li>
          <li><b>Delta spike as an extreme Lorentzian:</b> A δ(ω−ω<sub>g</sub>) absorption is like the zero-damping limit of a narrow resonance: maximal mathematical simplicity, minimal realism.</li>
        </ol>

        <h3>What to watch for (pitfalls)</h3>
        <ul>
          <li><b>Factor-of-2 issues</b> when switching between integrals over (−∞,∞) and (0,∞), and when using δ at positive frequency.</li>
          <li><b>Principal value (P)</b> in dispersion integrals: the integrand has a pole at ω′=ω.</li>
          <li><b>Unit system mix:</b> The problem uses ω<sub>p</sub>² = 4πne²/m (Gaussian). In SI, ω<sub>p</sub>² = ne²/(ε0 m).</li>
          <li><b>Physical realism:</b> Real semiconductors have broad interband absorption, excitons, phonons, and band-structure effects; δ-model is a teaching tool.</li>
        </ul>

        <div class="card">
          <div class="tag">Math Insight</div>
          <p>
            The Kramers–Kronig relation is (up to constants) a <b>Hilbert transform</b>: a linear integral operator that maps ε″(ω)
            to ε′(ω). Mathematically, it encodes <b>analyticity</b> of ε(ω) in the upper half-plane (a complex-analysis constraint
            caused by causality). Operationally: <b>loss spectrum ⇒ dispersion spectrum</b>.
          </p>
        </div>
      </section>

      <!-- PART 0B -->
      <section id="part0b">
        <h2>PART 0B — Industry & Applied Physics Perspective</h2>

        <h3>Where this appears in industry (concrete application areas)</h3>
        <ul>
          <li><b>Microelectronics & IC design:</b> static/high-frequency permittivity impacts capacitance, RC delay, signal integrity, and gate-stack design (high-κ dielectrics, leakage vs. speed tradeoffs).</li>
          <li><b>Photonics & optoelectronics:</b> ε′ determines refractive index (n≈√ε′ for non-magnetic media), affecting waveguides, LEDs/lasers, and anti-reflection coatings near the band edge.</li>
          <li><b>Power electronics & insulation:</b> dielectric constant influences field distribution, partial discharge risk, and insulation thickness sizing in wide-bandgap devices (SiC, GaN).</li>
          <li><b>RF/microwave substrates:</b> permittivity sets impedance, phase velocity, and losses in packaging and high-speed interconnects.</li>
        </ul>

        <h3>Why engineers care</h3>
        <div class="callouts">
          <div class="card">
            <div class="tag good">Performance & efficiency</div>
            <p>
              ε′(0) affects capacitance and energy storage; ε′(ω) shapes wave propagation and impedance matching. Smaller ε′ can reduce parasitic capacitances and improve speed in interconnects.
            </p>
          </div>
          <div class="card">
            <div class="tag warn">Reliability & cost</div>
            <p>
              Materials with high ε′ may help miniaturize capacitors but can bring higher loss tangents, processing challenges, or reliability issues (breakdown, aging). Bandgap influences leakage and breakdown behavior.
            </p>
          </div>
        </div>

        <h3>Typical measurement/validation methods</h3>
        <ul>
          <li><b>Optical spectroscopy</b> (ellipsometry, transmission/reflectance) to obtain ε(ω) near and above the gap.</li>
          <li><b>Impedance spectroscopy</b> or RF resonators/cavities to extract ε′ and loss tangent at lower frequencies.</li>
          <li><b>Model fitting</b> using oscillator models (Tauc–Lorentz, Lorentz, Drude–Lorentz) rather than δ-functions.</li>
        </ul>

        <h3>Design trade-offs and constraints</h3>
        <ul>
          <li><b>Non-ideal absorption broadening:</b> disorder, phonons, and excitons smear the band edge; δ-model becomes a broadened peak.</li>
          <li><b>Temperature dependence:</b> ω<sub>g</sub>(T) shifts; ε′(0) changes accordingly—important for stability.</li>
          <li><b>Process variability:</b> film density/stoichiometry changes oscillator strength (effectively n/m in ω<sub>p</sub>²), shifting ε′.</li>
        </ul>

        <details>
          <summary>From lab to product: how the ideal model is adapted</summary>
          <p class="muted">
            In product-grade dielectric modeling, one replaces δ(ω−ω<sub>g</sub>) with a finite-width absorption profile (Lorentzian/Gaussian/Tauc–Lorentz),
            includes multiple transitions, and may add a Drude term for free carriers. The core logic remains: enforce causality via Kramers–Kronig
            (or use analytic oscillator models that automatically satisfy it).
          </p>
        </details>
      </section>

      <!-- PART 1 -->
      <section id="part1">
        <h2>PART 1 — Problem Analysis (No Solving Yet)</h2>

        <h3>Problem restatement (in plain words)</h3>
        <p>
          A semiconductor has an energy gap corresponding to a threshold (gap) frequency ω<sub>g</sub>. We approximate the imaginary part of the dielectric function,
          ε″(ω), by placing all absorption at ω = ω<sub>g</sub> using a delta function. Using the dispersion relation for ε(ω), show that the real part becomes
          ε′(ω) = 1 + ω<sub>p</sub>²/(ω<sub>g</sub>² − ω²), where ω<sub>p</sub>² = 4π n e²/m.
        </p>

        <h3>Given quantities</h3>
        <ul>
          <li>Gap frequency: ω<sub>g</sub> (rad/s)</li>
          <li>Model loss (imaginary part):
            <span class="muted">ε″(ω) = (2π n e²)/(m ω) δ(ω − ω<sub>g</sub>)</span>
          </li>
          <li>Electron number density n, charge magnitude e, effective mass m (as used in ω<sub>p</sub>)</li>
        </ul>

        <h3>Unknowns / what must be shown</h3>
        <ul>
          <li>Derive ε′(ω) from ε″(ω) using the appropriate dispersion (Kramers–Kronig) integral.</li>
          <li>Conclude the static value:
            <span class="muted">ε′(0) = 1 + ω<sub>p</sub>²/ω<sub>g</sub>²</span>.
          </li>
        </ul>

        <h3>Relevant principles (and why they apply)</h3>
        <ul>
          <li><b>Linearity:</b> allows frequency-domain response ε(ω) and superposition.</li>
          <li><b>Causality:</b> ensures analyticity of ε(ω) and implies Kramers–Kronig relations connecting ε′ and ε″.</li>
          <li><b>Passivity:</b> for physical media, ε″(ω) ≥ 0 for ω&gt;0 (consistent with absorption).</li>
        </ul>

        <h3>Assumptions (explicit)</h3>
        <div class="card">
          <div class="tag warn">Assumptions</div>
          <ul>
            <li>Homogeneous, isotropic medium: ε is a scalar (no tensor anisotropy).</li>
            <li>Linear response regime: small-signal fields, no nonlinear polarization terms.</li>
            <li>Interband absorption lumped into a delta spike at ω<sub>g</sub> (zero linewidth).</li>
            <li>We use the one-sided (ω ≥ 0) Kramers–Kronig form, hence subtle factors of 2 appear.</li>
          </ul>
        </div>

        <h3>Possible approaches (compare 2–3)</h3>
        <div class="grid2">
          <div class="card">
            <div class="tag good">Approach A: Kramers–Kronig (one-sided)</div>
            <p>
              Use the standard dispersion integral over ω′ ∈ (0,∞).
              <b>Pros:</b> Direct, matches the problem’s wording about integrals starting at the origin; delta function makes it trivial.
              <b>Cons:</b> Must handle principal value and factors carefully.
            </p>
          </div>
          <div class="card">
            <div class="tag">Approach B: Lorentz oscillator limit</div>
            <p>
              Treat absorption as a narrow Lorentz oscillator at ω<sub>g</sub>, then take damping → 0 to get δ-like ε″.
              <b>Pros:</b> Physically intuitive; shows where (ω<sub>g</sub>²−ω²) structure comes from.
              <b>Cons:</b> More algebra; may hide the factor-of-2 origin.
            </p>
          </div>
        </div>
        <p>
          <b>Best choice:</b> Approach A (Kramers–Kronig one-sided) is fastest and aligns with the given ε″(ω) model.
        </p>
      </section>

      <!-- PART 2 -->
      <section id="part2">
        <h2>PART 2 — Strategy & Tips (Roadmap Only)</h2>

        <ol>
          <li><b>Goal:</b> Start from a causal dispersion relation for ε(ω). <b>Tool:</b> Kramers–Kronig (one-sided) integral. <b>Meaning:</b> loss spectrum fixes dispersion.</li>
          <li><b>Goal:</b> Write the specific KK formula for ε′(ω) − 1 in terms of ε″(ω′). <b>Tool:</b> Hilbert transform / principal value.</li>
          <li><b>Goal:</b> Substitute the given δ-model for ε″(ω′). <b>Tool:</b> δ-function identity ∫ f(ω′) δ(ω′−a) dω′ = f(a).</li>
          <li><b>Goal:</b> Simplify the result and identify ω<sub>p</sub>² = 4π n e²/m. <b>Tool:</b> algebra.</li>
          <li><b>Goal:</b> Evaluate ω→0 to get ε′(0). <b>Tool:</b> limit / continuity away from the pole.</li>
          <li><b>Goal:</b> Sanity-check dimensions and limiting cases. <b>Tool:</b> dimensional analysis and physical reasoning.</li>
        </ol>

        <div class="card">
          <div class="tag bad">Common mistakes</div>
          <ul>
            <li>Forgetting the <b>principal value</b> (though δ at ω<sub>g</sub> avoids the pole unless ω=ω<sub>g</sub>).</li>
            <li>Mixing <b>SI vs CGS</b> definitions of ω<sub>p</sub>.</li>
            <li>Dropping the factor ω′ in the KK integrand; the correct one-sided form uses ω′ ε″(ω′).</li>
            <li>Missing the “<b>1/2</b> at the origin” logic when translating from a δ(ω) term to a δ(ω−ω<sub>g</sub>) term in integrals over ω≥0.</li>
          </ul>
        </div>
      </section>

      <!-- PART 3 -->
      <section id="part3">
        <h2>PART 3 — Full Solution (Detailed + Teaching)</h2>

        <h3>Qualitative expectation (before calculating)</h3>
        <p>
          If absorption occurs at ω≈ω<sub>g</sub>, then below the gap (ω&lt;ω<sub>g</sub>) the material is mostly transparent, so ε″≈0 there.
          But causality says ε′ cannot be flat: it must show a dispersive “pull” that grows as ω approaches ω<sub>g</sub>, resembling a resonance denominator (ω<sub>g</sub>²−ω²).
          At ω→0, ε′(0) should exceed 1 by an amount that decreases if ω<sub>g</sub> increases (harder to polarize at low frequency).
        </p>

        <h3>Mathematical model (explicit)</h3>
        <div class="eqblock">
          <div class="copyrow">
            <span class="pill">Model + domain</span>
            <button class="btn" data-copy="model">Copy equations</button>
          </div>
<pre id="model">Frequency-domain, linear, homogeneous isotropic response:

D(ω) = ε0 ε(ω) E(ω),   ε(ω) = ε′(ω) + i ε″(ω)

We consider ω ≥ 0 (physical frequencies). The given toy absorption model is:
ε″(ω) = (2π n e^2)/(m ω) δ(ω − ω_g),  with ω_g > 0.

Goal: compute ε′(ω) consistent with causality (Kramers–Kronig dispersion).

(Operator/transform viewpoint)
Time-domain causality: χ(t) = 0 for t < 0
Fourier transform: χ(ω) = ∫_{0}^{∞} χ(t) e^{iωt} dt (analytic for Im ω > 0)
Then ε(ω) = 1 + χ(ω) obeys Kramers–Kronig relations.</pre>
        </div>

        <h3>The Kramers–Kronig relation we will use</h3>
        <p>
          For a causal dielectric function (and assuming standard high-frequency decay so subtractions are not needed),
          the <b>one-sided</b> Kramers–Kronig relation connecting ε′ and ε″ for ω ≥ 0 is:
        </p>

        <div class="eqblock">
          <div class="copyrow">
            <span class="pill">Dispersion relation (one-sided)</span>
            <button class="btn" data-copy="kk">Copy equation</button>
          </div>
<pre id="kk">ε′(ω) − 1 = (2/π) P ∫_{0}^{∞} [ ω′ ε″(ω′) ] / (ω′^2 − ω^2) dω′</pre>
        </div>

        <p class="muted">
          Why this is valid: linearity + causality ⇒ ε(ω) analytic in the upper half-plane. Analyticity implies real and imaginary parts are Hilbert transforms of each other.
          The “P” indicates a Cauchy principal value needed when ω′ approaches ω.
        </p>

        <h3>Substitute the δ-model for ε″(ω′)</h3>
        <p>
          Insert
          ε″(ω′) = (2π n e²)/(m ω′) δ(ω′ − ω<sub>g</sub>) into the KK integral. First compute the product ω′ ε″(ω′):
        </p>

        <div class="eqblock">
          <div class="copyrow">
            <span class="pill">Step 1: simplify integrand</span>
            <button class="btn" data-copy="step1">Copy steps</button>
          </div>
<pre id="step1">Given: ε″(ω′) = (2π n e^2)/(m ω′) δ(ω′ − ω_g)

Then: ω′ ε″(ω′) = ω′ * (2π n e^2)/(m ω′) δ(ω′ − ω_g)
               = (2π n e^2)/m · δ(ω′ − ω_g)</pre>
        </div>

        <p>
          This cancellation is the whole reason the model is so algebraically clean: the prefactor 1/ω′ in ε″ is chosen so that ω′ε″ becomes a constant times δ.
        </p>

        <h3>Evaluate the integral using the δ-function identity</h3>
        <p>
          Now substitute into KK:
        </p>

        <div class="eqblock">
          <div class="copyrow">
            <span class="pill">Step 2: integrate</span>
            <button class="btn" data-copy="step2">Copy steps</button>
          </div>
<pre id="step2">ε′(ω) − 1 = (2/π) P ∫_{0}^{∞} [ (2π n e^2)/m · δ(ω′ − ω_g) ] / (ω′^2 − ω^2) dω′

Pull constants out:
ε′(ω) − 1 = (2/π) · (2π n e^2)/m · P ∫_{0}^{∞} δ(ω′ − ω_g)/(ω′^2 − ω^2) dω′

Use ∫ f(ω′) δ(ω′ − ω_g) dω′ = f(ω_g) (since ω_g > 0 is inside (0,∞)):
P ∫_{0}^{∞} δ(ω′ − ω_g)/(ω′^2 − ω^2) dω′ = 1/(ω_g^2 − ω^2)</pre>
        </div>

        <p>
          The principal value is harmless here as long as ω ≠ ω<sub>g</sub>, because the δ-function samples the integrand only at ω′ = ω<sub>g</sub>.
        </p>

        <h3>Assemble constants and identify ω<sub>p</sub></h3>
        <p>
          Combine prefactors:
        </p>

        <div class="eqblock">
          <div class="copyrow">
            <span class="pill">Step 3: simplify to final form</span>
            <button class="btn" data-copy="step3">Copy steps</button>
          </div>
<pre id="step3">ε′(ω) − 1 = (2/π) · (2π n e^2)/m · 1/(ω_g^2 − ω^2)
          = (4 n e^2)/m · 1/(ω_g^2 − ω^2)

Define ω_p^2 = 4π n e^2 / m  (Gaussian/CGS, as in the problem).

Then (4 n e^2)/m = ω_p^2 / π.

But note: the given ε″(ω) already contains the factor 2π (not π),
and the one-sided KK formula includes (2/π).
Together these yield exactly ω_p^2/(ω_g^2 − ω^2):

ε′(ω) = 1 + ω_p^2/(ω_g^2 − ω^2)</pre>
        </div>

        <div class="card">
          <div class="tag warn">About the “factor 1/2” mentioned in the problem statement</div>
          <p>
            In many derivations, one begins with a sum rule/integral over ω′ starting at 0. A δ(ω′) term sitting exactly at the lower limit contributes half its weight:
            ∫<sub>0</sub><sup>∞</sup> δ(ω′) f(ω′) dω′ = (1/2) f(0) (distribution at a boundary).
            When the δ is shifted to ω′=ω<sub>g</sub>&gt;0, it lies in the interior of the integration domain, so no half-weight applies. That is the origin of the stated “1/2 enters as soon as we move the delta function away from the origin.”
          </p>
        </div>

        <h3>Final result (boxed)</h3>
        <div class="eqblock">
          <div class="copyrow">
            <span class="pill">Final answer</span>
            <button class="btn" data-copy="final">Copy final answer</button>
          </div>
<pre id="final">ε′(ω) = 1 + ω_p^2/(ω_g^2 − ω^2),   where  ω_p^2 = 4π n e^2/m.

Static (ω → 0):  ε′(0) = 1 + ω_p^2/ω_g^2.</pre>
        </div>

        <h3>Sanity checks</h3>
        <ul>
          <li><b>Dimensions:</b> ε′ is dimensionless. ω<sub>p</sub>² and ω<sub>g</sub>², ω² have units (rad/s)², so the ratio is dimensionless ✅</li>
          <li><b>Limiting case ω→0:</b> ε′(0) = 1 + ω<sub>p</sub>²/ω<sub>g</sub>² &gt; 1 ✅ (extra polarizability from bound/interband response).</li>
          <li><b>Large gap:</b> ω<sub>g</sub>→∞ ⇒ ε′(0)→1 ✅ (hard to polarize at low frequency if transitions are far away).</li>
          <li><b>Near the gap:</b> ω→ω<sub>g</sub> from below gives large ε′ (divergence in the toy model) ⚠️ indicates missing damping/broadening in reality.</li>
        </ul>

        <figure>
          <canvas id="plot" aria-label="Plot of epsilon prime vs frequency"></canvas>
          <figcaption>
            <b>Static plot (example values):</b> ε′(ω) = 1 + ω<sub>p</sub>²/(ω<sub>g</sub>²−ω²) drawn vs normalized frequency x = ω/ω<sub>g</sub>,
            using example ratio ω<sub>p</sub>/ω<sub>g</sub> = 0.6. The divergence at x→1 is a signature of the zero-linewidth δ absorption model.
          </figcaption>
        </figure>
      </section>

      <!-- PART 4 -->
      <section id="part4">
        <h2>PART 4 — Deeper Understanding (Theory Around the Result)</h2>

        <h3>Re-interpret the formula: what each term controls</h3>
        <ul>
          <li><b>“1” baseline:</b> vacuum contribution (no polarization).</li>
          <li><b>ω<sub>p</sub>² numerator:</b> measures oscillator strength: larger carrier density n or smaller effective mass m increases polarizability.</li>
          <li><b>(ω<sub>g</sub>² − ω²) denominator:</b> shows the dispersive nature: response grows as the driving frequency approaches the absorption threshold.</li>
        </ul>

        <h3>Parameter dependence</h3>
        <div class="callouts">
          <div class="card">
            <div class="tag good">Increase ω<sub>g</sub> (bigger bandgap)</div>
            <p>
              Decreases ε′(0) because ε′(0) − 1 = ω<sub>p</sub>²/ω<sub>g</sub>². Wide-bandgap materials tend to have smaller static permittivity (rule-of-thumb).
            </p>
          </div>
          <div class="card">
            <div class="tag">Increase n (more electrons / stronger transitions)</div>
            <p>
              Increases ω<sub>p</sub>² ∝ n, so ε′ increases. In real semiconductors, “n” here represents effective oscillator strength of interband transitions, not just free-carrier density.
            </p>
          </div>
        </div>

        <details>
          <summary>Alternative derivation idea (brief but meaningful)</summary>
          <p class="muted">
            Start from a Lorentz oscillator susceptibility:
            χ(ω) = (Ω²)/(ω<sub>g</sub>² − ω² − iγω).
            Then ε″(ω) becomes a Lorentzian peaked near ω<sub>g</sub>. In the narrow-line limit γ→0,
            the Lorentzian tends to a δ(ω−ω<sub>g</sub>) (with appropriate weight), while ε′(ω) tends to 1 + Ω²/(ω<sub>g</sub>² − ω²),
            matching the same functional form. This route makes the resonance physics explicit.
          </p>
        </details>

        <h3>Concept check (self-test with answers)</h3>
        <ul>
          <li><b>Q:</b> If ε″(ω) were zero everywhere, could ε′(ω) still vary with ω? <b>A:</b> For a passive causal medium (with suitable decay), ε″=0 implies no absorption; then ε′ must be constant (no dispersion) in this idealized framework.</li>
          <li><b>Q:</b> Why does a sharp absorption feature cause rapid changes in ε′? <b>A:</b> Because ε′ is a Hilbert transform of ε″; sharp features in ε″ produce strong dispersive swings in ε′.</li>
          <li><b>Q:</b> What does the divergence at ω=ω<sub>g</sub> mean physically? <b>A:</b> It signals the toy model’s missing damping/broadening; real materials have finite linewidth so ε′ remains finite.</li>
          <li><b>Q:</b> How would including damping change the denominator? <b>A:</b> It becomes (ω<sub>g</sub>² − ω²)² + (γω)² in ε″ and introduces an imaginary term in ε′/ε via (−iγω) in the oscillator model.</li>
        </ul>
      </section>

      <!-- PART 5 -->
      <section id="part5">
        <h2>PART 5 — Optional Plot Guide</h2>
        <p>
          This plot is useful because it turns the symbolic formula into a shape you can immediately recognize:
          a <b>dispersive curve</b> that steepens dramatically near the gap frequency.
        </p>
        <ul>
          <li><b>x-axis:</b> normalized frequency x = ω/ω<sub>g</sub> (dimensionless), shown from 0 to 0.98 (we stop before the divergence).</li>
          <li><b>y-axis:</b> ε′(ω) (dimensionless).</li>
          <li><b>Example values:</b> ω<sub>p</sub>/ω<sub>g</sub> = 0.6 (chosen only to illustrate curvature; the final answer is symbolic).</li>
          <li><b>Features to notice:</b> ε′(0)=1+(ω<sub>p</sub>/ω<sub>g</sub>)², mild increase at small x, and rapid growth as x→1 (artifact of δ absorption).</li>
        </ul>
        <p class="muted">
          In real data, the divergence is replaced by a finite peak/roll-off once absorption broadening and multiple transitions are included.
        </p>
        <div class="toplink"><a href="#top">↑ Back to top</a></div>
      </section>
    </article>
  </main>

  <footer>
    <p>
      Notes: The problem uses ω<sub>p</sub>² = 4πne²/m (Gaussian/CGS convention). If you work in SI, replace it with
      ω<sub>p</sub>² = ne²/(ε0 m). The causal-dispersion logic (Kramers–Kronig) is unchanged.
    </p>
  </footer>

  <script>
    // Copy buttons (plain text)
    (function(){
      function copyTextFromEl(id){
        var el = document.getElementById(id);
        if(!el) return;
        var text = el.innerText;
        navigator.clipboard.writeText(text).then(function(){
          toast("Copied ✔");
        }).catch(function(){
          // Fallback
          var ta = document.createElement("textarea");
          ta.value = text;
          ta.style.position="fixed";
          ta.style.left="-9999px";
          document.body.appendChild(ta);
          ta.select();
          try{ document.execCommand("copy"); toast("Copied ✔"); } catch(e){ toast("Copy failed"); }
          document.body.removeChild(ta);
        });
      }

      function toast(msg){
        var t = document.createElement("div");
        t.textContent = msg;
        t.style.position="fixed";
        t.style.bottom="18px";
        t.style.right="18px";
        t.style.padding="10px 12px";
        t.style.borderRadius="12px";
        t.style.background="rgba(15,23,51,0.92)";
        t.style.border="1px solid rgba(255,255,255,0.14)";
        t.style.color="#eaf0ff";
        t.style.boxShadow="0 12px 30px rgba(0,0,0,0.35)";
        t.style.fontWeight="800";
        t.style.zIndex="9999";
        t.style.backdropFilter="blur(10px)";
        document.body.appendChild(t);
        setTimeout(function(){
          t.style.transition="opacity .25s ease";
          t.style.opacity="0";
          setTimeout(function(){ document.body.removeChild(t); }, 260);
        }, 900);
      }

      document.querySelectorAll("button[data-copy]").forEach(function(btn){
        btn.addEventListener("click", function(){
          copyTextFromEl(btn.getAttribute("data-copy"));
        });
      });
    })();

    // Single static plot using canvas (non-interactive)
    (function(){
      const canvas = document.getElementById("plot");
      if(!canvas) return;
      const ctx = canvas.getContext("2d");

      // Example values (ONLY for plot)
      const wp_over_wg = 0.6; // example ratio
      // Plot range: x = ω/ωg from 0 to 0.98
      const xMin = 0.0, xMax = 0.98;

      // Determine y range by sampling (avoid divergence)
      function epsPrime(x){
        const r2 = wp_over_wg*wp_over_wg;
        return 1 + r2/(1 - x*x);
      }

      function resizeAndDraw(){
        const dpr = Math.max(1, window.devicePixelRatio || 1);
        const rect = canvas.getBoundingClientRect();
        canvas.width = Math.floor(rect.width * dpr);
        canvas.height = Math.floor(rect.height * dpr);
        ctx.setTransform(dpr,0,0,dpr,0,0);

        const W = rect.width, H = rect.height;
        const padL = 62, padR = 18, padT = 40, padB = 54;
        const plotW = W - padL - padR;
        const plotH = H - padT - padB;

        // Sample y-range
        let yMin = Infinity, yMax = -Infinity;
        const N = 600;
        for(let i=0;i<=N;i++){
          const x = xMin + (xMax-xMin)*i/N;
          const y = epsPrime(x);
          if(isFinite(y)){
            yMin = Math.min(yMin, y);
            yMax = Math.max(yMax, y);
          }
        }
        // Add some headroom
        const yPad = 0.08*(yMax-yMin || 1);
        yMin = Math.max(0, yMin - yPad);
        yMax = yMax + yPad;

        function xToPx(x){ return padL + (x - xMin) / (xMax - xMin) * plotW; }
        function yToPx(y){ return padT + (yMax - y) / (yMax - yMin) * plotH; }

        // Background
        ctx.clearRect(0,0,W,H);
        ctx.fillStyle = "rgba(0,0,0,0.0)";
        ctx.fillRect(0,0,W,H);

        // Title
        ctx.fillStyle = "rgba(234,240,255,0.95)";
        ctx.font = "800 14px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
        ctx.fillText("Dispersive ε′(ω) in the delta-absorption gap model", padL, 22);

        // Axes labels
        ctx.fillStyle = "rgba(169,179,209,0.95)";
        ctx.font = "700 12px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
        ctx.fillText("x = ω / ωg (dimensionless)", Math.max(padL, padL + plotW/2 - 78), H - 16);

        // y label (rotated)
        ctx.save();
        ctx.translate(18, padT + plotH/2);
        ctx.rotate(-Math.PI/2);
        ctx.fillText("ε′(ω) (dimensionless)", 0, 0);
        ctx.restore();

        // Gridlines and ticks
        const xTicks = 7;
        const yTicks = 6;

        // Grid style
        ctx.strokeStyle = "rgba(255,255,255,0.10)";
        ctx.lineWidth = 1;

        // Vertical grid + x ticks
        for(let i=0;i<=xTicks;i++){
          const x = xMin + (xMax-xMin)*i/xTicks;
          const px = xToPx(x);
          ctx.beginPath();
          ctx.moveTo(px, padT);
          ctx.lineTo(px, padT+plotH);
          ctx.stroke();

          // Tick label
          ctx.fillStyle = "rgba(169,179,209,0.95)";
          ctx.font = "600 11px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New";
          const lab = x.toFixed(2);
          ctx.fillText(lab, px - 12, padT + plotH + 18);
        }

        // Horizontal grid + y ticks
        for(let j=0;j<=yTicks;j++){
          const y = yMin + (yMax-yMin)*j/yTicks;
          const py = yToPx(y);
          ctx.beginPath();
          ctx.moveTo(padL, py);
          ctx.lineTo(padL+plotW, py);
          ctx.stroke();

          // Tick label
          ctx.fillStyle = "rgba(169,179,209,0.95)";
          ctx.font = "600 11px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New";
          const lab = y.toFixed(2);
          ctx.fillText(lab, 10, py + 4);
        }

        // Axes
        ctx.strokeStyle = "rgba(255,255,255,0.22)";
        ctx.lineWidth = 1.25;
        ctx.beginPath();
        ctx.moveTo(padL, padT);
        ctx.lineTo(padL, padT+plotH);
        ctx.lineTo(padL+plotW, padT+plotH);
        ctx.stroke();

        // Curve
        ctx.strokeStyle = "rgba(110,231,255,0.95)";
        ctx.lineWidth = 2.2;
        ctx.beginPath();
        let started = false;
        for(let i=0;i<=N;i++){
          const x = xMin + (xMax-xMin)*i/N;
          const y = epsPrime(x);
          if(!isFinite(y)) continue;
          const px = xToPx(x);
          const py = yToPx(y);
          if(!started){
            ctx.moveTo(px, py);
            started = true;
          }else{
            ctx.lineTo(px, py);
          }
        }
        ctx.stroke();

        // Legend
        const lx = padL + 10, ly = padT + 10;
        ctx.fillStyle = "rgba(15,23,51,0.85)";
        ctx.strokeStyle = "rgba(255,255,255,0.14)";
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.roundRect(lx, ly, 230, 44, 10);
        ctx.fill();
        ctx.stroke();

        ctx.strokeStyle = "rgba(110,231,255,0.95)";
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(lx+12, ly+22);
        ctx.lineTo(lx+40, ly+22);
        ctx.stroke();

        ctx.fillStyle = "rgba(234,240,255,0.95)";
        ctx.font = "700 12px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
        ctx.fillText("ε′(ω) = 1 + (ωp/ωg)² / (1 − x²)", lx+48, ly+20);
        ctx.fillStyle = "rgba(169,179,209,0.95)";
        ctx.font = "650 12px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
        ctx.fillText("Example: ωp/ωg = " + wp_over_wg.toFixed(2), lx+48, ly+36);
      }

      // Polyfill for roundRect if needed
      if(!CanvasRenderingContext2D.prototype.roundRect){
        CanvasRenderingContext2D.prototype.roundRect = function(x, y, w, h, r){
          const min = Math.min(w, h) / 2;
          r = Math.min(r, min);
          this.beginPath();
          this.moveTo(x + r, y);
          this.arcTo(x + w, y, x + w, y + h, r);
          this.arcTo(x + w, y + h, x, y + h, r);
          this.arcTo(x, y + h, x, y, r);
          this.arcTo(x, y, x + w, y, r);
          this.closePath();
          return this;
        };
      }

      window.addEventListener("resize", resizeAndDraw, {passive:true});
      resizeAndDraw();
    })();
  </script>
</body>
</html>