<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Gap Plasmons Between Two Half-Spaces: Electrostatic Dispersion and van der Waals Link</title>
  <style>
    :root{
      --bg:#0b1020;
      --card:#121a33;
      --card2:#0f1730;
      --text:#e9ecff;
      --muted:#b9c0ff;
      --faint:#8a93d6;
      --line:rgba(255,255,255,.12);
      --accent:#7dd3fc;
      --accent2:#a78bfa;
      --good:#86efac;
      --warn:#fde68a;
      --bad:#fca5a5;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family:var(--sans);
      background: radial-gradient(1200px 700px at 15% 0%, rgba(125,211,252,.18), transparent 60%),
                  radial-gradient(900px 600px at 85% 10%, rgba(167,139,250,.16), transparent 55%),
                  linear-gradient(180deg, #070a14, var(--bg) 30%, #070a14);
      color:var(--text);
      line-height:1.55;
    }
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    header{
      padding:28px 18px 14px;
      border-bottom:1px solid var(--line);
      position:relative;
      overflow:hidden;
    }
    header .wrap{
      max-width:1200px;
      margin:0 auto;
      display:grid;
      grid-template-columns: 1.35fr .65fr;
      gap:18px;
      align-items:start;
    }
    h1{
      margin:0 0 6px;
      font-size: clamp(1.5rem, 2.2vw + 1rem, 2.3rem);
      letter-spacing:.2px;
    }
    .subtitle{
      margin:0;
      color:var(--muted);
      max-width:80ch;
    }
    .meta{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius:16px;
      padding:14px 14px 12px;
      box-shadow:var(--shadow);
    }
    .meta .pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      border:1px solid var(--line);
      padding:6px 10px;
      border-radius:999px;
      color:var(--muted);
      font-size:.9rem;
      margin:0 8px 8px 0;
      background:rgba(0,0,0,.15);
      white-space:nowrap;
    }
    .grid{
      max-width:1200px;
      margin:0 auto;
      display:grid;
      grid-template-columns: 280px 1fr;
      gap:18px;
      padding:18px;
      align-items:start;
    }
    nav{
      position:sticky;
      top:14px;
      align-self:start;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius:18px;
      padding:14px;
      box-shadow:var(--shadow);
    }
    nav h2{
      margin:0 0 10px;
      font-size:1rem;
      letter-spacing:.2px;
      color:var(--muted);
    }
    .toc{
      list-style:none;
      padding:0;
      margin:0;
      display:grid;
      gap:8px;
    }
    .toc a{
      display:block;
      padding:8px 10px;
      border-radius:12px;
      border:1px solid transparent;
      background:rgba(0,0,0,.12);
      color:var(--text);
      font-size:.95rem;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
    }
    .toc a:hover{
      transform: translateY(-1px);
      border-color: rgba(125,211,252,.35);
      background: rgba(125,211,252,.10);
      text-decoration:none;
    }
    main{
      display:grid;
      gap:16px;
      min-width:0;
    }
    section, article{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius:18px;
      padding:18px 18px 16px;
      box-shadow:var(--shadow);
      min-width:0;
    }
    h2{
      margin:0 0 10px;
      font-size:1.25rem;
    }
    h3{
      margin:16px 0 8px;
      font-size:1.05rem;
      color:var(--muted);
    }
    p{margin:10px 0}
    ul{margin:8px 0 10px 20px}
    li{margin:6px 0}
    .two-col{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 980px){
      header .wrap{grid-template-columns:1fr}
      .grid{grid-template-columns:1fr}
      nav{position:relative; top:auto}
      .two-col{grid-template-columns:1fr}
    }
    .card{
      background:rgba(0,0,0,.14);
      border:1px solid var(--line);
      border-radius:16px;
      padding:14px;
    }
    .callout{
      border-left:4px solid var(--accent);
      background: linear-gradient(90deg, rgba(125,211,252,.12), rgba(0,0,0,.10));
      padding:12px 14px;
      border-radius:14px;
      border:1px solid rgba(125,211,252,.22);
      margin:12px 0;
    }
    .callout.warn{
      border-left-color: var(--warn);
      border-color: rgba(253,230,138,.25);
      background: linear-gradient(90deg, rgba(253,230,138,.12), rgba(0,0,0,.10));
    }
    .callout.good{
      border-left-color: var(--good);
      border-color: rgba(134,239,172,.22);
      background: linear-gradient(90deg, rgba(134,239,172,.11), rgba(0,0,0,.10));
    }
    .callout.bad{
      border-left-color: var(--bad);
      border-color: rgba(252,165,165,.22);
      background: linear-gradient(90deg, rgba(252,165,165,.11), rgba(0,0,0,.10));
    }
    .kbox{
      background: rgba(0,0,0,.18);
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px 12px 10px;
      margin:12px 0;
      overflow:auto;
    }
    .kbox .row{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      margin:0 0 8px;
    }
    .tag{
      display:inline-block;
      font-size:.85rem;
      color:var(--muted);
      border:1px solid var(--line);
      padding:4px 8px;
      border-radius:999px;
      background:rgba(0,0,0,.14);
    }
    pre{
      margin:0;
      font-family:var(--mono);
      font-size:.92rem;
      line-height:1.45;
      color:#eaf2ff;
      white-space:pre;
    }
    code{font-family:var(--mono)}
    button.copy{
      appearance:none;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding:7px 10px;
      border-radius:12px;
      cursor:pointer;
      font-size:.9rem;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      white-space:nowrap;
    }
    button.copy:hover{
      transform: translateY(-1px);
      border-color: rgba(167,139,250,.35);
      background: rgba(167,139,250,.12);
    }
    .mini{
      color:var(--faint);
      font-size:.92rem;
    }
    details{
      border:1px solid var(--line);
      background: rgba(0,0,0,.12);
      border-radius:16px;
      padding:10px 12px;
      margin:10px 0;
    }
    summary{
      cursor:pointer;
      color:var(--muted);
      font-weight:600;
    }
    figure{
      margin:12px 0 6px;
      padding:12px;
      border-radius:16px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.14);
    }
    figcaption{
      margin-top:8px;
      color:var(--faint);
      font-size:.92rem;
    }
    canvas{
      width:100%;
      height:320px;
      display:block;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(5,7,14,.55);
    }
    .backtop{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      background: rgba(0,0,0,.12);
      color:var(--text);
      margin-top:6px;
    }
    .backtop:hover{
      background: rgba(125,211,252,.10);
      text-decoration:none;
      border-color: rgba(125,211,252,.30);
    }
    footer{
      max-width:1200px;
      margin:0 auto;
      padding:10px 18px 26px;
      color:var(--faint);
    }

    /* micro animation */
    @keyframes fadeUp{
      from{opacity:0; transform: translateY(6px)}
      to{opacity:1; transform: translateY(0)}
    }
    section, article, nav, .meta{animation: fadeUp .35s ease both}

    /* print friendly */
    @media print{
      body{background:#fff; color:#000}
      header, nav, .copy, .backtop{display:none !important}
      section, article{box-shadow:none; border:1px solid #ccc; background:#fff}
      a{color:#000; text-decoration:underline}
      .kbox{background:#f7f7f7}
      pre{color:#000}
      figure{break-inside:avoid}
      section, article{break-inside:avoid; page-break-inside:avoid}
      h2{page-break-after:avoid}
    }
  </style>
</head>
<body>
<header id="top">
  <div class="wrap">
    <div>
      <h1>Gap Plasmons and the van der Waals Interaction (Electrostatic Limit)</h1>
      <p class="subtitle">
        We derive the <em>gap plasmon</em> conditions for two identical semi-infinite media facing each other across a vacuum gap,
        using Laplace’s equation (nonretarded fields). The key result is a compact dispersion condition:
        <strong>ε(ω) = −tanh(K d / 2)</strong> for the symmetric mode.
      </p>
    </div>
    <div class="meta">
      <div class="pill">Regime: nonretarded (electrostatic)</div>
      <div class="pill">PDE: Laplace (∇·(ε∇φ)=0)</div>
      <div class="pill">Geometry: two half-spaces + gap</div>
      <div class="pill">Industrial lens: nanoscale gaps</div>
      <p class="mini" style="margin:6px 0 0;">
        Notation: K = √(k<sub>x</sub><sup>2</sup> + k<sub>y</sub><sup>2</sup>), gap thickness d.
      </p>
    </div>
  </div>
</header>

<div class="grid">
  <nav aria-label="Table of contents">
    <h2>Table of Contents</h2>
    <ul class="toc">
      <li><a href="#quick">Quick Summary</a></li>
      <li><a href="#part0">PART 0 — Concept Primer</a></li>
      <li><a href="#part0b">PART 0B — Industry & Applied Physics</a></li>
      <li><a href="#part1">PART 1 — Problem Analysis</a></li>
      <li><a href="#part2">PART 2 — Strategy & Tips</a></li>
      <li><a href="#part3">PART 3 — Full Solution</a></li>
      <li><a href="#part4">PART 4 — Deeper Understanding</a></li>
      <li><a href="#part5">PART 5 — Optional Plot Guide</a></li>
    </ul>
  </nav>

  <main>
    <section id="quick">
      <h2>Quick Summary</h2>
      <ul>
        <li><strong>What this is:</strong> Electrostatic (<em>nonretarded</em>) surface-plasmon-like modes confined in a vacuum gap between two identical half-spaces.</li>
        <li><strong>Key physics idea:</strong> In-plane oscillations (k<sub>x</sub>, k<sub>y</sub>) create evanescent fields in <em>z</em>; boundary conditions quantize the mode and link it to ε(ω).</li>
        <li><strong>Governing equation:</strong> In each homogeneous region, φ satisfies Laplace: ∇²φ = 0 (with φ(x,y,z,t)=f(z)e^{i(kx x + ky y − ωt)}).</li>
        <li><strong>Core ODE:</strong> f″(z) − K² f(z) = 0, where K² = k<sub>x</sub><sup>2</sup>+k<sub>y</sub><sup>2</sup>.</li>
        <li><strong>Boundary conditions:</strong> Continuity of potential φ and of normal displacement D<sub>z</sub> = −ε ∂φ/∂z across each interface.</li>
        <li><strong>Result type:</strong> Symbolic dispersion condition linking ε(ω) and Kd (no numerical material model required).</li>
        <li><strong>Main result (symmetric mode):</strong> <strong>ε(ω) = −tanh(K d / 2)</strong>.</li>
        <li><strong>Bonus:</strong> The antisymmetric companion condition is <strong>ε(ω) = −coth(K d / 2)</strong> (commonly presented together).</li>
        <li><strong>Physical meaning:</strong> The gap couples two surface modes; symmetric/antisymmetric combinations split in frequency—this splitting controls nonretarded van der Waals attraction via zero-point energy of these modes.</li>
      </ul>

      <div class="callout good">
        <strong>Math Insight:</strong> The mode condition is an <em>eigenvalue/dispersion relation</em> obtained from a linear boundary-value problem for a second-order ODE (Sturm–Liouville flavor on a piecewise domain). The hyperbolic functions appear because the bounded solution in the gap is a linear combination of e^{±Kz}, i.e., cosh/sinh.
      </div>

      <a class="backtop" href="#top">⬆ Back to top</a>
    </section>

    <article id="part0">
      <h2>PART 0 — Concept Primer (Theory Before Solving)</h2>

      <div class="two-col">
        <div class="card">
          <h3>Core definitions (symbols + SI units)</h3>
          <ul>
            <li>φ(x,y,z,t): electric potential [V].</li>
            <li><strong>E = −∇φ</strong>: electric field [V/m].</li>
            <li><strong>D = ε<sub>0</sub> ε(ω) E</strong>: electric displacement [C/m²] in linear isotropic media.</li>
            <li>ε(ω): relative dielectric function (dimensionless), frequency dependent.</li>
            <li>k<sub>x</sub>, k<sub>y</sub>: in-plane wavevector components [1/m].</li>
            <li><strong>K = √(k<sub>x</sub><sup>2</sup>+k<sub>y</sub><sup>2</sup>)</strong>: in-plane magnitude [1/m].</li>
            <li>d: gap thickness [m].</li>
            <li>ω: angular frequency [rad/s].</li>
          </ul>
        </div>

        <div class="card">
          <h3>Physical meaning (intuition)</h3>
          <ul>
            <li>A “surface plasmon” is a charge-density oscillation bound to an interface; its field decays exponentially away from the surface.</li>
            <li>With <em>two</em> nearby surfaces, evanescent tails overlap across the gap, producing two coupled modes:
              <strong>symmetric</strong> (even φ about midplane) and <strong>antisymmetric</strong> (odd φ).</li>
            <li>In the <strong>nonretarded limit</strong>, the electric field is quasi-static: magnetic effects and wave propagation (c) are neglected.</li>
          </ul>
        </div>
      </div>

      <h3>Key laws/principles and validity conditions</h3>
      <div class="callout">
        <ul style="margin:0 0 0 18px;">
          <li><strong>Electrostatics in linear media:</strong> ∇·D = 0 in charge-free regions; with D = ε<sub>0</sub>εE and E = −∇φ, this becomes ∇·(ε∇φ)=0.</li>
          <li><strong>Homogeneous region:</strong> ε is constant in each region ⇒ ∇²φ = 0 (Laplace).</li>
          <li><strong>Boundary conditions (no free surface charge):</strong>
            (i) φ continuous, (ii) D<sub>n</sub> continuous ⇒ ε ∂φ/∂n continuous (with sign carefully handled).</li>
          <li><strong>Nonretarded (quasi-static) regime:</strong> K ≫ ω/c (or separations much smaller than the relevant EM wavelength) so retardation is negligible.</li>
        </ul>
      </div>

      <h3>Common models/approximations and why used</h3>
      <ul>
        <li><strong>Separable ansatz:</strong> translational invariance in x,y suggests Fourier modes e^{i(kx x + ky y)}.</li>
        <li><strong>Electrostatic limit:</strong> turns a wave equation into Laplace’s equation, making the mathematics an ODE with exponential solutions.</li>
        <li><strong>Local dielectric function ε(ω):</strong> ignores spatial dispersion (nonlocality). Good when K is not too large compared to electronic microscopic scales; at very small gaps, nonlocal/quantum corrections matter.</li>
      </ul>

      <h3>Mini intuition examples (minimal algebra)</h3>
      <ul>
        <li><strong>Single interface:</strong> vacuum/metal supports a surface plasmon when ε(ω) ≈ −1 (electrostatic condition).</li>
        <li><strong>Two interfaces far apart (Kd ≫ 1):</strong> each surface behaves almost independently, so the condition approaches ε ≈ −1.</li>
        <li><strong>Two interfaces very close (Kd ≪ 1):</strong> coupling is strong; one branch shifts significantly (one tends toward ε → 0⁻ for symmetric, the other to large negative ε for antisymmetric).</li>
      </ul>

      <h3>What to watch for (pitfalls)</h3>
      <div class="callout warn">
        <ul style="margin:0 0 0 18px;">
          <li><strong>Sign conventions:</strong> D<sub>z</sub> continuity involves ε and the derivative direction. Be consistent with your region coordinates.</li>
          <li><strong>Choosing bounded solutions:</strong> in half-spaces you must discard exponentials that blow up at z → ±∞.</li>
          <li><strong>Symmetry classification:</strong> “symmetric” refers to φ being even about the midplane (not necessarily E).</li>
          <li><strong>Retardation confusion:</strong> here we solve Laplace, not Helmholtz; no c appears.</li>
        </ul>
      </div>

      <a class="backtop" href="#top">⬆ Back to top</a>
    </article>

    <article id="part0b">
      <h2>PART 0B — Industry & Applied Physics Perspective</h2>

      <div class="two-col">
        <div class="card">
          <h3>Where this appears in industry (examples)</h3>
          <ul>
            <li><strong>Plasmonic nanogaps:</strong> SERS substrates, nanoantennas, and “hot spots” where fields concentrate in nm gaps.</li>
            <li><strong>MEMS/NEMS stiction & adhesion:</strong> nonretarded dispersion forces can dominate at tens of nm and below, influencing yield and reliability.</li>
            <li><strong>Thin-film coatings & multilayers:</strong> optical stacks, metamaterials, and near-field radiative heat transfer devices rely on evanescent modes.</li>
            <li><strong>Nanotribology & AFM:</strong> force gradients at small separations connect to mode spectra (including plasmonic contributions).</li>
          </ul>
        </div>
        <div class="card">
          <h3>Why engineers care</h3>
          <ul>
            <li><strong>Performance:</strong> mode confinement boosts sensing signals; coupling controls resonance splitting and spectral response.</li>
            <li><strong>Reliability:</strong> van der Waals/Casimir forces can pull components together (stiction), affecting lifetime and assembly yield.</li>
            <li><strong>Cost & manufacturability:</strong> gap size tolerances (d) exponentially affect evanescent coupling (via e^{-Kd}), so process control matters.</li>
            <li><strong>Thermal management:</strong> evanescent modes also underpin near-field heat transfer, relevant for microelectronics packaging.</li>
          </ul>
        </div>
      </div>

      <h3>Typical measurement/validation methods (brief)</h3>
      <ul>
        <li><strong>Optical spectroscopy:</strong> measure resonance splitting vs gap d; fit to dispersion conditions with a dielectric model ε(ω).</li>
        <li><strong>AFM force measurements:</strong> quantify adhesion/force gradients vs distance; compare with nonretarded/retarded force models.</li>
        <li><strong>Ellipsometry:</strong> measure ε(ω) for real materials; feed into dispersion/force predictions.</li>
      </ul>

      <h3>Design trade-offs and non-idealities</h3>
      <div class="callout">
        <ul style="margin:0 0 0 18px;">
          <li><strong>Surface roughness:</strong> effectively changes local d and mixes K components; can broaden resonances and alter forces.</li>
          <li><strong>Finite conductivity & losses:</strong> ε(ω) is complex; modes acquire damping (finite lifetime).</li>
          <li><strong>Nonlocal/quantum corrections:</strong> at nm or sub-nm gaps, electron spill-out and tunneling can modify boundary conditions and saturate field enhancement.</li>
          <li><strong>Temperature:</strong> thermal occupation matters for forces at larger separations, but here the focus is the nonretarded, often “zero-point” dominated regime.</li>
        </ul>
      </div>

      <details>
        <summary>From lab to product: adapting the ideal model</summary>
        <p>
          Real devices are finite in lateral size, may have patterned surfaces, and rarely have perfectly uniform gaps.
          Engineers typically: (i) measure ε(ω) (complex), (ii) include roughness statistics to average over effective d,
          (iii) include nonlocal/quantum models if d is a few nanometers or less, and (iv) validate against spectroscopy
          (for resonances) and AFM (for forces). The clean tanh/coth conditions remain the “backbone” intuition for why
          coupling splits modes and why the dependence on Kd is so sharp.
        </p>
      </details>

      <a class="backtop" href="#top">⬆ Back to top</a>
    </article>

    <article id="part1">
      <h2>PART 1 — Problem Analysis (No Solving Yet)</h2>

      <h3>Restate the problem</h3>
      <p>
        Two identical semi-infinite media occupy <strong>z&lt;0</strong> and <strong>z&gt;d</strong>, separated by a vacuum (or dielectric) gap
        <strong>0&lt;z&lt;d</strong> of thickness d. Each medium has dielectric function ε(ω), and the gap has ε<sub>g</sub>=1.
        We look for <strong>nonretarded</strong> (electrostatic) surface modes with potential
      </p>

      <div class="kbox" data-copy="eq-ansatz">
        <div class="row">
          <span class="tag">Key ansatz</span>
          <button class="copy" data-copy-btn="eq-ansatz">Copy equation</button>
        </div>
        <pre id="eq-ansatz">φ(x,y,z,t) = f(z) · exp(i kx x + i ky y − i ω t),   with   K^2 = kx^2 + ky^2</pre>
      </div>

      <p>
        Show that for the <strong>symmetric mode</strong> (even φ about the midplane z=d/2), the gap-plasmon frequency must satisfy:
        <strong>ε(ω) = −tanh(K d / 2)</strong>.
      </p>

      <h3>Given</h3>
      <ul>
        <li>Two identical media with dielectric function ε(ω) in z&lt;0 and z&gt;d.</li>
        <li>Gap (vacuum) 0&lt;z&lt;d with ε<sub>g</sub>=1.</li>
        <li>Nonretarded requirement: solve Laplace’s equation (not the wave equation).</li>
      </ul>

      <h3>Unknowns</h3>
      <ul>
        <li>Allowed (ω, K) combinations (dispersion condition).</li>
        <li>Specifically, the condition for the symmetric mode.</li>
      </ul>

      <h3>Relevant principles/laws (and why they apply)</h3>
      <ul>
        <li><strong>Electrostatic PDE:</strong> In charge-free regions, ∇·D=0; with E=−∇φ and uniform ε per region ⇒ ∇²φ=0.</li>
        <li><strong>Translation symmetry in x,y:</strong> Fourier decomposition reduces PDE to an ODE in z.</li>
        <li><strong>Interface conditions:</strong> No free surface charge in the mode construction ⇒ φ and D<sub>z</sub> continuous at z=0 and z=d.</li>
        <li><strong>Why not wave equation:</strong> Retardation neglected; “instantaneous” Coulomb fields dominate when K ≫ ω/c.</li>
      </ul>

      <div class="callout warn">
        <strong>Assumptions (explicit):</strong>
        linear, isotropic, local ε(ω); no free charges in the bulk; planar infinite interfaces; electrostatic (nonretarded) regime;
        fields decay away from the gap into the half-spaces (bound modes).
      </div>

      <h3>Possible approaches (compare)</h3>
      <ol>
        <li><strong>Direct piecewise ODE matching (best here):</strong> Solve f″−K²f=0 in each region, enforce boundedness and boundary conditions. Fast and transparent.</li>
        <li><strong>Transfer-matrix / impedance method:</strong> Encode each region by a 2×2 matrix; elegant for many layers, but slightly heavier for two layers.</li>
        <li><strong>Green’s function / reflection coefficient poles:</strong> Mode condition corresponds to pole of (1−r²e^{-2Kd})=0; powerful and connects to vdW/Casimir, but requires extra scattering formalism setup.</li>
      </ol>

      <p><strong>Chosen approach:</strong> Direct ODE matching, because the problem explicitly hints at Laplace solutions and a separable potential.</p>

      <a class="backtop" href="#top">⬆ Back to top</a>
    </article>

    <article id="part2">
      <h2>PART 2 — Strategy & Tips (Roadmap Only)</h2>

      <ol>
        <li><strong>Separate variables:</strong> Insert φ=f(z)e^{i(kx x + ky y − ωt)} into ∇²φ=0 → get an ODE for f(z).</li>
        <li><strong>Solve the ODE:</strong> f″−K²f=0 → exponentials; rewrite in sinh/cosh in the gap.</li>
        <li><strong>Impose boundedness:</strong> Choose decaying exponentials in the half-spaces (z→−∞ and z→+∞).</li>
        <li><strong>Use symmetry (symmetric mode):</strong> Center coordinate about midplane z=d/2 so the gap solution is cosh(K(z−d/2)).</li>
        <li><strong>Apply boundary conditions:</strong> At z=0 and z=d enforce continuity of φ and D<sub>z</sub>=−ε∂φ/∂z.</li>
        <li><strong>Eliminate amplitudes:</strong> Solve algebraic relations to get a condition involving ε(ω) and Kd.</li>
        <li><strong>Sanity checks:</strong> Confirm limits Kd≫1 and Kd≪1 and compare with known single-interface behavior.</li>
      </ol>

      <div class="callout bad">
        <strong>Common mistakes</strong>
        <ul style="margin:8px 0 0 18px;">
          <li>Keeping the growing exponential in a half-space (violates bound-mode requirement).</li>
          <li>Forgetting the ε factor in D<sub>z</sub> continuity.</li>
          <li>Mixing z and (z−d/2) derivatives without adjusting signs.</li>
          <li>Using tan instead of tanh (hyperbolic functions come from exponentials, not oscillatory solutions).</li>
        </ul>
      </div>

      <a class="backtop" href="#top">⬆ Back to top</a>
    </article>

    <article id="part3">
      <h2>PART 3 — Full Solution (Detailed + Teaching)</h2>

      <h3>Qualitative expectation before calculating</h3>
      <p>
        Each single interface supports an electrostatic surface plasmon when ε(ω) is negative (for vacuum/metal, near ε≈−1).
        Bringing two interfaces close couples their evanescent fields across the gap and produces two “hybridized” modes:
        one with φ even about the midplane (symmetric) and one odd (antisymmetric). The coupling strength scales with Kd:
        larger K (more confined in-plane variation) gives faster decay in z and weaker coupling unless the gap is very small.
      </p>

      <h3>Step 1 — Mathematical model (domains, variables, PDE)</h3>
      <div class="callout">
        <p style="margin:0">
          <strong>Geometry:</strong> Region I (left medium) z&lt;0 with ε(ω); Region II (gap) 0&lt;z&lt;d with ε<sub>g</sub>=1; Region III (right medium) z&gt;d with ε(ω).
          <br/>
          <strong>Unknown field:</strong> φ(x,y,z,t).
          <br/>
          <strong>Governing equation:</strong> In each region with constant ε, the charge-free electrostatic equation is
          <br/><code>∇·(ε ∇φ) = 0</code> ⇒ <code>∇²φ = 0</code> (since ε is constant inside each region).
        </p>
      </div>

      <p>
        Because the structure is translation invariant in x and y, we use a single Fourier component:
      </p>

      <div class="kbox" data-copy="eq-sep">
        <div class="row">
          <span class="tag">Separation ansatz</span>
          <button class="copy" data-copy-btn="eq-sep">Copy equation</button>
        </div>
        <pre id="eq-sep">φ(x,y,z,t) = f(z) · exp(i kx x + i ky y − i ω t),   K = sqrt(kx^2 + ky^2)</pre>
      </div>

      <h3>Step 2 — Reduce Laplace’s equation to an ODE</h3>
      <p>
        Apply the Laplacian operator ∇² = ∂²/∂x² + ∂²/∂y² + ∂²/∂z² to φ:
      </p>
      <div class="kbox" data-copy="eq-ode">
        <div class="row">
          <span class="tag">ODE from ∇²φ=0</span>
          <button class="copy" data-copy-btn="eq-ode">Copy equation</button>
        </div>
        <pre id="eq-ode">∇²φ = (−kx^2 − ky^2) f(z) e^{i(kx x + ky y − ωt)} + f''(z) e^{i(kx x + ky y − ωt)} = 0
⇒ f''(z) − K^2 f(z) = 0</pre>
      </div>

      <p>
        <strong>Why this step is valid:</strong> linearity of ∇² and separability under Fourier modes; exponentials are eigenfunctions of ∂²/∂x² and ∂²/∂y² with eigenvalues −k<sub>x</sub><sup>2</sup>, −k<sub>y</sub><sup>2</sup>.
      </p>

      <h3>Step 3 — Solve the ODE in each region and impose boundedness</h3>
      <p>
        The general solution of f″−K²f=0 is a linear combination of exponentials:
        f(z)=A e^{Kz}+B e^{−Kz}. We now choose the physically acceptable (bounded/decaying) branches in the semi-infinite regions.
      </p>

      <div class="two-col">
        <div class="card">
          <h3>Region I: z&lt;0 (left medium)</h3>
          <p class="mini">Bounded as z→−∞ requires discarding e^{−Kz} (it blows up).</p>
          <div class="kbox" data-copy="eq-reg1">
            <div class="row">
              <span class="tag">Region I</span>
              <button class="copy" data-copy-btn="eq-reg1">Copy equation</button>
            </div>
            <pre id="eq-reg1">f1(z) = A · e^{K z},   z < 0</pre>
          </div>
        </div>

        <div class="card">
          <h3>Region III: z&gt;d (right medium)</h3>
          <p class="mini">Bounded as z→+∞ requires discarding e^{+Kz} (it blows up); shift by d for neatness.</p>
          <div class="kbox" data-copy="eq-reg3">
            <div class="row">
              <span class="tag">Region III</span>
              <button class="copy" data-copy-btn="eq-reg3">Copy equation</button>
            </div>
            <pre id="eq-reg3">f3(z) = B · e^{−K (z − d)},   z > d</pre>
          </div>
        </div>
      </div>

      <p>
        For the gap region 0&lt;z&lt;d, use a form that naturally encodes symmetry about the midplane z=d/2.
        Define the centered coordinate:
      </p>

      <div class="kbox" data-copy="eq-center">
        <div class="row">
          <span class="tag">Midplane coordinate</span>
          <button class="copy" data-copy-btn="eq-center">Copy equation</button>
        </div>
        <pre id="eq-center">u = z − d/2   (so the gap is u ∈ (−d/2, +d/2))</pre>
      </div>

      <p>
        In the gap, the general solution is f2(u)=C cosh(Ku)+D sinh(Ku).
        The <strong>symmetric mode</strong> has φ even in u, so it must be proportional to cosh(Ku) (even function), i.e., D=0.
      </p>

      <div class="kbox" data-copy="eq-gap-sym">
        <div class="row">
          <span class="tag">Gap solution (symmetric)</span>
          <button class="copy" data-copy-btn="eq-gap-sym">Copy equation</button>
        </div>
        <pre id="eq-gap-sym">f2(z) = C · cosh( K (z − d/2) ),   0 < z < d   (symmetric about z=d/2)</pre>
      </div>

      <details>
        <summary>Optional: antisymmetric gap form (for context)</summary>
        <p class="mini">
          Antisymmetric means φ is odd about z=d/2, so f2(z)=C·sinh(K(z−d/2)). The same boundary matching then yields ε(ω)=−coth(Kd/2).
        </p>
      </details>

      <h3>Step 4 — Boundary conditions (φ and D<sub>z</sub> continuity)</h3>
      <p>
        At each interface (z=0 and z=d), with no free surface charge, we use:
      </p>
      <div class="kbox" data-copy="eq-bc">
        <div class="row">
          <span class="tag">Interface BCs</span>
          <button class="copy" data-copy-btn="eq-bc">Copy equation</button>
        </div>
        <pre id="eq-bc">1) φ is continuous.
2) D_z is continuous: D_z = ε0 ε E_z = −ε0 ε ∂φ/∂z  ⇒  ε ∂φ/∂z is continuous (up to the common factor −ε0).</pre>
      </div>

      <p>
        Since the x,y dependence is the same everywhere (same e^{i(kx x+ky y−ωt)} factor), we can apply BCs directly to f(z).
      </p>

      <h3>Step 5 — Apply BCs at z=0</h3>
      <p>
        First compute the needed values at z=0.
      </p>
      <ul>
        <li>Region I: f1(0)=A, and f1′(z)=K A e^{Kz} ⇒ f1′(0)=K A.</li>
        <li>Gap: f2(0)=C cosh(K(0−d/2)) = C cosh(K d/2) (cosh is even).</li>
        <li>Gap derivative: f2′(z)=C K sinh(K(z−d/2)) ⇒ f2′(0)=C K sinh(−K d/2)= −C K sinh(K d/2).</li>
      </ul>

      <p><strong>(i) Continuity of φ at z=0:</strong></p>
      <div class="kbox" data-copy="eq-bc0-phi">
        <div class="row">
          <span class="tag">BC at z=0: φ</span>
          <button class="copy" data-copy-btn="eq-bc0-phi">Copy equation</button>
        </div>
        <pre id="eq-bc0-phi">f1(0) = f2(0)  ⇒  A = C cosh(K d/2)</pre>
      </div>

      <p><strong>(ii) Continuity of D<sub>z</sub> at z=0:</strong></p>
      <p class="mini">
        Left medium has ε(ω); gap has ε<sub>g</sub>=1. Using ε f′ continuity (common factors cancel):
      </p>
      <div class="kbox" data-copy="eq-bc0-dz">
        <div class="row">
          <span class="tag">BC at z=0: D<sub>z</sub></span>
          <button class="copy" data-copy-btn="eq-bc0-dz">Copy equation</button>
        </div>
        <pre id="eq-bc0-dz">ε(ω) f1'(0) = 1 · f2'(0)
⇒ ε(ω) (K A) = −C K sinh(K d/2)
⇒ ε(ω) A = −C sinh(K d/2)</pre>
      </div>

      <h3>Step 6 — Eliminate amplitudes to get the symmetric dispersion condition</h3>
      <p>
        We have two algebraic equations relating A and C:
      </p>
      <div class="kbox" data-copy="eq-two">
        <div class="row">
          <span class="tag">Amplitude relations</span>
          <button class="copy" data-copy-btn="eq-two">Copy equation</button>
        </div>
        <pre id="eq-two">A = C cosh(K d/2)
ε(ω) A = −C sinh(K d/2)</pre>
      </div>

      <p>
        Substitute the first into the second (this step is valid because the mode is nontrivial, so amplitudes are not all zero):
      </p>

      <div class="kbox" data-copy="eq-elim">
        <div class="row">
          <span class="tag">Eliminate A, C</span>
          <button class="copy" data-copy-btn="eq-elim">Copy equation</button>
        </div>
        <pre id="eq-elim">ε(ω) [C cosh(K d/2)] = −C sinh(K d/2)
Divide by C (C ≠ 0 for a mode):
ε(ω) cosh(K d/2) = −sinh(K d/2)
⇒ ε(ω) = −tanh(K d/2)</pre>
      </div>

      <div class="callout good">
        <strong>Final result (symmetric gap plasmon):</strong>
        <div class="kbox" style="margin:10px 0 0;" data-copy="final">
          <div class="row">
            <span class="tag">Final Answer</span>
            <button class="copy" data-copy-btn="final">Copy final answer</button>
          </div>
          <pre id="final">ε(ω) = −tanh(K d / 2),   where   K = sqrt(kx^2 + ky^2).</pre>
        </div>
      </div>

      <details>
        <summary>Check at z=d (why it doesn’t add a new condition here)</summary>
        <p class="mini">
          For the symmetric choice, applying BCs at z=d yields the same algebraic condition (not independent),
          because the structure is mirror-symmetric and we constructed f2 as an even function about z=d/2.
          If you do it explicitly, you get B = C cosh(Kd/2) and ε(ω) B = −C sinh(Kd/2), identical in form to the z=0 relations.
        </p>
      </details>

      <h3>Sanity checks</h3>

      <div class="two-col">
        <div class="card">
          <h3>Dimensional analysis</h3>
          <ul>
            <li>K has units [1/m], d has [m] ⇒ Kd is dimensionless.</li>
            <li>tanh takes a dimensionless argument and outputs dimensionless ⇒ ε is dimensionless. ✔</li>
          </ul>
        </div>
        <div class="card">
          <h3>Limiting cases (asymptotics)</h3>
          <ul>
            <li><strong>Kd ≫ 1:</strong> tanh(Kd/2) → 1 ⇒ ε(ω) → −1 (single-interface limit). ✔</li>
            <li><strong>Kd ≪ 1:</strong> tanh(x) ≈ x − x³/3 + … with x=Kd/2 ⇒
              ε(ω) ≈ −(Kd/2) + O((Kd)³). This branch requires ε near 0⁻, i.e., strongly shifted from −1 due to strong coupling. ✔</li>
          </ul>
        </div>
      </div>

      <div class="callout">
        <strong>Physical interpretation in plain language:</strong>
        The symmetric mode “loads” both interfaces with the same-sign potential pattern, so the electric field concentrates in the gap.
        The stronger the overlap (smaller d or smaller K), the more the condition deviates from ε≈−1, giving a pronounced mode splitting.
      </div>

      <h3>Optional static plot: ε vs Kd for symmetric & antisymmetric branches</h3>
      <figure>
        <canvas id="plot" aria-label="Plot of -tanh(Kd/2) and -coth(Kd/2) versus Kd"></canvas>
        <figcaption>
          Dimensionless dispersion relations: symmetric ε = −tanh(Kd/2) and (for context) antisymmetric ε = −coth(Kd/2).
          This plot uses no material-specific numbers—only the dimensionless parameter Kd.
        </figcaption>
      </figure>

      <a class="backtop" href="#top">⬆ Back to top</a>
    </article>

    <article id="part4">
      <h2>PART 4 — Deeper Understanding (Theory Around the Result)</h2>

      <h3>Re-interpreting the formula: what each term controls</h3>
      <ul>
        <li><strong>ε(ω):</strong> The material’s frequency response. For metals, ε(ω)&lt;0 over a broad range; the condition selects the allowed ω where ε hits the required negative value.</li>
        <li><strong>K:</strong> In-plane confinement. Larger K means faster decay in z (evanescence length ~1/K), reducing coupling across a fixed gap.</li>
        <li><strong>d:</strong> Physical separation controlling coupling. The combination Kd is the dimensionless “coupling knob.”</li>
        <li><strong>tanh(Kd/2):</strong> Encodes how the gap field is distributed (cosh shape) and how boundary matching converts that to an ε constraint.</li>
      </ul>

      <h3>Parameter dependence (qualitative + quantitative)</h3>
      <div class="callout">
        <ul style="margin:0 0 0 18px;">
          <li>Increasing d at fixed K increases Kd ⇒ tanh(Kd/2) approaches 1 ⇒ ε required approaches −1 (weaker coupling).</li>
          <li>Increasing K at fixed d also increases Kd ⇒ same trend toward ε≈−1 (more localized fields, less overlap).</li>
          <li>Decreasing Kd (smaller d or smaller K) makes tanh(Kd/2) ≈ Kd/2, so ε required moves toward 0⁻ (strongly hybridized symmetric mode).</li>
        </ul>
      </div>

      <h3>Alternative derivation idea (brief but meaningful)</h3>
      <details>
        <summary>Scattering/reflection (pole) viewpoint</summary>
        <p class="mini">
          In the electrostatic limit, the p-polarized (TM) reflection coefficient for a single interface (gap ε<sub>g</sub>=1 to medium ε)
          reduces to r = (ε−1)/(ε+1). Gap modes correspond to self-consistent fields bouncing between the two surfaces, giving a pole condition
          1 − r² e^{-2Kd} = 0. Solving yields (ε+1)/(ε−1) = ± e^{-Kd}, which rearranges into ε = −tanh(Kd/2) (plus sign, symmetric)
          and ε = −coth(Kd/2) (minus sign, antisymmetric). This connects naturally to van der Waals/Casimir energy as a sum/integral over
          log(1 − r² e^{-2Kd}) across frequencies.
        </p>
      </details>

      <h3>Concept check (self-test with answers)</h3>
      <ul>
        <li><strong>Q:</strong> Why does K appear instead of ω/c? <strong>A:</strong> We are in the nonretarded regime; spatial variation is set by in-plane wavevector K, and fields satisfy Laplace rather than Helmholtz.</li>
        <li><strong>Q:</strong> What enforces hyperbolic functions? <strong>A:</strong> The ODE f″−K²f=0 has exponential solutions; in a finite slab they combine into sinh/cosh, with symmetry selecting even/odd.</li>
        <li><strong>Q:</strong> What does the limit Kd≫1 mean physically? <strong>A:</strong> Either large separation or highly confined in-plane wave → evanescent tails don’t overlap; each surface behaves like an isolated interface (ε≈−1).</li>
        <li><strong>Q:</strong> Can ε be positive for these modes? <strong>A:</strong> Not for bound electrostatic surface modes in vacuum gap; the condition requires ε(ω) negative (since −tanh is negative).</li>
        <li><strong>Q:</strong> Why do these modes matter for van der Waals attraction? <strong>A:</strong> Their zero-point energy depends on d; summing over gap modes produces a distance-dependent energy (and force) in the nonretarded limit.</li>
      </ul>

      <a class="backtop" href="#top">⬆ Back to top</a>
    </article>

    <article id="part5">
      <h2>PART 5 — Optional Plot Guide</h2>

      <p>
        The plot shows how the required dielectric value ε(ω) depends on the single dimensionless coupling parameter <strong>Kd</strong>.
        It’s useful because it immediately reveals:
      </p>
      <ul>
        <li><strong>Asymptote:</strong> both branches approach ε→−1 as Kd→∞ (isolated interface behavior).</li>
        <li><strong>Strong coupling:</strong> for Kd→0, the symmetric branch tends to ε→0⁻ (since tanh(x)≈x), while the antisymmetric branch tends to ε→−∞ (since coth(x)≈1/x).</li>
        <li><strong>Engineering lever:</strong> reducing d (or operating at smaller K) strongly changes the required ε, hence shifts resonance frequencies when ε(ω) is material-dispersive.</li>
      </ul>

      <div class="card">
        <h3>Axes and units</h3>
        <ul>
          <li>x-axis: <strong>Kd</strong> (dimensionless).</li>
          <li>y-axis: <strong>ε</strong> (dimensionless).</li>
        </ul>
        <p class="mini">
          No “example values” are needed because the relation is already dimensionless and symbolic; the plot is a direct visualization of the derived formulas.
        </p>
      </div>

      <a class="backtop" href="#top">⬆ Back to top</a>
    </article>
  </main>
</div>

<footer>
  <p>
    Built as a self-contained learning article: nonretarded gap plasmons via Laplace’s equation and boundary matching.
    Tip: If you later want the <em>retarded</em> (full electromagnetic) version, the tanh/coth structure persists but with K replaced by evanescent z-wavevectors from Helmholtz, and TE/TM polarization matters.
  </p>
</footer>

<script>
  // Copy buttons (plain text)
  (function(){
    function copyTextFrom(el){
      const txt = el.innerText.replace(/\u00a0/g,' ');
      navigator.clipboard.writeText(txt).then(()=>{
        // small feedback without alerts
      }).catch(()=>{ /* ignore */ });
    }
    document.querySelectorAll('[data-copy-btn]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('data-copy-btn');
        const pre = document.getElementById(id);
        if(pre) copyTextFrom(pre);
        btn.textContent = 'Copied ✓';
        setTimeout(()=>btn.textContent='Copy', 900);
      });
    });
  })();

  // Single static plot on canvas: epsilon vs Kd
  (function(){
    const canvas = document.getElementById('plot');
    if(!canvas) return;
    const ctx = canvas.getContext('2d');

    function resize(){
      const dpr = Math.max(1, Math.min(3, window.devicePixelRatio || 1));
      const rect = canvas.getBoundingClientRect();
      canvas.width = Math.floor(rect.width * dpr);
      canvas.height = Math.floor(rect.height * dpr);
      ctx.setTransform(dpr,0,0,dpr,0,0);
      draw(rect.width, rect.height);
    }

    function tanh(x){
      const ex = Math.exp(x), em = Math.exp(-x);
      return (ex - em) / (ex + em);
    }
    function coth(x){
      const t = tanh(x);
      return 1 / t;
    }

    function draw(w,h){
      // Layout
      const padL=58, padR=16, padT=22, padB=44;
      const pw = w - padL - padR;
      const ph = h - padT - padB;

      // Ranges
      const xmin=0.05, xmax=8.0;     // avoid 0 to keep coth finite
      const ymin=-6.0, ymax=0.2;

      const x2px = x => padL + (x - xmin) * pw / (xmax - xmin);
      const y2px = y => padT + (ymax - y) * ph / (ymax - ymin);

      // Background
      ctx.clearRect(0,0,w,h);

      // Gridlines
      ctx.globalAlpha = 0.22;
      ctx.strokeStyle = '#ffffff';
      ctx.lineWidth = 1;

      // x grid at 1,2,...,8
      for(let x=1; x<=8; x++){
        const X = x2px(x);
        ctx.beginPath();
        ctx.moveTo(X, padT);
        ctx.lineTo(X, padT+ph);
        ctx.stroke();
      }
      // y grid at -6,-5,...,0
      for(let y=-6; y<=0; y++){
        const Y = y2px(y);
        ctx.beginPath();
        ctx.moveTo(padL, Y);
        ctx.lineTo(padL+pw, Y);
        ctx.stroke();
      }

      // Axes
      ctx.globalAlpha = 0.85;
      ctx.strokeStyle = '#ffffff';
      ctx.lineWidth = 1.2;
      ctx.beginPath();
      ctx.moveTo(padL, padT);
      ctx.lineTo(padL, padT+ph);
      ctx.lineTo(padL+pw, padT+ph);
      ctx.stroke();

      // Ticks & labels
      ctx.fillStyle = '#e9ecff';
      ctx.font = '12px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      ctx.globalAlpha = 0.95;

      for(let x=1; x<=8; x++){
        const X = x2px(x);
        ctx.beginPath();
        ctx.moveTo(X, padT+ph);
        ctx.lineTo(X, padT+ph+6);
        ctx.stroke();
        ctx.fillText(String(x), X-3, padT+ph+20);
      }
      for(let y=-6; y<=0; y++){
        const Y = y2px(y);
        ctx.beginPath();
        ctx.moveTo(padL-6, Y);
        ctx.lineTo(padL, Y);
        ctx.stroke();
        ctx.fillText(String(y), 8, Y+4);
      }

      // Title
      ctx.font = '13px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      ctx.fillText('Gap-plasmon conditions (dimensionless): ε vs Kd', padL, 14);

      // Axis labels
      ctx.font = '12px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      ctx.fillText('Kd (dimensionless)', padL + pw/2 - 46, padT+ph+38);

      // y label rotated
      ctx.save();
      ctx.translate(16, padT + ph/2 + 34);
      ctx.rotate(-Math.PI/2);
      ctx.fillText('ε (dimensionless)', 0, 0);
      ctx.restore();

      // Curves (no explicit color setting requested by user; default strokeStyle is allowed but we already set white.
      // We'll differentiate by dash patterns (style-free).
      function plotCurve(fn, dashed){
        ctx.save();
        if(dashed) ctx.setLineDash([6,4]); else ctx.setLineDash([]);
        ctx.lineWidth = 2;
        ctx.strokeStyle = '#ffffff';
        ctx.globalAlpha = dashed ? 0.7 : 0.95;
        ctx.beginPath();
        let first=true;
        const N=500;
        for(let i=0;i<=N;i++){
          const x = xmin + (xmax-xmin)*i/N;
          const y = fn(x);
          const X = x2px(x);
          const Y = y2px(Math.max(ymin, Math.min(ymax, y)));
          if(first){ctx.moveTo(X,Y); first=false;} else {ctx.lineTo(X,Y);}
        }
        ctx.stroke();
        ctx.restore();
      }

      // symmetric: ε = -tanh(Kd/2)
      plotCurve(x => -tanh(x/2), false);

      // antisymmetric: ε = -coth(Kd/2)
      plotCurve(x => -coth(x/2), true);

      // Legend
      const lx = padL + 10, ly = padT + 18;
      ctx.globalAlpha = 0.95;
      ctx.font = '12px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';

      // solid line sample
      ctx.setLineDash([]);
      ctx.strokeStyle = '#ffffff';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(lx, ly);
      ctx.lineTo(lx+26, ly);
      ctx.stroke();
      ctx.fillText('symmetric: ε = −tanh(Kd/2)', lx+34, ly+4);

      // dashed line sample
      ctx.setLineDash([6,4]);
      ctx.globalAlpha = 0.75;
      ctx.beginPath();
      ctx.moveTo(lx, ly+18);
      ctx.lineTo(lx+26, ly+18);
      ctx.stroke();
      ctx.globalAlpha = 0.95;
      ctx.setLineDash([]);
      ctx.fillText('antisymmetric: ε = −coth(Kd/2)', lx+34, ly+22);
    }

    window.addEventListener('resize', resize, {passive:true});
    resize();
  })();
</script>
</body>
</html>