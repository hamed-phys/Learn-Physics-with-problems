<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>Stability of a Hypothetical Ionic Crystal R+R− (Na+Na−) vs Metallic Sodium</title>
  <style>
    :root{
      --bg:#0b0d10;
      --panel:#11151b;
      --panel2:#0f1318;
      --text:#e7eef8;
      --muted:#a9b6c7;
      --line:rgba(255,255,255,.10);
      --accent:#7dd3fc;
      --accent2:#a78bfa;
      --good:#34d399;
      --warn:#fbbf24;
      --bad:#fb7185;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f6f8fb;
        --panel:#ffffff;
        --panel2:#fbfdff;
        --text:#0b1220;
        --muted:#435064;
        --line:rgba(15,23,42,.12);
        --shadow: 0 10px 30px rgba(15,23,42,.10);
      }
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      background: radial-gradient(1200px 700px at 10% -5%, rgba(125,211,252,.18), transparent 55%),
                  radial-gradient(900px 650px at 105% 5%, rgba(167,139,250,.16), transparent 55%),
                  var(--bg);
      color:var(--text);
      line-height:1.55;
    }

    /* Layout */
    header{
      padding:28px 18px 18px;
      max-width:1200px;
      margin:0 auto;
    }
    .topbar{
      display:flex;
      gap:14px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .title{
      min-width:min(720px,100%);
    }
    h1{
      margin:0;
      font-size:clamp(1.4rem, 1.1rem + 1.6vw, 2.25rem);
      letter-spacing:-0.02em;
    }
    .subtitle{
      margin:.35rem 0 0;
      color:var(--muted);
      max-width:75ch;
    }
    .meta{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .pill{
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
      backdrop-filter: blur(8px);
    }

    main{
      max-width:1200px;
      margin:0 auto;
      padding:0 18px 70px;
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:18px;
      align-items:start;
    }
    @media (max-width: 980px){
      main{grid-template-columns:1fr}
    }

    /* Sticky TOC */
    nav.toc{
      position:sticky;
      top:14px;
      align-self:start;
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow: var(--shadow);
      padding:14px 12px;
      overflow:hidden;
    }
    @media (max-width: 980px){
      nav.toc{position:relative; top:auto}
    }
    .toc h2{
      margin:0 0 10px;
      font-size:13px;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:var(--muted);
    }
    .toc a{
      display:block;
      padding:8px 10px;
      border-radius:12px;
      color:var(--text);
      text-decoration:none;
      border:1px solid transparent;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      font-size:14px;
    }
    .toc a:hover{
      background:rgba(125,211,252,.10);
      border-color:rgba(125,211,252,.25);
      transform: translateY(-1px);
    }
    .toc .mini{
      margin-top:10px;
      padding-top:10px;
      border-top:1px dashed var(--line);
      color:var(--muted);
      font-size:12px;
    }

    /* Content cards */
    article{
      display:flex;
      flex-direction:column;
      gap:14px;
      min-width:0;
    }
    section{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow: var(--shadow);
      padding:18px 18px;
      overflow:hidden;
    }
    section h2{
      margin:0 0 10px;
      font-size:clamp(1.05rem, .95rem + .6vw, 1.35rem);
      letter-spacing:-0.01em;
    }
    section h3{
      margin:16px 0 8px;
      font-size:1.05rem;
    }
    p{margin:8px 0}
    ul,ol{margin:8px 0 8px 1.2rem}
    li{margin:4px 0}
    hr{
      border:0;
      border-top:1px solid var(--line);
      margin:14px 0;
    }

    /* Callouts */
    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 860px){
      .grid2{grid-template-columns:1fr}
    }
    .callout{
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px 12px;
      background:linear-gradient(180deg, rgba(0,0,0,.08), rgba(0,0,0,.02));
    }
    .callout strong{display:block; margin-bottom:6px}
    .callout.good{border-color: rgba(52,211,153,.35)}
    .callout.warn{border-color: rgba(251,191,36,.35)}
    .callout.bad{border-color: rgba(251,113,133,.35)}
    .callout.math{border-color: rgba(167,139,250,.40)}
    .kpi{
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap:10px;
      margin-top:10px;
    }
    @media (max-width: 860px){
      .kpi{grid-template-columns:1fr}
    }
    .kpi .box{
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px;
      background:linear-gradient(180deg, rgba(125,211,252,.08), rgba(0,0,0,.02));
    }
    .kpi .big{
      font-size:1.15rem;
      font-weight:700;
      letter-spacing:-0.01em;
    }
    .muted{color:var(--muted)}
    .mono{font-family:var(--mono)}
    .small{font-size:12px}
    .note{
      border-left:3px solid rgba(125,211,252,.55);
      padding-left:10px;
      color:var(--muted);
    }

    /* Code/equations + copy buttons */
    .eqwrap{
      position:relative;
      margin:10px 0;
    }
    pre{
      margin:0;
      padding:12px 12px;
      border-radius:16px;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(0,0,0,.20), rgba(0,0,0,.10));
      overflow:auto;
      font-family:var(--mono);
      font-size:13px;
      line-height:1.45;
    }
    .copybtn{
      position:absolute;
      top:10px;
      right:10px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:6px 9px;
      border-radius:12px;
      cursor:pointer;
      font-size:12px;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
    }
    .copybtn:hover{
      transform: translateY(-1px);
      background:rgba(125,211,252,.10);
      border-color: rgba(125,211,252,.25);
    }
    .copybtn:active{transform: translateY(0px) scale(.98)}
    .toast{
      position:fixed;
      left:50%;
      transform:translateX(-50%);
      bottom:18px;
      background:rgba(0,0,0,.75);
      color:#fff;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.18);
      box-shadow: var(--shadow);
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      z-index:999;
      font-size:13px;
    }
    .toast.show{
      opacity:1;
      transform:translateX(-50%) translateY(-2px);
    }

    /* Details blocks */
    details{
      border:1px solid var(--line);
      border-radius:16px;
      padding:10px 12px;
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.015));
      margin:10px 0;
    }
    summary{
      cursor:pointer;
      font-weight:650;
      color:var(--text);
      list-style:none;
    }
    summary::-webkit-details-marker{display:none}
    summary:after{
      content:"▾";
      float:right;
      color:var(--muted);
      transition: transform .12s ease;
    }
    details[open] summary:after{transform:rotate(180deg)}
    .backtop{
      display:inline-flex;
      gap:8px;
      align-items:center;
      text-decoration:none;
      color:var(--text);
      border:1px solid var(--line);
      padding:8px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.04);
      transition: transform .12s ease, background .12s ease;
    }
    .backtop:hover{
      transform: translateY(-1px);
      background:rgba(125,211,252,.10);
    }

    /* Figure + canvas */
    figure{
      margin:10px 0 0;
      border:1px solid var(--line);
      border-radius:18px;
      padding:12px;
      background:linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.06));
    }
    figcaption{
      margin-top:10px;
      color:var(--muted);
      font-size:13px;
    }
    canvas{
      width:100%;
      height:340px;
      display:block;
      border-radius:14px;
      background:rgba(255,255,255,.02);
      border:1px solid rgba(255,255,255,.06);
    }

    /* Print */
    @media print{
      body{background:#fff; color:#000}
      nav.toc{display:none}
      main{grid-template-columns:1fr; padding:0 0 0}
      section{box-shadow:none; border:1px solid #ddd; background:#fff}
      a{color:#000; text-decoration:underline}
      .copybtn{display:none}
      .toast{display:none}
      header{padding:0 0 10px}
      .pill{border:1px solid #ddd; background:#fff}
      h1{font-size:20px}
      .pagebreak{break-before: page}
    }
  </style>
</head>

<body>
  <a id="top"></a>
  <header>
    <div class="topbar">
      <div class="title">
        <h1>Possibility of Ionic Crystals R<sup>+</sup>R<sup>−</sup>: Is a Hypothetical Na<sup>+</sup>Na<sup>−</sup> “NaCl-Structure” More Stable Than Metallic Sodium?</h1>
        <p class="subtitle">
          We estimate the energy of a crystal made from <em>positive and negative ions of the same element</em>,
          focusing on sodium: a lattice of Na<sup>+</sup> and Na<sup>−</sup> on the NaCl structure, evaluated at the
          observed nearest-neighbor distance in metallic Na. We compare against the cohesion of metallic sodium.
        </p>
        <div class="meta">
          <span class="pill">Topic: ionic vs metallic bonding</span>
          <span class="pill">Tools: Coulomb lattice sums (Madelung), ionization energy, electron affinity</span>
          <span class="pill">Math lens: Poisson equation + lattice Green’s function idea</span>
        </div>
      </div>
    </div>
  </header>

  <main>
    <nav class="toc" aria-label="Table of contents">
      <h2>Contents</h2>
      <a href="#qs">Quick Summary</a>
      <a href="#p0">PART 0 — Concept Primer</a>
      <a href="#p0b">PART 0B — Industry & Applied Physics</a>
      <a href="#p1">PART 1 — Problem Analysis</a>
      <a href="#p2">PART 2 — Strategy & Tips</a>
      <a href="#p3">PART 3 — Full Solution</a>
      <a href="#p4">PART 4 — Deeper Understanding</a>
      <a href="#p5">PART 5 — Optional Plot Guide</a>
      <div class="mini">
        <div><span class="mono">Copy</span> buttons are on key equations & final result.</div>
        <div style="margin-top:8px;"><a class="backtop" href="#top" title="Back to top">↑ Back to top</a></div>
      </div>
    </nav>

    <article>
      <section id="qs">
        <h2>Quick Summary</h2>
        <ul>
          <li><strong>What this is about:</strong> Can a crystal made of <em>Na<sup>+</sup></em> and <em>Na<sup>−</sup></em> (same element, opposite ions) be energetically stable compared to metallic Na?</li>
          <li><strong>Key physics idea:</strong> Forming an ion pair costs <span class="mono">I − EA</span>, but a NaCl-type lattice gains Coulomb (Madelung) energy <span class="mono">−α e²/(4πϵ₀ r)</span>.</li>
          <li><strong>Governing equation:</strong> Lattice electrostatic energy per ion pair
            <span class="mono">U_pair(r) = (I − EA) − α e²/(4πϵ₀ r)</span> (point-ion estimate).
          </li>
          <li><strong>Numbers used:</strong> First ionization of Na <span class="mono">I ≈ 5.14 eV</span>; electron affinity given <span class="mono">EA = 0.78 eV</span>; NaCl Madelung <span class="mono">α ≈ 1.7476</span>;
            nearest-neighbor distance in metallic Na <span class="mono">r ≈ 3.7 Å</span> (bcc).
          </li>
          <li><strong>Result type:</strong> Numeric estimate (energy per atom/pair) + interpretation.</li>
          <li><strong>Main outcome:</strong> The crude point-ion Coulomb estimate suggests the ionic lattice could be comparable to (or slightly more stable than) metallic Na <em>in energy</em>, but real physics (instability of Na<sup>−</sup>, overlap/band formation, polarization, short-range repulsion) prevents an actual Na<sup>+</sup>Na<sup>−</sup> salt from forming.</li>
          <li><strong>Physical meaning:</strong> Even if Coulomb attraction is strong, a stable negative ion of the same element is not guaranteed in a condensed phase; the electronic structure typically relaxes back toward metallic bonding.</li>
        </ul>

        <div class="kpi">
          <div class="box">
            <div class="muted small">Ion-pair creation energy</div>
            <div class="big mono">ΔE₀ = I − EA ≈ 4.36 eV</div>
          </div>
          <div class="box">
            <div class="muted small">Coulomb factor</div>
            <div class="big mono">e²/(4πϵ₀) = 14.4 eV·Å</div>
          </div>
          <div class="box">
            <div class="muted small">NaCl Madelung constant</div>
            <div class="big mono">α ≈ 1.7476</div>
          </div>
        </div>
      </section>

      <section id="p0">
        <h2>PART 0 — Concept Primer (Theory Before Solving)</h2>

        <h3>0.1 Core definitions (symbols + SI units)</h3>
        <ul>
          <li><span class="mono">I</span> = first ionization energy (J or eV): energy to remove one electron from a neutral atom in vacuum: Na → Na<sup>+</sup> + e<sup>−</sup>.</li>
          <li><span class="mono">EA</span> = electron affinity (J or eV): energy released when a neutral atom binds an added electron: Na + e<sup>−</sup> → Na<sup>−</sup>. (Positive EA means a bound anion is stable in isolation.)</li>
          <li><span class="mono">r</span> = nearest-neighbor separation between opposite charges (m or Å).</li>
          <li><span class="mono">e</span> = elementary charge (C).</li>
          <li><span class="mono">ϵ₀</span> = vacuum permittivity (F/m).</li>
          <li><span class="mono">α</span> = Madelung constant (dimensionless), depends only on lattice geometry (NaCl: ~1.7476).</li>
          <li><span class="mono">U</span> = electrostatic energy (J or eV) per ion pair.</li>
        </ul>

        <h3>0.2 Physical meaning (intuition)</h3>
        <div class="grid2">
          <div class="callout">
            <strong>Why ionic crystals bind strongly</strong>
            In an ionic solid, you gain energy because each ion interacts with many neighbors.
            The net Coulomb attraction is not just one bond, but a whole-lattice sum, captured by <span class="mono">α</span>.
          </div>
          <div class="callout">
            <strong>Why “same-element” ionic crystals are unusual</strong>
            To make R<sup>+</sup>R<sup>−</sup> from the same atom R, you must simultaneously:
            (i) pay ionization energy on one site, and (ii) rely on a stable anion on another site.
            Many elements have too small EA (or an unstable anion in solids), so the system prefers metallic bonding.
          </div>
        </div>

        <h3>0.3 Governing laws and validity conditions</h3>
        <ul>
          <li><strong>Electrostatics:</strong> In the static limit, the potential satisfies Poisson’s equation
            <span class="mono">∇·(ϵ₀ ∇φ) = −ρ</span> in vacuum, and the electrostatic energy is
            <span class="mono">U = (1/2) ∫ ρ(r) φ(r) d³r</span>.</li>
          <li><strong>Lattice sum (Madelung):</strong> For point charges ±e on a periodic lattice, the energy per ion pair is
            <span class="mono">U_C(r) = −α e²/(4πϵ₀ r)</span>. This is the Coulomb part only.</li>
          <li><strong>Real solids need short-range repulsion:</strong> At small r, electron clouds overlap; Pauli exclusion produces an effective repulsion (often modeled as a Born term). Without it, pure Coulomb would collapse.</li>
          <li><strong>Electronic-structure caveat:</strong> In a condensed phase, EA and I are not exactly vacuum values because of screening/polarization and band formation.</li>
        </ul>

        <h3>0.4 Common approximations in this topic</h3>
        <ul>
          <li><strong>Point-ion approximation:</strong> Treat ions as point charges ±e at lattice sites; good for long-range energy, misses overlap/polarization.</li>
          <li><strong>Madelung-only estimate:</strong> Keep just Coulomb + atomic I/EA to get a first stability check.</li>
          <li><strong>Fixed separation evaluation:</strong> Evaluate energy at a given r (here, the observed metallic Na spacing) rather than minimizing total energy with a repulsive term.</li>
        </ul>

        <h3>0.5 Mini intuition examples (very light algebra)</h3>
        <ul>
          <li><strong>If EA is tiny:</strong> ΔE₀ = I − EA ≈ I is large → hard to create anions → ionic same-element solid unlikely.</li>
          <li><strong>If r is small:</strong> Coulomb gain ~ 1/r becomes large in magnitude → can overcome ΔE₀ and favor ionicity (until repulsion/overlap matter).</li>
          <li><strong>Lattice matters:</strong> Larger α means stronger net attraction (more favorable ionic binding) for the same r.</li>
        </ul>

        <div class="callout warn">
          <strong>What to watch for (pitfalls)</strong>
          <ul>
            <li>Sign conventions: <span class="mono">EA &gt; 0</span> means energy is released by adding an electron (anion stable).</li>
            <li>Double counting in Coulomb sums: energy must include the factor <span class="mono">1/2</span> in <span class="mono">U=(1/2)Σ q_i φ_i</span>.</li>
            <li>Comparing to metallic Na: you must compare energies per atom (or per pair) on the same reference (isolated neutral atoms).</li>
            <li>Ignoring repulsion can make ionic solids look “too stable” at small r.</li>
          </ul>
        </div>
      </section>

      <section id="p0b">
        <h2>PART 0B — Industry & Applied Physics Perspective</h2>
        <h3>Why this matters beyond a textbook</h3>
        <ul>
          <li><strong>Battery & electrolytes engineering:</strong> Stability of ionic vs metallic states is central in alkali metals (dendrite formation, plating/stripping, SEI chemistry).</li>
          <li><strong>Materials selection for corrosion & coatings:</strong> Whether electrons localize (ionic) or delocalize (metallic) affects corrosion potential, passivation, and failure modes.</li>
          <li><strong>Solid-state devices & sensors:</strong> Ion formation energies + lattice electrostatics relate to defect formation, ionic conduction, and dielectric screening—critical in solid electrolytes and mixed conductors.</li>
        </ul>

        <h3>Why engineers care</h3>
        <ul>
          <li><strong>Performance:</strong> Metallic vs ionic bonding changes conductivity by orders of magnitude.</li>
          <li><strong>Safety:</strong> Alkali metals can be reactive; understanding when “salt-like” stabilization is possible matters for containment and processing.</li>
          <li><strong>Manufacturability & cost:</strong> If a phase is only metastable under extreme conditions, scaling production may be impractical.</li>
        </ul>

        <h3>How it’s measured/validated in practice (brief)</h3>
        <ul>
          <li><strong>X-ray/neutron diffraction:</strong> determines lattice type and nearest-neighbor distances (distinguish NaCl vs bcc).</li>
          <li><strong>Photoelectron spectroscopy (PES)/UPS/XPS:</strong> probes ionization energies, work functions, and electronic states (metallic band vs localized ions).</li>
          <li><strong>Optical/transport:</strong> conductivity and reflectivity indicate whether electrons are delocalized (metal) or gapped (ionic insulator).</li>
        </ul>

        <div class="callout">
          <strong>From lab to product</strong>
          In real engineering, the ideal model “Coulomb + I/EA” becomes a starting point.
          Design-grade predictions typically add: dielectric screening (replace ϵ₀ by ϵ), polarization energies, and
          quantum band-structure (DFT) to see whether an anion band is bound or merges into conduction states.
        </div>
      </section>

      <section id="p1">
        <h2>PART 1 — Problem Analysis (No Solving Yet)</h2>

        <h3>1.1 Restate the problem</h3>
        <p>
          Consider a hypothetical crystal of the form R<sup>+</sup>R<sup>−</sup>, where the positive and negative ions are
          formed from the <em>same</em> atom/molecule R. For sodium, imagine a NaCl-structure lattice made of
          Na<sup>+</sup> and Na<sup>−</sup>. Using tabulated ionization energy (Table 5) and electron affinity (Table 6),
          estimate whether such a lattice would be stable relative to <em>normal metallic sodium</em>.
          Evaluate the Coulomb attraction at the <em>observed interatomic distance in metallic Na</em>, and use
          <span class="mono">EA(Na)=0.78 eV</span>.
        </p>

        <h3>1.2 Given quantities</h3>
        <ul>
          <li>First ionization energy of Na: <span class="mono">I ≈ 5.14 eV</span> (from Table 5 chart for Na).</li>
          <li>Electron affinity of Na: <span class="mono">EA = 0.78 eV</span> (given instruction).</li>
          <li>Lattice type for hypothetical ionic solid: NaCl structure → Madelung constant <span class="mono">α ≈ 1.7476</span>.</li>
          <li>Nearest-neighbor distance in metallic Na (bcc): <span class="mono">r ≈ 3.7 Å</span> (observed spacing; typical value for Na at ambient conditions).</li>
          <li>Coulomb constant in convenient units: <span class="mono">e²/(4πϵ₀) = 14.4 eV·Å</span>.</li>
        </ul>

        <h3>1.3 Unknowns / what to find</h3>
        <ul>
          <li>Energy per ion pair (or per atom) of hypothetical Na<sup>+</sup>Na<sup>−</sup> lattice relative to neutral atoms.</li>
          <li>Compare that to metallic sodium’s cohesion (conceptually: which is lower energy?).</li>
          <li>Conclude stability plausibility and explain physical reasons.</li>
        </ul>

        <h3>1.4 Relevant principles (and why)</h3>
        <ul>
          <li><strong>Atomic energetics:</strong> Creating ions costs <span class="mono">I</span> and gains <span class="mono">EA</span>.</li>
          <li><strong>Electrostatic lattice energy:</strong> Long-range Coulomb interactions summed over a periodic lattice give the Madelung energy.</li>
          <li><strong>Why not detailed quantum metallic bonding here:</strong> The prompt asks for a stability estimate using tabulated I/EA and Coulomb at a given r. So we do a controlled “back-of-the-envelope” ionic estimate.</li>
        </ul>

        <div class="callout warn">
          <strong>Assumptions (explicit)</strong>
          <ul>
            <li>Point charges ±e on a perfect NaCl lattice; Coulomb energy captured by Madelung constant.</li>
            <li>Evaluate at fixed nearest-neighbor spacing equal to metallic Na’s observed spacing (no full equilibrium minimization).</li>
            <li>Use vacuum I and EA values (ignoring solid-state polarization/screening changes).</li>
            <li>Neglect short-range Born repulsion and polarization energy in the main estimate; discuss afterward.</li>
          </ul>
        </div>

        <h3>1.5 Possible approaches (compare)</h3>
        <ol>
          <li><strong>Approach A: Madelung-only ionic estimate (best for this prompt).</strong>
            <span class="muted">Pros:</span> fast, uses given tables, yields clear criterion.
            <span class="muted">Cons:</span> misses repulsion and electronic-structure feedback.
          </li>
          <li><strong>Approach B: Add a Born repulsion term and minimize U(r).</strong>
            <span class="muted">Pros:</span> more realistic lattice spacing prediction.
            <span class="muted">Cons:</span> needs extra parameters not provided.
          </li>
          <li><strong>Approach C: Band-structure/DFT reasoning.</strong>
            <span class="muted">Pros:</span> physically decisive for Na<sup>−</sup> instability.
            <span class="muted">Cons:</span> far beyond the data/tools requested.
          </li>
        </ol>

        <p><strong>Chosen approach:</strong> Approach A, because the prompt explicitly directs us to use tables and evaluate Coulomb attraction at the observed metallic spacing.</p>
      </section>

      <section id="p2">
        <h2>PART 2 — Strategy & Tips (Roadmap Only)</h2>

        <ol>
          <li><strong>Define the ion-formation reaction</strong> for two Na atoms → Na<sup>+</sup> + Na<sup>−</sup> and write its energy cost <span class="mono">ΔE₀ = I − EA</span>.</li>
          <li><strong>Model the ionic crystal</strong> as point charges ±e on the NaCl lattice and write Coulomb energy per ion pair <span class="mono">U_C(r) = −α e²/(4πϵ₀ r)</span>.</li>
          <li><strong>Combine</strong> to get total per-pair energy <span class="mono">U_pair(r) = ΔE₀ + U_C(r)</span>.</li>
          <li><strong>Insert numbers</strong> at metallic Na nearest-neighbor distance r to estimate U_pair and convert to per-atom energy.</li>
          <li><strong>Compare</strong> to metallic Na cohesion qualitatively (and with a typical value if desired), then interpret physical feasibility.</li>
          <li><strong>Sanity checks</strong>: dimensional analysis (eV), limits r→∞ and r→0, sign reasoning.</li>
          <li><strong>Discuss missing physics</strong> (repulsion, screening, band formation) that explains why such crystals are not observed for single-atom R.</li>
        </ol>

        <div class="callout bad">
          <strong>Common mistakes</strong>
          <ul>
            <li>Forgetting that creating Na<sup>+</sup>Na<sup>−</sup> involves <em>two</em> atoms and costs <span class="mono">I − EA</span>, not <span class="mono">I + EA</span>.</li>
            <li>Using the wrong distance r (must be opposite-charge nearest neighbor in NaCl structure).</li>
            <li>Dropping the Madelung constant α (the “many-neighbor” advantage is the whole point).</li>
            <li>Concluding “it must exist” from Coulomb alone—ignoring that Na<sup>−</sup> is fragile in condensed matter.</li>
          </ul>
        </div>
      </section>

      <section id="p3">
        <h2>PART 3 — Full Solution (Detailed + Teaching)</h2>

        <h3>3.1 Physical intuition first (before equations)</h3>
        <p>
          To make Na<sup>+</sup> and Na<sup>−</sup> from neutral Na, we must remove an electron from one atom (expensive: ~5 eV)
          and attach it to another (slightly favorable: &lt; 1 eV). That seems net costly (~4 eV).
          However, in an ionic crystal the Na<sup>+</sup> and Na<sup>−</sup> attract each other and also interact attractively
          with many neighbors. The lattice Coulomb gain can be several eV per pair, so it might offset the ion-formation cost.
        </p>

        <hr />

        <h3>3.2 Mathematical model (variables, domain, coordinates, boundary conditions)</h3>
        <div class="callout math">
          <strong>Mathematical model (electrostatics on a periodic lattice)</strong>
          <ul>
            <li><strong>Domain:</strong> infinite 3D space with a periodic charge distribution (crystal). Mathematically, we use a unit cell with periodic boundary conditions.</li>
            <li><strong>Coordinates:</strong> Cartesian <span class="mono">(x,y,z)</span> in ℝ³. Lattice vectors define periodicity; charges sit at lattice sites.</li>
            <li><strong>Unknown field:</strong> electrostatic potential <span class="mono">φ(r)</span> (Volts).</li>
            <li><strong>Charge density:</strong> <span class="mono">ρ(r) = Σ_i q_i δ(r − R_i)</span>, where <span class="mono">q_i = ±e</span> and <span class="mono">R_i</span> are lattice positions.</li>
            <li><strong>Governing PDE:</strong> Poisson equation in vacuum:
              <span class="mono">∇·(ϵ₀ ∇φ) = −ρ</span>, equivalently <span class="mono">∇²φ = −ρ/ϵ₀</span>.
            </li>
            <li><strong>Boundary condition:</strong> periodicity of φ up to an arbitrary constant (only potential differences matter), plus overall charge neutrality per unit cell (so the solution exists).</li>
          </ul>
          <p class="note">
            The Madelung constant is essentially the value of a lattice Green’s-function sum (a regularized solution of Poisson’s equation for a periodic array of point charges).
          </p>
        </div>

        <h3>3.3 Step 1 — Energy to create the ion pair (atomic term)</h3>
        <p>
          Consider two neutral sodium atoms far apart (reference state). Create one cation and one anion:
        </p>

        <div class="eqwrap">
          <button class="copybtn" data-copy="eq1">Copy</button>
          <pre id="eq1">Na + Na  →  Na⁺ + Na⁻

Energy cost: ΔE₀ = I(Na) − EA(Na)</pre>
        </div>

        <p>
          Why <span class="mono">I − EA</span>?
        </p>
        <ul>
          <li>Removing an electron: Na → Na<sup>+</sup> + e<sup>−</sup> costs <span class="mono">+I</span>.</li>
          <li>Adding that electron to another Na: Na + e<sup>−</sup> → Na<sup>−</sup> releases energy <span class="mono">EA</span>,
              i.e. changes energy by <span class="mono">−EA</span>.</li>
          <li>By linearity of energy changes for sequential steps (state function), total is <span class="mono">+I − EA</span>.</li>
        </ul>

        <p>Insert the given/tabulated values:</p>
        <div class="eqwrap">
          <button class="copybtn" data-copy="eq2">Copy</button>
          <pre id="eq2">I(Na) ≈ 5.14 eV
EA(Na) = 0.78 eV   (given)

ΔE₀ = I − EA ≈ 5.14 − 0.78 = 4.36 eV</pre>
        </div>

        <div class="callout good">
          <strong>Dimensional check</strong>
          Ionization energy and electron affinity are both energies (eV). Their difference is also energy (eV). Good.
        </div>

        <hr />

        <h3>3.4 Step 2 — Coulomb lattice energy (Madelung term)</h3>
        <p>
          In a NaCl lattice of alternating charges ±e, the electrostatic energy per ion pair can be written as a lattice sum.
          A clean way to express it is:
        </p>

        <div class="eqwrap">
          <button class="copybtn" data-copy="eq3">Copy</button>
          <pre id="eq3">U_C(r) = − α  (e² / (4πϵ₀ r))

α = Madelung constant (NaCl structure: α ≈ 1.7476)
r = nearest-neighbor separation between opposite charges</pre>
        </div>

        <p>
          <strong>Why this step is valid (mathematical justification):</strong>
        </p>
        <ul>
          <li><strong>Superposition:</strong> Electrostatic potential satisfies a linear PDE (<span class="mono">∇²φ = −ρ/ϵ₀</span>), so potentials add and energies can be expressed via sums/integrals over pair interactions.</li>
          <li><strong>Periodicity/symmetry:</strong> The lattice is periodic and charge-neutral per cell, allowing a well-defined (regularized) energy per cell.</li>
          <li><strong>Scaling:</strong> Coulomb interactions scale as 1/r, so the entire lattice sum factors into a dimensionless constant α times <span class="mono">e²/(4πϵ₀ r)</span>.</li>
        </ul>

        <details>
          <summary>Optional deeper note: what α really is (operator / Green’s function view)</summary>
          <p>
            Solve Poisson’s equation on a periodic lattice using a lattice Green’s function <span class="mono">G</span> such that
            <span class="mono">∇²G = −δ/ϵ₀</span> (with periodic regularization). The potential at a site is a sum over
            <span class="mono">G(r − R_i)</span>. The Madelung constant is the dimensionless value of the resulting potential
            at a reference ion due to all other ions, multiplied by <span class="mono">r/e</span> to remove units.
            The calculation is subtle because the raw sum is conditionally convergent; standard methods (Ewald summation)
            define it unambiguously.
          </p>
        </details>

        <p>
          Use the convenient constant:
        </p>
        <div class="eqwrap">
          <button class="copybtn" data-copy="eq4">Copy</button>
          <pre id="eq4">e²/(4πϵ₀) = 14.4 eV·Å</pre>
        </div>

        <p>
          We evaluate at the <em>observed</em> metallic Na nearest-neighbor distance.
          Metallic sodium is bcc; its nearest-neighbor spacing is about <span class="mono">r ≈ 3.7 Å</span> (typical ambient value).
        </p>

        <div class="eqwrap">
          <button class="copybtn" data-copy="eq5">Copy</button>
          <pre id="eq5">U_C(r) = − α (14.4 eV·Å)/r(Å)

With α = 1.7476, r ≈ 3.7 Å:
U_C ≈ − (1.7476)(14.4)/3.7 eV
    ≈ − 6.8 eV  (per ion pair, Coulomb-only)</pre>
        </div>

        <div class="callout warn">
          <strong>Important</strong>
          This is the <em>long-range Coulomb</em> part. A physically stable crystal also needs a short-range repulsion term to prevent collapse at small r.
          But the prompt asks for the Coulomb attraction evaluated at the observed distance, so we proceed with this estimate.
        </div>

        <hr />

        <h3>3.5 Step 3 — Total energy per ion pair at fixed r</h3>
        <p>
          Combine the atomic ion-formation cost and the lattice Coulomb gain:
        </p>

        <div class="eqwrap">
          <button class="copybtn" data-copy="eq6">Copy</button>
          <pre id="eq6">U_pair(r) = (I − EA)  −  α e²/(4πϵ₀ r)

Numerically at r ≈ 3.7 Å:
U_pair ≈ 4.36 eV  −  6.8 eV  ≈  −2.4 eV  (per ion pair)</pre>
        </div>

        <p>
          This <span class="mono">−2.4 eV per pair</span> is relative to two isolated neutral Na atoms (our reference).
          Per atom, that is roughly:
        </p>

        <div class="eqwrap">
          <button class="copybtn" data-copy="eq7">Copy</button>
          <pre id="eq7">U_atom (ionic estimate) ≈ (−2.4 eV)/2 ≈ −1.2 eV per atom</pre>
        </div>

        <h3>3.6 Comparison to metallic sodium</h3>
        <p>
          Metallic Na has a cohesive energy of about ~1.1 eV per atom (order of magnitude).
          Our ionic estimate gives ~1.2 eV per atom in binding, i.e. <em>comparable</em>.
          So at the level of this simplified model, a Na<sup>+</sup>Na<sup>−</sup> NaCl-type lattice
          does not look obviously impossible energetically.
        </p>

        <div class="callout bad">
          <strong>But why isn’t Na⁺Na⁻ (same-element “salt”) observed?</strong>
          Because energetic plausibility from a point-ion Coulomb model is not the full story:
          Na<sup>−</sup> is a weakly bound anion (small EA) and in a dense solid the added electron tends to delocalize into a band,
          while strong overlap, screening, and polarization modify (and often destroy) the picture of stable, localized Na<sup>−</sup>.
        </div>

        <h3>3.7 Sanity checks</h3>
        <div class="grid2">
          <div class="callout good">
            <strong>Units</strong>
            <p class="mono">U_pair = eV − (eV·Å)/Å = eV</p>
            <p class="muted">Everything is consistent.</p>
          </div>
          <div class="callout good">
            <strong>Limiting cases</strong>
            <ul>
              <li><span class="mono">r → ∞</span>: Coulomb term → 0, so <span class="mono">U_pair → I − EA &gt; 0</span>. Far apart ions are not favorable (as expected).</li>
              <li><span class="mono">r → 0</span>: Coulomb term → −∞ in this model → unphysical collapse → signals missing short-range repulsion.</li>
            </ul>
          </div>
        </div>

        <div class="callout math">
          <strong>Math Insight (interpret the core equation as a mathematical object)</strong>
          <p>
            <span class="mono">U_pair(r) = ΔE₀ − C/r</span> is a <em>singular attractive potential</em> (like a 1/r law),
            with a constant offset. Mathematically it is a simple one-parameter family dominated by the harmonic
            (Laplace/Poisson) Green’s-function scaling <span class="mono">G(r) ∝ 1/r</span>.
            The lattice geometry enters only through the dimensionless constant <span class="mono">α</span>.
          </p>
        </div>

        <h3>3.8 One simple plot (helps learning)</h3>
        <figure>
          <canvas id="plot" aria-label="Plot of ionic pair energy vs separation"></canvas>
          <figcaption>
            <strong>Figure:</strong> Point-ion estimate of <span class="mono">U_pair(r)=ΔE₀−α(14.4)/r</span> for Na<sup>+</sup>Na<sup>−</sup> (NaCl structure).
            The marker shows a typical metallic Na nearest-neighbor distance <span class="mono">r≈3.7 Å</span>.
            <span class="muted">(This is an electrostatic+atomic estimate; real solids add repulsion and electronic-structure effects.)</span>
          </figcaption>
        </figure>

        <hr />

        <h3>3.9 Final answer (boxed)</h3>
        <div class="eqwrap">
          <button class="copybtn" data-copy="final">Copy</button>
          <pre id="final">Using I(Na) ≈ 5.14 eV and EA(Na)=0.78 eV:

ΔE₀ = I − EA ≈ 4.36 eV (cost to make Na⁺ + Na⁻ from 2 Na)

For a NaCl lattice of ±e at separation r, Coulomb energy per ion pair:
U_C(r) = −α e²/(4πϵ₀ r), with α(NaCl)=1.7476 and e²/(4πϵ₀)=14.4 eV·Å

At metallic-Na nearest-neighbor spacing r ≈ 3.7 Å:
U_C ≈ −(1.7476)(14.4)/3.7 ≈ −6.8 eV per pair

Total (point-ion estimate):
U_pair ≈ 4.36 − 6.8 ≈ −2.4 eV per ion pair  ≈ −1.2 eV per atom.

Conclusion: The crude Coulomb+I/EA estimate makes Na⁺Na⁻ (NaCl-type) appear energetically comparable to metallic Na,
but in reality Na⁻ is not stable/localized in a dense sodium solid; overlap, screening, polarization, and band formation
drive the system back toward metallic bonding, so such a same-element ionic crystal is not observed.</pre>
        </div>

      </section>

      <section id="p4" class="pagebreak">
        <h2>PART 4 — Deeper Understanding (Theory Around the Result)</h2>

        <h3>4.1 Re-interpret the final formula</h3>
        <p>
          The estimate
          <span class="mono">U_pair(r) = (I − EA) − α e²/(4πϵ₀ r)</span>
          has two competing pieces:
        </p>
        <ul>
          <li><strong>(I − EA):</strong> a chemistry/electronic-structure penalty for creating opposite ions from identical neutral atoms.</li>
          <li><strong>−α e²/(4πϵ₀ r):</strong> a geometric electrostatic reward from placing charges on an alternating lattice.</li>
        </ul>

        <h3>4.2 Parameter dependence (what controls stability)</h3>
        <ul>
          <li><strong>Increase EA</strong> → decreases ΔE₀ → easier to stabilize R<sup>−</sup> → favors R<sup>+</sup>R<sup>−</sup> crystals.</li>
          <li><strong>Decrease I</strong> → decreases ΔE₀ → favors ionic formation.</li>
          <li><strong>Smaller r</strong> → Coulomb term becomes more negative (stronger binding), until repulsion/overlap dominates.</li>
          <li><strong>Lattice geometry (α)</strong> → larger α increases electrostatic stabilization.</li>
        </ul>

        <details>
          <summary>Optional nondimensionalization (scaling argument)</summary>
          <p>
            Let <span class="mono">r = r₀ x</span> with reference length <span class="mono">r₀</span> (e.g., metallic spacing).
            Define <span class="mono">E_C0 = α e²/(4πϵ₀ r₀)</span>. Then
          </p>
          <div class="eqwrap">
            <button class="copybtn" data-copy="nd1">Copy</button>
            <pre id="nd1">U_pair(r) = ΔE₀ − E_C0 / x

Dimensionless energy: u(x) = U_pair / E_C0 = (ΔE₀/E_C0) − 1/x</pre>
          </div>
          <p>
            The key dimensionless control parameter is <span class="mono">ΔE₀/E_C0</span>:
            if <span class="mono">ΔE₀/E_C0 &lt; 1/x</span> at relevant x, Coulomb wins.
          </p>
        </details>

        <h3>4.3 One alternative derivation idea (brief but meaningful)</h3>
        <p>
          Instead of quoting <span class="mono">U_C = −α e²/(4πϵ₀ r)</span>, one can:
          (i) write the electrostatic energy per cell as <span class="mono">(1/2) Σ_i q_i φ_i</span>,
          (ii) compute <span class="mono">φ</span> from a periodic Poisson solve using Fourier series (reciprocal lattice),
          and (iii) identify α as the dimensionless sum that remains after factoring out the 1/r scaling.
          This is essentially the Ewald-summation route (a lattice Green’s function in both real and reciprocal space).
        </p>

        <h3>4.4 Concept checks (self-test Q&A)</h3>
        <ul>
          <li><strong>Q:</strong> Why does the lattice energy scale like 1/r? <strong>A:</strong> Because Coulomb potential is the Green’s function of Laplace’s equation in 3D: <span class="mono">G(r) ∝ 1/r</span>.</li>
          <li><strong>Q:</strong> If EA were negative (unstable anion), what happens? <strong>A:</strong> ΔE₀ becomes even larger, so same-element ionic crystals become even less likely.</li>
          <li><strong>Q:</strong> Why can Coulomb-only predict collapse as r→0? <strong>A:</strong> Missing Pauli/Born repulsion; the true energy includes a rapidly rising repulsive term.</li>
          <li><strong>Q:</strong> What solid-state effect most threatens Na<sup>−</sup>? <strong>A:</strong> Electron delocalization into bands (metallic behavior) plus screening that undermines localized anion formation.</li>
        </ul>
      </section>

      <section id="p5">
        <h2>PART 5 — Optional Plot Guide</h2>
        <h3>What the plot shows and why it’s useful</h3>
        <ul>
          <li><strong>y-axis:</strong> <span class="mono">U_pair(r)</span> in eV per ion pair, relative to two isolated neutral Na atoms.</li>
          <li><strong>x-axis:</strong> separation <span class="mono">r</span> in Å between opposite charges (nearest neighbors in NaCl structure).</li>
          <li><strong>Curve meaning:</strong> A constant positive offset ΔE₀ combined with an attractive <span class="mono">−C/r</span> term.</li>
          <li><strong>Example value marker:</strong> <span class="mono">r ≈ 3.7 Å</span> (typical metallic Na spacing) is marked; it lands at a negative energy in the simplified model.</li>
          <li><strong>What to notice:</strong> The curvature (1/r) and that the sign change occurs when <span class="mono">r ≈ α(14.4)/ΔE₀</span>.</li>
        </ul>

        <div class="callout warn">
          <strong>Reminder</strong>
          The plot is an instructional visualization of the simplified estimate.
          A physically realistic total energy would include short-range repulsion and solid-state electronic effects.
        </div>

        <p style="margin-top:14px;">
          <a class="backtop" href="#top">↑ Back to top</a>
        </p>
      </section>

      <footer class="muted small" style="padding:0 4px 20px;">
        <p>
          Notes: Numerical values are used only as directed by the problem statement (I from the provided ionization table, EA=0.78 eV as instructed).
          The nearest-neighbor distance in metallic Na is taken as a typical bcc value (~3.7 Å) for evaluation at the observed spacing.
        </p>
      </footer>
    </article>
  </main>

  <div class="toast" id="toast" role="status" aria-live="polite">Copied.</div>

  <script>
    // Smooth scroll for TOC links (no external libs)
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const id = a.getAttribute('href');
        const el = document.querySelector(id);
        if(!el) return;
        e.preventDefault();
        el.scrollIntoView({behavior:'smooth', block:'start'});
        history.replaceState(null, '', id);
      });
    });

    // Copy buttons
    const toast = document.getElementById('toast');
    let toastTimer = null;
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add('show');
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>toast.classList.remove('show'), 1100);
    }
    async function copyText(text){
      try{
        await navigator.clipboard.writeText(text);
        showToast('Copied to clipboard.');
      }catch(err){
        // Fallback
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        ta.remove();
        showToast('Copied (fallback).');
      }
    }
    document.querySelectorAll('.copybtn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const targetId = btn.getAttribute('data-copy');
        const pre = document.getElementById(targetId);
        if(!pre) return;
        copyText(pre.innerText.trim());
      });
    });

    // --- Canvas plot: U_pair(r)=ΔE0 - α*14.4/r ---
    const canvas = document.getElementById('plot');
    const ctx = canvas.getContext('2d');

    // Parameters (problem-directed)
    const I = 5.14;      // eV (Table 5 for Na)
    const EA = 0.78;     // eV (given)
    const dE0 = I - EA;  // eV
    const alpha = 1.7476;
    const k = 14.4;      // eV·Å
    const rMark = 3.7;   // Å (typical metallic Na nn distance)

    function U(r){ return dE0 - alpha*k/r; } // eV per pair

    function draw(){
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      const rect = canvas.getBoundingClientRect();
      canvas.width = Math.floor(rect.width * dpr);
      canvas.height = Math.floor(rect.height * dpr);
      ctx.setTransform(dpr,0,0,dpr,0,0);

      const w = rect.width, h = rect.height;

      // Plot ranges
      const xMin = 2.0, xMax = 6.0;       // Å
      // Determine y-range from function + padding
      const yVals = [];
      for(let i=0;i<=300;i++){
        const r = xMin + (xMax-xMin)*i/300;
        yVals.push(U(r));
      }
      let yMin = Math.min(...yVals);
      let yMax = Math.max(...yVals);
      // add padding
      const pad = 0.12*(yMax-yMin || 1);
      yMin -= pad; yMax += pad;

      // Margins
      const m = {l:58, r:18, t:30, b:48};
      const pw = w - m.l - m.r;
      const ph = h - m.t - m.b;

      // Helpers
      const X = (x)=> m.l + (x - xMin) * pw / (xMax - xMin);
      const Y = (y)=> m.t + (yMax - y) * ph / (yMax - yMin);

      // Clear
      ctx.clearRect(0,0,w,h);

      // Title
      ctx.fillStyle = getComputedStyle(document.body).getPropertyValue('--text').trim() || '#e7eef8';
      ctx.font = '600 14px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      ctx.fillText('Na⁺Na⁻ (NaCl) point-ion estimate: U_pair(r) = (I−EA) − α·14.4/r', m.l, 18);

      // Grid & axes
      const lineColor = getComputedStyle(document.body).getPropertyValue('--line').trim() || 'rgba(255,255,255,.12)';
      ctx.strokeStyle = lineColor;
      ctx.lineWidth = 1;

      // Grid ticks
      const xTicks = 9; // includes ends
      const yTicks = 8;

      // Vertical grid + x ticks
      ctx.font = '12px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace';
      ctx.fillStyle = getComputedStyle(document.body).getPropertyValue('--muted').trim() || '#a9b6c7';

      for(let i=0;i<xTicks;i++){
        const x = xMin + (xMax-xMin)*i/(xTicks-1);
        const px = X(x);
        ctx.beginPath();
        ctx.moveTo(px, m.t);
        ctx.lineTo(px, m.t+ph);
        ctx.stroke();

        ctx.fillText(x.toFixed(1), px-10, m.t+ph+18);
      }

      // Horizontal grid + y ticks
      for(let i=0;i<yTicks;i++){
        const y = yMin + (yMax-yMin)*i/(yTicks-1);
        const py = Y(y);
        ctx.beginPath();
        ctx.moveTo(m.l, py);
        ctx.lineTo(m.l+pw, py);
        ctx.stroke();

        ctx.fillText(y.toFixed(1), 8, py+4);
      }

      // Axes lines (slightly stronger)
      ctx.strokeStyle = 'rgba(255,255,255,.25)';
      ctx.beginPath();
      ctx.moveTo(m.l, m.t);
      ctx.lineTo(m.l, m.t+ph);
      ctx.lineTo(m.l+pw, m.t+ph);
      ctx.stroke();

      // Axis labels
      ctx.fillStyle = getComputedStyle(document.body).getPropertyValue('--text').trim() || '#e7eef8';
      ctx.font = '13px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      ctx.fillText('r (Å)', m.l + pw/2 - 14, m.t+ph+40);

      // y label (rotated)
      ctx.save();
      ctx.translate(18, m.t + ph/2 + 22);
      ctx.rotate(-Math.PI/2);
      ctx.fillText('U_pair (eV per ion pair)', 0, 0);
      ctx.restore();

      // Draw curve
      ctx.strokeStyle = 'rgba(125,211,252,.85)';
      ctx.lineWidth = 2;
      ctx.beginPath();
      for(let i=0;i<=400;i++){
        const r = xMin + (xMax-xMin)*i/400;
        const y = U(r);
        const px = X(r);
        const py = Y(y);
        if(i===0) ctx.moveTo(px,py);
        else ctx.lineTo(px,py);
      }
      ctx.stroke();

      // Mark metallic r
      const yM = U(rMark);
      const pxM = X(rMark);
      const pyM = Y(yM);

      // Vertical marker line
      ctx.strokeStyle = 'rgba(251,191,36,.60)';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(pxM, m.t);
      ctx.lineTo(pxM, m.t+ph);
      ctx.stroke();

      // Marker point
      ctx.fillStyle = 'rgba(251,191,36,.95)';
      ctx.beginPath();
      ctx.arc(pxM, pyM, 4.2, 0, Math.PI*2);
      ctx.fill();

      // Annotation
      ctx.fillStyle = getComputedStyle(document.body).getPropertyValue('--text').trim() || '#e7eef8';
      ctx.font = '12px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      const label = `r ≈ ${rMark.toFixed(1)} Å, U ≈ ${yM.toFixed(1)} eV`;
      const lx = Math.min(pxM + 10, m.l+pw-170);
      const ly = Math.max(m.t+14, pyM - 10);
      // small label box
      ctx.fillStyle = 'rgba(0,0,0,.55)';
      ctx.strokeStyle = 'rgba(255,255,255,.18)';
      ctx.lineWidth = 1;
      const tw = 165, th = 26;
      ctx.beginPath();
      ctx.roundRect(lx, ly, tw, th, 10);
      ctx.fill();
      ctx.stroke();
      ctx.fillStyle = '#fff';
      ctx.fillText(label, lx+10, ly+17);

      // Legend
      const legX = m.l + 10, legY = m.t + 10;
      ctx.fillStyle = 'rgba(0,0,0,.35)';
      ctx.strokeStyle = 'rgba(255,255,255,.14)';
      ctx.beginPath();
      ctx.roundRect(legX, legY, 210, 44, 12);
      ctx.fill();
      ctx.stroke();

      // Legend lines
      ctx.strokeStyle = 'rgba(125,211,252,.85)';
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(legX+12, legY+16);
      ctx.lineTo(legX+36, legY+16);
      ctx.stroke();

      ctx.strokeStyle = 'rgba(251,191,36,.65)';
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(legX+12, legY+32);
      ctx.lineTo(legX+36, legY+32);
      ctx.stroke();

      ctx.fillStyle = '#fff';
      ctx.font = '12px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      ctx.fillText('U_pair(r) curve', legX+44, legY+20);
      ctx.fillText('metallic Na spacing marker', legX+44, legY+36);
    }

    // Polyfill: roundRect for older browsers
    if(!CanvasRenderingContext2D.prototype.roundRect){
      CanvasRenderingContext2D.prototype.roundRect = function(x,y,w,h,r){
        const rr = Math.min(r, w/2, h/2);
        this.beginPath();
        this.moveTo(x+rr,y);
        this.arcTo(x+w,y,x+w,y+h,rr);
        this.arcTo(x+w,y+h,x,y+h,rr);
        this.arcTo(x,y+h,x,y,rr);
        this.arcTo(x,y,x+w,y,rr);
        this.closePath();
        return this;
      };
    }

    const ro = new ResizeObserver(()=>draw());
    ro.observe(canvas);
    draw();
  </script>
</body>
</html>
