<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#0b1020" />
  <title>Linear Ionic Crystal (1D): Madelung Energy, Equilibrium Spacing, and Small-Strain Work</title>
  <style>
    :root{
      --bg:#070a12;
      --panel:#0c1224;
      --panel2:#0b142e;
      --text:#e8ecff;
      --muted:#aab4e6;
      --faint:#7f89bf;
      --line:rgba(255,255,255,.10);
      --line2:rgba(255,255,255,.16);
      --accent:#7aa7ff;
      --accent2:#7dffcc;
      --warn:#ffcc66;
      --ok:#7dffcc;
      --bad:#ff6b8b;
      --shadow: 0 12px 40px rgba(0,0,0,.35);
      --radius: 18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
      --serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
      --tocW: 290px;
    }

    @media (prefers-color-scheme: light){
      :root{
        --bg:#f6f7ff;
        --panel:#ffffff;
        --panel2:#f2f5ff;
        --text:#0b1433;
        --muted:#33407a;
        --faint:#5a67a8;
        --line:rgba(12,20,51,.10);
        --line2:rgba(12,20,51,.16);
        --shadow: 0 14px 40px rgba(10,20,60,.12);
      }
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      background: radial-gradient(1200px 600px at 20% 0%, rgba(122,167,255,.18), transparent 60%),
                  radial-gradient(900px 520px at 90% 10%, rgba(125,255,204,.12), transparent 60%),
                  var(--bg);
      color:var(--text);
      font-family:var(--sans);
      line-height:1.55;
    }

    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}

    header.hero{
      padding: 28px 18px 18px;
      position:relative;
    }
    .wrap{
      max-width: 1220px;
      margin: 0 auto;
      display:grid;
      grid-template-columns: var(--tocW) 1fr;
      gap: 18px;
      padding: 0 18px 60px;
    }
    @media (max-width: 980px){
      .wrap{grid-template-columns: 1fr}
    }

    .heroCard{
      max-width:1220px;
      margin: 0 auto;
      padding: 18px 18px 14px;
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .heroCard:before{
      content:"";
      position:absolute; inset:-2px;
      background: linear-gradient(90deg, rgba(122,167,255,.35), rgba(125,255,204,.25), rgba(255,204,102,.18));
      filter: blur(28px);
      opacity:.35;
      pointer-events:none;
    }
    .heroInner{position:relative}
    h1{
      margin:0 0 6px;
      font-size: clamp(1.25rem, 1.0rem + 1.2vw, 2.0rem);
      letter-spacing:.2px;
    }
    .sub{
      margin:0;
      color:var(--muted);
      font-size: 0.98rem;
    }
    .metaRow{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-top: 12px;
    }
    .pill{
      border:1px solid var(--line);
      background: rgba(255,255,255,.05);
      padding: 6px 10px;
      border-radius: 999px;
      font-size:.85rem;
      color:var(--muted);
    }

    nav.toc{
      position: sticky;
      top: 14px;
      align-self:start;
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: rgba(255,255,255,.04);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    @media (max-width: 980px){
      nav.toc{position:relative; top:auto}
    }
    .tocHead{
      padding: 14px 14px 10px;
      border-bottom:1px solid var(--line);
      background: linear-gradient(180deg, rgba(122,167,255,.10), transparent);
    }
    .tocHead strong{display:block; font-size:.95rem}
    .tocHead span{display:block; color:var(--muted); font-size:.82rem; margin-top:2px}
    .tocList{
      list-style:none;
      margin:0; padding: 8px 10px 12px;
      max-height: 70vh;
      overflow:auto;
    }
    .tocList a{
      display:block;
      padding: 8px 10px;
      border-radius: 12px;
      color: var(--muted);
      border:1px solid transparent;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
    }
    .tocList a:hover{background: rgba(255,255,255,.06); transform: translateX(2px)}
    .tocList a.active{
      color: var(--text);
      background: rgba(122,167,255,.12);
      border-color: rgba(122,167,255,.25);
    }

    main{
      display:flex;
      flex-direction:column;
      gap: 16px;
      min-width: 0;
    }

    section.card{
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: rgba(255,255,255,.035);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card .content{
      padding: 18px;
    }
    .card .head{
      padding: 14px 18px 12px;
      border-bottom: 1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
    }
    .card .head h2{
      margin:0;
      font-size: 1.05rem;
      letter-spacing:.2px;
    }

    .grid2{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 14px;
    }
    @media (max-width: 900px){
      .grid2{grid-template-columns:1fr}
    }

    .callout{
      border: 1px solid var(--line2);
      background: linear-gradient(180deg, rgba(122,167,255,.10), rgba(255,255,255,.02));
      border-radius: 16px;
      padding: 12px 12px 10px;
      margin: 10px 0;
    }
    .callout h3{
      margin:0 0 6px;
      font-size:.95rem;
      display:flex; align-items:center; gap:8px;
    }
    .badge{
      font-size:.72rem;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid var(--line);
      color: var(--muted);
      background: rgba(255,255,255,.05);
    }
    .callout p, .callout ul{margin:8px 0 0}
    .callout ul{padding-left: 18px}

    .eq{
      border:1px solid var(--line);
      background: rgba(0,0,0,.18);
      border-radius: 16px;
      padding: 12px;
      margin: 12px 0;
      overflow:auto;
    }
    @media (prefers-color-scheme: light){
      .eq{background: rgba(10,20,60,.04)}
    }
    .eq .row{
      display:flex;
      align-items:flex-start;
      gap:10px;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    pre, code{
      font-family: var(--mono);
      font-size: .92rem;
      line-height: 1.4;
      margin:0;
      white-space: pre;
    }
    .copyBtn{
      appearance:none;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 8px 10px;
      border-radius: 12px;
      cursor:pointer;
      font-size:.85rem;
      transition: transform .12s ease, background .12s ease;
      user-select:none;
    }
    .copyBtn:hover{background: rgba(255,255,255,.10); transform: translateY(-1px)}
    .copyBtn:active{transform: translateY(0px)}
    .copyBtn.ok{border-color: rgba(125,255,204,.35); background: rgba(125,255,204,.10)}
    .copyBtn.bad{border-color: rgba(255,107,139,.35); background: rgba(255,107,139,.10)}

    details{
      border:1px dashed var(--line2);
      border-radius: 16px;
      padding: 10px 12px;
      margin: 10px 0;
      background: rgba(255,255,255,.02);
    }
    summary{
      cursor:pointer;
      color: var(--muted);
      font-weight:600;
    }
    details[open] summary{color: var(--text)}
    .mini{
      color: var(--muted);
      font-size: .94rem;
    }

    .kpi{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin-top: 10px;
    }
    @media (max-width: 900px){ .kpi{grid-template-columns:1fr} }
    .kpi .box{
      border:1px solid var(--line);
      border-radius: 16px;
      padding: 10px 12px;
      background: rgba(255,255,255,.03);
    }
    .kpi .box .t{color:var(--muted); font-size:.82rem}
    .kpi .box .v{font-weight:700; margin-top:4px}

    .backTop{
      display:inline-flex;
      align-items:center;
      gap:8px;
      margin-top: 10px;
      padding: 8px 10px;
      border-radius: 999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.05);
      color: var(--muted);
      width: fit-content;
    }
    .backTop:hover{color:var(--text); text-decoration:none; background: rgba(255,255,255,.08)}
    footer{
      max-width:1220px;
      margin: 0 auto;
      padding: 0 18px 36px;
      color: var(--muted);
      font-size:.9rem;
    }

    figure{
      margin: 10px 0 0;
      border:1px solid var(--line);
      border-radius: 16px;
      overflow:hidden;
      background: rgba(0,0,0,.15);
    }
    figure .figHead{
      padding: 10px 12px;
      border-bottom:1px solid var(--line);
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
      background: rgba(255,255,255,.03);
    }
    figure .figHead .title{font-weight:700}
    figure .figHead .note{color:var(--muted); font-size:.86rem}
    canvas{display:block; width:100%; height: 320px;}
    @media (max-width: 560px){ canvas{height: 280px;} }

    /* Print-friendly */
    @media print{
      :root{--bg:#fff; --panel:#fff; --text:#000; --muted:#222; --line:#ddd; --line2:#ccc; --shadow:none}
      body{background:#fff}
      nav.toc{display:none}
      .wrap{grid-template-columns: 1fr}
      .heroCard{box-shadow:none}
      section.card{box-shadow:none}
      a{color:#000; text-decoration:underline}
      .copyBtn{display:none}
      .backTop{display:none}
      details{border-style:solid}
      .pageBreak{break-before: page}
    }

    /* Subtle micro-animations */
    @keyframes fadeUp{from{opacity:0; transform: translateY(6px)}to{opacity:1; transform: translateY(0)}}
    section.card{animation: fadeUp .35s ease both}
    section.card:nth-child(2){animation-delay:.03s}
    section.card:nth-child(3){animation-delay:.06s}
    section.card:nth-child(4){animation-delay:.09s}
    section.card:nth-child(5){animation-delay:.12s}
    section.card:nth-child(6){animation-delay:.15s}
    section.card:nth-child(7){animation-delay:.18s}
  </style>
</head>

<body>
<header id="top" class="hero">
  <div class="heroCard">
    <div class="heroInner">
      <h1>Linear Ionic Crystal (1D): Equilibrium Energy and Small-Strain Compression Work</h1>
      <p class="sub">
        Alternating charges in a 1D lattice + short-range repulsion → a stable equilibrium spacing.
        We compute the 1D Madelung sum, minimize the total energy, and derive the quadratic (elastic) work for small compression.
      </p>
      <div class="metaRow">
        <span class="pill">Physics: electrostatics + lattice energy</span>
        <span class="pill">Math physics: series, asymptotics, Taylor expansion</span>
        <span class="pill">Applied lens: 1D elastic constant & energy density</span>
      </div>
    </div>
  </div>
</header>

<div class="wrap">
  <nav class="toc" aria-label="Table of contents">
    <div class="tocHead">
      <strong>Table of Contents</strong>
      <span>Sticky + scroll highlight</span>
    </div>
    <ul class="tocList" id="tocList">
      <li><a href="#qs">Quick Summary</a></li>
      <li><a href="#p0">PART 0 — Concept Primer</a></li>
      <li><a href="#p0b">PART 0B — Industry & Applied Physics Perspective</a></li>
      <li><a href="#p1">PART 1 — Problem Analysis</a></li>
      <li><a href="#p2">PART 2 — Strategy & Tips</a></li>
      <li><a href="#p3">PART 3 — Full Solution</a></li>
      <li><a href="#p4">PART 4 — Deeper Understanding</a></li>
      <li><a href="#p5">PART 5 — Optional Plot Guide</a></li>
      <li><a href="#final">Final Answer (copy)</a></li>
    </ul>
  </nav>

  <main>

    <!-- Quick Summary -->
    <section id="qs" class="card">
      <div class="head"><h2>Quick Summary</h2></div>
      <div class="content">
        <ul>
          <li><strong>What this is:</strong> A 1D “ionic crystal” of <em>2N</em> ions with alternating charges ±q, equally spaced by <em>R</em>.</li>
          <li><strong>Key physics idea:</strong> Long-range Coulomb attraction/repulsion (Madelung energy) competes with short-range repulsion <code>A/R^n</code> (nearest neighbors only) to produce a stable equilibrium spacing <code>R0</code>.</li>
          <li><strong>Governing energy:</strong> <code>U(R) = U_C(R) + U_rep(R)</code>, where <code>U_C</code> is a lattice sum and <code>U_rep = 2N A/R^n</code>.</li>
          <li><strong>Mathematical core:</strong> Evaluate an alternating harmonic series <code>Σ (-1)^{m}/m = -ln 2</code> and apply energy minimization <code>dU/dR = 0</code>.</li>
          <li><strong>Result (symbolic):</strong> At equilibrium,
            <code>U(R0) = - (2N q^2 ln 2 / R0) (1 - 1/n)</code> (CGS / Gaussian units).
          </li>
          <li><strong>Small compression:</strong> For <code>R = R0(1 - δ)</code> with <code>0&lt;δ&lt;&lt;1</code>, the work scales quadratically: <code>W ≈ (1/2) C δ^2</code> (per ion / per “lattice unit”).</li>
          <li><strong>Elastic coefficient:</strong> <code>C = (n - 1) q^2 ln 2 / R0</code> (CGS). In SI, replace <code>q^2 → q^2/(4πϵ0)</code>.</li>
          <li><strong>Physical meaning:</strong> The quadratic term is the 1D analog of linear elasticity: energy ∝ (strain)² with stiffness set by Coulomb strength and the repulsion exponent <em>n</em>.</li>
        </ul>

        <div class="callout">
          <h3><span class="badge">Math Insight</span> The core equation as a mathematical object</h3>
          <p class="mini">
            The equilibrium and small-strain response come from a <strong>variational principle</strong>:
            the stable spacing <code>R0</code> is a minimizer of <code>U(R)</code>, so <code>U'(R0)=0</code> and
            the leading response to a small perturbation is governed by the <strong>Hessian</strong> (here, the scalar
            second derivative) <code>U''(R0)</code>. This is the same mathematical structure behind linearized stability
            in ODE/PDE theory and the quadratic energy of Hooke’s law.
          </p>
        </div>

        <a class="backTop" href="#top" aria-label="Back to top">↑ Back to top</a>
      </div>
    </section>

    <!-- PART 0 -->
    <section id="p0" class="card">
      <div class="head"><h2>PART 0 — Concept Primer (Theory Before Solving)</h2></div>
      <div class="content">
        <div class="grid2">
          <div>
            <h3 style="margin-top:0">Core definitions (symbols + units)</h3>
            <ul>
              <li><code>2N</code>: total number of ions (dimensionless count).</li>
              <li><code>q</code>: magnitude of ionic charge. In CGS/Gaussian, <code>q^2/R</code> has energy units.</li>
              <li><code>R</code>: nearest-neighbor spacing (length).</li>
              <li><code>A/R^n</code>: short-range repulsive potential energy between <strong>nearest neighbors only</strong>.
                Here <code>A &gt; 0</code> and <code>n &gt; 1</code> (typically large for “hard” repulsion).</li>
              <li><code>U(R)</code>: total potential energy of the chain.</li>
              <li><code>δ</code>: small compressive strain defined by <code>R = R0(1 - δ)</code>, with <code>0&lt;δ&lt;&lt;1</code>.</li>
            </ul>

            <h3>Physical meaning (intuition)</h3>
            <ul>
              <li><strong>Coulomb term:</strong> Alternating charges prefer to be close (net attraction), but not collapse because same-sign ions also repel at farther distances.</li>
              <li><strong>Repulsive term:</strong> Mimics Pauli exclusion / overlap repulsion of electron clouds; grows sharply as ions approach.</li>
              <li><strong>Equilibrium spacing:</strong> Where attraction slope equals repulsion slope: <code>dU/dR = 0</code>.</li>
              <li><strong>Small strain response:</strong> Near a stable minimum, any smooth potential looks quadratic: <code>U(R) ≈ U(R0) + (1/2)U''(R0)(R-R0)^2</code>.</li>
            </ul>
          </div>

          <div>
            <div class="callout">
              <h3><span class="badge">Key Laws</span> Electrostatics + energy minimization</h3>
              <ul class="mini">
                <li><strong>Superposition</strong>: total electrostatic potential is linear in sources.</li>
                <li><strong>Pair energy</strong>: (CGS/Gaussian) <code>V_ij = q_i q_j / r_ij</code>.</li>
                <li><strong>Variational stability</strong>: equilibrium spacing solves <code>U'(R0)=0</code> and stability requires <code>U''(R0)&gt;0</code>.</li>
              </ul>
            </div>

            <div class="callout">
              <h3><span class="badge">Approximations</span> What model choices mean mathematically</h3>
              <ul class="mini">
                <li><strong>1D infinite/large chain</strong>: treat sums as convergent lattice series; edge effects neglected (periodic boundaries or N→∞).</li>
                <li><strong>Nearest-neighbor repulsion only</strong>: replace complicated short-range interactions by a single term <code>A/R^n</code> acting only at distance <code>R</code>.</li>
                <li><strong>Small compression</strong> (<code>δ&lt;&lt;1</code>): use Taylor expansion; neglect <code>O(δ^3)</code> terms.</li>
              </ul>
            </div>

            <div class="callout">
              <h3><span class="badge">What to watch for</span> Pitfalls</h3>
              <ul class="mini">
                <li><strong>Double counting</strong> in lattice energy: pair sums need a factor <code>1/2</code>.</li>
                <li><strong>Signs</strong>: alternating charges yield an alternating series; missing a minus flips the physics.</li>
                <li><strong>Using only U(R0)</strong> for elasticity: you need <code>U(R)</code> near <code>R0</code> (i.e., derivatives), not just its value at the minimum.</li>
                <li><strong>Units</strong>: CGS vs SI conversion: <code>q^2</code> behaves differently; in SI insert <code>1/(4πϵ0)</code>.</li>
              </ul>
            </div>
          </div>
        </div>

        <details>
          <summary>Mini intuition example: why ln 2 appears</summary>
          <div class="mini" style="margin-top:8px">
            For a +q ion, the nearest neighbors at ±R are −q → attractive contribution ~ −1/R.
            The next neighbors at ±2R are +q → repulsive contribution ~ +1/(2R), then −1/(3R), and so on.
            This produces the alternating harmonic series:
            <code>−1 + 1/2 − 1/3 + 1/4 − ... = −ln 2</code>,
            so the lattice sum is proportional to <code>ln 2</code>.
          </div>
        </details>

        <a class="backTop" href="#top">↑ Back to top</a>
      </div>
    </section>

    <!-- PART 0B -->
    <section id="p0b" class="card">
      <div class="head"><h2>PART 0B — Industry & Applied Physics Perspective</h2></div>
      <div class="content">
        <p class="mini">
          This toy 1D ionic crystal is an “engineering skeleton key”: the same energy-minimization + small-strain
          Taylor-expansion logic underlies how we extract elastic constants, stability margins, and failure risks in real materials.
        </p>

        <div class="kpi">
          <div class="box">
            <div class="t">Where it shows up</div>
            <div class="v">Crystal cohesion & stiffness</div>
            <div class="mini">Ionic solids (NaCl-like), ceramic brittleness, lattice energy modeling.</div>
          </div>
          <div class="box">
            <div class="t">Why engineers care</div>
            <div class="v">Reliability & manufacturability</div>
            <div class="mini">Thermal shock, microcracks, sintering shrinkage, and tolerance to strain.</div>
          </div>
          <div class="box">
            <div class="t">What we extract</div>
            <div class="v">Elastic constants & stability</div>
            <div class="mini">Quadratic energy → stiffness; curvature → stability and phonon scales (in extended models).</div>
          </div>
        </div>

        <h3>Concrete application areas (at least 3)</h3>
        <ul>
          <li><strong>Advanced ceramics</strong> (insulators, cutting tools): ionic bonding influences elastic modulus and fracture behavior.</li>
          <li><strong>Battery materials</strong> (solid electrolytes, cathodes): ion arrangements and short-range repulsion shape mechanical integrity under cycling.</li>
          <li><strong>MEMS & sensors</strong> using piezo/ionic crystals: stiffness and strain-energy affect resonance frequencies and fatigue margins.</li>
          <li><strong>Thermal barrier coatings</strong>: stability against compressive/tensile strains from thermal expansion mismatch.</li>
        </ul>

        <h3>Measurement / validation methods</h3>
        <ul>
          <li><strong>X-ray or neutron diffraction</strong>: measures lattice spacing changes under stress (strain) → validates <code>R0</code> and elastic response.</li>
          <li><strong>Ultrasonic wave speed</strong>: sound speed relates to elastic constants; in more detailed models, curvature of energy connects to phonons.</li>
          <li><strong>Nanoindentation</strong>: local stiffness and hardness; compared with atomistic potentials.</li>
        </ul>

        <h3>Design trade-offs & constraints</h3>
        <ul>
          <li><strong>Non-idealities</strong>: defects, finite temperature, surfaces/edges break perfect periodicity → modify the lattice sum and effective stiffness.</li>
          <li><strong>Potential choice</strong>: real short-range repulsion isn’t exactly <code>A/R^n</code>; engineers fit potentials (Born–Mayer, Buckingham) to data.</li>
          <li><strong>Safety margins</strong>: small-strain quadratic energy is valid only before nonlinearities and damage mechanisms (cracking) dominate.</li>
        </ul>

        <div class="callout">
          <h3><span class="badge">From lab to product</span> How the idealized model is adapted</h3>
          <p class="mini">
            In practice, the “<code>A/R^n</code>” term becomes a calibrated interatomic potential fitted to diffraction,
            elastic moduli, and sometimes <em>ab initio</em> calculations. The same math steps remain:
            compute <code>U(R)</code>, find its minimizer, and use <code>U''(R0)</code> (or the full Hessian in 3D) to predict small-strain behavior.
          </p>
        </div>

        <a class="backTop" href="#top">↑ Back to top</a>
      </div>
    </section>

    <!-- PART 1 -->
    <section id="p1" class="card">
      <div class="head"><h2>PART 1 — Problem Analysis (No Solving Yet)</h2></div>
      <div class="content">
        <h3 style="margin-top:0">Restate the problem (in plain words)</h3>
        <p class="mini">
          We have a 1D chain of <code>2N</code> ions, equally spaced by <code>R</code>, with alternating charges <code>+q, -q, +q, -q, ...</code>.
          The ions interact via Coulomb forces (long-range) and also a <em>repulsive</em> nearest-neighbor potential energy <code>A/R^n</code>.
          (a) Find the total potential energy at the equilibrium spacing <code>R0</code>. (b) If the chain is compressed so
          <code>R = R0(1-δ)</code>, show the work needed per “unit cell/ion-scale unit length” has leading term <code>(1/2)C δ^2</code>
          with <code>C = (n-1) q^2 ln2 / R0</code> (CGS), and note the SI replacement <code>q^2 → q^2/(4πϵ0)</code>.
        </p>

        <h3>Given quantities</h3>
        <ul>
          <li><code>2N</code> ions, alternating charges ±q</li>
          <li>Nearest-neighbor spacing <code>R</code> (variable), equilibrium <code>R0</code></li>
          <li>Nearest-neighbor repulsive energy <code>A/R^n</code> with <code>A&gt;0</code>, <code>n&gt;1</code></li>
        </ul>

        <h3>Unknowns / what to prove</h3>
        <ul>
          <li>(a) Prove the equilibrium energy:
            <code>U(R0) = - (2N q^2 ln2 / R0)(1 - 1/n)</code> (CGS).
          </li>
          <li>(b) Prove small-compression work scales as:
            <code>W ≈ (1/2) C δ^2</code>, with <code>C = (n-1) q^2 ln2 / R0</code> (CGS).
          </li>
        </ul>

        <h3>Relevant principles and why they apply</h3>
        <ul>
          <li><strong>Electrostatic superposition</strong> (linearity): total potential is the sum of contributions from all ions.</li>
          <li><strong>Periodic symmetry</strong>: every ion sees the same environment (for large N / periodic boundaries), simplifying the lattice sum.</li>
          <li><strong>Energy minimization</strong>: equilibrium spacing satisfies <code>dU/dR = 0</code>; stability uses <code>U''(R0)&gt;0</code>.</li>
          <li><strong>Small-parameter expansion</strong> in <code>δ</code>: Taylor expansion is valid because <code>U</code> is smooth in <code>R&gt;0</code>.</li>
        </ul>

        <div class="callout">
          <h3><span class="badge">Mathematical model</span> Variables, domain, and boundary conditions</h3>
          <ul class="mini">
            <li><strong>Coordinate system:</strong> 1D axis <code>x</code>.</li>
            <li><strong>Lattice sites:</strong> <code>x_j = jR</code> for integers <code>j</code> (or <code>j=0,1,...,2N-1</code> with periodic boundaries).</li>
            <li><strong>Charges:</strong> <code>q_j = q(-1)^j</code>.</li>
            <li><strong>Interaction kernel:</strong> Coulomb in 3D evaluated along a line:
              <code>V_ij = q_i q_j / |x_i - x_j|</code> (CGS).
            </li>
            <li><strong>Boundary condition / limit:</strong> periodic chain or large-<code>N</code> limit to ignore edge effects; the lattice sum converges conditionally but is well-defined for the alternating chain.</li>
            <li><strong>Statics:</strong> no time dependence; no PDEs needed here. (If extended to vibrations, you’d linearize forces and obtain an eigenvalue problem for normal modes.)</li>
          </ul>
        </div>

        <h3>Possible approaches (compare 2–3)</h3>
        <ol>
          <li><strong>Direct lattice sum + minimization (best here):</strong>
            compute the Madelung series explicitly (<code>ln2</code>), add repulsion, minimize <code>U(R)</code>, then Taylor expand.
            <em>Pros:</em> exact, transparent. <em>Cons:</em> requires careful counting and series identity.
          </li>
          <li><strong>Use known Madelung constant:</strong> quote that 1D alternating chain has Madelung constant <code>2 ln2</code>.
            <em>Pros:</em> fastest. <em>Cons:</em> less pedagogical; risk of missing the 1/2 factor.
          </li>
          <li><strong>Fourier/Green’s function viewpoint:</strong> represent the alternating charge density and solve Poisson’s equation in 1D with distributions.
            <em>Pros:</em> connects to operator methods (∇²). <em>Cons:</em> overkill; subtle in 1D electrostatics and boundary conditions.
          </li>
        </ol>
        <p class="mini"><strong>Chosen approach:</strong> direct lattice sum + minimization + Taylor expansion, because it cleanly produces both <code>ln2</code> and the stiffness coefficient.</p>

        <a class="backTop" href="#top">↑ Back to top</a>
      </div>
    </section>

    <!-- PART 2 -->
    <section id="p2" class="card">
      <div class="head"><h2>PART 2 — Strategy & Tips (Roadmap Only)</h2></div>
      <div class="content">
        <ol>
          <li><strong>Model the lattice</strong>: set <code>x_j=jR</code>, <code>q_j=q(-1)^j</code>. (Defines geometry & variables.)</li>
          <li><strong>Compute Coulomb energy per ion</strong> using superposition and symmetry (same for every ion).</li>
          <li><strong>Evaluate the series</strong> <code>Σ_{m≥1} (-1)^m/m</code> via a known logarithm identity → <code>-ln2</code>. (Mathematical physics step.)</li>
          <li><strong>Convert to total Coulomb energy</strong> by multiplying by <code>2N</code> and dividing by 2 to avoid double counting.</li>
          <li><strong>Add repulsive energy</strong>: nearest-neighbor pairs = <code>2N</code> → <code>U_rep=2N A/R^n</code>.</li>
          <li><strong>Find equilibrium</strong>: solve <code>dU/dR=0</code> for <code>A</code> in terms of <code>R0</code>.</li>
          <li><strong>Plug back</strong> to get <code>U(R0)</code> (part a).</li>
          <li><strong>Small compression</strong>: set <code>R=R0(1-δ)</code>, expand <code>U(R)</code> or energy-per-ion <code>u(R)=U/(2N)</code> to second order using Taylor’s theorem (since <code>U'(R0)=0</code>).</li>
          <li><strong>Identify stiffness</strong> coefficient as the quadratic prefactor to match <code>(1/2)Cδ^2</code> (part b).</li>
          <li><strong>Sanity checks</strong>: sign (<code>C&gt;0</code>), limits (<code>n→∞</code>), and units (CGS vs SI).</li>
        </ol>

        <div class="callout">
          <h3><span class="badge">Common mistakes</span></h3>
          <ul class="mini">
            <li>Forgetting the <code>1/2</code> when converting “energy of one ion in the potential of all others” to total pair energy.</li>
            <li>Using <code>U(R0)</code> alone to get elasticity: you need <code>U''(R0)</code> (curvature near the minimum).</li>
            <li>Mixing “per ion”, “per pair”, and “per macroscopic length” without stating the normalization.</li>
            <li>Dropping the alternating sign in the series (the <code>ln2</code> depends on it).</li>
          </ul>
        </div>

        <a class="backTop" href="#top">↑ Back to top</a>
      </div>
    </section>

    <!-- PART 3 -->
    <section id="p3" class="card">
      <div class="head"><h2>PART 3 — Full Solution (Detailed + Teaching)</h2></div>
      <div class="content">
        <h3 style="margin-top:0">Qualitative expectation (before calculating)</h3>
        <ul class="mini">
          <li>As <code>R → ∞</code>, both Coulomb and repulsion → 0, so <code>U(R) → 0</code>.</li>
          <li>As <code>R → 0</code>, the repulsion <code>A/R^n</code> dominates (since <code>n&gt;1</code>) → <code>U(R) → +∞</code>.</li>
          <li>Therefore <code>U(R)</code> should have at least one minimum at some finite <code>R0</code>.</li>
          <li>Near a stable minimum, small compression should cost energy ∝ <code>δ^2</code> (Hooke-like behavior).</li>
        </ul>

        <div class="callout">
          <h3><span class="badge">Assumptions</span></h3>
          <ul class="mini">
            <li>Large <code>N</code> (or periodic boundaries) so every site is equivalent and edge effects are neglected.</li>
            <li>Coulomb interaction is the CGS/Gaussian pair potential <code>q_i q_j / r</code>.</li>
            <li>Short-range repulsion acts only between nearest neighbors and is <code>A/R^n</code>.</li>
            <li>Quasi-static compression: external work equals change in potential energy.</li>
          </ul>
        </div>

        <h3>(A) Total energy and equilibrium value <code>U(R0)</code></h3>

        <h4>Step A1 — Compute Coulomb energy per ion (mathematical physics: lattice series)</h4>
        <p class="mini">
          Place ions at <code>x_j = jR</code>, with charges <code>q_j = q(-1)^j</code>.
          Consider the ion at <code>j=0</code>, with charge <code>q_0 = +q</code>.
          Ions at <code>±m</code> are a distance <code>mR</code> away and have charge <code>q_m = q(-1)^m</code>.
        </p>
        <p class="mini">
          The electrostatic potential at <code>x_0</code> due to the ion at <code>+m</code> is <code>φ_m = q(-1)^m/(mR)</code>;
          the one at <code>-m</code> contributes the same. By linearity (superposition),
        </p>

        <div class="eq" data-copy="eq-coulomb-per-ion">
          <div class="row">
            <pre><code id="eq-coulomb-per-ion">φ(0) = Σ_{m=1}^{∞} [ q(-1)^m/(mR) + q(-1)^m/(mR) ]
     = (2q/R) Σ_{m=1}^{∞} (-1)^m/m.</code></pre>
            <button class="copyBtn" data-copy-btn="eq-coulomb-per-ion">Copy equation</button>
          </div>
        </div>

        <p class="mini">
          The energy of the ion at the origin in this potential is <code>u_C = q φ(0)</code>:
        </p>

        <div class="eq" data-copy="eq-uC-per-ion">
          <div class="row">
            <pre><code id="eq-uC-per-ion">u_C(R) = q φ(0) = (2q^2/R) Σ_{m=1}^{∞} (-1)^m/m.</code></pre>
            <button class="copyBtn" data-copy-btn="eq-uC-per-ion">Copy equation</button>
          </div>
        </div>

        <h4>Step A2 — Evaluate the alternating harmonic series (no magic jumps)</h4>
        <p class="mini">
          Use the power-series definition of the logarithm (valid for <code>|x|≤1</code>, <code>x≠-1</code>, and by analytic continuation at <code>x=-1</code>):
        </p>

        <div class="eq" data-copy="eq-log-series">
          <div class="row">
            <pre><code id="eq-log-series">ln(1+x) = Σ_{m=1}^{∞} (-1)^{m+1} x^m/m.</code></pre>
            <button class="copyBtn" data-copy-btn="eq-log-series">Copy equation</button>
          </div>
        </div>

        <p class="mini">
          Set <code>x=1</code>:
          <code>ln 2 = Σ_{m=1}^{∞} (-1)^{m+1}/m</code>.
          Multiply by <code>-1</code> gives the identity we need:
        </p>

        <div class="eq" data-copy="eq-alt-harmonic">
          <div class="row">
            <pre><code id="eq-alt-harmonic">Σ_{m=1}^{∞} (-1)^m/m = - ln 2.</code></pre>
            <button class="copyBtn" data-copy-btn="eq-alt-harmonic">Copy equation</button>
          </div>
        </div>

        <p class="mini">
          Substitute into <code>u_C</code>:
        </p>
        <div class="eq" data-copy="eq-uC-eval">
          <div class="row">
            <pre><code id="eq-uC-eval">u_C(R) = (2q^2/R)(-ln 2) = - (2 q^2 ln 2)/R.</code></pre>
            <button class="copyBtn" data-copy-btn="eq-uC-eval">Copy equation</button>
          </div>
        </div>

        <p class="mini">
          This <code>u_C(R)</code> is the Coulomb energy of one ion interacting with all others <em>counting each pair twice</em> if we sum over ions.
          Therefore, total Coulomb energy for <code>2N</code> ions is
          <code>U_C = (1/2)(2N) u_C</code>.
        </p>

        <div class="eq" data-copy="eq-UC-total">
          <div class="row">
            <pre><code id="eq-UC-total">U_C(R) = (1/2)(2N) u_C(R)
       = N [ - (2 q^2 ln 2)/R ]
       = - (2N q^2 ln 2)/R.</code></pre>
            <button class="copyBtn" data-copy-btn="eq-UC-total">Copy equation</button>
          </div>
        </div>

        <h4>Step A3 — Add nearest-neighbor repulsion</h4>
        <p class="mini">
          In a periodic chain of <code>2N</code> ions, each ion has two nearest-neighbor bonds but each bond is shared by two ions,
          so the number of distinct nearest-neighbor pairs is <code>2N</code>.
          Each such pair contributes <code>A/R^n</code>, hence:
        </p>

        <div class="eq" data-copy="eq-Urep">
          <div class="row">
            <pre><code id="eq-Urep">U_rep(R) = (2N) A/R^n.</code></pre>
            <button class="copyBtn" data-copy-btn="eq-Urep">Copy equation</button>
          </div>
        </div>

        <p class="mini">Therefore the total energy is:</p>
        <div class="eq" data-copy="eq-U-total">
          <div class="row">
            <pre><code id="eq-U-total">U(R) = U_C(R) + U_rep(R)
     = - (2N q^2 ln 2)/R + (2N) A/R^n.</code></pre>
            <button class="copyBtn" data-copy-btn="eq-U-total">Copy equation</button>
          </div>
        </div>

        <h4>Step A4 — Equilibrium spacing via minimization</h4>
        <p class="mini">
          Equilibrium is a stationary point: <code>dU/dR = 0</code>. Differentiate explicitly (valid because for <code>R&gt;0</code> the function is smooth):
        </p>

        <div class="eq" data-copy="eq-dU">
          <div class="row">
            <pre><code id="eq-dU">dU/dR = 2N [ (q^2 ln 2) R^{-2} - n A R^{-(n+1)} ].</code></pre>
            <button class="copyBtn" data-copy-btn="eq-dU">Copy equation</button>
          </div>
        </div>

        <p class="mini">
          Set <code>R=R0</code> and solve <code>dU/dR=0</code>:
        </p>

        <div class="eq" data-copy="eq-A-from-eq">
          <div class="row">
            <pre><code id="eq-A-from-eq">(q^2 ln 2)/R0^2 = nA/R0^{n+1}
⇒ A = (q^2 ln 2 / n) R0^{n-1}.</code></pre>
            <button class="copyBtn" data-copy-btn="eq-A-from-eq">Copy equation</button>
          </div>
        </div>

        <p class="mini">
          Now evaluate <code>U(R0)</code> by substituting this <code>A</code> into <code>U(R)</code>:
        </p>

        <div class="eq" data-copy="eq-U0-derive">
          <div class="row">
            <pre><code id="eq-U0-derive">U(R0) = - (2N q^2 ln 2)/R0 + (2N) A/R0^n
      = - (2N q^2 ln 2)/R0 + (2N) [ (q^2 ln 2 / n) R0^{n-1} ] / R0^n
      = - (2N q^2 ln 2)/R0 + (2N q^2 ln 2)/(n R0)
      = - (2N q^2 ln 2)/R0 (1 - 1/n).</code></pre>
            <button class="copyBtn" data-copy-btn="eq-U0-derive">Copy equation</button>
          </div>
        </div>

        <div class="callout">
          <h3><span class="badge">Result (A)</span></h3>
          <p class="mini">
            <strong>(CGS/Gaussian)</strong>
            <code>U(R0) = - (2N q^2 ln 2 / R0)(1 - 1/n)</code>.
          </p>
        </div>

        <h3>(B) Small compression work: <code>R = R0(1-δ)</code> and quadratic leading term</h3>
        <p class="mini">
          The problem note says we must use the <em>complete</em> energy <code>U(R)</code> (not only <code>U(R0)</code>) because
          stiffness comes from curvature near equilibrium (<code>U''(R0)</code>), not the value at the minimum.
        </p>

        <h4>Step B1 — Choose the normalization (“unit length” / per-ion scale)</h4>
        <p class="mini">
          A clean way to match the stated coefficient is to work with <strong>energy per ion</strong>
          (equivalently, per lattice-scale unit up to a fixed factor). Define
        </p>

        <div class="eq" data-copy="eq-u-def">
          <div class="row">
            <pre><code id="eq-u-def">u(R) := U(R)/(2N) = - (q^2 ln 2)/R + A/R^n.</code></pre>
            <button class="copyBtn" data-copy-btn="eq-u-def">Copy equation</button>
          </div>
        </div>

        <p class="mini">
          For quasi-static compression, the external work equals the increase in potential energy.
          Thus the work “per ion-scale unit” is <code>W = u(R) - u(R0)</code>.
          (If you want work per macroscopic length, multiply/divide by the ion density; the quadratic-in-δ structure is unchanged.)
        </p>

        <h4>Step B2 — Taylor expand about the equilibrium point</h4>
        <p class="mini">
          Since <code>u'(R0)=0</code> at equilibrium, Taylor’s theorem gives
        </p>

        <div class="eq" data-copy="eq-taylor">
          <div class="row">
            <pre><code id="eq-taylor">u(R) = u(R0) + (1/2) u''(R0) (R - R0)^2 + O((R-R0)^3).</code></pre>
            <button class="copyBtn" data-copy-btn="eq-taylor">Copy equation</button>
          </div>
        </div>

        <p class="mini">
          With <code>R = R0(1-δ)</code>, we have <code>R - R0 = -R0 δ</code>, so
          <code>(R-R0)^2 = R0^2 δ^2</code>.
        </p>

        <h4>Step B3 — Compute <code>u''(R)</code> explicitly (intermediate steps shown)</h4>
        <p class="mini">Start from <code>u(R) = - (q^2 ln2) R^{-1} + A R^{-n}</code>.</p>

        <div class="eq" data-copy="eq-u-primes">
          <div class="row">
            <pre><code id="eq-u-primes">u'(R)  = - (q^2 ln2)(-1) R^{-2} + A(-n) R^{-(n+1)}
      = (q^2 ln2) R^{-2} - nA R^{-(n+1)}.

u''(R) = (q^2 ln2)(-2) R^{-3} - nA (-(n+1)) R^{-(n+2)}
      = -2(q^2 ln2) R^{-3} + n(n+1)A R^{-(n+2)}.</code></pre>
            <button class="copyBtn" data-copy-btn="eq-u-primes">Copy equation</button>
          </div>
        </div>

        <p class="mini">
          Now use the equilibrium relation from part (A): <code>A = (q^2 ln2 / n) R0^{n-1}</code>. Substitute into <code>u''(R0)</code>:
        </p>

        <div class="eq" data-copy="eq-u2-eval">
          <div class="row">
            <pre><code id="eq-u2-eval">u''(R0) = -2(q^2 ln2)/R0^3 + n(n+1)A/R0^{n+2}
        = -2(q^2 ln2)/R0^3 + n(n+1)[(q^2 ln2 / n) R0^{n-1}] / R0^{n+2}
        = -2(q^2 ln2)/R0^3 + (n+1)(q^2 ln2)/R0^3
        = (n-1)(q^2 ln2)/R0^3.</code></pre>
            <button class="copyBtn" data-copy-btn="eq-u2-eval">Copy equation</button>
          </div>
        </div>

        <p class="mini">
          Since <code>n&gt;1</code>, we have <code>u''(R0)&gt;0</code>, confirming stability (minimum).
        </p>

        <h4>Step B4 — Assemble the small-δ work and identify <code>C</code></h4>
        <p class="mini">
          The work per ion-scale unit is
          <code>W = u(R) - u(R0) ≈ (1/2) u''(R0) (R-R0)^2</code>.
          Substitute <code>u''(R0)</code> and <code>(R-R0)^2 = R0^2 δ^2</code>:
        </p>

        <div class="eq" data-copy="eq-W-final-derive">
          <div class="row">
            <pre><code id="eq-W-final-derive">W ≈ (1/2) [ (n-1)(q^2 ln2)/R0^3 ] [ R0^2 δ^2 ]
  = (1/2) [ (n-1)(q^2 ln2)/R0 ] δ^2.</code></pre>
            <button class="copyBtn" data-copy-btn="eq-W-final-derive">Copy equation</button>
          </div>
        </div>

        <div class="callout">
          <h3><span class="badge">Result (B)</span></h3>
          <p class="mini">
            <strong>(CGS/Gaussian)</strong> The leading work for small compression is
            <code>W ≈ (1/2) C δ^2</code> with
            <code>C = (n - 1) q^2 ln 2 / R0</code>.
          </p>
          <p class="mini">
            <strong>SI conversion:</strong> replace <code>q^2</code> by <code>q^2/(4πϵ0)</code> everywhere in the Coulomb terms (and thus in <code>C</code>).
          </p>
        </div>

        <h3>Sanity checks</h3>
        <ul class="mini">
          <li><strong>Units (CGS):</strong> <code>q^2/R0</code> has energy units ⇒ <code>C</code> has energy units, so <code>(1/2)Cδ^2</code> is energy (work). ✅</li>
          <li><strong>Sign/stability:</strong> <code>n&gt;1 ⇒ C&gt;0</code>, so compression costs positive energy. ✅</li>
          <li><strong>Limiting case:</strong> as <code>n→∞</code> (very hard repulsion), <code>U(R0)→ -(2N q^2 ln2)/R0</code> (repulsion only fixes the spacing but contributes negligibly to energy at equilibrium), while stiffness grows ~<code>n</code>. ✅</li>
          <li><strong>Why “not from U(R0) alone”:</strong> <code>U(R0)</code> contains no information about curvature; you need <code>d^2U/dR^2</code> (or <code>u''</code>) to get elasticity. ✅</li>
        </ul>

        <!-- Optional single plot -->
        <figure class="pageBreak">
          <div class="figHead">
            <div class="title">One useful plot: normalized small-strain work</div>
            <div class="note">Shows W/C = ½ δ² (dimensionless), valid for |δ| ≪ 1</div>
          </div>
          <canvas id="plot"></canvas>
        </figure>

        <a class="backTop" href="#top">↑ Back to top</a>
      </div>
    </section>

    <!-- PART 4 -->
    <section id="p4" class="card">
      <div class="head"><h2>PART 4 — Deeper Understanding (Theory Around the Result)</h2></div>
      <div class="content">
        <h3 style="margin-top:0">Interpret the final formulas</h3>
        <ul class="mini">
          <li><strong><code>ln 2</code>:</strong> a purely geometric/number-theoretic signature of the 1D alternating lattice sum (the 1D Madelung constant is <code>2 ln2</code> in this convention).</li>
          <li><strong><code>(1 - 1/n)</code> in <code>U(R0)</code>:</strong> the repulsive term contributes a fraction <code>1/n</code> that partially cancels the Coulomb attraction at equilibrium when expressed in terms of <code>R0</code>.</li>
          <li><strong><code>C ∝ (n-1)</code>:</strong> steeper repulsion (larger <code>n</code>) makes the minimum sharper → larger stiffness.</li>
          <li><strong><code>C ∝ q^2</code>:</strong> stronger ionic charges deepen the potential well and increase stiffness.</li>
          <li><strong><code>C ∝ 1/R0</code>:</strong> tighter equilibrium spacing increases the energy cost of a fractional compression.</li>
        </ul>

        <div class="callout">
          <h3><span class="badge">Math Insight</span> Curvature controls elasticity</h3>
          <p class="mini">
            Mathematically, the small-strain law is a second-order asymptotic:
            <code>W(δ) = (1/2)Cδ^2 + O(δ^3)</code>.
            The coefficient <code>C</code> is (up to the mapping between δ and R) the curvature of the energy landscape:
            <code>C = u''(R0) R0^2</code>.
            This is the 1D analogue of using the Hessian of a potential energy in multivariate stability and in continuum elasticity.
          </p>
        </div>

        <h3>Alternative derivation idea (brief but meaningful)</h3>
        <p class="mini">
          Instead of Taylor expanding energy, you can compute the force between neighbors from <code>F(R) = -d u/dR</code>
          and expand <code>F(R0(1-δ))</code> for small δ to get a linear force–strain relation (Hooke law),
          then integrate force over displacement to recover the quadratic work. This is the “force-first” route, consistent with energy methods
          because the interaction is conservative.
        </p>

        <h3>Concept check (self-test with answers)</h3>
        <ul class="mini">
          <li><strong>Q:</strong> Why does the Coulomb sum converge here though Coulomb is long-range? <strong>A:</strong> Alternating signs produce strong cancellations; the relevant series becomes the alternating harmonic series, which converges to <code>ln2</code>.</li>
          <li><strong>Q:</strong> What mathematical fact guarantees the leading energy change is quadratic in δ? <strong>A:</strong> Taylor’s theorem about a smooth function at a stationary point: <code>u'(R0)=0</code> ⇒ leading term is <code>(1/2)u''(R0)(R-R0)^2</code>.</li>
          <li><strong>Q:</strong> What happens if <code>n ≤ 1</code>? <strong>A:</strong> The repulsion is too “soft”; stability can fail because curvature may not be positive (and the model becomes unphysical for ionic cores).</li>
          <li><strong>Q:</strong> Why can’t you get <code>C</code> from <code>U(R0)</code> alone? <strong>A:</strong> Because stiffness depends on derivatives near <code>R0</code>, not the value at a single point—many different functions share the same value but different curvatures.</li>
        </ul>

        <a class="backTop" href="#top">↑ Back to top</a>
      </div>
    </section>

    <!-- PART 5 -->
    <section id="p5" class="card">
      <div class="head"><h2>PART 5 — Optional Plot Guide</h2></div>
      <div class="content">
        <p class="mini">
          The plot shows the <strong>normalized</strong> small-strain work:
          <code>W/C = 1/2 δ^2</code>. This avoids choosing numerical values for <code>q</code>, <code>R0</code>, and <code>n</code>.
        </p>
        <ul class="mini">
          <li><strong>x-axis:</strong> compressive strain <code>δ</code> (dimensionless).</li>
          <li><strong>y-axis:</strong> <code>W/C</code> (dimensionless), so the curve is universal: <code>½ δ²</code>.</li>
          <li><strong>What to notice:</strong> near <code>δ=0</code>, slope is zero (minimum), curvature is constant (=1), highlighting the quadratic nature of elastic energy.</li>
          <li><strong>Validity:</strong> only for <code>|δ| ≪ 1</code>; higher-order terms <code>O(δ^3)</code> are neglected.</li>
        </ul>

        <a class="backTop" href="#top">↑ Back to top</a>
      </div>
    </section>

    <!-- Final Answer -->
    <section id="final" class="card">
      <div class="head"><h2>Final Answer (copy plain text)</h2></div>
      <div class="content">

        <div class="eq" data-copy="final-answer">
          <div class="row">
<pre><code id="final-answer">Model (CGS/Gaussian):
- 2N ions on a 1D lattice x_j = jR with alternating charges q_j = q(-1)^j.
- Coulomb pair energy: V_ij = q_i q_j / |x_i - x_j|.
- Nearest-neighbor repulsion: A/R^n per nearest-neighbor pair.

Coulomb lattice sum:
For one ion, u_C(R) = (2q^2/R) Σ_{m=1}^∞ (-1)^m/m = - (2 q^2 ln2)/R.
Total Coulomb energy (avoid double counting):
U_C(R) = (1/2)(2N)u_C(R) = - (2N q^2 ln2)/R.

Repulsive energy (2N nearest-neighbor pairs):
U_rep(R) = (2N)A/R^n.

Total:
U(R) = - (2N q^2 ln2)/R + (2N)A/R^n.

(a) Equilibrium:
dU/dR = 2N[(q^2 ln2)/R^2 - nA/R^(n+1)] = 0 at R=R0
⇒ A = (q^2 ln2/n) R0^(n-1).
Then
U(R0) = - (2N q^2 ln2)/R0 + (2N)A/R0^n
      = - (2N q^2 ln2)/R0 (1 - 1/n).

(b) Small compression R = R0(1-δ), |δ|≪1:
Use energy per ion u(R)=U(R)/(2N)=-(q^2 ln2)/R + A/R^n.
Since u'(R0)=0, Taylor:
W = u(R)-u(R0) ≈ (1/2)u''(R0)(R-R0)^2.
Compute u''(R) = -2(q^2 ln2)/R^3 + n(n+1)A/R^(n+2).
With A=(q^2 ln2/n)R0^(n-1):
u''(R0) = (n-1)(q^2 ln2)/R0^3.
Also (R-R0)^2 = (R0δ)^2.
Therefore
W ≈ (1/2)[(n-1)(q^2 ln2)/R0^3](R0^2 δ^2)
  = (1/2)C δ^2,
C = (n-1) q^2 ln2 / R0.

SI conversion: replace q^2 → q^2/(4πϵ0) in the Coulomb terms (and thus in C and U(R0)).</code></pre>
            <button class="copyBtn" data-copy-btn="final-answer">Copy final answer</button>
          </div>
        </div>

        <a class="backTop" href="#top">↑ Back to top</a>
      </div>
    </section>

  </main>
</div>

<footer>
  <p>
    Notes: This is a 1D teaching model. Real crystals are 3D and require Ewald-type summations and more realistic short-range potentials,
    but the mathematical structure—minimize energy, then use curvature for small-strain elasticity—generalizes directly.
  </p>
</footer>

<script>
  // ---------------------------
  // Copy buttons (plain text)
  // ---------------------------
  function copyTextFromId(id, btn){
    const el = document.getElementById(id);
    if(!el) return;
    const txt = el.innerText;
    navigator.clipboard.writeText(txt).then(()=>{
      btn.classList.remove('bad');
      btn.classList.add('ok');
      const old = btn.textContent;
      btn.textContent = 'Copied!';
      setTimeout(()=>{ btn.textContent = old; btn.classList.remove('ok'); }, 900);
    }).catch(()=>{
      btn.classList.add('bad');
      const old = btn.textContent;
      btn.textContent = 'Copy failed';
      setTimeout(()=>{ btn.textContent = old; btn.classList.remove('bad'); }, 1100);
    });
  }

  document.querySelectorAll('[data-copy-btn]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const id = btn.getAttribute('data-copy-btn');
      copyTextFromId(id, btn);
    });
  });

  // ---------------------------
  // TOC active section highlight
  // ---------------------------
  const tocLinks = Array.from(document.querySelectorAll('#tocList a'));
  const sectionIds = tocLinks.map(a => a.getAttribute('href')).filter(Boolean).map(h => h.slice(1));
  const sections = sectionIds.map(id => document.getElementById(id)).filter(Boolean);

  const io = new IntersectionObserver((entries)=>{
    // pick the most visible entry
    const visible = entries.filter(e => e.isIntersecting).sort((a,b)=> b.intersectionRatio - a.intersectionRatio)[0];
    if(!visible) return;
    const id = visible.target.id;
    tocLinks.forEach(a=>{
      a.classList.toggle('active', a.getAttribute('href') === '#'+id);
    });
  }, { rootMargin: "-20% 0px -65% 0px", threshold: [0.05, 0.1, 0.2, 0.35, 0.5] });

  sections.forEach(sec => io.observe(sec));

  // ---------------------------
  // Single static plot (canvas): W/C = 1/2 δ^2
  // ---------------------------
  const canvas = document.getElementById('plot');
  const ctx = canvas.getContext('2d');

  function drawPlot(){
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = Math.max(1, Math.floor(rect.width * dpr));
    canvas.height = Math.max(1, Math.floor(rect.height * dpr));
    ctx.setTransform(dpr,0,0,dpr,0,0);

    const W = rect.width;
    const H = rect.height;

    // Plot area
    const padL = 56, padR = 18, padT = 34, padB = 46;
    const x0 = padL, y0 = H - padB;
    const x1 = W - padR, y1 = padT;

    // Background
    ctx.clearRect(0,0,W,H);
    ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--panel').trim() || '#111';
    ctx.fillRect(0,0,W,H);

    // Axes ranges (dimensionless)
    const xmin = 0.0, xmax = 0.30;
    const ymin = 0.0, ymax = 0.5 * xmax * xmax; // maximum of 1/2 δ^2 at δ=xmax
    // Add headroom
    const ymax2 = ymax * 1.15;

    const xToPx = x => x0 + (x - xmin) * (x1 - x0) / (xmax - xmin);
    const yToPx = y => y0 - (y - ymin) * (y0 - y1) / (ymax2 - ymin);

    // Grid
    ctx.lineWidth = 1;
    ctx.strokeStyle = 'rgba(255,255,255,0.10)';
    const xTicks = 6;
    const yTicks = 5;

    for(let i=0;i<=xTicks;i++){
      const x = xmin + (xmax-xmin)*i/xTicks;
      const px = xToPx(x);
      ctx.beginPath();
      ctx.moveTo(px, y0);
      ctx.lineTo(px, y1);
      ctx.stroke();
    }
    for(let j=0;j<=yTicks;j++){
      const y = ymin + (ymax2-ymin)*j/yTicks;
      const py = yToPx(y);
      ctx.beginPath();
      ctx.moveTo(x0, py);
      ctx.lineTo(x1, py);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = 'rgba(255,255,255,0.35)';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(x0, y0);
    ctx.lineTo(x1, y0);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(x0, y0);
    ctx.lineTo(x0, y1);
    ctx.stroke();

    // Title
    ctx.fillStyle = 'rgba(255,255,255,0.92)';
    ctx.font = '600 14px system-ui, -apple-system, Segoe UI, Roboto, Arial';
    ctx.fillText('Normalized small-strain work:  W/C = 1/2 · δ²', x0, 20);

    // Labels
    ctx.fillStyle = 'rgba(255,255,255,0.85)';
    ctx.font = '12px system-ui, -apple-system, Segoe UI, Roboto, Arial';
    ctx.fillText('δ (dimensionless strain)', Math.max(x0, (x0+x1)/2 - 70), H - 14);

    // y label (rotated)
    ctx.save();
    ctx.translate(16, (y0+y1)/2 + 40);
    ctx.rotate(-Math.PI/2);
    ctx.fillText('W/C (dimensionless)', 0, 0);
    ctx.restore();

    // Tick labels
    ctx.fillStyle = 'rgba(255,255,255,0.70)';
    ctx.font = '11px system-ui, -apple-system, Segoe UI, Roboto, Arial';

    for(let i=0;i<=xTicks;i++){
      const x = xmin + (xmax-xmin)*i/xTicks;
      const px = xToPx(x);
      ctx.beginPath();
      ctx.moveTo(px, y0);
      ctx.lineTo(px, y0+5);
      ctx.strokeStyle = 'rgba(255,255,255,0.35)';
      ctx.stroke();
      ctx.fillText(x.toFixed(2), px-12, y0+18);
    }

    for(let j=0;j<=yTicks;j++){
      const y = ymin + (ymax2-ymin)*j/yTicks;
      const py = yToPx(y);
      ctx.beginPath();
      ctx.moveTo(x0-5, py);
      ctx.lineTo(x0, py);
      ctx.strokeStyle = 'rgba(255,255,255,0.35)';
      ctx.stroke();
      ctx.fillText(y.toFixed(3), 6, py+4);
    }

    // Curve: y = 1/2 x^2
    ctx.strokeStyle = 'rgba(125,255,204,0.95)';
    ctx.lineWidth = 2.2;
    ctx.beginPath();
    const nPts = 200;
    for(let k=0;k<=nPts;k++){
      const x = xmin + (xmax-xmin)*k/nPts;
      const y = 0.5*x*x;
      const px = xToPx(x);
      const py = yToPx(y);
      if(k===0) ctx.moveTo(px, py);
      else ctx.lineTo(px, py);
    }
    ctx.stroke();

    // Legend
    const lx = x1 - 150, ly = y1 + 10;
    ctx.fillStyle = 'rgba(255,255,255,0.80)';
    ctx.fillText('Curve: ½ δ²', lx+24, ly+10);
    ctx.strokeStyle = 'rgba(125,255,204,0.95)';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(lx, ly+7);
    ctx.lineTo(lx+18, ly+7);
    ctx.stroke();

    // Border
    ctx.strokeStyle = 'rgba(255,255,255,0.14)';
    ctx.lineWidth = 1;
    ctx.strokeRect(0.5,0.5,W-1,H-1);
  }

  let raf = null;
  function scheduleDraw(){
    if(raf) cancelAnimationFrame(raf);
    raf = requestAnimationFrame(drawPlot);
  }

  window.addEventListener('resize', scheduleDraw, {passive:true});
  scheduleDraw();
</script>
</body>
</html>
