<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#0b0f14" />
  <title>Determinantal Approach to Elastic Waves in a Cubic Crystal ([111] Direction)</title>
  <style>
    :root{
      --bg:#0b0f14;
      --panel:#101826;
      --panel2:#0f1722;
      --text:#e9eef6;
      --muted:#b9c3d4;
      --faint:#7f8aa3;
      --brand:#7dd3fc;
      --ok:#86efac;
      --warn:#fbbf24;
      --bad:#fb7185;
      --line:rgba(255,255,255,.10);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family:var(--sans);
      background: radial-gradient(1200px 600px at 20% -10%, rgba(125,211,252,.16), transparent 50%),
                  radial-gradient(900px 500px at 90% 10%, rgba(134,239,172,.10), transparent 55%),
                  linear-gradient(180deg, #070a0f, var(--bg) 18%);
      color:var(--text);
      line-height:1.55;
    }

    a{color:var(--brand); text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{
      max-width:1180px;
      margin:0 auto;
      padding:28px 18px 80px;
      display:grid;
      grid-template-columns: 290px 1fr;
      gap:18px;
      align-items:start;
    }

    header.hero{
      grid-column:1 / -1;
      background: linear-gradient(180deg, rgba(125,211,252,.11), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:calc(var(--radius) + 6px);
      box-shadow: var(--shadow);
      padding:22px 22px 18px;
      position:relative;
      overflow:hidden;
    }
    header.hero::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(700px 200px at 20% 0%, rgba(125,211,252,.25), transparent 60%),
                  radial-gradient(600px 240px at 80% 10%, rgba(134,239,172,.16), transparent 65%);
      opacity:.9;
      pointer-events:none;
      filter: blur(0.2px);
    }
    header.hero > *{position:relative}
    .kicker{
      font-size:12px;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:var(--muted);
      margin:0 0 8px;
    }
    h1{
      margin:0 0 8px;
      font-size: clamp(22px, 3.0vw, 34px);
      line-height:1.15;
    }
    .sub{
      margin:0;
      color:var(--muted);
      max-width: 80ch;
    }
    .meta{
      margin-top:14px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
    }
    .pill{
      border:1px solid var(--line);
      background: rgba(16,24,38,.55);
      padding:6px 10px;
      border-radius:999px;
      color:var(--muted);
      font-size:12px;
      backdrop-filter: blur(6px);
    }

    /* TOC */
    nav.toc{
      position:sticky;
      top:14px;
      background: linear-gradient(180deg, rgba(16,24,38,.85), rgba(16,24,38,.60));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:14px 12px;
      backdrop-filter: blur(8px);
    }
    .toc h2{
      margin:0 0 8px;
      font-size:13px;
      letter-spacing:.06em;
      text-transform:uppercase;
      color:var(--muted);
    }
    .toc a{
      display:block;
      padding:8px 10px;
      border-radius:12px;
      color:var(--text);
      font-size:13px;
      border:1px solid transparent;
      transition: transform .18s ease, background .18s ease, border-color .18s ease;
    }
    .toc a:hover{
      background: rgba(125,211,252,.08);
      border-color: rgba(125,211,252,.22);
      transform: translateY(-1px);
      text-decoration:none;
    }
    .toc a small{color:var(--faint)}
    .toc .mini{
      margin-top:10px;
      padding-top:10px;
      border-top:1px solid var(--line);
      color:var(--muted);
      font-size:12px;
    }

    main{
      background: linear-gradient(180deg, rgba(16,24,38,.70), rgba(16,24,38,.40));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:18px;
      overflow:hidden;
    }

    section{
      padding:14px 6px 2px;
    }
    section + section{
      border-top: 1px solid var(--line);
      margin-top:8px;
    }
    h2.sec{
      margin:0 0 10px;
      font-size:18px;
      display:flex;
      gap:10px;
      align-items:baseline;
    }
    h2.sec span.tag{
      font-size:12px;
      color:var(--muted);
      border:1px solid var(--line);
      padding:4px 8px;
      border-radius:999px;
      background: rgba(255,255,255,.03);
    }
    h3{
      margin:14px 0 8px;
      font-size:15.5px;
      color:var(--text);
    }
    p{margin:8px 0; color:var(--text)}
    ul, ol{margin:8px 0 10px 22px; color:var(--text)}
    li{margin:6px 0}
    .muted{color:var(--muted)}
    .faint{color:var(--faint)}
    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin:10px 0;
    }
    @media (max-width: 980px){
      .wrap{grid-template-columns: 1fr}
      nav.toc{position:relative; top:auto}
      .grid2{grid-template-columns: 1fr}
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius: var(--radius);
      padding:12px 12px;
      box-shadow: 0 8px 22px rgba(0,0,0,.22);
    }
    .callout{
      border-left: 4px solid rgba(125,211,252,.75);
      padding:12px 12px;
      background: rgba(125,211,252,.07);
      border-radius: 14px;
      border:1px solid rgba(125,211,252,.20);
      margin:10px 0;
    }
    .callout.ok{
      border-left-color: rgba(134,239,172,.85);
      background: rgba(134,239,172,.07);
      border-color: rgba(134,239,172,.20);
    }
    .callout.warn{
      border-left-color: rgba(251,191,36,.90);
      background: rgba(251,191,36,.08);
      border-color: rgba(251,191,36,.22);
    }
    .callout.bad{
      border-left-color: rgba(251,113,133,.90);
      background: rgba(251,113,133,.07);
      border-color: rgba(251,113,133,.22);
    }

    pre.eq{
      margin:10px 0;
      padding:12px 12px;
      border-radius: 14px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.25);
      overflow:auto;
      font-family: var(--mono);
      font-size: 13px;
      line-height: 1.45;
      position:relative;
    }
    .eqbar{
      display:flex;
      gap:8px;
      justify-content:flex-end;
      align-items:center;
      margin-top:-6px;
      margin-bottom:8px;
    }
    button.copy{
      appearance:none;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      color:var(--text);
      padding:7px 10px;
      border-radius: 12px;
      font-size:12px;
      cursor:pointer;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
    }
    button.copy:hover{
      transform: translateY(-1px);
      border-color: rgba(125,211,252,.35);
      background: rgba(125,211,252,.08);
    }
    button.copy:active{transform: translateY(0px) scale(.99)}
    .toast{
      position: fixed;
      right: 14px;
      bottom: 14px;
      background: rgba(16,24,38,.92);
      border:1px solid var(--line);
      color: var(--text);
      padding:10px 12px;
      border-radius: 14px;
      box-shadow: var(--shadow);
      font-size:12px;
      opacity:0;
      transform: translateY(8px);
      transition: opacity .18s ease, transform .18s ease;
      pointer-events:none;
      backdrop-filter: blur(8px);
      z-index: 999;
    }
    .toast.show{opacity:1; transform: translateY(0px)}

    details{
      border:1px solid var(--line);
      border-radius: var(--radius);
      padding:10px 12px;
      background: rgba(255,255,255,.02);
      margin:10px 0;
    }
    summary{
      cursor:pointer;
      color:var(--text);
      font-weight:600;
    }
    details > div{margin-top:8px; color:var(--muted)}

    .final{
      border:1px solid rgba(134,239,172,.28);
      background: linear-gradient(180deg, rgba(134,239,172,.12), rgba(16,24,38,.35));
      border-radius: calc(var(--radius) + 6px);
      padding:14px 14px;
      margin:12px 0;
      position:relative;
      overflow:hidden;
    }
    .final::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(700px 220px at 25% 0%, rgba(134,239,172,.20), transparent 60%);
      pointer-events:none;
    }
    .final > *{position:relative}

    .backtop{
      display:inline-flex;
      align-items:center;
      gap:8px;
      margin:14px 0 0;
      padding:8px 12px;
      border:1px solid var(--line);
      border-radius: 999px;
      background: rgba(255,255,255,.03);
      color: var(--muted);
      font-size:12px;
    }
    .backtop:hover{
      text-decoration:none;
      border-color: rgba(125,211,252,.35);
      color: var(--text);
    }

    /* Print */
    @media print{
      body{background:#fff; color:#000}
      .wrap{max-width:none; grid-template-columns: 1fr}
      nav.toc, .toast, button.copy{display:none !important}
      header.hero, main, .card, .callout, details, pre.eq, .final{
        box-shadow:none !important;
        background:#fff !important;
        color:#000 !important;
        border:1px solid #bbb !important;
      }
      a{color:#000; text-decoration:underline}
      section{break-inside: avoid}
      .pagebreak{break-before: page}
      pre.eq{white-space: pre-wrap}
    }
  </style>
</head>

<body>
  <a id="top"></a>
  <div class="wrap">
    <header class="hero" role="banner">
      <p class="kicker">Elastic waves • determinantal method • cubic crystals • mathematical physics</p>
      <h1>Determinantal Approach: Eigenvalues of a “constant-off-diagonal” matrix and elastic-wave modes along <span style="white-space:nowrap">[111]</span></h1>
      <p class="sub">
        We prove a general eigenvalue fact for a special matrix, then apply it to the Christoffel (dynamic stiffness) matrix for a plane elastic wave
        propagating in the <span style="white-space:nowrap">[111]</span> direction of a cubic crystal to obtain the three roots of <span style="white-space:nowrap">ω²(K)</span>.
      </p>
      <div class="meta" aria-label="Topic metadata">
        <span class="pill">Result: symbolic dispersion relations</span>
        <span class="pill">Two transverse modes (degenerate) + one longitudinal</span>
        <span class="pill">Industrial lens: ultrasonic NDT, SAW/BAW, MEMS resonators</span>
      </div>
    </header>

    <nav class="toc" aria-label="Table of contents">
      <h2>Contents</h2>
      <a href="#qs">Quick Summary <small>• what & result</small></a>
      <a href="#p0">PART 0 — Concept Primer <small>• theory</small></a>
      <a href="#p0b">PART 0B — Industry Perspective <small>• applications</small></a>
      <a href="#p1">PART 1 — Problem Analysis <small>• setup</small></a>
      <a href="#p2">PART 2 — Strategy & Tips <small>• roadmap</small></a>
      <a href="#p3">PART 3 — Full Solution <small>• derivation</small></a>
      <a href="#p4">PART 4 — Deeper Understanding <small>• interpret</small></a>
      <a href="#p5">PART 5 — Plot Note <small>• why none</small></a>
      <div class="mini">
        <div class="muted"><strong>Copy tools:</strong> use buttons beside equation blocks and the final-answer box.</div>
      </div>
    </nav>

    <main role="main">
      <!-- Quick Summary -->
      <section id="qs" aria-labelledby="qs-title">
        <h2 class="sec" id="qs-title">Quick Summary <span class="tag">high-level</span></h2>
        <ul>
          <li><strong>What the problem is about:</strong> Find eigenvalues (roots) of a special matrix, then use them to solve an elastic-wave determinantal equation for a cubic crystal along <span style="white-space:nowrap">[111]</span>.</li>
          <li><strong>Key physics idea:</strong> Plane elastic waves satisfy an <em>eigenvalue problem</em> (Christoffel equation) where eigenvalues give <span style="white-space:nowrap">ρ ω²</span> (or wave speeds).</li>
          <li><strong>Governing PDE:</strong> <span class="muted">ρ ∂²uᵢ/∂t² = ∂ⱼ( Cᵢⱼₖₗ ∂ₗ uₖ )</span> (linear elastodynamics; constant coefficients ⇒ simplifies).</li>
          <li><strong>Mathematical structure:</strong> A symmetric 3×3 matrix with identical diagonal entries and identical off-diagonal entries → rank-one perturbation → one distinct eigenvalue + a degenerate pair.</li>
          <li><strong>Part (a) result (R×R matrix):</strong> eigenvalues are <span class="muted">λ₁ = q + (R−1)p</span> and <span class="muted">λ₂ = q − p</span> with multiplicity <span class="muted">(R−1)</span>.</li>
          <li><strong>Part (b) result type:</strong> three symbolic roots <span class="muted">ω²(K)</span> (dispersion is linear: <span class="muted">ω ∝ K</span> in the long-wavelength elastic continuum).</li>
          <li><strong>For [111] cubic propagation:</strong> one longitudinal mode and two degenerate transverse modes.</li>
          <li><strong>Final physical meaning:</strong> stiffness constants <span class="muted">C₁₁, C₁₂, C₄₄</span> control phase velocities via <span class="muted">v = ω/K</span>; density <span class="muted">ρ</span> slows waves.</li>
        </ul>
      </section>

      <!-- PART 0 -->
      <section id="p0" aria-labelledby="p0-title">
        <h2 class="sec" id="p0-title">PART 0 — Concept Primer <span class="tag">theory before solving</span></h2>

        <div class="grid2">
          <div class="card">
            <h3>Core definitions (symbols + SI units)</h3>
            <ul>
              <li><strong>u(x,t)</strong>: displacement field (vector), units <span class="muted">m</span>.</li>
              <li><strong>ρ</strong>: mass density, units <span class="muted">kg·m⁻³</span>.</li>
              <li><strong>Cᵢⱼₖₗ</strong>: stiffness tensor, units <span class="muted">Pa = N·m⁻²</span>.</li>
              <li><strong>σᵢⱼ</strong>: stress tensor, <span class="muted">Pa</span>; <strong>εᵢⱼ</strong>: strain tensor (dimensionless).</li>
              <li><strong>K</strong>: magnitude of wavevector <span class="muted">K = |K⃗|</span>, units <span class="muted">m⁻¹</span>.</li>
              <li><strong>ω</strong>: angular frequency, units <span class="muted">s⁻¹</span>.</li>
              <li><strong>n̂</strong>: propagation direction (unit vector) <span class="muted">n̂ = K⃗/|K⃗|</span>.</li>
              <li><strong>v</strong>: phase velocity <span class="muted">v = ω/K</span>, units <span class="muted">m·s⁻¹</span>.</li>
            </ul>
          </div>

          <div class="card">
            <h3>Physical meaning (intuition)</h3>
            <ul>
              <li>Elastodynamic waves are <strong>inertial oscillations</strong> (density ρ) resisted by <strong>elastic restoring forces</strong> (stiffness C).</li>
              <li>Anisotropic crystals: stiffness depends on direction → wave speed depends on <span class="muted">n̂</span> and polarization.</li>
              <li>For a given direction <span class="muted">n̂</span>, the medium supports 3 polarizations (one often “mostly longitudinal,” two “mostly transverse”).</li>
              <li>Symmetry can cause degeneracy: along high-symmetry directions (like <span class="muted">[111]</span> in a cubic crystal) the two transverse modes become equal-speed.</li>
            </ul>
          </div>
        </div>

        <h3>Key laws/principles and validity conditions</h3>
        <div class="callout">
          <strong>Linear elastodynamics (small strain, small displacement):</strong>
          <ul>
            <li><strong>Strain-displacement</strong>: εᵢⱼ = ½(∂ᵢuⱼ + ∂ⱼuᵢ) (dimensionless).</li>
            <li><strong>Constitutive law</strong> (Hooke, anisotropic): σᵢⱼ = Cᵢⱼₖₗ εₖₗ.</li>
            <li><strong>Momentum conservation</strong> (no body forces): ρ ∂²uᵢ/∂t² = ∂ⱼ σᵢⱼ.</li>
          </ul>
          <p class="muted">
            Valid when: strains ≪ 1 (linearity), wavelengths ≫ lattice spacing (continuum), and material is homogeneous at the scale of the wavelength.
          </p>
        </div>

        <h3>Mathematical model (variables, domain, coordinates, IC/BC)</h3>
        <div class="card">
          <ul>
            <li><strong>Domain:</strong> idealized infinite homogeneous crystal, x ∈ ℝ³, time t ∈ ℝ.</li>
            <li><strong>Unknown field:</strong> u(x,t) = (u₁,u₂,u₃).</li>
            <li><strong>Coordinate system:</strong> Cartesian axes aligned with cubic crystal axes; propagation direction chosen as n̂ ∥ [111] = (1,1,1)/√3.</li>
            <li><strong>Boundary conditions:</strong> none needed for plane-wave dispersion in an infinite medium (equivalently periodic/decaying at infinity).</li>
            <li><strong>Initial conditions:</strong> not needed for eigenfrequency relation; we seek harmonic solutions.</li>
          </ul>
        </div>

        <h3>Common models/approximations used here (and why)</h3>
        <ul>
          <li><strong>Plane-wave ansatz</strong>: u(x,t) = U exp(i(K⃗·x − ωt)). Works because coefficients are constant and the PDE is linear → Fourier modes decouple.</li>
          <li><strong>Long-wavelength (acoustic) limit</strong>: continuum elasticity gives <span class="muted">ω ∝ K</span>, so <span class="muted">v = ω/K</span> is constant for each mode.</li>
          <li><strong>Cubic symmetry reduction</strong>: for cubic crystals, stiffness is described by three constants <span class="muted">C₁₁, C₁₂, C₄₄</span>, greatly simplifying Γ (Christoffel matrix).</li>
        </ul>

        <h3>Mini intuition examples (minimal algebra)</h3>
        <ul>
          <li><strong>Isotropic solid:</strong> two speeds only: longitudinal <span class="muted">v_L</span> and transverse <span class="muted">v_T</span>, independent of direction.</li>
          <li><strong>Cubic solid:</strong> speeds depend on direction; along special directions symmetry can enforce degeneracies (e.g., two identical transverse speeds).</li>
          <li><strong>Matrix viewpoint:</strong> solving <span class="muted">det(Γ − ρv²I)=0</span> is just finding eigenvalues of Γ; eigenvectors give polarizations.</li>
        </ul>

        <h3>What to watch for (pitfalls)</h3>
        <ul>
          <li>Mixing <strong>ω</strong> with <strong>v</strong>: remember <span class="muted">v = ω/K</span>; for acoustic waves, <span class="muted">ω² ∝ K²</span>.</li>
          <li>For cubic symmetry, using the wrong mapping between tensor indices and constants <span class="muted">C₁₁, C₁₂, C₄₄</span>.</li>
          <li>For the special matrix in part (a), forgetting the <strong>degeneracy</strong> (multiplicity <span class="muted">R−1</span>).</li>
          <li>Dimensional consistency: stiffness <span class="muted">Pa</span>, so <span class="muted">(C/ρ)K²</span> has units <span class="muted">s⁻²</span>.</li>
        </ul>

        <div class="callout ok">
          <strong>Math Insight (core equation as a mathematical object)</strong>
          <p class="muted">
            The plane-wave elastodynamic problem is a <strong>finite-dimensional eigenvalue problem</strong> obtained by Fourier transforming a linear PDE.
            The “constant-off-diagonal” matrix in part (a) is <strong>qI + p(J−I)</strong>, i.e. a <strong>rank-one perturbation</strong> of the identity
            (since <span class="muted">J = 1·1ᵀ</span> has rank 1). Rank-one structure forces one special eigenvalue and an <span class="muted">(R−1)</span>-fold degenerate eigenvalue.
          </p>
        </div>
      </section>

      <!-- PART 0B -->
      <section id="p0b" aria-labelledby="p0b-title">
        <h2 class="sec" id="p0b-title">PART 0B — Industry &amp; Applied Physics Perspective <span class="tag">why engineers care</span></h2>

        <div class="grid2">
          <div class="card">
            <h3>Where this appears (3+ concrete areas)</h3>
            <ul>
              <li><strong>Ultrasonic NDT (non-destructive testing):</strong> wave speeds in anisotropic grains affect defect sizing and time-of-flight imaging.</li>
              <li><strong>MEMS/BAW/SAW resonators:</strong> crystal orientation controls acoustic mode frequencies, Q-factor, and temperature coefficients.</li>
              <li><strong>Semiconductor wafer processing:</strong> acoustic microscopy and stress mapping rely on direction-dependent elastic wave propagation.</li>
              <li><strong>Phononics &amp; acoustic metamaterials:</strong> dispersion engineering begins with baseline anisotropic dispersion relations.</li>
            </ul>
          </div>
          <div class="card">
            <h3>Engineering goals &amp; constraints</h3>
            <ul>
              <li><strong>Performance:</strong> maximize/target a specific mode velocity or resonance frequency by selecting cut/orientation.</li>
              <li><strong>Reliability:</strong> anisotropy influences stress-wave focusing and potential fatigue hot-spots.</li>
              <li><strong>Cost &amp; manufacturability:</strong> orientation control adds cost; tolerances in crystal cut produce frequency spread.</li>
              <li><strong>Safety:</strong> in high-power ultrasonics, mode conversion and local heating depend on polarization and velocity mismatch.</li>
            </ul>
          </div>
        </div>

        <h3>Measurement/validation methods (brief)</h3>
        <ul>
          <li><strong>Pulse-echo time-of-flight</strong> ultrasonics to extract <span class="muted">v(n̂)</span>.</li>
          <li><strong>Brillouin light scattering</strong> and <strong>inelastic x-ray/neutron scattering</strong> for phonon dispersion (micro/nanoscale).</li>
          <li><strong>Resonant ultrasound spectroscopy</strong> to fit <span class="muted">C₁₁, C₁₂, C₄₄</span> from measured resonances.</li>
        </ul>

        <div class="callout warn">
          <strong>From lab to product:</strong>
          <p class="muted">
            Real devices must include damping (viscoelasticity), finite geometry (boundary-value problems), texture/polycrystallinity, and temperature dependence of stiffness.
            The idealized dispersion <span class="muted">ω = vK</span> becomes a starting point; engineers then solve constrained eigenproblems with boundary conditions (often using FEM).
          </p>
        </div>
      </section>

      <!-- PART 1 -->
      <section id="p1" aria-labelledby="p1-title">
        <h2 class="sec" id="p1-title">PART 1 — Problem Analysis <span class="tag">no solving yet</span></h2>

        <h3>Restate the problem (in plain words)</h3>
        <p>
          <strong>(a)</strong> Consider an <span class="muted">R×R</span> matrix whose diagonal entries are all <span class="muted">q</span> and whose off-diagonal entries are all <span class="muted">p</span>.
          Show that its eigenvalues (“roots”) are: one eigenvalue <span class="muted">q + (R−1)p</span> and <span class="muted">R−1</span> eigenvalues equal to <span class="muted">q−p</span>.
        </p>
        <p>
          <strong>(b)</strong> For a plane elastic wave in a cubic crystal traveling along <span class="muted">[111]</span>, the determinant condition is:
        </p>

        <div class="eqbar">
          <button class="copy" data-copy-target="#eq-det">Copy key equation</button>
        </div>
        <pre class="eq" id="eq-det">
det | q − ρ ω^2   p          p        |
    | p           q − ρ ω^2  p        | = 0,
    | p           p          q − ρ ω^2|

where  q = (1/3) K^2 (C11 + 2 C44),
       p = (1/3) K^2 (C12 + C44).
        </pre>

        <p>
          Use the result of (a) (with <span class="muted">R=3</span>) to find the three roots of <span class="muted">ω²</span> as functions of <span class="muted">K</span>, and identify their physical meaning.
        </p>

        <h3>Given quantities</h3>
        <ul>
          <li>Matrix structure for the [111] problem: diagonal <span class="muted">q − ρ ω²</span>, off-diagonal <span class="muted">p</span>.</li>
          <li><span class="muted">q = (1/3)K²(C₁₁ + 2C₄₄)</span>, <span class="muted">p = (1/3)K²(C₁₂ + C₄₄)</span>.</li>
          <li>Material constants: cubic stiffnesses <span class="muted">C₁₁, C₁₂, C₄₄</span> and density <span class="muted">ρ</span>.</li>
        </ul>

        <h3>Unknowns</h3>
        <ul>
          <li>Eigenvalues of the matrix in (a).</li>
          <li>Roots of <span class="muted">det(...)=0</span> in (b), i.e., three values of <span class="muted">ω²(K)</span> (or equivalently <span class="muted">v² = ω²/K²</span>).</li>
        </ul>

        <h3>Relevant principles and why they apply</h3>
        <ul>
          <li><strong>Linearity:</strong> linear PDE → superposition → plane waves reduce PDE to algebraic eigenproblem.</li>
          <li><strong>Symmetry:</strong> cubic symmetry along [111] forces the Christoffel matrix to have equal diagonal and equal off-diagonal terms in the chosen basis → matches (a).</li>
          <li><strong>Determinant condition:</strong> nontrivial solution for displacement amplitudes exists iff determinant is zero (standard linear algebra).</li>
        </ul>

        <div class="callout">
          <strong>Assumptions (explicit):</strong>
          <ul>
            <li>Homogeneous, linear elastic cubic crystal (constant <span class="muted">C</span>).</li>
            <li>Small strains/displacements; no body forces; no damping.</li>
            <li>Plane-wave form in an infinite medium (no boundaries).</li>
          </ul>
        </div>

        <h3>Proposed approaches (compare)</h3>
        <div class="grid2">
          <div class="card">
            <strong>Approach A: symmetry + rank-one matrix (best here)</strong>
            <ul class="muted">
              <li>Use decomposition with all-ones matrix <span class="muted">J</span>.</li>
              <li>Fast, reveals degeneracy transparently.</li>
              <li>Minimal algebra; strong mathematical insight.</li>
            </ul>
          </div>
          <div class="card">
            <strong>Approach B: compute characteristic polynomial directly</strong>
            <ul class="muted">
              <li>Compute <span class="muted">det(A − λI)</span> explicitly.</li>
              <li>Works but can be algebra-heavy; degeneracy less obvious.</li>
            </ul>
          </div>
        </div>
        <p class="muted"><strong>Choice:</strong> Approach A, because it generalizes to any dimension <span class="muted">R</span> and immediately applies to the 3×3 elastic determinant.</p>
      </section>

      <!-- PART 2 -->
      <section id="p2" aria-labelledby="p2-title">
        <h2 class="sec" id="p2-title">PART 2 — Strategy &amp; Tips <span class="tag">roadmap only</span></h2>

        <ol>
          <li><strong>Model the matrix in (a)</strong>: write it as <span class="muted">A = qI + p(J − I)</span>, where <span class="muted">J = 1·1ᵀ</span>.</li>
          <li><strong>Use known eigenstructure of J</strong>: show <span class="muted">J</span> has eigenvalue <span class="muted">R</span> for vector <span class="muted">1</span> and eigenvalue <span class="muted">0</span> for any vector orthogonal to <span class="muted">1</span>.</li>
          <li><strong>Translate to A’s eigenvalues</strong>: apply linearity of operators (since A is a linear combination of I and J).</li>
          <li><strong>For (b), identify the elastic matrix</strong>: recognize it matches (a) with <span class="muted">R=3</span>, diagonal <span class="muted">q − ρ ω²</span>, off-diagonal <span class="muted">p</span>.</li>
          <li><strong>Set each eigenvalue to zero</strong>: determinant zero ⇔ at least one eigenvalue is zero.</li>
          <li><strong>Solve for ω²</strong>: obtain one longitudinal root and two identical transverse roots.</li>
          <li><strong>Sanity checks</strong>: dimensional analysis (<span class="muted">s⁻²</span>), limit cases (e.g., isotropic-like relations), and interpret as velocities <span class="muted">v = ω/K</span>.</li>
        </ol>

        <div class="callout bad">
          <strong>Common mistakes</strong>
          <ul>
            <li>Confusing eigenvalues of the matrix with the roots of <span class="muted">ω</span> (remember the matrix contains <span class="muted">ω²</span>).</li>
            <li>Dropping the factor <span class="muted">(1/3)K²</span> in <span class="muted">p,q</span>.</li>
            <li>Forgetting the transverse modes are <strong>degenerate</strong> (two identical roots).</li>
            <li>Not checking units: <span class="muted">(C/ρ)K²</span> must yield <span class="muted">s⁻²</span>.</li>
          </ul>
        </div>
      </section>

      <!-- PART 3 -->
      <section id="p3" aria-labelledby="p3-title">
        <h2 class="sec" id="p3-title">PART 3 — Full Solution <span class="tag">detailed + teaching</span></h2>

        <h3>Physical intuition first (what we expect)</h3>
        <p>
          Along a high-symmetry direction of a cubic crystal (<span class="muted">[111]</span>), symmetry suggests the medium “looks the same” under permutations of x,y,z.
          That often produces:
        </p>
        <ul>
          <li><strong>One longitudinal-like mode</strong> (polarization roughly parallel to propagation).</li>
          <li><strong>Two equivalent transverse-like modes</strong> (polarizations perpendicular to propagation and equivalent by symmetry), hence a <strong>double degeneracy</strong>.</li>
        </ul>
        <p>
          Mathematically, this is exactly what a constant-off-diagonal symmetric matrix produces: one special eigenvector proportional to <span class="muted">(1,1,1)</span>,
          and a two-dimensional subspace orthogonal to it.
        </p>

        <div class="pagebreak"></div>

        <article aria-label="Part (a) derivation">
          <h3>(a) Eigenvalues of an R×R matrix with diagonal q and off-diagonal p</h3>

          <p>
            Let <span class="muted">A</span> be an <span class="muted">R×R</span> matrix such that:
          </p>
          <ul>
            <li><span class="muted">Aᵢᵢ = q</span> for all i (constant diagonal),</li>
            <li><span class="muted">Aᵢⱼ = p</span> for all i≠j (constant off-diagonal).</li>
          </ul>

          <p>
            Define the identity matrix <span class="muted">I</span> and the all-ones matrix <span class="muted">J</span>:
            <span class="muted">Jᵢⱼ = 1</span> for all i,j. Then:
          </p>

          <div class="eqbar">
            <button class="copy" data-copy-target="#eq-a-decomp">Copy key equation</button>
          </div>
          <pre class="eq" id="eq-a-decomp">
A = q I + p (J − I) = (q − p) I + p J.
          </pre>

          <p><strong>Why this step is valid:</strong> matrix addition/scalar multiplication are entrywise operations. Check entries:</p>
          <ul>
            <li>Diagonal: <span class="muted">((q−p)I)ᵢᵢ + (pJ)ᵢᵢ = (q−p) + p = q</span>.</li>
            <li>Off-diagonal: <span class="muted">((q−p)I)ᵢⱼ + (pJ)ᵢⱼ = 0 + p = p</span> for i≠j.</li>
          </ul>

          <h4 style="margin:12px 0 6px; color:var(--muted); font-size:13px;">Step 1: Eigenstructure of J</h4>
          <p>
            Let <span class="muted">1</span> denote the vector of all ones in ℝᴿ:
            <span class="muted">1 = (1,1,...,1)ᵀ</span>. Compute <span class="muted">J1</span>:
          </p>

          <div class="eqbar">
            <button class="copy" data-copy-target="#eq-j1">Copy key equation</button>
          </div>
          <pre class="eq" id="eq-j1">
(J 1)_i = Σ_{j=1..R} J_{ij} * 1_j = Σ_{j=1..R} 1 = R.
So, J 1 = R 1.
          </pre>

          <p>
            Therefore, <span class="muted">1</span> is an eigenvector of <span class="muted">J</span> with eigenvalue <span class="muted">R</span>.
          </p>

          <p>
            Now take any vector <span class="muted">x</span> such that it is orthogonal to <span class="muted">1</span>:
            <span class="muted">1ᵀx = Σᵢ xᵢ = 0</span>. Then:
          </p>

          <div class="eqbar">
            <button class="copy" data-copy-target="#eq-jx">Copy key equation</button>
          </div>
          <pre class="eq" id="eq-jx">
(J x)_i = Σ_{j=1..R} J_{ij} x_j = Σ_{j=1..R} x_j = 1^T x = 0.
So, J x = 0 for any x with 1^T x = 0.
          </pre>

          <p>
            Hence <span class="muted">J</span> has eigenvalue <span class="muted">0</span> on the <span class="muted">(R−1)</span>-dimensional subspace
            <span class="muted">{x : 1ᵀx = 0}</span>.
          </p>

          <h4 style="margin:12px 0 6px; color:var(--muted); font-size:13px;">Step 2: Transfer eigenvalues to A</h4>
          <p>
            Using <span class="muted">A = (q−p)I + pJ</span>, and the fact that <span class="muted">I</span> acts as identity on every vector:
            <span class="muted">I v = v</span>, we can compute <span class="muted">A</span> on the two invariant subspaces.
          </p>

          <div class="eqbar">
            <button class="copy" data-copy-target="#eq-a1">Copy key equation</button>
          </div>
          <pre class="eq" id="eq-a1">
On v = 1:
A 1 = (q−p) I 1 + p J 1 = (q−p) 1 + p (R 1) = (q + (R−1)p) 1.
          </pre>

          <p>
            So one eigenvalue is:
            <strong class="muted">λ₁ = q + (R−1)p</strong> (eigenvector proportional to all-ones vector).
          </p>

          <div class="eqbar">
            <button class="copy" data-copy-target="#eq-ax">Copy key equation</button>
          </div>
          <pre class="eq" id="eq-ax">
On any x with 1^T x = 0 (so Jx = 0):
A x = (q−p) I x + p J x = (q−p) x + p * 0 = (q−p) x.
          </pre>

          <p>
            Therefore the remaining eigenvalue is:
            <strong class="muted">λ₂ = q − p</strong>, with multiplicity <strong class="muted">(R−1)</strong>.
          </p>

          <div class="callout ok">
            <strong>Part (a) conclusion:</strong>
            <div class="muted">
              One eigenvalue: <span style="white-space:nowrap">λ₁ = q + (R−1)p</span><br/>
              (R−1) eigenvalues: <span style="white-space:nowrap">λ₂ = q − p</span>
            </div>
          </div>

          <details>
            <summary>Optional deeper note: determinant/characteristic polynomial viewpoint</summary>
            <div>
              Because the eigenvalues are known, the characteristic polynomial factorizes as
              <span class="muted">det(A − λI) = (λ₁ − λ)(λ₂ − λ)^{R−1}</span>.
              This also shows why, in part (b), the determinant becomes a product of one factor and a squared factor (for R=3).
            </div>
          </details>
        </article>

        <article aria-label="Part (b) derivation">
          <h3>(b) Roots of ω² for a [111] wave in a cubic crystal</h3>

          <h4 style="margin:10px 0 6px; color:var(--muted); font-size:13px;">Mathematical physics setup: from PDE to eigenvalue problem</h4>

          <p>
            Start from linear elastodynamics (no body force):
          </p>

          <div class="eqbar">
            <button class="copy" data-copy-target="#eq-pde">Copy key equation</button>
          </div>
          <pre class="eq" id="eq-pde">
ρ ∂^2 u_i/∂t^2 = ∂_j σ_{ij},   with   σ_{ij} = C_{ijkl} ε_{kl},
ε_{kl} = (1/2)(∂_k u_l + ∂_l u_k).
          </pre>

          <p>
            If <span class="muted">C_{ijkl}</span> is spatially constant (homogeneous crystal), then substituting σ and ε gives a linear PDE with constant coefficients.
            Because it is linear and translation-invariant, we can Fourier analyze it.
          </p>

          <p>
            Use the plane-wave ansatz (Fourier mode):
            <span class="muted">u(x,t) = U exp(i(K⃗·x − ω t))</span>,
            where U is a constant polarization vector.
            Then derivatives become algebraic operators:
          </p>
          <ul class="muted">
            <li><span class="muted">∂_t → (−iω)</span>, so <span class="muted">∂^2_t → (−ω²)</span>.</li>
            <li><span class="muted">∂_j → iK_j</span>, so <span class="muted">∂_j ∂_l → −K_j K_l</span>.</li>
          </ul>

          <div class="callout">
            <strong>Why each step is valid:</strong>
            <p class="muted">
              Exponentials are eigenfunctions of constant-coefficient differential operators.
              This is the standard Fourier transform principle: linear constant-coefficient PDEs become algebraic in Fourier space.
            </p>
          </div>

          <p>
            The PDE reduces to:
          </p>

          <div class="eqbar">
            <button class="copy" data-copy-target="#eq-christoffel">Copy key equation</button>
          </div>
          <pre class="eq" id="eq-christoffel">
[ Γ_{ik}(n̂) − ρ v^2 δ_{ik} ] U_k = 0,
where v = ω/K,  n̂ = K⃗/K,  and  Γ_{ik}(n̂) = C_{ijkl} n_j n_l.
          </pre>

          <p>
            This is a <strong>finite-dimensional eigenvalue problem</strong> for U:
            nontrivial U exists iff:
          </p>

          <div class="eqbar">
            <button class="copy" data-copy-target="#eq-det2">Copy key equation</button>
          </div>
          <pre class="eq" id="eq-det2">
det( Γ(n̂) − ρ v^2 I ) = 0
⇔ det( K^2 Γ(n̂) − ρ ω^2 I ) = 0.
          </pre>

          <p class="muted">
            The problem statement has already specialized this to cubic symmetry and direction <span class="muted">[111]</span>,
            producing the explicit 3×3 determinant with entries <span class="muted">q − ρ ω²</span> and <span class="muted">p</span>.
          </p>

          <h4 style="margin:10px 0 6px; color:var(--muted); font-size:13px;">Match to part (a)</h4>
          <p>
            The determinant provided is exactly the determinant of an <span class="muted">R=3</span> matrix
            whose diagonal entries are <span class="muted">q − ρ ω²</span> and whose off-diagonal entries are <span class="muted">p</span>.
            So we may apply part (a) with:
          </p>
          <ul class="muted">
            <li><span class="muted">R = 3</span></li>
            <li><span class="muted">q → (q − ρ ω²)</span> (the “diagonal value” of this specific matrix)</li>
            <li><span class="muted">p → p</span></li>
          </ul>

          <p>
            Therefore the eigenvalues of the matrix (call it M) are:
          </p>

          <div class="eqbar">
            <button class="copy" data-copy-target="#eq-eigsM">Copy key equation</button>
          </div>
          <pre class="eq" id="eq-eigsM">
λ1 = (q − ρ ω^2) + (3−1)p = q + 2p − ρ ω^2
λ2 = (q − ρ ω^2) − p       = q − p − ρ ω^2   (multiplicity 2)
          </pre>

          <p>
            The determinant is the product of eigenvalues (counting multiplicity):
            <span class="muted">det M = λ₁ (λ₂)²</span>.
            Hence <span class="muted">det M = 0</span> iff <span class="muted">λ₁ = 0</span> or <span class="muted">λ₂ = 0</span>.
          </p>

          <h4 style="margin:10px 0 6px; color:var(--muted); font-size:13px;">Solve for the roots ω²(K)</h4>

          <p><strong>Root 1 (non-degenerate):</strong> set <span class="muted">λ₁ = 0</span>:</p>
          <div class="eqbar">
            <button class="copy" data-copy-target="#eq-root1">Copy key equation</button>
          </div>
          <pre class="eq" id="eq-root1">
λ1 = q + 2p − ρ ω^2 = 0  ⇒  ρ ω_L^2 = q + 2p.
          </pre>

          <p>Now substitute the given expressions:</p>
          <ul class="muted">
            <li><span class="muted">q = (1/3)K^2(C11 + 2C44)</span></li>
            <li><span class="muted">p = (1/3)K^2(C12 + C44)</span></li>
          </ul>

          <p>Compute <span class="muted">q + 2p</span> step-by-step:</p>
          <div class="eqbar">
            <button class="copy" data-copy-target="#eq-q2p">Copy key equation</button>
          </div>
          <pre class="eq" id="eq-q2p">
q + 2p
= (1/3)K^2(C11 + 2C44) + 2*(1/3)K^2(C12 + C44)
= (1/3)K^2[ C11 + 2C44 + 2C12 + 2C44 ]
= (1/3)K^2[ C11 + 2C12 + 4C44 ].
          </pre>

          <p>So the first root is:</p>
          <pre class="eq">ω_L^2(K) = (K^2 / (3ρ)) ( C11 + 2C12 + 4C44 ).</pre>

          <p><strong>Roots 2 and 3 (degenerate transverse pair):</strong> set <span class="muted">λ₂ = 0</span>:</p>
          <div class="eqbar">
            <button class="copy" data-copy-target="#eq-root2">Copy key equation</button>
          </div>
          <pre class="eq" id="eq-root2">
λ2 = q − p − ρ ω^2 = 0  ⇒  ρ ω_T^2 = q − p.   (two identical roots)
          </pre>

          <p>Compute <span class="muted">q − p</span> step-by-step:</p>
          <div class="eqbar">
            <button class="copy" data-copy-target="#eq-qmp">Copy key equation</button>
          </div>
          <pre class="eq" id="eq-qmp">
q − p
= (1/3)K^2(C11 + 2C44) − (1/3)K^2(C12 + C44)
= (1/3)K^2[ C11 + 2C44 − C12 − C44 ]
= (1/3)K^2[ C11 − C12 + C44 ].
          </pre>

          <p>So the degenerate transverse roots are:</p>
          <pre class="eq">ω_T^2(K) = (K^2 / (3ρ)) ( C11 − C12 + C44 ),   multiplicity 2.</pre>

          <div class="final" id="final-answer">
            <div class="eqbar" style="justify-content:space-between; margin:0 0 8px;">
              <strong>Final Answer (boxed)</strong>
              <button class="copy" data-copy-target="#final-text">Copy final answer</button>
            </div>
            <pre class="eq" id="final-text" style="margin:0;">
For the [111] direction in a cubic crystal:

q = (1/3)K^2(C11 + 2C44),   p = (1/3)K^2(C12 + C44).

Eigenvalues of the 3×3 matrix (diagonal q−ρω^2, off-diagonal p) give det=0.

Longitudinal-like mode (non-degenerate):
  ω_L^2(K) = (K^2/(3ρ)) (C11 + 2C12 + 4C44).

Transverse-like modes (double degeneracy):
  ω_T^2(K) = (K^2/(3ρ)) (C11 − C12 + C44),   multiplicity 2.

Equivalently, phase speeds v = ω/K:
  v_L^2 = (1/(3ρ)) (C11 + 2C12 + 4C44),
  v_T^2 = (1/(3ρ)) (C11 − C12 + C44)  (two identical transverse polarizations).
            </pre>
          </div>

          <h3>Sanity checks</h3>
          <div class="grid2">
            <div class="callout ok">
              <strong>Dimensional analysis</strong>
              <p class="muted">
                <span class="muted">C</span> has units Pa = kg·m⁻¹·s⁻². Then <span class="muted">C/ρ</span> has units m²·s⁻².
                Multiply by <span class="muted">K²</span> (m⁻²) gives s⁻², matching <span class="muted">ω²</span>.
              </p>
            </div>
            <div class="callout">
              <strong>Limiting-case reasoning</strong>
              <p class="muted">
                As <span class="muted">ρ</span> increases, both <span class="muted">ω²</span> decrease (inertia slows dynamics).
                As stiffness constants increase, <span class="muted">ω²</span> increase (stronger restoring forces).
                Degeneracy of the transverse pair matches cubic symmetry along <span class="muted">[111]</span>.
              </p>
            </div>
          </div>

          <details>
            <summary>Optional: nondimensionalization / scaling viewpoint</summary>
            <div>
              Choose a stiffness scale <span class="muted">C0</span> (e.g., <span class="muted">C11</span>) and define
              <span class="muted">c11=C11/C0</span>, <span class="muted">c12=C12/C0</span>, <span class="muted">c44=C44/C0</span>.
              Define a frequency scale <span class="muted">ω0 = K sqrt(C0/ρ)</span>. Then the results read
              <span class="muted">ω_L^2/ω0^2 = (1/3)(c11 + 2c12 + 4c44)</span>,
              <span class="muted">ω_T^2/ω0^2 = (1/3)(c11 − c12 + c44)</span>.
              This highlights that anisotropy enters only through dimensionless stiffness ratios, while the universal scaling is <span class="muted">ω ∝ K</span>.
            </div>
          </details>
        </article>
      </section>

      <!-- PART 4 -->
      <section id="p4" aria-labelledby="p4-title">
        <h2 class="sec" id="p4-title">PART 4 — Deeper Understanding <span class="tag">theory around the result</span></h2>

        <h3>Re-interpret the final formula</h3>
        <p>
          Write each mode as <span class="muted">ω² = v² K²</span>. Then:
        </p>
        <ul>
          <li><strong>Longitudinal speed</strong> depends on a combination <span class="muted">C11 + 2C12 + 4C44</span>:
            it is sensitive to both “normal” stiffness (<span class="muted">C11, C12</span>) and shear stiffness (<span class="muted">C44</span>).
          </li>
          <li><strong>Transverse speed</strong> depends on <span class="muted">C11 − C12 + C44</span>:
            the difference <span class="muted">C11 − C12</span> reflects resistance to distortion under cubic symmetry, plus shear contribution <span class="muted">C44</span>.
          </li>
          <li><strong>Degeneracy</strong> (two identical transverse modes) comes from rotational symmetry about the [111] axis within the cubic group’s symmetry operations.</li>
        </ul>

        <h3>Parameter dependence (qualitative)</h3>
        <div class="card">
          <ul>
            <li>If <span class="muted">C44</span> increases, <span class="muted">v_L</span> and <span class="muted">v_T</span> both increase (both contain +C44 terms).</li>
            <li>If <span class="muted">C12</span> increases, <span class="muted">v_L</span> increases but <span class="muted">v_T</span> decreases (note the minus sign in <span class="muted">C11 − C12 + C44</span>).</li>
            <li>If <span class="muted">ρ</span> increases, both speeds decrease like <span class="muted">1/√ρ</span>.</li>
          </ul>
        </div>

        <h3>Alternative derivation idea (brief but meaningful)</h3>
        <details>
          <summary>Use projection operators onto longitudinal and transverse subspaces</summary>
          <div>
            For a matrix with equal diagonals/off-diagonals, the eigenvector <span class="muted">1</span> spans the “longitudinal” subspace (along (1,1,1)).
            The orthogonal complement is the transverse subspace.
            One can build projectors
            <span class="muted">P_L = (1 1^T)/(1^T 1)</span> and <span class="muted">P_T = I − P_L</span>,
            and show <span class="muted">A = λ1 P_L + λ2 P_T</span>.
            This makes degeneracy and determinant factorization immediate.
          </div>
        </details>

        <h3>Concept checks (with answers)</h3>
        <ul>
          <li><strong>Q:</strong> Why does <span class="muted">det M = 0</span> imply an eigenvalue is zero? <strong>A:</strong> determinant equals product of eigenvalues; product is zero iff at least one factor is zero.</li>
          <li><strong>Q:</strong> Why are there two identical transverse roots? <strong>A:</strong> the subspace orthogonal to (1,1,1) is 2D for R=3, and the matrix acts as a scalar on that subspace.</li>
          <li><strong>Q:</strong> Why does <span class="muted">ω ∝ K</span> here? <strong>A:</strong> continuum linear elasticity gives constant phase speeds; thus <span class="muted">ω = vK</span> and <span class="muted">ω² ∝ K²</span>.</li>
          <li><strong>Q:</strong> What physical quantity is the eigenvector U? <strong>A:</strong> the polarization (direction of displacement amplitude) of the plane wave.</li>
        </ul>

        <a class="backtop" href="#top" aria-label="Back to top">↑ Back to top</a>
      </section>

      <!-- PART 5 -->
      <section id="p5" aria-labelledby="p5-title">
        <h2 class="sec" id="p5-title">PART 5 — Plot Note <span class="tag">no plot</span></h2>
        <p class="muted">
          A plot isn’t necessary here because the result is purely symbolic and the key learning goal is the eigenvalue structure (one mode + a degenerate pair).
          Any meaningful curve would require choosing numerical values for <span class="muted">C₁₁, C₁₂, C₄₄, ρ</span>; the essential physics is already captured by
          the closed-form expressions <span class="muted">ω²(K) = (const)·K²</span>.
        </p>
      </section>

      <footer style="padding:14px 6px 4px; color:var(--faint); font-size:12px;">
        <p>
          Built as a self-contained learning article (vanilla HTML/CSS/JS). Print-friendly styles included.
        </p>
      </footer>
    </main>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite">Copied.</div>

  <script>
    (function(){
      const toast = document.getElementById('toast');
      let toastTimer = null;

      function showToast(msg){
        toast.textContent = msg || "Copied.";
        toast.classList.add('show');
        clearTimeout(toastTimer);
        toastTimer = setTimeout(()=>toast.classList.remove('show'), 1100);
      }

      async function copyText(text){
        try{
          await navigator.clipboard.writeText(text);
          showToast("Copied to clipboard");
        }catch(e){
          // Fallback
          const ta = document.createElement('textarea');
          ta.value = text;
          ta.style.position='fixed';
          ta.style.opacity='0';
          document.body.appendChild(ta);
          ta.focus();
          ta.select();
          try{ document.execCommand('copy'); showToast("Copied to clipboard"); }
          catch(err){ showToast("Copy failed"); }
          document.body.removeChild(ta);
        }
      }

      document.querySelectorAll('button.copy').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const sel = btn.getAttribute('data-copy-target');
          if(!sel) return;
          const el = document.querySelector(sel);
          if(!el) return;
          const text = el.innerText.replace(/\n{3,}/g,"\n\n").trim();
          copyText(text);
        });
      });
    })();
  </script>
</body>
</html>
