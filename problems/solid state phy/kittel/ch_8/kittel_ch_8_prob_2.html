<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Ionization of Donors at Low Temperature: Electron Concentration and Hall Coefficient</title>
  <style>
    :root{
      --bg:#0b0f14;
      --panel:#0f1620;
      --panel2:#101b28;
      --text:#e8eef7;
      --muted:#a9b7c7;
      --accent:#7dd3fc;
      --accent2:#a78bfa;
      --ok:#86efac;
      --warn:#fbbf24;
      --bad:#fb7185;
      --line:rgba(255,255,255,.10);
      --shadow: 0 12px 40px rgba(0,0,0,.35);
      --radius:18px;
      --radius2:22px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family:var(--sans);
      background:
        radial-gradient(1000px 600px at 10% 5%, rgba(125,211,252,.10), transparent 55%),
        radial-gradient(900px 700px at 90% 10%, rgba(167,139,250,.10), transparent 55%),
        radial-gradient(900px 700px at 40% 95%, rgba(134,239,172,.07), transparent 60%),
        var(--bg);
      color:var(--text);
      line-height:1.55;
    }
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    header{
      padding:28px 18px 10px;
      position:relative;
    }
    .wrap{
      max-width:1180px;
      margin:0 auto;
      padding:0 14px 42px;
    }
    .hero{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:16px;
      align-items:stretch;
      margin-top:8px;
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:var(--radius2);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .card .pad{padding:18px 18px 16px}
    h1{
      font-size:clamp(1.35rem, 2.4vw, 2.05rem);
      margin:0 0 10px;
      letter-spacing:.2px;
    }
    .subtitle{
      color:var(--muted);
      margin:0;
      font-size:0.98rem;
    }
    .pillrow{display:flex; flex-wrap:wrap; gap:8px; margin-top:12px}
    .pill{
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      padding:6px 10px;
      border-radius:999px;
      font-size:.82rem;
      color:var(--muted);
    }
    main{
      display:grid;
      grid-template-columns: 300px 1fr;
      gap:16px;
      margin-top:14px;
      align-items:start;
    }
    nav.toc{
      position:sticky;
      top:12px;
      align-self:start;
      padding:14px;
    }
    .toc h2{
      font-size:0.95rem;
      margin:0 0 10px;
      color:var(--text);
      letter-spacing:.3px;
    }
    .toc a{
      display:block;
      padding:7px 10px;
      border-radius:12px;
      color:var(--muted);
      border:1px solid transparent;
    }
    .toc a:hover{
      background:rgba(125,211,252,.06);
      border-color:rgba(125,211,252,.18);
      color:var(--text);
      text-decoration:none;
    }
    .toc .small{
      font-size:.8rem;
      margin-top:10px;
      color:var(--muted);
      opacity:.95;
    }
    .content article{
      padding:18px;
    }
    section{
      padding:16px 0;
      border-top:1px solid var(--line);
    }
    section:first-of-type{border-top:none; padding-top:0}
    h2{
      font-size:1.15rem;
      margin:0 0 10px;
      letter-spacing:.2px;
    }
    h3{
      font-size:1.02rem;
      margin:14px 0 8px;
      color:var(--text);
    }
    p{margin:8px 0; color:var(--text)}
    ul{margin:8px 0 8px 20px; color:var(--text)}
    li{margin:6px 0}
    .muted{color:var(--muted)}
    .grid2{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }
    .callout{
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(16,27,40,.85), rgba(16,27,40,.55));
      border-radius:var(--radius);
      padding:14px 14px 12px;
    }
    .callout .tag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:.8rem;
      color:var(--muted);
      margin-bottom:8px;
    }
    .dot{width:10px;height:10px;border-radius:50%}
    .dot.accent{background:var(--accent)}
    .dot.ok{background:var(--ok)}
    .dot.warn{background:var(--warn)}
    .dot.bad{background:var(--bad)}
    .eq{
      font-family:var(--mono);
      font-size:.92rem;
      white-space:pre-wrap;
      word-break:break-word;
      background:rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.12);
      border-radius:14px;
      padding:12px 12px;
      margin:10px 0;
      position:relative;
    }
    .btn{
      appearance:none;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.05);
      color:var(--text);
      padding:7px 10px;
      border-radius:12px;
      font-size:.82rem;
      cursor:pointer;
      transition:transform .12s ease, background .12s ease, border-color .12s ease;
    }
    .btn:hover{transform:translateY(-1px); background:rgba(255,255,255,.08); border-color:rgba(125,211,252,.30)}
    .copybar{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:8px;
    }
    details{
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:10px 12px;
      background:rgba(255,255,255,.02);
      margin:10px 0 0;
    }
    details summary{
      cursor:pointer;
      color:var(--text);
      font-weight:600;
      list-style:none;
    }
    details summary::-webkit-details-marker{display:none}
    details .inside{margin-top:8px; color:var(--muted)}
    figure{
      margin:10px 0 0;
      padding:12px;
      border-radius:var(--radius);
      border:1px solid var(--line);
      background:rgba(0,0,0,.18);
    }
    figcaption{color:var(--muted); font-size:.86rem; margin-top:8px}
    canvas{width:100%; height:320px; display:block; border-radius:14px}
    .backtop{
      display:inline-flex;
      align-items:center;
      gap:8px;
      margin-top:10px;
      padding:7px 10px;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--muted);
    }
    .backtop:hover{color:var(--text); text-decoration:none; border-color:rgba(125,211,252,.25)}
    footer{
      padding:16px 18px 30px;
      color:var(--muted);
      font-size:.9rem;
    }
    .kpi{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      margin-top:10px;
    }
    .kpi .box{
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      border-radius:16px;
      padding:10px 12px;
    }
    .kpi .label{color:var(--muted); font-size:.8rem}
    .kpi .value{font-family:var(--mono); font-size:1.02rem; margin-top:4px}
    .final{
      border:1px solid rgba(134,239,172,.25);
      background: linear-gradient(180deg, rgba(134,239,172,.10), rgba(16,27,40,.55));
    }
    .mathinsight{
      border:1px solid rgba(167,139,250,.22);
      background: linear-gradient(180deg, rgba(167,139,250,.10), rgba(16,27,40,.55));
    }
    @media (max-width: 980px){
      .hero{grid-template-columns:1fr}
      main{grid-template-columns:1fr}
      nav.toc{position:relative; top:auto}
      .grid2{grid-template-columns:1fr}
      .kpi{grid-template-columns:1fr}
    }
    @media print{
      body{background:#fff; color:#000}
      .card, .callout, details, figure, nav.toc{box-shadow:none}
      nav.toc{display:none}
      .btn, .copybar{display:none}
      a{color:#000; text-decoration:underline}
      section{break-inside:avoid}
      .eq{border-color:#777; background:#f5f5f5}
      .callout{border-color:#777; background:#f7f7f7}
      header{padding:0}
    }
  </style>
</head>
<body>
  <header id="top">
    <div class="wrap">
      <div class="hero">
        <div class="card">
          <div class="pad">
            <h1>Ionization of Donors at 4 K: Conduction Electron Density and Hall Coefficient</h1>
            <p class="subtitle">
              Low-temperature donor “freeze-out” solved with semiconductor statistics (effective mass model) and linked to Hall measurements.
            </p>
            <div class="pillrow" aria-label="Topic tags">
              <span class="pill">Semiconductor statistics</span>
              <span class="pill">Freeze-out regime</span>
              <span class="pill">Effective mass</span>
              <span class="pill">Hall coefficient</span>
              <span class="pill">Industrial metrology relevance</span>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="pad">
            <h2 style="margin:0 0 8px;">Quick Summary</h2>
            <ul>
              <li><strong>What:</strong> Estimate electron concentration from partially ionized donors at <strong>T = 4 K</strong>, then compute <strong>Hall coefficient</strong>.</li>
              <li><strong>Key physics idea:</strong> At low T, donors are not fully ionized (freeze-out); charge neutrality links donor ionization to conduction electrons.</li>
              <li><strong>Governing relations:</strong> Nondegenerate band statistics <span class="muted">(Boltzmann)</span> and donor occupancy with degeneracy factor.</li>
              <li><strong>Core equations:</strong> n = N<sub>C</sub> exp(-(E<sub>C</sub>-E<sub>F</sub>)/k<sub>B</sub>T) and N<sub>D</sub><sup>+</sup> = N<sub>D</sub> / (1 + 2 exp((E<sub>F</sub>-E<sub>D</sub>)/k<sub>B</sub>T)).</li>
              <li><strong>Result type:</strong> Numeric at 4 K with given parameters; interpret as “only a fraction of donors contribute carriers.”</li>
              <li><strong>Final numbers:</strong> n(4 K) ≈ <strong>2.8×10<sup>12</sup> cm<sup>-3</sup></strong>, and R<sub>H</sub> ≈ <strong>−2.25 m<sup>3</sup>/C</strong> (≈ −2.25×10<sup>6</sup> cm<sup>3</sup>/C).</li>
              <li><strong>Measurement hook:</strong> Hall effect provides a direct experimental estimate of carrier density when one carrier type dominates.</li>
            </ul>
            <div class="kpi" aria-label="Key numeric outputs">
              <div class="box">
                <div class="label">Conduction electrons at 4 K</div>
                <div class="value">n ≈ 2.77×10<sup>12</sup> cm<sup>−3</sup></div>
              </div>
              <div class="box">
                <div class="label">Hall coefficient (electrons)</div>
                <div class="value">R<sub>H</sub> ≈ −2.25 m<sup>3</sup>/C</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <main>
        <nav class="toc card" aria-label="Table of contents">
          <div class="pad">
            <h2>On this page</h2>
            <a href="#part0">PART 0 — Concept Primer</a>
            <a href="#part0b">PART 0B — Industry & Applied Physics</a>
            <a href="#part1">PART 1 — Problem Analysis</a>
            <a href="#part2">PART 2 — Strategy & Tips</a>
            <a href="#part3">PART 3 — Full Solution</a>
            <a href="#part4">PART 4 — Deeper Understanding</a>
            <a href="#part5">PART 5 — Optional Plot Guide</a>
            <div class="small">Tip: Use the copy buttons beside key equations and the final answer.</div>
          </div>
        </nav>

        <div class="content card">
          <article>

            <section id="part0">
              <h2>PART 0 — Concept Primer (Theory Before Solving)</h2>

              <div class="grid2">
                <div class="callout">
                  <div class="tag"><span class="dot accent"></span><strong>Core definitions (symbols + SI units)</strong></div>
                  <ul>
                    <li><strong>T</strong> (K): temperature.</li>
                    <li><strong>k<sub>B</sub></strong> (J/K or eV/K): Boltzmann constant; sets thermal energy scale k<sub>B</sub>T.</li>
                    <li><strong>E<sub>C</sub>, E<sub>F</sub></strong> (eV): conduction band edge and Fermi level.</li>
                    <li><strong>E<sub>D</sub></strong> (eV): donor energy level (typically slightly below E<sub>C</sub>).</li>
                    <li><strong>E<sub>d</sub></strong> (eV): donor ionization/binding energy, defined by E<sub>D</sub> = E<sub>C</sub> − E<sub>d</sub>.</li>
                    <li><strong>m*</strong> (kg): effective mass of conduction electrons.</li>
                    <li><strong>N<sub>D</sub></strong> (m<sup>−3</sup> or cm<sup>−3</sup>): donor concentration.</li>
                    <li><strong>n</strong> (m<sup>−3</sup> or cm<sup>−3</sup>): conduction electron concentration.</li>
                    <li><strong>R<sub>H</sub></strong> (m<sup>3</sup>/C): Hall coefficient.</li>
                    <li><strong>q</strong> (C): elementary charge magnitude (q ≈ 1.602×10<sup>−19</sup> C); electron charge is −q.</li>
                  </ul>
                </div>

                <div class="callout">
                  <div class="tag"><span class="dot ok"></span><strong>Physical meaning (intuition)</strong></div>
                  <ul>
                    <li><strong>Donors</strong> are impurities that can donate electrons to the conduction band when ionized.</li>
                    <li>At <strong>low T</strong>, many donor electrons remain bound (neutral donors), so fewer free carriers exist: <strong>freeze-out</strong>.</li>
                    <li><strong>N<sub>C</sub></strong> is the conduction-band effective density of states; it shrinks strongly with T as T<sup>3/2</sup>, making it harder to thermally populate the band.</li>
                    <li><strong>Hall effect</strong>: transverse voltage under current + magnetic field gives carrier sign and (approximately) density.</li>
                  </ul>
                </div>
              </div>

              <h3>Key laws / principles and validity conditions</h3>
              <ul>
                <li><strong>Charge neutrality (bulk, equilibrium):</strong> net charge density ≈ 0, so free electron density equals ionized donor density when holes and acceptors are negligible.</li>
                <li><strong>Nondegenerate (Boltzmann) approximation:</strong> valid when (E<sub>C</sub> − E<sub>F</sub>) ≳ a few k<sub>B</sub>T, so Fermi–Dirac reduces to exponential form for conduction electrons.</li>
                <li><strong>Donor occupancy with degeneracy:</strong> the neutral donor state has spin degeneracy 2; the ionized state has degeneracy 1, introducing the factor “2” in donor-ionization formulas.</li>
                <li><strong>Single-carrier Hall coefficient:</strong> R<sub>H</sub> ≈ −1/(q n) if electrons dominate and the Hall factor is near 1.</li>
              </ul>

              <h3>Common models / approximations used (and why)</h3>
              <ul>
                <li><strong>Effective mass + parabolic band:</strong> replaces complex band structure by E(k) ≈ E<sub>C</sub> + (ħ²k²)/(2m*), enabling a closed-form N<sub>C</sub>.</li>
                <li><strong>Neglect holes:</strong> justified by E<sub>g</sub> ≫ k<sub>B</sub>T (intrinsic excitation suppressed).</li>
                <li><strong>Equilibrium statistics:</strong> assumes no strong injection, no illumination, and thermal equilibrium.</li>
              </ul>

              <h3>Mini intuition examples (quick)</h3>
              <ul>
                <li>If E<sub>d</sub> ≪ k<sub>B</sub>T, donors are ~fully ionized: n ≈ N<sub>D</sub>.</li>
                <li>If E<sub>d</sub> ≫ k<sub>B</sub>T, ionization is tiny: n becomes exponentially small.</li>
                <li>Reducing m* reduces N<sub>C</sub> (fewer available states), which can <em>enhance</em> freeze-out effects at low T.</li>
              </ul>

              <div class="callout">
                <div class="tag"><span class="dot warn"></span><strong>What to watch for (pitfalls)</strong></div>
                <ul>
                  <li><strong>Unit traps:</strong> m<sup>−3</sup> vs cm<sup>−3</sup>; Hall coefficient m<sup>3</sup>/C vs cm<sup>3</sup>/C.</li>
                  <li><strong>Degeneracy factor:</strong> missing the donor factor “2” changes low-T carrier estimates.</li>
                  <li><strong>Assuming full ionization:</strong> not valid at 4 K unless E<sub>d</sub> is extremely small.</li>
                  <li><strong>Hall factor:</strong> real materials can have r<sub>H</sub> ≠ 1; here we use the simplest model.</li>
                </ul>
              </div>

              <div class="callout mathinsight">
                <div class="tag"><span class="dot" style="background:var(--accent2)"></span><strong>Math Insight</strong></div>
                <p class="muted">
                  Mathematically, the solution is a <strong>coupled nonlinear equilibrium</strong> problem: one equation enforces
                  <em>charge neutrality</em> (a conservation constraint), while the other two are <em>constitutive relations</em> from
                  statistical mechanics. Eliminating E<sub>F</sub> reduces the system to a <strong>quadratic equation</strong> in an exponential
                  variable a = exp((E<sub>C</sub>−E<sub>F</sub>)/k<sub>B</sub>T). This is a classic “algebraic closure” of a statistical
                  model.
                </p>
              </div>

              <a class="backtop" href="#top" aria-label="Back to top">↑ Back to top</a>
            </section>

            <section id="part0b">
              <h2>PART 0B — Industry & Applied Physics Perspective</h2>

              <div class="grid2">
                <div class="callout">
                  <div class="tag"><span class="dot accent"></span><strong>Where this appears in industry</strong></div>
                  <ul>
                    <li><strong>Cryogenic electronics:</strong> sensors/readout near 4 K (space instruments, quantum hardware support electronics).</li>
                    <li><strong>Hall sensors & metrology:</strong> extracting carrier density and mobility for process control and material qualification.</li>
                    <li><strong>Power and RF semiconductors:</strong> dopant activation and compensation affect resistivity and device performance (even if operating temperature differs, calibration/characterization often spans wide T).</li>
                    <li><strong>Semiconductor manufacturing:</strong> dopant species selection and activation anneals; low-T data can reveal impurity levels and defect states.</li>
                  </ul>
                </div>

                <div class="callout">
                  <div class="tag"><span class="dot ok"></span><strong>Why engineers care</strong></div>
                  <ul>
                    <li><strong>Performance:</strong> carrier freeze-out increases resistivity, changing circuit timing and sensor sensitivity.</li>
                    <li><strong>Reliability:</strong> unintended freeze-out can produce large voltage drops and local heating under current drive.</li>
                    <li><strong>Cost & yield:</strong> Hall/temperature sweeps are fast diagnostic tools for doping and defects.</li>
                    <li><strong>Design margins:</strong> knowing n(T) helps size contacts, bias currents, and measurement ranges.</li>
                  </ul>
                </div>
              </div>

              <h3>Typical measurement/validation methods</h3>
              <ul>
                <li><strong>Hall effect (van der Pauw):</strong> obtains R<sub>H</sub> and sheet resistance → n and mobility (with modeling assumptions).</li>
                <li><strong>Temperature-dependent resistivity:</strong> reveals activation energies (Arrhenius-type slopes).</li>
                <li><strong>Capacitance–voltage (C–V):</strong> profiles dopant density in junction structures (not directly used here but complementary).</li>
              </ul>

              <h3>Design trade-offs and non-idealities</h3>
              <ul>
                <li><strong>Incomplete ionization:</strong> especially at low T or for deep donors; changes effective carrier density.</li>
                <li><strong>Compensation:</strong> acceptors or traps reduce free carriers; our problem explicitly assumes none.</li>
                <li><strong>Band nonparabolicity / multi-valley bands:</strong> modify N<sub>C</sub>; effective mass is a model parameter capturing some of this.</li>
                <li><strong>Hall factor r<sub>H</sub>:</strong> scattering mechanisms can make R<sub>H</sub> = −r<sub>H</sub>/(q n) rather than −1/(q n).</li>
              </ul>

              <details>
                <summary>From lab to product: adapting the ideal model</summary>
                <div class="inside">
                  In product settings, you rarely trust −1/(qn) blindly. You typically:
                  (i) fit n(T) and ρ(T) across temperature to extract E<sub>d</sub>, compensation, and r<sub>H</sub>;
                  (ii) validate against independent dopant profiling (SIMS, C–V);
                  (iii) include device geometry, contact resistance, and self-heating corrections.
                </div>
              </details>

              <a class="backtop" href="#top">↑ Back to top</a>
            </section>

            <section id="part1">
              <h2>PART 1 — Problem Analysis (No Solving Yet)</h2>

              <h3>Restated problem (in plain words)</h3>
              <p>
                A semiconductor contains donors with density N<sub>D</sub> = 10<sup>13</sup> cm<sup>−3</sup>.
                The donor binding (ionization) energy is E<sub>d</sub> = 1 meV, and the electron effective mass is m* = 0.01 m<sub>0</sub>.
                At temperature T = 4 K:
                (a) estimate the conduction-electron density n, and
                (b) compute the Hall coefficient R<sub>H</sub>.
                Assume no acceptors and E<sub>g</sub> ≫ k<sub>B</sub>T (so holes are negligible).
              </p>

              <div class="grid2">
                <div class="callout">
                  <div class="tag"><span class="dot accent"></span><strong>Given</strong></div>
                  <ul>
                    <li>N<sub>D</sub> = 1.0×10<sup>13</sup> cm<sup>−3</sup></li>
                    <li>E<sub>d</sub> = 1 meV = 1.0×10<sup>−3</sup> eV</li>
                    <li>m* = 0.01 m<sub>0</sub></li>
                    <li>T = 4 K</li>
                    <li>No acceptors, E<sub>g</sub> ≫ k<sub>B</sub>T</li>
                  </ul>
                </div>
                <div class="callout">
                  <div class="tag"><span class="dot ok"></span><strong>Unknowns / required outputs</strong></div>
                  <ul>
                    <li>(a) n(T=4 K) in cm<sup>−3</sup></li>
                    <li>(b) R<sub>H</sub> (sign included) in m<sup>3</sup>/C (and optionally cm<sup>3</sup>/C)</li>
                  </ul>
                </div>
              </div>

              <h3>Relevant principles (and why they apply)</h3>
              <ul>
                <li><strong>Statistical mechanics of carriers:</strong> determines n from E<sub>F</sub> and N<sub>C</sub> (effective mass model).</li>
                <li><strong>Donor ionization equilibrium:</strong> relates E<sub>F</sub> to the fraction of donors ionized.</li>
                <li><strong>Charge neutrality:</strong> in bulk equilibrium with negligible holes, n equals N<sub>D</sub><sup>+</sup>.</li>
                <li><strong>Hall effect (single-carrier):</strong> gives R<sub>H</sub> ≈ −1/(q n).</li>
              </ul>

              <div class="callout">
                <div class="tag"><span class="dot warn"></span><strong>Assumptions (explicit)</strong></div>
                <ul>
                  <li>Thermal equilibrium, uniform bulk (no spatial gradients: ∇n = 0, ∇E<sub>F</sub> = 0).</li>
                  <li>Nondegenerate conduction band (Boltzmann form for n).</li>
                  <li>Only electrons matter (p ≈ 0) due to E<sub>g</sub> ≫ k<sub>B</sub>T.</li>
                  <li>Donor level is discrete at E<sub>D</sub> = E<sub>C</sub> − E<sub>d</sub>, with neutral-state degeneracy 2.</li>
                  <li>Hall factor r<sub>H</sub> ≈ 1 (simple estimate).</li>
                </ul>
              </div>

              <h3>Possible approaches (compare)</h3>
              <ul>
                <li><strong>Approach A (exact within model):</strong> write n(E<sub>F</sub>) and N<sub>D</sub><sup>+</sup>(E<sub>F</sub>), apply charge neutrality, eliminate E<sub>F</sub> → quadratic in an exponential variable. <span class="muted">Best accuracy under given assumptions.</span></li>
                <li><strong>Approach B (freeze-out approximation):</strong> assume partial ionization and derive n ≈ sqrt(N<sub>C</sub>N<sub>D</sub>/2) exp(−E<sub>d</sub>/(2k<sub>B</sub>T)). <span class="muted">Fast and insightful; slightly approximate.</span></li>
                <li><strong>Approach C (numerical root find):</strong> solve for E<sub>F</sub> numerically without algebraic elimination. <span class="muted">General but unnecessary here.</span></li>
              </ul>

              <p><strong>Chosen approach:</strong> Approach A, because it is still simple (closed form) and keeps the degeneracy factor properly.</p>

              <a class="backtop" href="#top">↑ Back to top</a>
            </section>

            <section id="part2">
              <h2>PART 2 — Strategy & Tips (Roadmap Only)</h2>

              <div class="callout">
                <div class="tag"><span class="dot accent"></span><strong>Plan (8 steps)</strong></div>
                <ol style="margin:8px 0 8px 20px;">
                  <li><strong>Compute k<sub>B</sub>T</strong> in eV: sets the thermal scale; interpret E<sub>d</sub>/k<sub>B</sub>T.</li>
                  <li><strong>Compute N<sub>C</sub>(T)</strong> from the effective mass: N<sub>C</sub> = 2(2πm*k<sub>B</sub>T/h²)<sup>3/2</sup>.</li>
                  <li><strong>Model conduction electrons</strong> (Boltzmann): n = N<sub>C</sub> exp(−(E<sub>C</sub>−E<sub>F</sub>)/k<sub>B</sub>T).</li>
                  <li><strong>Model donor ionization</strong> with degeneracy: N<sub>D</sub><sup>+</sup> = N<sub>D</sub>/[1+2 exp((E<sub>F</sub>−E<sub>D</sub>)/k<sub>B</sub>T)].</li>
                  <li><strong>Apply charge neutrality</strong>: n = N<sub>D</sub><sup>+</sup> (since p≈0, no acceptors).</li>
                  <li><strong>Eliminate E<sub>F</sub></strong> using an exponential substitution to obtain a quadratic; solve for n.</li>
                  <li><strong>Sanity checks</strong>: units, limiting cases (E<sub>d</sub>→0; T→0), and fraction ionized.</li>
                  <li><strong>Hall coefficient</strong>: R<sub>H</sub> ≈ −1/(q n) for electrons.</li>
                </ol>
              </div>

              <div class="callout">
                <div class="tag"><span class="dot bad"></span><strong>Common mistakes</strong></div>
                <ul>
                  <li>Using n ≈ N<sub>D</sub> (full ionization) at 4 K when E<sub>d</sub> is comparable to k<sub>B</sub>T.</li>
                  <li>Dropping the donor degeneracy factor (the “2”).</li>
                  <li>Computing N<sub>C</sub> with m* = m<sub>0</sub> instead of 0.01 m<sub>0</sub>.</li>
                  <li>Forgetting to convert cm<sup>−3</sup> ↔ m<sup>−3</sup> when computing R<sub>H</sub>.</li>
                </ul>
              </div>

              <a class="backtop" href="#top">↑ Back to top</a>
            </section>

            <section id="part3">
              <h2>PART 3 — Full Solution (Detailed + Teaching)</h2>

              <h3>Physical intuition before calculating</h3>
              <p>
                At 4 K, thermal energy is tiny. Since E<sub>d</sub> = 1 meV is a few times k<sub>B</sub>T,
                we expect <strong>incomplete ionization</strong> (freeze-out): n should be noticeably below N<sub>D</sub>.
                Also, with such low n, the magnitude of the Hall coefficient |R<sub>H</sub>| should be very large.
              </p>

              <h3>Mathematical model (variables, domain, assumptions)</h3>
              <p>
                We treat the semiconductor as a uniform bulk region (domain Ω in ℝ³) at equilibrium:
                ∇n = 0, ∇E<sub>F</sub> = 0 (no spatial variation), and time derivatives vanish (∂/∂t = 0).
                There is no PDE to solve here; instead, equilibrium is enforced by algebraic relations from statistical mechanics plus charge conservation.
              </p>

              <div class="callout">
                <div class="tag"><span class="dot accent"></span><strong>Key constants (used numerically)</strong></div>
                <ul>
                  <li>k<sub>B</sub> = 8.617×10<sup>−5</sup> eV/K</li>
                  <li>q = 1.602×10<sup>−19</sup> C</li>
                  <li>h = 6.626×10<sup>−34</sup> J·s</li>
                  <li>m<sub>0</sub> = 9.109×10<sup>−31</sup> kg</li>
                </ul>
              </div>

              <h3>Step 1: Thermal energy scale</h3>
              <div class="eq" id="eq-kbt">kB*T = (8.617e-5 eV/K)*(4 K) = 3.447e-4 eV = 0.3447 meV</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-kbt">Copy equation</button>
              </div>
              <p class="muted">
                Dimensionless ratio: E<sub>d</sub>/(k<sub>B</sub>T) = 1 meV / 0.3447 meV ≈ 2.90, so partial ionization is expected.
              </p>

              <h3>Step 2: Effective density of states N<sub>C</sub>(T)</h3>
              <p>
                For a 3D parabolic conduction band with effective mass m*, the effective density of states is
              </p>
              <div class="eq" id="eq-nc">NC(T) = 2 * ( (2*pi*m* * kB*T) / h^2 )^(3/2)</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-nc">Copy equation</button>
              </div>
              <p>
                Here m* = 0.01 m<sub>0</sub>. Evaluating at T = 4 K gives:
              </p>
              <div class="eq" id="eq-ncnum">NC(4 K) ≈ 3.86×10^13 cm^-3</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-ncnum">Copy value</button>
              </div>
              <p class="muted">
                Dimensional check: inside parentheses has units of 1/length², raising to 3/2 gives 1/length³, so N<sub>C</sub> is a concentration.
              </p>

              <h3>Step 3: Carrier statistics in the conduction band (Boltzmann form)</h3>
              <p>
                Under the nondegenerate approximation (valid when E<sub>C</sub>−E<sub>F</sub> ≳ a few k<sub>B</sub>T),
                the electron density is:
              </p>
              <div class="eq" id="eq-nboltz">n = NC * exp( -(EC - EF)/(kB*T) )</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-nboltz">Copy equation</button>
              </div>

              <h3>Step 4: Donor ionization with degeneracy</h3>
              <p>
                Donor level energy is E<sub>D</sub> = E<sub>C</sub> − E<sub>d</sub>. The probability the donor is occupied by an electron (neutral donor) includes a degeneracy ratio.
                Neutral donor state has spin degeneracy 2, ionized state has degeneracy 1. This yields:
              </p>
              <div class="eq" id="eq-ndplus">ND+ = ND / ( 1 + 2 * exp( (EF - ED)/(kB*T) ) )</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-ndplus">Copy equation</button>
              </div>
              <p class="muted">
                Interpretation: if E<sub>F</sub> is far below E<sub>D</sub>, the exponential is small and ND+ ≈ ND (nearly full ionization). If E<sub>F</sub> is above E<sub>D</sub>, donors tend to be neutral and ND+ becomes small.
              </p>

              <h3>Step 5: Charge neutrality (conservation constraint)</h3>
              <p>
                With no acceptors and negligible holes (E<sub>g</sub> ≫ k<sub>B</sub>T),
                the neutrality condition is:
              </p>
              <div class="eq" id="eq-neutral">n = ND+</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-neutral">Copy equation</button>
              </div>

              <h3>Step 6: Eliminate E<sub>F</sub> and solve (no magic jumps)</h3>
              <p>
                Choose an energy reference with E<sub>C</sub> = 0 (this is just a shift; only differences matter).
                Define the exponential substitution:
              </p>
              <div class="eq" id="eq-sub">a := exp( (EC - EF)/(kB*T) ) = exp( -EF/(kB*T) )  &gt; 0</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-sub">Copy substitution</button>
              </div>

              <p>
                Then from the Boltzmann electron formula:
              </p>
              <div class="eq" id="eq-na">n = NC / a</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-na">Copy equation</button>
              </div>

              <p>
                Also, E<sub>D</sub> = −E<sub>d</sub> in this reference, so:
              </p>
              <div class="eq" id="eq-exped">exp( (EF - ED)/(kB*T) ) = exp( (EF + Ed)/(kB*T) ) = exp(Ed/(kB*T)) / a</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-exped">Copy step</button>
              </div>

              <p>
                Substitute into the donor ionization formula:
              </p>
              <div class="eq" id="eq-ndplus-a">ND+ = ND / ( 1 + 2 * exp(Ed/(kB*T)) / a )</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-ndplus-a">Copy equation</button>
              </div>

              <p>
                Now enforce neutrality n = ND+ with n = NC/a:
              </p>
              <div class="eq" id="eq-neutral-a">NC/a = ND / ( 1 + 2*B/a ),  where B := exp(Ed/(kB*T))</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-neutral-a">Copy equation</button>
              </div>

              <p>
                Multiply both sides by (1 + 2B/a) (valid because a&gt;0 so no division-by-zero issue):
              </p>
              <div class="eq" id="eq-expand">NC/a + 2B*NC/a^2 = ND</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-expand">Copy step</button>
              </div>

              <p>
                Multiply by a² to obtain a quadratic in a:
              </p>
              <div class="eq" id="eq-quad">ND*a^2 - NC*a - 2B*NC = 0</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-quad">Copy quadratic</button>
              </div>

              <p>
                Solve the quadratic (choose the positive root since a&gt;0):
              </p>
              <div class="eq" id="eq-root">a = [ NC + sqrt( NC^2 + 8*B*NC*ND ) ] / (2*ND)</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-root">Copy result</button>
              </div>

              <p>
                Then n = NC/a.
              </p>

              <h3>Step 7: Plug numbers at T = 4 K</h3>
              <p>
                Compute B = exp(E<sub>d</sub>/(k<sub>B</sub>T)):
              </p>
              <div class="eq" id="eq-bnum">B = exp( (1.0 meV)/(0.3447 meV) ) = exp(2.90) ≈ 18.19</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-bnum">Copy value</button>
              </div>

              <p>
                With N<sub>C</sub> ≈ 3.86×10<sup>13</sup> cm<sup>−3</sup> and N<sub>D</sub> = 1.0×10<sup>13</sup> cm<sup>−3</sup>:
              </p>
              <div class="eq" id="eq-anum">a ≈ 13.95</div>
              <div class="eq" id="eq-nnum">n = NC/a ≈ (3.86×10^13)/13.95 ≈ 2.77×10^12 cm^-3</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-nnum">Copy n</button>
              </div>

              <div class="callout final">
                <div class="tag"><span class="dot ok"></span><strong>Final result (Part a)</strong></div>
                <div class="eq" id="final-a">n(4 K) ≈ 2.8×10^12 cm^-3  (≈ 2.8×10^18 m^-3)</div>
                <div class="copybar">
                  <button class="btn" data-copy="#final-a">Copy final (a)</button>
                </div>
                <p class="muted">
                  Ionization fraction ≈ n/N<sub>D</sub> ≈ 0.277, so only ~28% of donors contribute free electrons at 4 K.
                </p>
              </div>

              <h3>Step 8: Hall coefficient (Part b)</h3>
              <p>
                For a single dominant carrier type (electrons) with Hall factor ~1:
              </p>
              <div class="eq" id="eq-rh">RH ≈ -1/(q*n)</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-rh">Copy equation</button>
              </div>

              <p>
                Convert n to SI: n ≈ 2.77×10<sup>12</sup> cm<sup>−3</sup> = 2.77×10<sup>18</sup> m<sup>−3</sup>.
              </p>
              <div class="eq" id="eq-rhnum">RH ≈ -1 / ( (1.602×10^-19 C)*(2.77×10^18 m^-3) ) ≈ -2.25 m^3/C</div>
              <div class="eq" id="eq-rhcm">Equivalently: RH ≈ -2.25×10^6 cm^3/C</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-rhnum">Copy R_H (SI)</button>
                <button class="btn" data-copy="#eq-rhcm">Copy R_H (cm^3/C)</button>
              </div>

              <div class="callout final">
                <div class="tag"><span class="dot ok"></span><strong>Final result (Part b)</strong></div>
                <div class="eq" id="final-b">RH ≈ -2.25 m^3/C  (≈ -2.25×10^6 cm^3/C)</div>
                <div class="copybar">
                  <button class="btn" data-copy="#final-b">Copy final (b)</button>
                </div>
                <p class="muted">
                  The negative sign indicates electrons are the dominant carriers.
                </p>
              </div>

              <h3>Sanity checks</h3>
              <ul>
                <li><strong>Units:</strong> n is a concentration; R<sub>H</sub> has units m<sup>3</sup>/C (since 1/(C·m<sup>−3</sup>) = m<sup>3</sup>/C).</li>
                <li><strong>Limiting case E<sub>d</sub> → 0:</strong> B → 1; donors become much more ionized; n approaches N<sub>D</sub> if N<sub>D</sub> ≪ N<sub>C</sub>.</li>
                <li><strong>Limiting case T → 0:</strong> B = exp(E<sub>d</sub>/k<sub>B</sub>T) → ∞, which drives n down (freeze-out), consistent with intuition.</li>
                <li><strong>Magnitude check:</strong> n &lt; N<sub>D</sub> and |R<sub>H</sub>| is large, consistent with low carrier density.</li>
              </ul>

              <div class="callout">
                <div class="tag"><span class="dot accent"></span><strong>Final Answer (plain text, copyable)</strong></div>
                <div class="eq" id="final-plain">Given ND = 1.0×10^13 cm^-3, Ed = 1 meV, m* = 0.01 m0, T = 4 K:
NC(4 K) ≈ 3.86×10^13 cm^-3.
Solving charge neutrality with donor degeneracy gives n(4 K) ≈ 2.77×10^12 cm^-3 (≈ 2.77×10^18 m^-3).
Hall coefficient (electron, single-carrier): RH ≈ −1/(q n) ≈ −2.25 m^3/C (≈ −2.25×10^6 cm^3/C).</div>
                <div class="copybar">
                  <button class="btn" data-copy="#final-plain">Copy final answer</button>
                </div>
              </div>

              <a class="backtop" href="#top">↑ Back to top</a>
            </section>

            <section id="part4">
              <h2>PART 4 — Deeper Understanding (Theory Around the Result)</h2>

              <h3>Re-interpreting the final formula</h3>
              <p>
                The carrier density is controlled by the competition between:
                (i) the available conduction-band states N<sub>C</sub>(T) ∝ (m*T)<sup>3/2</sup>,
                and (ii) the donor binding energy E<sub>d</sub> entering through B = exp(E<sub>d</sub>/k<sub>B</sub>T).
                Low T increases B dramatically and decreases N<sub>C</sub>, both reducing n.
              </p>

              <div class="callout">
                <div class="tag"><span class="dot ok"></span><strong>Parameter dependence (qualitative)</strong></div>
                <ul>
                  <li>Increase <strong>T</strong> → increases N<sub>C</sub> and reduces E<sub>d</sub>/k<sub>B</sub>T → <strong>n increases strongly</strong>.</li>
                  <li>Increase <strong>E<sub>d</sub></strong> → increases freeze-out → <strong>n decreases exponentially</strong> at low T.</li>
                  <li>Increase <strong>N<sub>D</sub></strong> → more donors available, but still limited by ionization; generally <strong>n increases</strong>.</li>
                  <li>Increase <strong>m*</strong> → increases N<sub>C</sub> → tends to <strong>increase n</strong> for fixed N<sub>D</sub>, E<sub>d</sub>, T.</li>
                  <li>Since R<sub>H</sub> ≈ −1/(q n), anything that increases n reduces |R<sub>H</sub>|.</li>
                </ul>
              </div>

              <h3>Alternative derivation idea (brief but meaningful)</h3>
              <p>
                In the deep freeze-out regime (n ≪ N<sub>D</sub> and typically E<sub>F</sub> near E<sub>D</sub>),
                one can approximate 1 + 2B/a ≈ 2B/a in the donor-ionization denominator.
                Then neutrality NC/a ≈ ND * (a/(2B)) leads to:
              </p>
              <div class="eq" id="eq-freeze-approx">n ≈ sqrt( (NC*ND)/2 ) * exp( -Ed/(2*kB*T) )</div>
              <div class="copybar">
                <button class="btn" data-copy="#eq-freeze-approx">Copy approximation</button>
              </div>
              <p class="muted">
                This shows the hallmark “half-activation-energy” behavior: n scales like exp(−E<sub>d</sub>/(2k<sub>B</sub>T)) rather than exp(−E<sub>d</sub>/k<sub>B</sub>T) because ionization and band population are coupled.
              </p>

              <h3>Concept check (self-test, with answers)</h3>
              <ul>
                <li><strong>Q:</strong> Why can we neglect holes? <strong>A:</strong> E<sub>g</sub> ≫ k<sub>B</sub>T makes intrinsic excitation across the gap exponentially small.</li>
                <li><strong>Q:</strong> Why does N<sub>C</sub> decrease at low T? <strong>A:</strong> For a 3D parabolic band, N<sub>C</sub> ∝ T<sup>3/2</sup>.</li>
                <li><strong>Q:</strong> What does the negative R<sub>H</sub> sign mean? <strong>A:</strong> The dominant carriers are electrons (negative charge).</li>
                <li><strong>Q:</strong> What physical effect does the “2” in N<sub>D</sub><sup>+</sup> represent? <strong>A:</strong> The spin degeneracy of the neutral donor state relative to the ionized state.</li>
              </ul>

              <a class="backtop" href="#top">↑ Back to top</a>
            </section>

            <section id="part5">
              <h2>PART 5 — Optional Plot Guide</h2>

              <p>
                A plot is useful here because freeze-out is highly temperature sensitive; seeing n(T) clarifies why 4 K can produce a carrier density far below N<sub>D</sub>.
                The plot below uses the <em>same model as the solution</em> and the given parameters as “example values.”
              </p>

              <figure aria-label="Freeze-out curve plot">
                <canvas id="plot" width="900" height="420"></canvas>
                <figcaption>
                  Example curve: conduction electron density n(T) computed from charge neutrality + donor ionization (given N<sub>D</sub>, E<sub>d</sub>, m*).
                  Vertical marker indicates T = 4 K.
                </figcaption>
              </figure>

              <div class="callout">
                <div class="tag"><span class="dot accent"></span><strong>What the plot shows</strong></div>
                <ul>
                  <li><strong>x-axis:</strong> Temperature T (K), from 1 K to 60 K.</li>
                  <li><strong>y-axis:</strong> log<sub>10</sub>[ n (cm<sup>−3</sup>) ] to capture many-decade changes.</li>
                  <li><strong>Example values:</strong> N<sub>D</sub> = 10<sup>13</sup> cm<sup>−3</sup>, E<sub>d</sub> = 1 meV, m* = 0.01 m<sub>0</sub>.</li>
                  <li><strong>Feature to notice:</strong> steep rise with T; at very low T, n is much smaller than N<sub>D</sub>.</li>
                </ul>
              </div>

              <a class="backtop" href="#top">↑ Back to top</a>
            </section>

          </article>
        </div>
      </main>
    </div>
  </header>

  <footer>
    <div class="wrap">
      <p>
        Notes: This solution assumes nondegenerate statistics and a Hall factor near 1. Real materials can deviate due to compensation,
        impurity-band effects at higher doping, and scattering-dependent Hall factors.
      </p>
    </div>
  </footer>

  <script>
    (function(){
      function copyFromSelector(sel){
        const el = document.querySelector(sel);
        if(!el) return;
        const txt = el.innerText.replace(/\u00A0/g,' ').trim();
        navigator.clipboard.writeText(txt).then(()=>{
          toast("Copied ✔");
        }).catch(()=>{
          toast("Copy failed (browser permissions)");
        });
      }

      function toast(msg){
        let t = document.getElementById("toast");
        if(!t){
          t = document.createElement("div");
          t.id="toast";
          t.style.position="fixed";
          t.style.left="50%";
          t.style.bottom="18px";
          t.style.transform="translateX(-50%)";
          t.style.padding="10px 12px";
          t.style.border="1px solid rgba(255,255,255,.18)";
          t.style.background="rgba(15,22,32,.92)";
          t.style.color="white";
          t.style.borderRadius="14px";
          t.style.boxShadow="0 10px 30px rgba(0,0,0,.35)";
          t.style.fontSize=".9rem";
          t.style.zIndex="9999";
          t.style.opacity="0";
          t.style.transition="opacity .18s ease";
          document.body.appendChild(t);
        }
        t.textContent = msg;
        t.style.opacity="1";
        clearTimeout(window.__toastTimer);
        window.__toastTimer = setTimeout(()=>{ t.style.opacity="0"; }, 1200);
      }

      document.addEventListener("click", (e)=>{
        const btn = e.target.closest("[data-copy]");
        if(!btn) return;
        const sel = btn.getAttribute("data-copy");
        copyFromSelector(sel);
      });

      // --- Plot: n(T) example curve ---
      const canvas = document.getElementById("plot");
      if(!canvas) return;
      const ctx = canvas.getContext("2d");

      function Nc_cm3(T, mRatio){
        // NC = 2 * (2π m* kB T / h^2)^(3/2) in m^-3 then /1e6 to cm^-3
        const kB = 1.380649e-23;
        const h  = 6.62607015e-34;
        const m0 = 9.10938356e-31;
        const m  = mRatio * m0;
        const Nc_m3 = 2 * Math.pow((2*Math.PI*m*kB*T)/(h*h), 1.5);
        return Nc_m3 / 1e6;
      }

      function n_cm3(T, ND, Ed_eV, mRatio){
        const kB_eV = 8.617333262e-5;
        const NC = Nc_cm3(T, mRatio);
        const B = Math.exp(Ed_eV/(kB_eV*T));
        // Solve ND a^2 - NC a - 2 B NC = 0 for a>0; then n=NC/a
        const disc = NC*NC + 8*B*NC*ND;
        const a = (NC + Math.sqrt(disc)) / (2*ND);
        return NC / a;
      }

      function draw(){
        const dpr = Math.max(1, window.devicePixelRatio || 1);
        const rect = canvas.getBoundingClientRect();
        canvas.width  = Math.round(rect.width * dpr);
        canvas.height = Math.round(320 * dpr);
        ctx.setTransform(dpr,0,0,dpr,0,0);

        const W = rect.width;
        const H = 320;

        // padding
        const L=58, R=18, T=34, B=44;
        const pw = W - L - R;
        const ph = H - T - B;

        // Example parameters (same as the problem)
        const ND = 1e13;       // cm^-3
        const Ed = 1e-3;       // eV (1 meV)
        const mRatio = 0.01;

        // Domain
        const Tmin = 1.0;
        const Tmax = 60.0;

        // Build data
        const N = 220;
        const xs = [];
        const ys = [];
        let yMin = Infinity, yMax = -Infinity;
        for(let i=0;i<N;i++){
          const Tcur = Tmin + (Tmax-Tmin)*i/(N-1);
          const ncur = n_cm3(Tcur, ND, Ed, mRatio);
          const y = Math.log10(Math.max(ncur, 1e-40));
          xs.push(Tcur);
          ys.push(y);
          yMin = Math.min(yMin, y);
          yMax = Math.max(yMax, y);
        }

        // Expand y-range slightly
        yMin = Math.floor(yMin - 0.2);
        yMax = Math.ceil(yMax + 0.2);

        // Background
        ctx.clearRect(0,0,W,H);
        ctx.fillStyle = "rgba(0,0,0,.12)";
        ctx.fillRect(0,0,W,H);

        // Title
        ctx.fillStyle = "rgba(255,255,255,.92)";
        ctx.font = "600 14px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
        ctx.fillText("Example: Freeze-out curve n(T) from donor ionization model", L, 18);

        // Axes labels
        ctx.fillStyle = "rgba(255,255,255,.75)";
        ctx.font = "12px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
        ctx.fillText("T (K)", L + pw/2 - 14, T + ph + 34);

        ctx.save();
        ctx.translate(16, T + ph/2 + 28);
        ctx.rotate(-Math.PI/2);
        ctx.fillText("log10[n (cm^-3)]", 0, 0);
        ctx.restore();

        function xMap(Tval){
          return L + (Tval - Tmin) * pw / (Tmax - Tmin);
        }
        function yMap(yval){
          return T + (yMax - yval) * ph / (yMax - yMin);
        }

        // Grid + ticks
        ctx.strokeStyle = "rgba(255,255,255,.10)";
        ctx.lineWidth = 1;

        // x ticks
        const xTicks = [0,10,20,30,40,50,60];
        xTicks.forEach(t=>{
          const x = xMap(t);
          ctx.beginPath();
          ctx.moveTo(x, T);
          ctx.lineTo(x, T+ph);
          ctx.stroke();

          ctx.fillStyle = "rgba(255,255,255,.70)";
          ctx.font = "11px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
          ctx.fillText(String(t), x-6, T+ph+18);
        });

        // y ticks (integer log10)
        for(let yy = yMin; yy <= yMax; yy++){
          const y = yMap(yy);
          ctx.beginPath();
          ctx.moveTo(L, y);
          ctx.lineTo(L+pw, y);
          ctx.stroke();

          ctx.fillStyle = "rgba(255,255,255,.70)";
          ctx.font = "11px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
          ctx.fillText(String(yy), 22, y+4);
        }

        // Axes border
        ctx.strokeStyle = "rgba(255,255,255,.22)";
        ctx.lineWidth = 1;
        ctx.strokeRect(L, T, pw, ph);

        // Curve
        ctx.strokeStyle = "rgba(125,211,252,.95)";
        ctx.lineWidth = 2;
        ctx.beginPath();
        for(let i=0;i<N;i++){
          const x = xMap(xs[i]);
          const y = yMap(ys[i]);
          if(i===0) ctx.moveTo(x,y);
          else ctx.lineTo(x,y);
        }
        ctx.stroke();

        // Marker at 4 K
        const Tmark = 4;
        const xM = xMap(Tmark);
        ctx.strokeStyle = "rgba(167,139,250,.95)";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(xM, T);
        ctx.lineTo(xM, T+ph);
        ctx.stroke();

        // Legend
        const lx = L + 10, ly = T + 10;
        ctx.fillStyle = "rgba(0,0,0,.35)";
        ctx.fillRect(lx, ly, 270, 44);
        ctx.strokeStyle = "rgba(255,255,255,.18)";
        ctx.strokeRect(lx, ly, 270, 44);

        ctx.fillStyle = "rgba(255,255,255,.85)";
        ctx.font = "12px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
        ctx.fillText("Curve: log10 n(T) (given ND, Ed, m*)", lx+36, ly+18);
        ctx.fillText("Marker: T = 4 K", lx+36, ly+36);

        // Legend lines
        ctx.strokeStyle = "rgba(125,211,252,.95)";
        ctx.lineWidth = 3;
        ctx.beginPath(); ctx.moveTo(lx+10, ly+14); ctx.lineTo(lx+30, ly+14); ctx.stroke();

        ctx.strokeStyle = "rgba(167,139,250,.95)";
        ctx.lineWidth = 3;
        ctx.beginPath(); ctx.moveTo(lx+10, ly+32); ctx.lineTo(lx+30, ly+32); ctx.stroke();
      }

      window.addEventListener("resize", draw, {passive:true});
      draw();
    })();
  </script>
</body>
</html>
